
/* Smart UI v7.7.0 (2020-June) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */ //

!function(e){var t={};function l(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=t,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(i,n,function(t){return e[t]}.bind(null,n));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=47)}({47:function(e,t){Smart.Utilities.Assign("Grid.Cell",class{constructor(e,t){const l=this;return l.row=e,l.column=t,l.grid=e.grid,l.rowSpan=1,l.colSpan=1,l.value=void 0,l.fontSize=null,l.fontWeight=null,l.fontFamily=null,l.fontStyle=null,l.color=null,l.background=null,l.borderColor=null,l.tooltip=null,l.align=null,l.verticalAlign=null,l.readonly=!1,l.oldValue=void 0,l._updating=!1,l.styleChanged=!0,l.editor=null,l.template=null,l.isEditing=!1,l.canNotify=!0,l.selected=!1,l.focused=!1,new Proxy(l,{deleteProperty:function(e,t){return delete e[t],!0},get:function(e,t){if("value"===t){return l.column.displayField?l.row.data[l.column.displayField]:l.row.data[l.column.dataField]}if("editor"===t||"template"===t)return e[t]||l.column[t];if("focused"===t){if(l.grid.selection.allowCellSelection&&l.grid._selection.focusedCell&&l.grid._selection.focusedCell.row.id===l.row.id&&l.grid._selection.focusedCell.column.dataField===l.column.dataField)return!0;if(l.grid.selection.allowRowSelection&&l.grid._selection.focusedCell&&l.grid._selection.focusedCell.row.id===l.row.id&&l.grid._selection.focusedCell.column.dataField===l.column.dataField)return!0;const e=l.parent();return!!(e&&l.grid.selection.allowCellSelection&&l.grid._selection.focusedCell&&l.grid._selection.focusedCell.row.id===e.row.id&&l.grid._selection.focusedCell.column.dataField===e.column.dataField)}if("selected"===t)return!0===l.row.getProperty("selected")||(!0===l.column.getProperty("selected")||!!l.grid._selection.cells["row"+l.row.id]&&l.grid._selection.cells["row"+l.row.id][l.column.dataField]);if("modifiedValue"===t){const t=l.grid._cellsUpdatedValues[l.row.id+"_"+l.column.dataField];return void 0!==t?t:e.value}return e[t]},set:function(e,t,i){const n=this.get(e,t);if(n===i)return!0;if(e[t]=i,"element"===t||"isEditing"===t||"oldValue"===t||"_updating"===t||"notifyFn"===t||t.startsWith("_")||"canNotify"===t)return!0;if("focused"===t&&(l.grid._selection.focusedCell=l),"colSpan"!==t&&"rowSpan"!==t||i>=0&&-1===l.grid._cellsMerge.indexOf(l)&&l.grid._cellsMerge.push(l),"row"===t||"column"===t||"grid"===t||"styleChanged"===t)return!0;if("background"!==t&&"fontSize"!==t&&"fontWeight"!==t&&"fontFamily"!==t&&"color"!==t&&"borderColor"!==t&&"fontStyle"!==t||(l._styleChanged=!0),"value"===t){void 0===l.oldValue&&(l.oldValue=n),(()=>{l.grid.dataSource.boundSource.canNotify=!1,null!==i&&i.label&&i.value?(l.row.data[l.column.displayField]=i.label,l.row.data[l.column.dataField]=i.value):(l.column.valueField&&(l.row.data[l.column.valueField]=i),l.row.data[l.column.dataField]=i);const e=l.grid.dataSource.dataItemById[l.row.id];if(e){const t=e.$.index;i!==l.grid.dataSource[t][l.column.dataField]&&(l.grid.dataSource[t][l.column.dataField]=i)}l.grid.dataSource.boundSource.canNotify=!0})()}return"selected"===t&&(l.grid._selection.cells["row"+l.row.id]&&(delete l.grid._selection.cells["row"+l.row.id][l.column.dataField],1===Object.getOwnPropertyNames(l.grid._selection.cells["row"+l.row.id]).length&&delete l.grid._selection.cells["row"+l.row.id]),l.grid._selection.cells["column"+l.column.dataField]&&(delete l.grid._selection.cells["column"+l.column.dataField][l.row.id],1===Object.getOwnPropertyNames(l.grid._selection.cells["column"+l.column.dataField]).length&&delete l.grid._selection.cells["column"+l.column.dataField]),i&&(l.grid._selection.cells["row"+l.row.id]||(l.grid._selection.cells["row"+l.row.id]=[]),l.grid._selection.cells["column"+l.column.dataField]||(l.grid._selection.cells["column"+l.column.dataField]=[]),l.grid._selection.cells["row"+l.row.id][l.column.dataField]=!0,l.grid._selection.cells["column"+l.column.dataField][l.row.id]=!0)),!(!l._updating&&l.canNotify)||(!l.row.canNotify||(l.grid._recycle(),l.propertyChanged&&l.propertyChanged(name.substring(1),n),!0))}})}setStyle(e){const t=this;t._styleChanged&&(e.style.background=t.background,e.style.borderColor=t.borderColor,e.style.color=t.color,e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.paddingBottom="",t._styleChanged=!1)}getFormattedValue(e,t){const l=this;return null==e||""===e?e:t?"date"===l.column.dataType||"datetime"===l.column.dataType||"time"===l.column.dataType?l.formatDate(e,t):"int"===l.column.dataType||"int64"===l.column.dataType||"float"===l.column.dataType||"number"===l.column.dataType?l.formatNumber(e,t):e:""+e}formatDate(e,t){if(!Smart.Utilities.DateTime)return e;const l=this,i=l.grid;if(l.column.formatSettings.Intl&&l.column.formatSettings.Intl.DateTimeFormat){return new Intl.DateTimeFormat(this.grid.locale,l.column.formatSettings.Intl.DateTimeFormat).format(e)}!t&&l.column.formatSettings.dateFormat&&(t=l.column.formatSettings.dateFormat);try{const l=new Smart.Utilities.DateTime(e);return l.calendar.locale=i.locale,i.messages[i.locale]&&i.messages[i.locale].calendar&&(i.messages[i.locale].calendar.months&&(l.calendar.months=i.messages[i.locale].calendar.months),i.messages[i.locale].calendar.days&&(l.calendar.days=i.messages[i.locale].calendar.days),void 0!==i.messages[i.locale].calendar.firstDay&&(l.calendar.firstDay=i.messages[i.locale].calendar.firstDay),void 0!==i.messages[i.locale].calendar.eras&&(l.calendar.eras=i.messages[i.locale].calendar.eras),void 0!==i.messages[i.locale].calendar.AM&&(l.calendar.AM=i.messages[i.locale].calendar.AM),void 0!==i.messages[i.locale].calendar.PM&&(l.calendar.PM=i.messages[i.locale].calendar.PM),void 0!==i.messages[i.locale].calendar["/"]&&(l.calendar["/"]=i.messages[i.locale].calendar["/"]),void 0!==i.messages[i.locale].calendar[":"]&&(l.calendar[":"]=i.messages[i.locale].calendar[":"])),l.toString(t)}catch(t){return e}}formatNumber(e,t){if(!Smart.Utilities.NumberRenderer)return e;const l=this,i=l.grid;if(l.column.formatSettings.Intl&&l.column.formatSettings.Intl.NumberFormat){return new Intl.NumberFormat(this.grid.locale,l.column.formatSettings.Intl.NumberFormat).format(e)}const n=new Smart.Utilities.NumberRenderer;if(n.localizationObject){const e=l.column.formatSettings,t=i.messages[i.locale]?i.messages[i.locale].calendar:{};e.decimalPlaces&&(n.localizationObject.decimalPlaces=e.decimalPlaces),(e.decimalSeparator||t.decimalSeparator)&&(n.localizationObject.decimalSeparator=e.decimalSeparator||t.decimalSeparator),(e.thousandsSeparator||t.thousandsSeparator)&&(n.localizationObject.thousandsSeparator=e.thousandsSeparator||t.thousandsSeparator),n.localizationObject.currencysymbol=t.currencySymbol,n.localizationObject.currencysymbolposition=t.currencySymbolPosition,e.prefix&&(n.localizationObject.currencysymbol=e.prefix),e.sufix&&(n.localizationObject.currencysymbol=e.sufix,n.localizationObject.currencysymbolposition="after")}const a=n.formatNumber(e,t);return void 0===a?e:e<0&&l.column.formatSettings.negativeWithBrackets?"("+a+")":a}refresh(){const e=this;if(e.element){const t=e.element.firstChild;e.setStyle(t)}}setProperties(e){const t=this;t._updating=!0;for(let l in e)t[l]=e[l];t._updating=!1,t.grid._recycle()}createElement(){const e=document.createElement("smart-grid-cell");return e.setAttribute("role","gridcell"),this.element=e,e._initialize(this),e}render(){this.element&&this.element._render()}parent(e){const t=this,l=t.row,i=t.column.dataField,n=t.grid;if(!n._cellsMerge.length)return null;if(t.__parentCells&&void 0!==t.__parentCells["row"+l.id+"_column_"+i])return t.__parentCells["row"+l.id+"_column_"+i];let a=n.getVisibleRows();n.paging.enabled&&"page"===n.selection.selectAllMode&&(a=a.slice(n.paging.pageIndex*n.paging.pageSize,(n.paging.pageIndex+1)*n.paging.pageSize)),t.__parentCells||(t.__parentCells=[]);for(let r=0;r<n._cellsMerge.length;r++){const o=n._cellsMerge[r];let s=[],d=[];if(s.push(o.row),o.rowSpan>1){const e=a.indexOf(o.row);if(e>=0)for(let t=e;t<e+o.rowSpan;t++)a[t]&&-1===s.indexOf(a[t])&&s.push(a[t])}if(d.push(o.column.dataField),o.colSpan>1){const e=n.columns.indexOf(n.columnByDataField[o.column.dataField]);for(let t=e;t<e+o.colSpan;t++)n.columns[t]&&-1===d.indexOf(n.columns[t].dataField)&&d.push(n.columns[t].dataField)}if(s.indexOf(l)>=0&&d.indexOf(i)>=0){if(e){const e={cell:o.row.getCell(o.column.dataField),rows:s,columns:d,row:o.row,column:o.column,endRow:s[s.length-1],endColumn:n.columnByDataField[d[d.length-1]]};return t.__parentCells["row"+l.id+"_column_"+i]=e,e}const a=o.row.getCell(o.column.dataField);return t.__parentCells["row"+l.id+"_column_"+i]=a,a}}return t.__parentCells["row"+l.id+"_column_"+i]=null,null}}),Smart("smart-grid-cell",class extends Smart.BaseElement{static get properties(){return{}}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}addThemeClass(){}addDefaultClass(){}get isUtilityElement(){return!0}_refresh(){this.innerHTML="",this._initialize(this.cell)}_initialize(e){const t=this,l=document.createElement("div"),i=e.column,n=e.row,a=e.grid;t.cell=e,t.appendChild(l);let r=!1;if(i&&i._treeColumn&&a.dataSource.boundHierarchy&&(r=!0,!a.grouping.enabled&&a.dataSource.groupBy&&a.dataSource.groupBy.length>0&&(r=!1)),r){const e=document.createElement("div"),i=document.createElement("button"),r=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),d=document.createElement("span");return n.expanded?i.setAttribute("toggled",""):i.removeAttribute("toggled",""),t.toggleButton=i,t.checkbox=s,l.appendChild(e),l.appendChild(o),o.setAttribute("content",""),e.setAttribute("indent",""),r.setAttribute("label",""),i.setAttribute("toggle-button",""),s.setAttribute("checkbox",""),s.setAttribute("role","checkbox"),t.setAttribute("has-toggle-button",""),o.appendChild(i),o.appendChild(s),d.classList.add("smart-input"),s.appendChild(d),a.checkBoxes.visible?d.classList.remove("smart-hidden"):d.classList.add("smart-hidden"),o.appendChild(r),t.content=r,void(t.isRendered=!0)}{const e=document.createElement("div");l.appendChild(e)}t.content=l,t.isRendered=!0}_renderCommands(){const e=this,t=e.cell.grid;if(t.__cellsCommandTemplate)return e.firstChild.innerHTML=t.__cellsCommandTemplate,void t._updateCommandColumnCommandsVisibility(e.firstChild,e.cell.row);const l=t._getCommandColumnCommandsTemplate();e.firstChild.innerHTML=l,t._updateCommandColumnCommandsVisibility(e.firstChild,e.cell.row),t.__cellsCommandTemplate=l}_renderGroupCell(){const e=this,t=e.cell.grid,l=e.cell.column,i=e.cell.row;[...e.attributes].forEach(t=>e.removeAttribute(t.name)),e.setAttribute("group",""),e.style.width!==l.computedWidth+"px"&&(e.style.width=l.computedWidth+"px"),t.rightToLeft?e.style.right!==l.left+"px"&&(e.style.right=l.left+"px"):e.style.left!==l.left+"px"&&(e.style.left=l.left+"px"),e.classList.contains("smart-hidden")&&e.classList.remove("smart-hidden"),l.autoGenerated&&(e.style.width="0px");let n=i.label;const a=function(e,t,l){for(let i=0;i<t.length;i++){const n=t[i];void 0!==n[e]&&l.push(n),n.summaryRow||(n.children||n.data&&n.data.children)&&a(e,n.children,l)}return l};if(void 0!==i.label){let r="",o=[];if(t.grouping.summaryRow.visible){const n=a(l.dataField,i.summaryRow?i.parent.data.children:i.data.children,[]),s={},d=l._treeColumn?l.summary.length>0?l.summary:["count"]:l.summary;s[l.dataField]=d;const c=d.length>0?t.dataSource.summarize([s],n):null;if(c)for(let i=0;i<d.length;i++){const n=d[i];if("advanced"===t.grouping.renderMode)r+="<span summary>"+t.localize(n,{value:c[l.dataField][n]});else{i>0&&(r+=", ");let a=c[l.dataField][n];const o=l.cellsFormat;o&&(a=e.cell.getFormattedValue(a,o)),r+=t.localize(n,{value:a})}o.push(c[l.dataField][n])}}if(l._treeColumn){const l=t.columnByDataField[i.groupDataField],a=l?l.label:"";"advanced"===t.grouping.renderMode?(n=i.summaryRow?"<div header><span group></span><span value></span></div>":"<div header><span group>"+a+"</span><span value>"+i.label+"</span></div>",r&&(n+="<div summary>",n+=r,n+="</div>")):"compact"===t.grouping.renderMode?(i.summaryRow?(n="<div header><span group></span><span value></span>",r&&(n+="<div summary>",n+=r,n+="</div>")):(n="<div header><span group>"+a+": </span><span value>"+i.label+"</span>",r&&t.grouping.summaryRow.inline&&(n+="<span summary>",n+="  ("+o+")",n+="</span>")),n+="</div>",e.classList.add("smart-grid-column-border-collapse")):"basic"===t.grouping.renderMode&&(n=i.label,i.summaryRow?r&&(n+="<div summary>",n+=r,n+="</div>"):r&&t.grouping.summaryRow.inline&&(n+="<span summary>",n+="  ("+o+")",n+="</span>"),e.classList.add("smart-grid-column-border-collapse")),e.setAttribute("has-toggle-button","")}else e.removeAttribute("has-toggle-button",""),"advanced"===t.grouping.renderMode?(n="<div content><div label><div header><span group></span><span value></span></div>",r&&(n+="<div summary>",n+=r,n+="</div>"),n+="</div></div>"):n=r}const r=e.firstChild;if(t.dataSource.boundHierarchy&&l._treeColumn){const a=r.children[0],o=r.children[1].children[0],s=r.children[1].children[1].firstChild,d=r.children[1].children[2];a.setAttribute("indent",""),i.checked?s.setAttribute("checked",""):!1===i.checked?s.removeAttribute("checked"):null===i.checked&&s.setAttribute("checked","indeterminate"),i.leaf?o.classList.add("smart-visibility-hidden"):(o.classList.remove("smart-visibility-hidden"),i.expanded?o.setAttribute("toggled",""):o.removeAttribute("toggled",""));let c="";if(l._treeColumn?e.toggleButton.classList.remove("smart-hidden"):e.toggleButton.classList.add("smart-hidden"),l._treeColumn)if(t.grouping.enabled&&t.dataSource.groupBy.length>0&&"advanced"===t.grouping.renderMode){let e=i.level;void 0===i.label&&e--,c+='<div style="width: '+(1+e)*t.grouping.groupIndent+'px;"></div>'}else for(let e=0;e<i.level;e++)c+="<div class='smart-indent'></div>";void 0===i.label?o.classList.add("smart-hidden"):(o.classList.remove("smart-hidden"),o.style.marginLeft="",l._treeColumn&&t.grouping.enabled&&t.grouping.toggleButtonIndent>0&&"advanced"===t.grouping.renderMode&&(o.style.marginLeft=i.level*(t.grouping.toggleButtonIndent-t.grouping.groupIndent)+"px")),a.innerHTML=c,d.innerHTML=n,t.appearance.showTooltips?d.setAttribute("title",i.label?i.label:n):d.hasAttribute("title")&&d.removeAttribute("title")}else void 0!==i.label&&t.grouping.enabled&&!l._treeColumn&&(r.innerHTML=n);if(t.grouping.enabled&&t.dataSource.groupBy&&t.dataSource.groupBy.length>0&&"advanced"===t.grouping.renderMode){const n=t.grouping.groupIndent*(1+i.level);l.dataField===t.columns[t.columns.length-1].dataField&&(e.style.width=l.computedWidth-n+"px",t.appearance.showColumnLines&&r.firstChild.classList.add("smart-grid-column-border"))}let o="smart-label";if(e.style.zIndex="","advanced"!==t.grouping.renderMode&&l._treeColumn){const l=t.columnByDataField[i.groupDataField];l.cellsAlign&&(o+=" align-"+l.cellsAlign),l.cellsVerticalAlign&&(o+=" align-"+l.cellsVerticalAlign),e.setAttribute("header",""),i.summaryRow||(e.style.width="100%"),e.style.zIndex=100}if(i.summaryRow&&(e.setAttribute("header",""),e.classList.add("smart-grid-column-border-collapse"),l.cellsAlign&&(o+=" align-"+l.cellsAlign),l.cellsVerticalAlign&&(o+=" align-"+l.cellsVerticalAlign)),r.className!==o&&(r.className=o),l.formatFunction){const t={row:i,column:l,cell:e.cell,value:null,template:null,group:{value:n,template:null}};l.formatFunction(t),t.group.value!==n&&(r.innerHTML=t.group.value),null!==t.group.template&&(r.innerHTML=t.group.template)}}_renderFilterCell(e){const t=this,l=t.cell.grid,i=t.cell.column;let n;const a=(e,t)=>{l._handleFilterMenuClick(e,t)};l._filterInfo||(l._filterInfo={},l._filterInfo.stringConditions=[{icon:"smart-icon-contains",command:a,value:"CONTAINS",label:l.localize("CONTAINS")},{icon:"smart-icon-does-not-contain",command:a,value:"DOES_NOT_CONTAIN",label:l.localize("DOES_NOT_CONTAIN")},{icon:"smart-icon-starts-with",command:a,value:"STARTS_WITH",label:l.localize("STARTS_WITH")},{icon:"smart-icon-ends-with",command:a,value:"ENDS_WITH",label:l.localize("ENDS_WITH")},{icon:"smart-icon-equals",command:a,value:"EQUAL",label:l.localize("EQUAL")},{icon:"smart-icon-delete",command:a,value:"CLEAR_FILTER",label:l.localize("CLEAR_FILTER")}],l._filterInfo.numberAndDateConditions=[{icon:"smart-icon-equals",command:a,value:"EQUAL",label:l.localize("EQUAL")},{icon:"smart-icon-not-equal",command:a,value:"NOT_EQUAL",label:l.localize("NOT_EQUAL")},{icon:"smart-icon-less-than",command:a,value:"LESS_THAN",label:l.localize("LESS_THAN")},{icon:"smart-icon-less-than-equal",command:a,value:"LESS_THAN_OR_EQUAL",label:l.localize("LESS_THAN_OR_EQUAL")},{icon:"smart-icon-greater-than",command:a,value:"GREATER_THAN",label:l.localize("GREATER_THAN")},{icon:"smart-icon-greater-than-equal",command:a,value:"GREATER_THAN_OR_EQUAL",label:l.localize("GREATER_THAN_OR_EQUAL")},{icon:"smart-icon-between",command:a,value:"RANGE",label:l.localize("RANGE")},{icon:"smart-icon-delete",command:a,value:"CLEAR_FILTER",label:l.localize("CLEAR_FILTER")}]),n="string"===i.dataType?l._filterInfo.stringConditions:l._filterInfo.numberAndDateConditions;let r="smart-icon-search";switch(i._filterInfo||(i._filterInfo={condition:""}),i.filterEditor&&i.filterEditor.condition&&(i._filterInfo.condition=i.filterEditor.condition),i.filterEditor&&i.filterEditor.value&&(i._filterInfo.value=i.filterEditor.value),i._filterInfo.dataSource=n,i._filterInfo.condition.toLowerCase()){case"equal":r="smart-icon-equals";break;case"starts_with":r="smart-icon-starts-with";break;case"ends_with":r="smart-icon-ends-with";break;case"not_equal":r="smart-icon-not-equal";break;case"less_than":r="smart-icon-less-than";break;case"less_than_or_equal":r="smart-icon-less-than-or-equal";break;case"greater_than":r="smart-icon-greater-than";break;case"greater_than_or_equal":r="smart-icon-greater-than-or-equal";break;case"contains":r="smart-icon-contains";break;case"does_not_contain":r="smart-icon-does-not-contain";break;case"range":r="smart-icon-between";break;default:r="smart-icon-search"}let o=`<div class="smart-filter-input-type"><i class="smart-grid-icon ${r} show"></i></div>`;if("string"===i.dataType)o+=`<input class="smart-filter-input-value" data-type="${i.dataType}"/>`,e.innerHTML=o;else if("date"===i.dataType){const n=new Smart.Utilities.DateTime;o+=`<input placeholder="${n.expandFormat(n.calendar,i.cellsFormat||"d")}" class="smart-filter-input-value" data-type="${i.dataType}"/><div class="smart-filter-input-type"><i class="smart-grid-icon smart-icon-calendar show"></i></div>`,e.innerHTML=o,e.lastElementChild.onpointerdown=function(){l._handleFilterCalendarCellClick(t.cell)}}else if("number"===i.dataType)o+='<div class="smart-grid-cell-editor smart-filter-input-value smart-grid-number-input-cell-editor"><input class="smart-input" type="number"><div tabindex="-1" class="nav"><div tabindex="-1" class="up"></div><div tabindex="-1" class="down"></div></div></div>',e.innerHTML=o,l._handleFilterNumberCellEditor(this.cell,e);else if("boolean"===i.dataType){const i=document.createElement("div");i.classList.add("smart-input"),i.classList.add("smart-grid-check-box-cell-editor"),i.classList.add("smart-filter-input-value"),e.tabIndex=0,e.style.outline="none",t.setAttribute("template","checkBox"),i.setAttribute("checked","indeterminate"),o=i.outerHTML,e.innerHTML=o,e.classList.add("align-center"),e.classList.add("smart-label"),e.onfocus=()=>{e.setAttribute("focus","")},e.onblur=()=>{e.removeAttribute("focus","")},e.onclick=e=>{e.target.classList.contains("smart-input")&&l._handleFilterCellCheckBoxClick(this.cell)}}const s=e.querySelector("input");if(s&&(e.firstElementChild.onpointerdown=function(){l._handleFilterCellIconClick(this.cell)}.bind(this),s.onfocus=function(){l._handleFilterCellFocus(this.cell)}.bind(this),s.onblur=function(){l._handleFilterCellBlur(this.cell)}.bind(this),s.onkeyup=function(e){l._handleFilterCellKeyUp(this.cell,e)}.bind(this),s.onkeydown=function(e){l._handleFilterCellKeyDown(this.cell,e)}.bind(this)),e.classList.add("smart-filter-input-container"),i._filterInfo.input=s,i._filterInfo.cell=t.cell,i._filterInfo.editor=e,i.allowFilter||(s.disabled=!0),i.filterEditor)if(i.filterEditor.template){const t=i.filterEditor.template,l=document.createElement("div");i.filterTemplate instanceof HTMLTemplateElement?l.appendChild(t.content.cloneNode(!0)):t instanceof HTMLElement?l.appendChild(t):l.innerHTML=t,e.innerHTML="",e.appendChild(l),l.style.height="100%",l.style.width="100%";const n=e.querySelector("input");n&&(n.onfocus=()=>{e.setAttribute("focus","")},n.onblur=()=>{e.removeAttribute("focus","")}),i.filterEditor.onInit&&i.filterEditor.onInit(i,l)}else void 0!==i.filterEditor.min&&(s.min=i.filterEditor.min),void 0!==i.filterEditor.max&&(s.max=i.filterEditor.max),void 0!==i.filterEditor.minlength&&(s.minlength=i.filterEditor.minlength),void 0!==i.filterEditor.maxlength&&(s.maxlength=i.filterEditor.maxlength),void 0!==i.filterEditor.placeholder&&(s.placeholder=i.filterEditor.placeholder),void 0!==i.filterEditor.value&&(s.value=i.filterEditor.value),void 0!==i.filterEditor.step&&(s.step=i.filterEditor.step),void 0!==i.filterEditor.disabled&&(s.disabled=i.filterEditor.disabled),void 0!==i.filterEditor.condition&&(i._filterInfo.condition=i.filterEditor.condition),i.filterEditor.onInit&&i.filterEditor.onInit(i,e)}_render(){const e=this,t=e.cell.grid,l=e.cell.column,i=e.cell.row,n=i.data,a=i._isMeasureRow?null:l.cellsFormat;if(t.grouping.enabled&&t.dataSource.groupBy.length>0&&void 0!==i.label)return void e._renderGroupCell();if(t.grouping.enabled&&t.dataSource.groupBy.length>0&&e.toggleButton&&(e.toggleButton.classList.remove("smart-hidden"),e.toggleButton.classList.remove("smart-visibility-hidden"),e.toggleButton.style.marginLeft="",l._treeColumn&&t.grouping.enabled&&t.grouping.toggleButtonIndent>0&&(e.toggleButton.style.marginLeft=i.level*(t.grouping.toggleButtonIndent-t.grouping.groupIndent)+"px")),t.grouping.enabled&&t.dataSource.groupBy.length>0&&(e.removeAttribute("header"),e.removeAttribute("group")),!l.visible)return void(e.style.width="0px");t.appearance.showSortColumnBackground?l.sorted?e.setAttribute("sort",""):e.removeAttribute("sort"):l.sorted&&e.hasAttribute("sort")&&e.removeAttribute("sort"),t.appearance.showFilterColumnBackground?l.filtered?e.setAttribute("filter",""):e.removeAttribute("filter"):l.filtered&&e.hasAttribute("filter")&&e.removeAttribute("filter"),t.dataSource.boundHierarchy&&e.hasAttribute("has-toggle-button")&&!l._treeColumn&&e.removeAttribute("has-toggle-button");let r=l.displayField?n[l.displayField]:n[l.dataField];if(e.removeAttribute("highlight"),t.highlighted===i.id&&e.setAttribute("highlight",""),t.editing.batch){if(t._cellsUpdatedValues){e.removeAttribute("update");const n=t._cellsUpdatedValues[i.id+"_"+l.dataField];void 0!==n&&(e.setAttribute("update",""),r=n)}t._rowsDeleted&&(t._rowsDeleted.indexOf(i)>=0?e.setAttribute("delete",""):e.removeAttribute("delete")),t._rowsAdded&&(t._rowsAdded.indexOf(i.id)>=0?e.setAttribute("add",""):e.removeAttribute("add"))}!t.onCellValue||l.rowHeaderColumn||l.selectionColumn||(e.cell._updating=!0,t.onCellValue(e.cell),e.cell._updating=!1,r=e.cell.value),void 0===r&&(r="");let o=r;a&&(o=e.cell.getFormattedValue(r,a));const s=e.firstChild;(t.onCellRender||l.onCellRender)&&requestAnimationFrame((function(){if(l._cellsCachedValues||(l._cellsCachedValues=[]),l._cellsCachedValues[i.index]){const e=l._cellsCachedValues[i.index];s.firstChild&&s.removeChild(s.firstChild),s.appendChild(e)}else if(t.onCellRender?t.onCellRender(e.cell):l.onCellRender(e.cell),e.cell.template!==l.template){const t=document.createElement("div");return s.firstChild&&s.removeChild(s.firstChild),e.cell.template instanceof HTMLTemplateElement?t.appendChild(e.cell.template.cloneNode(!0)):t.appendChild(e.cell.template),s.appendChild(t),void(l._cellsCachedValues[i.index]=t)}})),l.autoGenerated||e.setAttribute("data-field",l.dataField),e.cell.focused?(t.selection.allowCellSelection&&e.setAttribute("focus",""),i.element.setAttribute("focus",""),e.cell.id||(e.id="gridcell_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)),t.setAttribute("aria-activedescendant",e.id)):e.removeAttribute("focus"),e.cell.selected?(e.setAttribute("selected",""),e.setAttribute("aria-selected",!0)):(e.removeAttribute("selected"),e.removeAttribute("aria-selected")),t.dragDrop&&t.dragDrop.row===i?e.classList.add("dragged"):e.classList.remove("dragged"),t.rowDetail.enabled&&i.showDetail&&(e.style.height=i.cellHeight+"px",e.style.lineHeight=i.cellHeight+"px"),i.expanded&&i.expandHeight>0&&(e.style.height=i.cellHeight+"px",e.style.lineHeight=i.cellHeight+"px");const d=e._getCellAlignment(i,l),c=""!==e.cell.template&&t.isInitialized&&!i._isMeasureRow;let u="";if(d.align&&(u+=d.align+" "),d.verticalAlign&&(u+=d.verticalAlign+" "),l.cellsWrap&&(u+="wrap "),u+="smart-label",e.style.width!==l.computedWidth+"px"){const i=t._isLastVisibleColumn(l);l.autoGenerated||i?e.style.width=l.computedWidth+"px":e.style.width=l.computedWidth-t._columnGap+"px"}if(t.grouping.enabled&&t.dataSource.groupBy&&t.dataSource.groupBy.length>0&&"advanced"===t.grouping.renderMode){const n=t.grouping.groupIndent*(1+i.level);l.dataField===t.columns[t.columns.length-1].dataField&&(e.style.width=l.computedWidth-n+t.grouping.groupIndent+"px",t.appearance.showColumnLines&&e.classList.add("smart-grid-column-border"))}l===t._firstVisibleColumn?e.classList.add("smart-grid-column-border-collapse"):e.classList.remove("smart-grid-column-border-collapse"),t._columnGap>0&&t.appearance.showColumnLines&&e.classList.add("smart-grid-column-border"),t._rowGap>0&&e.classList.add("smart-grid-row-border"),t.appearance.showColumnLines?e.classList.remove("smart-grid-vertical-border-collapse"):e.classList.add("smart-grid-vertical-border-collapse"),t.appearance.showRowLines?e.classList.remove("smart-grid-horizontal-border-collapse"):e.classList.add("smart-grid-horizontal-border-collapse");let m=l.left;if(t.rightToLeft?e.style.right!==m+"px"&&(e.style.right=m+"px"):e.style.left!==m+"px"&&(e.style.left=m+"px"),e.classList.contains("smart-hidden")&&e.classList.remove("smart-hidden"),e.hasAttribute("template")&&e.removeAttribute("template"),e.hasAttribute("freeze")&&e.removeAttribute("freeze"),e.hasAttribute("detail")&&e.removeAttribute("detail"),i.filterRow?e.classList.add("smart-grid-filter-row-cell"):i.summaryRow?e.classList.add("smart-grid-summary-row-cell"):(l.freeze||i.freeze)&&(l.selectionColumn&&(e.setAttribute("checkbox",""),u+=" smart-input",l.grid.selection.checkBoxes.enabled&&l.grid.selection.checkBoxes.autoShow?e.setAttribute("auto-show",""):e.removeAttribute("auto-show")),(l.rowHeaderColumn||l.selectionColumn)&&(e.setAttribute("header",""),e.setAttribute("role","rowheader")),l.rowDetailColumn&&(e.setAttribute("header",""),e.setAttribute("detail",""),e.setAttribute("has-toggle-button","")),l.commandColumn&&e.setAttribute("command",""),t.appearance.showFrozenColumnBackground&&l.freeze&&e.setAttribute("freeze",""),t.appearance.showFrozenRowBackground&&i.freeze&&e.setAttribute("freeze","")),l.cellsRotationAngle){if(!e._rotateCellContent(s,l,r))return}else if(i.filterRow){if(!l.toggleColumn&&!l.rowHeaderColumn)return l._filterEditorInitialized?void("boolean"===l.dataType&&e.setAttribute("template","checkBox")):(l._filterEditorInitialized=!0,void e._renderFilterCell(s));s.innerHTML=""}else if(i.summaryRow){if(l.toggleColumn||l.rowHeaderColumn)s.innerHTML="";else if(l.summary.length>0&&t._summaryItems){const n=t._summaryItems[l.dataField];let a=0;for(let r in n){if(a===i.summaryRowIndex){const i=l.cellsFormat;let a=n[r];i&&(a=e.cell.getFormattedValue(a,i)),s.innerHTML=t.localize(r,{value:a})}a++}}}else if(t.rowDetail.enabled&&l.rowDetailColumn)""!==s.innerHTML&&(i.showDetail?s.innerHTML='<button class="smart-animate" toggled toggle-button></button>':s.innerHTML='<button class="smart-animate" toggle-button></button>',i.element.toggleDetailButton=e.querySelector("button"));else if(l.commandColumn)e._renderCommands();else if(t.appearance.showRowHeaderNumber&&l.rowHeaderColumn)if(i.addNewRow)s.textContent="";else{const l=l=>{if(e.cell.value)return e.cell.value;if("number"===t.appearance.autoGenerateRowLabelMode)return l.visibleIndex+1;{const e=l.visibleIndex%26,t=Math.floor(l.visibleIndex/26),i="A".charCodeAt(0),n=String.fromCharCode(i+e);let a="";for(let e=0;e<t;e++)a+="A";return a+n}};t._rowsAdded&&t._rowsAdded.indexOf(i.id)>=0?s.textContent="":s.textContent=l(i)}else if(c)switch(e.removeAttribute("readonly"),e.cell.template){case"checkBox":case"switchButton":case"radioButton":""!==s.textContent&&(s.textContent=""),(!t.editing.enabled||!l.allowEdit||e.cell.readonly||t.editing.enabled&&t.editing.commandColumn.visible&&t.editing.editRow!==e.cell.row)&&e.setAttribute("readonly",""),'<span class="smart-input"></span>'!==s.innerHTML&&(s.innerHTML='<span class="smart-input"></span>'),r?s.firstChild.setAttribute("checked",""):null===r?s.firstChild.setAttribute("checked","indeterminate"):s.firstChild.removeAttribute("checked"),e.setAttribute("template",e.cell.template);break;default:{let t=null;if(e.setAttribute("template",""),"function"==typeof e.cell.template){const t={row:i,column:l,cell:e.cell,oldValue:e.cell.oldValue,value:r,template:null};let n=s.querySelector(".smart-grid-cell-template");if(n&&n.getAttribute("column")===l.dataField?t.template=n.firstElementChild:n=null,e.formattedValue!==o&&(n=null),n||e.cell.template(t),!n&&t.template)if(t.template instanceof HTMLElement){const e=document.createElement("div");e.classList.add("smart-grid-cell-template"),e.setAttribute("column",l.dataField),s.innerHTML="",s.appendChild(e),e.appendChild(t.template)}else s.innerHTML='<div column="'+l.dataField+'" class="smart-grid-cell-template">'+t.template+"</div>";else n||null!==t.template||(s.innerHTML=r);e.cell._styleChanged&&e.cell.setStyle(s),void 0===e.cell.oldValue&&(e.cell.oldValue=r),e.formattedValue=o}else if(""!==s.textContent&&(s.textContent=""),e.cell.template.startsWith("#")&&(t=document.querySelector(e.cell.template)),t){const e=t.content.cloneNode(!0).firstElementChild;r=r.toString(),r=r.replace(/'/gi,"\\'"),r=r.replace(/"/gi,'\\"');let l=e.outerHTML.replace(/{{value}}/gi,r).replace(/{{id}}/gi,i.id);l.indexOf("{{value=")>=0&&(r?(l=l.substring(0,l.indexOf("{{value="))+r+l.substring(l.indexOf("}")),l=l.replace(/}/gi,""),l=l.replace(/{/gi,"")):(l=l.replace(/{{value=/gi,""),l=l.replace(/}}/gi,""))),s.innerHTML!==l&&(s.innerHTML=l)}else{""===r&&(r="&nbsp;");const t=e.cell.template.replace(/{{value}}/gi,r).replace(/{{id}}/gi,i.id);s.innerHTML!==t&&(s.innerHTML=t)}}}else if(l.selectionColumn)"checkBox"===t.selectionMode&&(i.getProperty("selected")?(e.setAttribute("selected",""),e.element.setAttribute("aria-selected",!0)):e.getAttribute("selected")&&(e.removeAttribute("selected"),e.element.removeAttribute("aria-selected")));else{const n=s.firstChild;if(n&&n.classList&&e.toggleButton&&l._treeColumn){const n=s.children[0],a=s.children[1].children[0],r=s.children[1].children[1].firstChild,d=s.children[1].children[2];let c="";if(l._treeColumn){if(t.grouping.enabled){c+='<div style="width: '+(1+(i.level-1))*t.grouping.groupIndent+'px;"></div>'}else for(let e=0;e<i.level;e++)c+="<div class='smart-indent'></div>";i.checked?r.setAttribute("checked",""):!1===i.checked?r.removeAttribute("checked"):null===i.checked&&r.setAttribute("checked","indeterminate"),i.leaf?i.allowCheck?r.classList.remove("smart-visibility-hidden"):r.classList.add("smart-visibility-hidden"):i.allowCheck?r.classList.remove("smart-hidden"):r.classList.add("smart-hidden")}i.allowCheck?t.checkBoxes.visible?r.classList.remove("smart-hidden"):r.classList.add("smart-hidden"):t.checkBoxes.visible||r.classList.add("smart-hidden"),n.innerHTML=c,a.classList.add("smart-visibility-hidden"),i.leaf?a.classList.add("smart-visibility-hidden"):(a.classList.remove("smart-visibility-hidden"),i.expanded?a.setAttribute("toggled",""):a.removeAttribute("toggled","")),i.data.isEmpty&&a.classList.add("smart-visibility-hidden"),d.innerHTML=o,t.appearance.showRowHeaderNumber&&t.grouping.enabled&&t.dataSource.groupBy.length>0&&"advanced"===t.grouping.renderMode&&(o="<span visible-index>"+(1+i.visibleIndex)+"</span> "+o),t.rowDetail.enabled&&t.grouping.enabled&&t.dataSource.groupBy.length>0&&"advanced"===t.grouping.renderMode&&(d.innerHTML='<button class="inline smart-animate" toggled toggle-button></button>'+o,i.element.toggleDetailButton=e.querySelector("button.inline"),i.element.toggleDetailButton.setAttribute("title",t.localize(i.showDetail?"collapseRow":"expandRow",{elementType:"Grid"})),i.element.toggleDetailButton.onpointerdown=function(){i.showDetail=!i.showDetail}),t.appearance.showTooltips?d.setAttribute("title",o):d.hasAttribute("title")&&d.removeAttribute("title")}else{const n=i["column_"+l.dataField];if(e.getAttribute("rowspan")&&(e.removeAttribute("rowspan"),e.removeAttribute("aria-rowspan"),e.style.height=""),e.getAttribute("colspan")&&(e.removeAttribute("colspan"),e.removeAttribute("aria-colspan")),n){if(n.colSpan>1){const i=t.columns.indexOf(l);let a=0;for(let e=i;e<i+n.colSpan;e++){const l=t.columns[e];l&&l.visible&&(a+=l.computedWidth)}e.style.width=a+"px",e.setAttribute("colspan",""),e.setAttribute("aria-colspan",n.colSpan),n._styleChanged=!0}if(n.rowSpan>1){const l=t.rows.indexOf(i);let a=0;i.element.setAttribute("rowspan","");for(let e=l;e<=l+n.rowSpan-1;e++){const l=t.rows[e];l&&l.visible&&l.filtered&&(a+=l.cellHeight)}e.style.height=a+"px",e.setAttribute("rowspan",""),e.setAttribute("aria-rowspan",n.rowSpan),n._styleChanged=!0}(1===n.colSpan&&e.hasAttribute("colspan")||e.hasAttribute("rowspan")&&1===n.rowSpan)&&(e.style.height="",e.style.width="",e.removeAttribute("colspan"),e.removeAttribute("rowspan"),e.removeAttribute("aria-rowspan"),e.removeAttribute("aria-colspan"),n._styleChanged=!0),s.textContent===o||l.formatFunction||(s.textContent=o),n.setStyle(s),t.appearance.showTooltips?s.setAttribute("title",n.tooltip||o):s.hasAttribute("title")&&s.removeAttribute("title")}else s.textContent=o}}if(s.className!==u&&(s.className=u),l.formatFunction&&!i.data.isEmpty&&t.isInitialized){const t={row:i,column:l,cell:e.cell,oldValue:e.cell.oldValue,value:r,formattedValue:o,template:null};e.cell.canNotify=!1,i.canNotify=!1;const n=Object.assign({},{background:e.cell.background,borderColor:e.cell.borderColor,color:e.cell.color,fontSize:e.cell.fontSize,fontFamily:e.cell.fontFamily,fontWeight:e.cell.fontWeight,fontStyle:e.cell.fontStyle});l.formatFunction(t),s.style.background===n.background&&s.style.borderColor===n.borderColor&&s.style.color===n.color&&s.style.fontSize===n.fontSize&&s.style.fontWeight===n.fontWeight&&s.style.fontStyle===n.fontStyle||(e.cell._styleChanged=!0,e.cell.setStyle(s)),e.cell.background===n.background&&e.cell.borderColor===n.borderColor&&e.cell.color===n.color&&e.cell.fontSize===n.fontSize&&e.cell.fontWeight===n.fontWeight&&e.cell.fontStyle===n.fontStyle||(e.cell._styleChanged=!0,e.cell.setStyle(s));let a=!0;if(t.value!==r){if(e.toggleButton){s.children[1].children[2].innerHTML=t.value}else s.innerHTML=t.value;a=!1}if(null!==t.template){if(e.toggleButton){const e=s.children[1].children[2];e.innerHTML!==t.template&&(e.innerHTML=t.template)}else if(s.innerHTML!==t.template){const e=document.createElement("div");e.innerHTML=t.template,e.innerHTML!==s.innerHTML&&(s.innerHTML=t.template)}a=!1}a&&(s.textContent=r),e.cell.canNotify=!0,i.canNotify=!0}}_rotateCellContent(e,t,l){const i=document.createElement("span");return e.innerHTML="",i.innerHTML=l,e.appendChild(i),i.className="rotate",i.style.transform="rotate("+t.cellsRotationAngle+"deg)",this.grid._recycleRotate(e,i,t.cellsAlign,t.cellsVerticalAlign,l)}_getCellAlignment(e,t){const l=e["column_"+t.dataField],i=l&&l.verticalAlign||t.cellsVerticalAlign;let n=l&&l.align||t.cellsAlign;const a={align:"",verticalAlign:""};switch(l.grid.rightToLeft&&("left"===n?n="right":"right"===n&&(n="left")),n){case"left":a.align="align-left";break;case"center":case"middle":a.align="align-center";break;case"right":a.align="align-right"}switch(i){case"top":a.verticalAlign="align-top";break;case"center":case"middle":a.verticalAlign="align-middle";break;case"bottom":a.verticalAlign="align-bottom"}return a}template(){return""}_detach(){this.element=null,this.cell=null}onDetached(){this._detach()}})}});