
/* Smart UI v9.1.1 (2021-Feb) 
Copyright (c) 2011-2021 jQWidgets. 
License: https://htmlelements.com/license/ */ //

!function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=68)}({68:function(e,t){Smart("smart-grid-panel",class extends Smart.BaseElement{static get properties(){return{closeButtonPosition:{value:"left",allowedValues:["left","right"],type:"string"},dataSource:{value:[],type:"array",reflectToAttribute:!1},messages:{value:{en:{apply:"Ok",booleanFirst:"☐",booleanLast:"☑",cancel:"Cancel",dateFirst:"1",dateLast:"9",from:"from",numberFirst:"1",numberLast:"9",stringFirst:"A",stringLast:"Z",thenBy:"then by"}},type:"object",extend:!0}}}static get listeners(){return{change:"_changeHandler",click:"_clickHandler",keydown:"_keydownHandler","sortable.dragEnd":"_sortableDragEndHandler"}}static get requires(){return{"Smart.Input":"smart.input.js","Smart.Sortable":"smart.sortable.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <smart-sortable id="sortable" animation="[[animation]]" disabled="[[readonly]]" right-to-left="[[rightToLeft]]"\n                            drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]">\n                    </smart-sortable>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <smart-input id="inputNotSorted" right-to-left="[[rightToLeft]]" animation="[[animation]]" readonly theme="[[theme]]"></smart-input>\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button primary" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}ready(){super.ready()}render(){const e=this;e.setAttribute("role","dialog"),"right"===e.closeButtonPosition&&(e.$.sortable.handlePosition="left"),e._localize(),e._createSources(),super.render()}propertyChangedHandler(e,t,a){super.propertyChangedHandler(e,t,a);const i=this;switch(e){case"animation":case"theme":Array.from(i.$.sortable.getElementsByTagName("smart-input")).forEach(t=>t[e]=a);break;case"disabled":case"unfocusable":i._setFocusable();break;case"closeButtonPosition":"right"===i.closeButtonPosition?i.$.sortable.handlePosition="left":i.$.sortable.handlePosition="right";break;case"dataSource":i.$.sortable.$.container.innerHTML="",i._createSources();break;case"locale":case"messages":{const e=i.$.sortable._items;i._localize(),e.length&&(e[0].children[1].innerHTML=i.localize("firstBy"),e.forEach((function(e,t){0!==t&&(e.children[1].innerHTML=i.localize("thenBy"));const a=i._HTMLToSourceMap.get(e),n=i._ascDescTemplates[a.dataType]||i._ascDescTemplates.string;e.children[3].innerHTML=i.localize("from"),e.children[4].firstElementChild.innerHTML=n[0],e.children[4].children[1].innerHTML=n[1]})));break}case"maxLevel":if(null!=a)for(;i.$.sortable._items.length>0&&i.$.sortable._items.length>a;)i._interactionHandler(i.$.sortable._items[i.$.sortable._items.length-1].firstElementChild);i._disableItemAddition();break;case"rightToLeft":i.$.inputNotSorted.rightToLeft=a,i.$.inputNotSorted.dropDownButtonPosition=a?"left":"right",i.$.sortable._items.forEach(e=>{const t=e.querySelector("smart-input");t.rightToLeft=a,t.dropDownButtonPosition=a?"left":"right"})}}_changeHandler(e){const t=this,a=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(t.$.inputNotSorted.contains(a)){const e=t.$.inputNotSorted.value,a=t._labelToSourceMap.get(e);return t._createSortItem(a,t.$.sortable._items.length),t.$.sortable.updateItems(),t._visibleLabels.push(e),t._updateHiddenSource(),t._disableItemAddition(),void(t.$.inputNotSorted.value="")}const i=a.closest("smart-input");if(!i)return;const n=i.parentElement.parentElement,l=n.children[4].firstElementChild,o=n.children[4].children[1],r=i.value,s=t._HTMLToSourceMap.get(n).label,d=t._labelToSourceMap.get(r),c=t._ascDescTemplates[d.dataType]||t._ascDescTemplates.string;t._HTMLToSourceMap.set(n,d),t._visibleLabels.splice(t._visibleLabels.indexOf(s),1,r),t._updateHiddenSource(),l.innerHTML=c[0],o.innerHTML=c[1],d.sortDirection&&-1===d.sortDirection.indexOf("asc")?(o.classList.add("selected"),l.classList.remove("selected")):(l.classList.add("selected"),o.classList.remove("selected"))}_updateHiddenSource(){const e=this;e._hiddenSource=e.dataSource.map(e=>({label:e.label,value:e.dataField,icon:e.icon})).filter(t=>-1===e._visibleLabels.indexOf(t.label)),e.$.inputNotSorted.dataSource=e._hiddenSource,e.$.sortable._items.forEach(t=>t.getElementsByTagName("smart-input")[0].dataSource=e._hiddenSource),e._disableItemAddition(),e.$.fireEvent("dataSourceChange")}_clickHandler(e){this._interactionHandler(this.shadowRoot||this.isInShadowDOM?e.composedPath()[0]:e.target,e)}_interactionHandler(e,t){const a=this;if(a.disabled||a.readonly)return!0;const i=e.closest(".smart-grid-panel-item");if(i){if(e===i.firstElementChild){const e=a._HTMLToSourceMap.get(i).label;a.$.sortable.$.container.removeChild(i),a.$.sortable.updateItems(),a._visibleLabels.splice(a._visibleLabels.indexOf(e),1),a._updateHiddenSource(),a._disableItemAddition(),a.$.sortable._items.length&&(a.$.sortable._items[0].children[1].innerHTML=a.localize("firstBy")),a.$.fireEvent("remove")}else if(i.children[4].contains(e)){const n=i.children[4].firstElementChild,l=i.children[4].children[1];"click"===t.type?e.classList.contains("selected")||(e===n?(l.classList.remove("selected"),n.classList.add("selected"),a._HTMLToSourceMap.get(i).sortDirection="ascending"):e===l&&(n.classList.remove("selected"),l.classList.add("selected"),a._HTMLToSourceMap.get(i).sortDirection="descending")):(n.classList.toggle("selected"),l.classList.toggle("selected"),a._HTMLToSourceMap.get(i).sortDirection=n.classList.contains("selected")?"ascending":"descending")}return!0}if(e===a.$.buttonsContainer.firstElementChild)return a.$.fireEvent("cancel"),!0;if(e===a.$.buttonsContainer.children[1]){const e=[],t={dataFields:[],dataTypes:[],orderBy:[]},i={value:e};return a.$.sortable._items.forEach(i=>{const n=a._HTMLToSourceMap.get(i);e.push({dataField:n.dataField,sortDirection:n.sortDirection}),t.dataFields.push(n.dataField),t.dataTypes.push(n.dataType),t.orderBy.push(n.sortDirection)}),(a instanceof Smart.SortPanel||a instanceof Smart.GroupPanel)&&(i.sortByInfo=t),a.$.fireEvent("apply",i),!0}}_keydownHandler(e){const t=this,a=e.key;" "!==a&&"Enter"!==a||(e.preventDefault(),t._interactionHandler((t.shadowRoot||t.getRootNode()).activeElement,e))}_sortableDragEndHandler(e){const t=this,a=e.detail.oldIndex,i=e.detail.newIndex,n=Math.max(a,i),l=t.$.sortable._items;0===(a&&i)&&(l[0].children[1].innerHTML=t.localize("firstBy"),l[1].children[1].innerHTML=t.localize("thenBy"),n>1&&(l[n].children[1].innerHTML=t.localize("thenBy")))}_localize(){this.$.inputNotSorted.placeholder=this.localize("pickAnother"),this.$.buttonsContainer.firstElementChild.innerHTML=this.localize("cancel"),this.$.buttonsContainer.children[1].innerHTML=this.localize("apply"),this._ascDescTemplates={boolean:[this.localize("booleanFirst")+" → "+this.localize("booleanLast"),this.localize("booleanLast")+" → "+this.localize("booleanFirst")],date:[this.localize("dateFirst")+" → "+this.localize("dateLast"),this.localize("dateLast")+" → "+this.localize("dateFirst")],number:[this.localize("numberFirst")+" → "+this.localize("numberLast"),this.localize("numberLast")+" → "+this.localize("numberFirst")],string:[this.localize("stringFirst")+" → "+this.localize("stringLast"),this.localize("stringLast")+" → "+this.localize("stringFirst")]}}_createSources(){const e=this,t=(e instanceof Smart.SortPanel?"sort":"group")+"Index",a=[],i=[];if(e._HTMLToSourceMap=new Map,e._labelToSourceMap=new Map,e.dataSource.forEach(i=>{e._labelToSourceMap.set(i.label,i),-1!==i[t]&&void 0!==i[t]&&a.push(i)}),a.sort((e,a)=>e[t]-a[t]),void 0!==e.maxLevel&&null!==e.maxLevel)for(;a.length>0&&a.length>e.maxLevel;)a.pop();e.$.inputNotSorted.dropDownButtonPosition=e.rightToLeft?"left":"right",e.$.inputNotSorted.dataSource&&e.$.inputNotSorted.dataSource.length<10?e.$.inputNotSorted.dropDownHeight="auto":e.$.inputNotSorted.dropDownHeight=250,a.forEach(e=>i.push(e.label)),e._visibleLabels=i,e._updateHiddenSource(),a.forEach((t,a)=>{e._createSortItem(t,a)}),e.$.sortable.updateItems(),e._disableItemAddition(),e._setFocusable()}_createSortItem(e,t){const a=this.disabled||this.unfocusable?-1:0,i=document.createElement("div"),n=this._ascDescTemplates[e.dataType]||this._ascDescTemplates.string;i.className="smart-grid-panel-item",i.innerHTML=`<div class="smart-grid-panel-item-close-button" tabindex="${a}" role="button" aria-label="Close"></div>\n<div class="smart-grid-panel-label-by smart-unselectable" role="presentation">${this.localize(t>0?"thenBy":"firstBy")}</div>\n<div class="smart-grid-panel-field-container" role="presentation"><smart-input class="smart-grid-panel-field-selection" value="${e.label}" animation="${this.animation}" readonly theme="${this.theme}" aria-label="Field name"></smart-input></div>\n<div class="smart-grid-panel-from smart-unselectable" role="presentation">${this.localize("from")}</div >\n<div class="smart-grid-panel-direction smart-unselectable" tabindex="${a}" role="presentation">\n    <div class="smart-grid-panel-asc" role="button" aria-label="Ascending">${n[0]}</div >\n    <div class="smart-grid-panel-desc" role="button" aria-label="Descending">${n[1]}</div>\n</div>\n`;const l=i.querySelector("smart-input");l.dataSource=this._hiddenSource,l.rightToLeft=this.rightToLeft,l.dropDownButtonPosition=this.rightToLeft?"left":"right",l.dataSource&&l.dataSource.length<10?l.dropDownHeight="auto":l.dropDownHeight=250,this.$.sortable.$.container.appendChild(i),l.tabIndex=a,e.sortDirection&&-1===e.sortDirection.indexOf("asc")?i.children[4].children[1].classList.add("selected"):(e.sortDirection="ascending",i.children[4].firstElementChild.classList.add("selected")),this._HTMLToSourceMap.set(i,e)}_disableItemAddition(){const e=this,t=e.maxLevel,a=0===e._hiddenSource.length||null!=t&&Math.max(0,t)===e.$.sortable._items.length;e.$.inputNotSorted.disabled=a,a&&e.$.inputNotSorted.removeAttribute("focus")}_setFocusable(){const e=this.disabled||this.unfocusable?-1:0,t=Array.from(this.getElementsByClassName("smart-grid-panel-item-close-button")),a=Array.from(this.getElementsByClassName("smart-grid-panel-direction")),i=Array.from(this.getElementsByTagName("input")),n=t.concat(a).concat(i);this.$.buttonsContainer.firstElementChild.tabIndex=e,this.$.buttonsContainer.children[1].tabIndex=e,n.forEach(t=>t.tabIndex=e)}}),Smart("smart-sort-panel",class extends Smart.GridPanel{static get properties(){return{messages:{value:{en:{firstBy:"Sort by",noSorting:"No sorting applied",pickAnother:"Pick another field to sort by"}},type:"object",extend:!0}}}static get styleUrls(){return["smart.textbox.css"]}_localize(){super._localize();this.$.sortable.$.container.setAttribute("no-sorting",this.localize("noSorting"))}}),Smart("smart-group-panel",class extends Smart.GridPanel{static get properties(){return{maxLevel:{value:8,type:"number?"},messages:{value:{en:{collapseAll:"Collapse all",expandAll:"Expand all",firstBy:"Group by",noGrouping:"No grouping",pickAnother:"Pick another field to group by"}},type:"object",extend:!0}}}template(){return'<div id="container" role="presentation">\n                    <smart-sortable right-to-left="[[rightToLeft]]" id="sortable" animation="[[animation]]" disabled="[[readonly]]" drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]"></smart-sortable>\n                    <div id="expandCollapseContainer" class="smart-grid-panel-buttons-container smart-grid-panel-expand-collapse smart-unselectable" role="presentation">\n                        <span class="smart-group-panel-collapse-button" role="button"></span>\n                        <span class="smart-group-panel-expand-button" role="button"></span>\n                    </div>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <smart-input right-to-left="[[rightToLeft]]" id="inputNotSorted" animation="[[animation]]" readonly theme="[[theme]]"></smart-input>\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button primary" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}_interactionHandler(e,t){const a=this;super._interactionHandler(e,t)||(e===a.$.expandCollapseContainer.firstElementChild?a.$.fireEvent("collapseAll"):e===a.$.expandCollapseContainer.children[1]&&a.$.fireEvent("expandAll"))}_localize(){super._localize();this.$.expandCollapseContainer.firstElementChild.innerHTML=this.localize("collapseAll"),this.$.expandCollapseContainer.children[1].innerHTML=this.localize("expandAll"),this.$.sortable.$.container.setAttribute("no-grouping",this.localize("noGrouping"))}_setFocusable(){super._setFocusable();const e=this.disabled||this.unfocusable?-1:0;this.$.expandCollapseContainer.firstElementChild.tabIndex=e,this.$.expandCollapseContainer.children[1].tabIndex=e}}),Smart("smart-multi-column-filter-panel",class extends Smart.BaseElement{static get properties(){return{closeButtonPosition:{value:"left",allowedValues:["left","right"],type:"string"},dataSource:{value:[],type:"array",reflectToAttribute:!1},editorCallback:{value:null,type:"function?",reflectToAttribute:!1},editorPlaceholder:{value:"Value",type:"string"},messages:{value:{en:{addFilter:"+ Add filter",and:"And",apply:"Ok",cancel:"Cancel",CONTAINS:"contains",CONTAINS_CASE_SENSITIVE:"contains (case sensitive)",DOES_NOT_CONTAIN:"does not contain",DOES_NOT_CONTAIN_CASE_SENSITIVE:"does not contain (case sensitive)",EMPTY:"empty",ENDS_WITH:"ends with",ENDS_WITH_CASE_SENSITIVE:"ends with (case sensitive)",EQUAL:"equal",EQUAL_CASE_SENSITIVE:"equal (case sensitive)",GREATER_THAN:"greater than",GREATER_THAN_OR_EQUAL:"greater than or equal",LESS_THAN:"less than",LESS_THAN_OR_EQUAL:"less than or equal",noFilters:"No filters applied",NOT_EMPTY:"not empty",NOT_EQUAL:"not equal",NOT_NULL:"not null",NULL:"null",or:"Or",STARTS_WITH:"starts with",STARTS_WITH_CASE_SENSITIVE:"starts with (case sensitive)",where:"Where"}},type:"object",extend:!0},operator:{value:"and",allowedValues:["and","or"],type:"string"},value:{value:[],type:"array"}}}static get listeners(){return{change:"_changeHandler",click:"_interactionHandler",keydown:"_interactionHandler"}}static get requires(){return{"Smart.Button":"smart.button.js","Smart.CheckBox":"smart.checkbox.js","Smart.DateTimePicker":"smart.datetimepicker.js","Smart.FilterGroup":"smart.filter.js","Smart.Input":"smart.input.js","Smart.NumericTextBox":"smart.numerictextbox.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="itemsContainer" class="smart-filter-panel-items-container smart-unselectable"></div>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <div id="addFilterButton" class="smart-filter-panel-add-filter-button smart-unselectable" role="button"></div>\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button primary" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}ready(){super.ready()}render(){this.setAttribute("role","dialog"),this._setFocusable(),this._localize(),this._applyValue(),super.render()}propertyChangedHandler(e,t,a){super.propertyChangedHandler(e,t,a);const i=this;switch(e){case"animation":case"theme":case"rightToLeft":Array.from(i.$.itemsContainer.querySelectorAll("smart-date-time-picker, smart-numeric-text-box, smart-check-box, smart-input")).forEach(t=>{t[e]=a,"smart-input"===t.tagName.toLowerCase()&&"rightToLeft"===e&&"none"!==t.dropDownButtonPosition&&(t.dropDownButtonPosition=a?"left":"right")});break;case"disabled":case"unfocusable":i._setFocusable(!0);break;case"dataSource":case"value":i._applyValue();break;case"editorPlaceholder":Array.from(i.$.itemsContainer.getElementsByClassName("editor")).forEach(e=>e.placeholder=a);break;case"locale":case"messages":i._localize(!0);break;case"operator":i._setOperator()}}_setOperator(){const e=this,t=e.localize(e.operator);for(let a=2;a<e._items.length;a++)e._items[a].children[1].innerHTML=t}_changeHandler(e){const t=this,a=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(a instanceof Smart.Input==!1)return;const i=a.parentElement,n=i.children;if(a===n[1])t.operator=a.$.input.dataValue,t._setOperator();else if(a===n[2]){const a=t.dataSource.find(t=>t.dataField===e.detail.oldValue).dataType,l=t.dataSource.find(t=>t.dataField===e.detail.value),o=l.dataType;if("enum"!==o&&o===a)return void(t.editorCallback&&t.editorCallback(n[4],l));const r=n[3].value;let s,d;switch(o){case"date":s=t._numberAndDateConditions,d=document.createElement("smart-date-time-picker"),d.calendarButton=!0,d.dropDownAppendTo="body",d.dropDownDisplayMode="auto",d.formatString="M/d/yy H:mm";break;case"number":s=t._numberAndDateConditions,d=document.createElement("smart-numeric-text-box");break;case"boolean":s=t._booleanConditions,d=document.createElement("smart-check-box");break;case"enum":s=t._enumConditions,d=document.createElement("smart-input"),d.dataSource=l.options,d.readonly=!0,d.dropDownButtonPosition="right";break;default:s=t._stringConditions,d=document.createElement("smart-input")}d.rightToLeft=t.rightToLeft,d.animation=t.animation,d.theme=t.theme,d.unfocusable=t.disabled||t.unfocusable,d.classList.add("underlined"),d.dataSource&&d.dataSource.length<10?d.dropDownHeight="auto":d.dropDownHeight=250,"boolean"!==o&&(d.placeholder=t.editorPlaceholder),t.editorCallback&&t.editorCallback(d,l),n[4].remove(),i.appendChild(d),""===r||s.find(e=>e.label===r)||(n[3].value=""),n[3].dataSource=s,s.length>=10?n[3].dropDownHeight=250:n[3].dropDownHeight="auto",i.dataType=o}else if(a===n[3]){const e=n[4],t=a.$.input.dataValue;-1!==t.indexOf("NULL")||-1!==t.indexOf("EMPTY")?(e.value="",e.checked=!1,e.classList.add("smart-visibility-hidden")):e.classList.remove("smart-visibility-hidden"),a.condition=t}}_interactionHandler(e){const t=this;if(t.disabled||t.readonly)return;if("keydown"===e.type){if(" "!==e.key&&"Enter"!==e.key)return;e.preventDefault()}const a=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target,i=a.closest(".smart-grid-panel-item");if(i){if(a===i.firstElementChild){const e=t._items.indexOf(i);let a;t._items.splice(e,1),i.remove(),t._items.length>0&&e<2&&(0===e&&(t._items[0].children[1].remove(),a=document.createElement("div"),a.innerHTML=t.localize("where"),t._items[0].insertBefore(a,t._items[0].children[1])),t._items.length>1&&(t._items[1].children[1].remove(),a=document.createElement("smart-input"),a.className="underlined",a.dataSource=[{value:"and",label:t.localize("and")},{value:"or",label:t.localize("or")}],a.dropDownButtonPosition=t.rightToLeft?"left":"right",a.readonly=!0,a.value=t.localize(t.operator),a.animation=t.animation,a.theme=t.theme,a.rightToLeft=t.rightToLeft,a.unfocusable=t.disabled||t.unfocusable,t._items[1].insertBefore(a,t._items[1].children[1])))}}else if(a===t.$.addFilterButton&&t.dataSource.length>0)t.$.itemsContainer.appendChild(t._createItem(t.dataSource[0],"","",t._items.length));else if(a!==t.$.buttonsContainer.firstElementChild){if(a===t.$.buttonsContainer.children[1]){const e=t._stringConditions.concat(t._numberAndDateConditions),a=t.operator,i=[],n={},l=[];t._items.forEach(l=>{const o=t.dataSource.find(e=>e.label===l.children[2].value),r=[];let s=l.children[3].value;if(""===s)return;let d=o.dataType;if(s=e.find(e=>e.label===s).value,r.push(o.dataField,s),-1===s.indexOf("NULL")&&-1===s.indexOf("EMPTY"))if("boolean"===d)r.push(l.children[4].checked);else if("date"===d)r.push(l.children[4].value.toDate());else if("enum"===d){let e=l.children[4].$.input.dataValue;if(void 0===e){const t=o.options.find(e=>e.label===l.children[4].value);if(!t)return;e=t.value}d="string",r.push(e)}else r.push(l.children[4].value);let c=n[r[0]];void 0===c&&(c=new Smart.Utilities.FilterGroup,n[r[0]]=c);const u=c.createFilter(d,r[2],r[1]);c.addFilter(a,u),i.push(r)});for(let e in n)l.push([e,n[e]]);t.value=i,t.$.fireEvent("apply",{filters:l,operator:a,value:i})}}else t.$.fireEvent("cancel")}_applyValue(){const e=this,t=document.createDocumentFragment();let a=0;for(e._items=[];e.$.itemsContainer.firstElementChild;)e.$.itemsContainer.firstElementChild.remove();0!==e.dataSource.length&&(e.value.forEach(i=>{if(!Array.isArray(i))return;const n=i[0],l=e.dataSource.find(e=>e.dataField===n);if(!l)return;const o=e._createItem(l,i[1],i[2],a);t.appendChild(o),a++}),e.$.itemsContainer.appendChild(t))}_createItem(e,t,a,i){const n=this,l=n.disabled||n.unfocusable?-1:0,o=document.createElement("div"),r=document.createDocumentFragment(),s=document.createElement("div"),d=document.createElement("smart-input"),c=document.createElement("smart-input");let u,p;return s.className="smart-grid-panel-item-close-button",s.tabIndex=l,s.setAttribute("role","button"),s.setAttribute("aria-label","button"),r.appendChild(s),0===i?(u=document.createElement("div"),u.innerHTML=n.localize("where"),u.setAttribute("role","presentation")):1===i?(u=document.createElement("smart-input"),u.className="underlined",u.dataSource=[{value:"and",label:n.localize("and")},{value:"or",label:n.localize("or")}],u.dropDownButtonPosition=n.rightToLeft?"left":"right",u.readonly=!0,u.value=n.localize(n.operator),u.animation=n.animation,u.theme=n.theme,u.rightToLeft=n.rightToLeft,u.unfocusable=n.disabled||n.unfocusable,u.setAttribute("aria-label","Operator")):(u=document.createElement("div"),u.innerHTML=n.localize(n.operator),u.setAttribute("role","presentation")),r.appendChild(u),d.className="underlined",d.dataSource=n.dataSource.map(e=>({value:e.dataField,label:e.label,icon:e.icon})),d.dropDownButtonPosition=n.rightToLeft?"left":"right",d.readonly=!0,d.value=e.label,d.animation=n.animation,d.theme=n.theme,d.rightToLeft=n.rightToLeft,d.unfocusable=n.disabled||n.unfocusable,d.setAttribute("aria-label","Field"),d.dataSource&&d.dataSource.length<10?d.dropDownHeight="auto":d.dropDownHeight=250,r.appendChild(d),"boolean"===e.dataType?(c.dataSource=n._booleanConditions,p=document.createElement("smart-check-box"),p.checked="boolean"==typeof a&&a):"date"===e.dataType?(c.dataSource=n._numberAndDateConditions,p=document.createElement("smart-date-time-picker"),p.dropDownDisplayMode="auto",p.calendarButton=!0,p.dropDownAppendTo="body",p.formatString="M/d/yy H:mm",p.value=a):"number"===e.dataType?(c.dataSource=n._numberAndDateConditions,p=document.createElement("smart-numeric-text-box"),p.value="number"==typeof a||"string"==typeof a?a:0):"enum"===e.dataType?(c.dataSource=n._enumConditions,p=document.createElement("smart-input"),p.dataSource=e.options,p.readonly=!0,p.dropDownButtonPosition="right",p.value=a?e.options.find(e=>e.value===a).label:""):(c.dataSource=n._stringConditions,p=document.createElement("smart-input"),p.value=null!=a?a.toString():""),c.className="underlined",c.dropDownButtonPosition=n.rightToLeft?"left":"right",c.readonly=!0,c.animation=n.animation,c.theme=n.theme,c.rightToLeft=n.rightToLeft,c.unfocusable=n.disabled||n.unfocusable,c.setAttribute("aria-label","Condition"),c.dataSource.find(e=>e.value===t)?(c.value=n.localize(t),c.condition=t):(p.value="",p.checked=!1),void 0===t||-1===t.indexOf("NULL")&&-1===t.indexOf("EMPTY")||(p.value="",p.checked=!1,p.classList.add("smart-visibility-hidden")),c.dataSource&&c.dataSource.length<10?c.dropDownHeight="auto":c.dropDownHeight=250,p.animation=n.animation,p.classList.add("editor"),p.rightToLeft=n.rightToLeft,p.theme=n.theme,p.unfocusable=n.disabled||n.unfocusable,p.classList.add("underlined"),"boolean"!==e.dataType&&(p.placeholder=n.editorPlaceholder),n.editorCallback&&n.editorCallback(p,e),r.appendChild(c),r.appendChild(p),o.appendChild(r),o.className="smart-grid-panel-item",n._items.push(o),o.dataType=e.dataType,o}_localize(e){const t=this;t.$.addFilterButton.innerHTML=t.localize("addFilter"),t.$.buttonsContainer.firstElementChild.innerHTML=t.localize("cancel"),t.$.buttonsContainer.children[1].innerHTML=t.localize("apply"),t.$.itemsContainer.setAttribute("no-filters",t.localize("noFilters")),t._stringConditions=[{value:"EMPTY",label:t.localize("EMPTY")},{value:"NOT_EMPTY",label:t.localize("NOT_EMPTY")},{value:"CONTAINS",label:t.localize("CONTAINS")},{value:"CONTAINS_CASE_SENSITIVE",label:t.localize("CONTAINS_CASE_SENSITIVE")},{value:"DOES_NOT_CONTAIN",label:t.localize("DOES_NOT_CONTAIN")},{value:"DOES_NOT_CONTAIN_CASE_SENSITIVE",label:t.localize("DOES_NOT_CONTAIN_CASE_SENSITIVE")},{value:"STARTS_WITH",label:t.localize("STARTS_WITH")},{value:"STARTS_WITH_CASE_SENSITIVE",label:t.localize("STARTS_WITH_CASE_SENSITIVE")},{value:"ENDS_WITH",label:t.localize("ENDS_WITH")},{value:"ENDS_WITH_CASE_SENSITIVE",label:t.localize("ENDS_WITH_CASE_SENSITIVE")},{value:"EQUAL",label:t.localize("EQUAL")},{value:"EQUAL_CASE_SENSITIVE",label:t.localize("EQUAL_CASE_SENSITIVE")},{value:"NULL",label:t.localize("NULL")},{value:"NOT_NULL",label:t.localize("NOT_NULL")}],t._enumConditions=[{value:"EQUAL",label:t.localize("EQUAL")},{value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")}],t._numberAndDateConditions=[{value:"EQUAL",label:t.localize("EQUAL")},{value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")},{value:"LESS_THAN",label:t.localize("LESS_THAN")},{value:"LESS_THAN_OR_EQUAL",label:t.localize("LESS_THAN_OR_EQUAL")},{value:"GREATER_THAN",label:t.localize("GREATER_THAN")},{value:"GREATER_THAN_OR_EQUAL",label:t.localize("GREATER_THAN_OR_EQUAL")},{value:"NULL",label:t.localize("NULL")},{value:"NOT_NULL",label:t.localize("NOT_NULL")}],t._booleanConditions=[{value:"EQUAL",label:t.localize("EQUAL")},{value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")},{value:"NULL",label:t.localize("NULL")},{value:"NOT_NULL",label:t.localize("NOT_NULL")}],e&&t._items.forEach((e,a)=>{const i=e.children[1],n=e.children[3];0===a?i.innerHTML=t.localize("where"):1===a?(i.dataSource=[{value:"and",label:t.localize("and")},{value:"or",label:t.localize("or")}],i.value=t.localize(t.operator)):i.innerHTML=t.localize(t.operator),"string"===e.dataType?n.dataSource=t._stringConditions:"enum"===e.dataType?n.dataSource=t._enumConditions:"boolean"===e.dataType?n.dataSource=t._booleanConditions:n.dataSource=t._numberAndDateConditions,n.value=n.condition?t.localize(n.condition):""})}_setFocusable(e){const t=this,a=t.disabled||t.unfocusable?-1:0;if(t.$.addFilterButton.tabIndex=a,t.$.buttonsContainer.firstElementChild.tabIndex=a,t.$.buttonsContainer.children[1].tabIndex=a,e){const e=Array.from(t.$.itemsContainer.getElementsByClassName("smart-grid-panel-item-close-button")),i=Array.from(t.$.itemsContainer.querySelectorAll("smart-date-time-picker, smart-numeric-text-box, smart-check-box, smart-input"));e.forEach(e=>e.tabIndex=a),i.forEach(e=>e.unfocusable=t.disabled||t.unfocusable)}}}),Smart("smart-column-panel",class extends Smart.BaseElement{static get properties(){return{dataSource:{value:[],type:"array",reflectToAttribute:!1},messages:{value:{en:{apply:"Ok",cancel:"Cancel",find:"Find a field",noResults:"No results"}},type:"object",extend:!0}}}static get listeners(){return{click:"_interactionHandler",keydown:"_interactionHandler","find.keyup":"_findKeyupHandler","sortable.dragEnd":"_sortableDragEndHandler"}}static get requires(){return{"Smart.Sortable":"smart.sortable.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <div class="smart-column-panel-find-container" role="search">\n                        <input id="find" readonly="[[readonly]]" role="searchbox" aria-label="Find a field"></input>\n                        <span id="clearButton" class="clear-button smart-hidden" role="button" aria-label="Clear"></span>\n                    </div>\n                    <smart-sortable id="sortable" right-to-left="[[rightToLeft]]" animation="[[animation]]" disabled="[[readonly]]" drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]"></smart-sortable>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button primary" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}ready(){super.ready()}render(){this.setAttribute("role","dialog"),this._positionChanged=!1,this._localize(),this._createSortItems(),super.render()}propertyChangedHandler(e,t,a){super.propertyChangedHandler(e,t,a);const i=this;switch(e){case"disabled":case"unfocusable":i._setFocusable();break;case"dataSource":{const e=i.$.sortable.$.container;for(;e.firstChild;)e.removeChild(e.firstChild);i._createSortItems(),i._positionChanged=!1,i.$.find.value="",i.$.clearButton.classList.add("smart-hidden");break}case"locale":case"messages":i._localize()}}_createSortItems(){const e=this,t=document.createDocumentFragment();e._HTMLToSourceMap=new Map,e.dataSource.forEach(a=>t.appendChild(e._createSortItem(a))),e.$.sortable.$.container.appendChild(t),e.$.sortable.updateItems(),e._setFocusable()}_createSortItem(e){const t=document.createElement("div"),a=this.id+"Label"+e.dataField;return this._HTMLToSourceMap.set(t,e),t.className="smart-grid-panel-item",t.innerHTML=`<div class="toggle-visibility${!1!==e.visible?"":" hidden"}${e.disableToggle?" disable-toggle":""}" role="button" aria-controls="${a}" aria-label="Toggle visibility"></div>\n<span id="${a}" class="smart-column-panel-label smart-unselectable${e.icon?" icon "+e.icon:""}">${e.label}</span>`,!1===e.allowHide&&(t.style.pointerEvents="none",t.style.opacity=.8),t}_interactionHandler(e){const t=this;if(t.disabled||t.readonly||"keydown"===e.type&&-1===[" ","Enter"].indexOf(e.key))return;const a=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(a.classList.contains("toggle-visibility"))a.classList.toggle("hidden");else if(a.parentElement===t.$.buttonsContainer){if(a===t.$.buttonsContainer.firstElementChild)return void t.$.fireEvent("cancel");if(a===t.$.buttonsContainer.children[1]){const e=[];t.$.sortable._items.forEach(a=>{const i=Object.assign({},t._HTMLToSourceMap.get(a));i.visible=!a.firstElementChild.classList.contains("hidden"),e.push(i)}),t.$.fireEvent("apply",{value:e,positionChanged:t._positionChanged}),t._positionChanged=!1}}else a.classList.contains("clear-button")&&(t.$.find.value="",t._findKeyupHandler())}_findKeyupHandler(){const e=this;if(e.disabled||e.readonly)return;const t=e.$.find,a=t.value,i=e.$.sortable._items;if(void 0===e._disabledSortable&&(e._disabledSortable=e.$.sortable.disabled),""===a)return t.parentElement.classList.remove("no-results"),e.$.clearButton.classList.add("smart-hidden"),i.forEach(e=>e.classList.remove("smart-hidden")),e.$.sortable.disabled=e._disabledSortable||e.readonly,void delete e._disabledSortable;let n=!0;e.$.clearButton.classList.remove("smart-hidden"),i.forEach(t=>{-1===e._HTMLToSourceMap.get(t).label.toLowerCase().indexOf(a.toLowerCase())?t.classList.add("smart-hidden"):(t.classList.remove("smart-hidden"),n=!1)}),e.$.sortable.disabled=!0,n?t.parentElement.classList.add("no-results"):t.parentElement.classList.remove("no-results")}_sortableDragEndHandler(){this._positionChanged=!0}_localize(){this.$.find.placeholder=this.localize("find"),this.$.buttonsContainer.firstElementChild.innerHTML=this.localize("cancel"),this.$.buttonsContainer.children[1].innerHTML=this.localize("apply"),this.$.container.firstElementChild.setAttribute("no-results",this.localize("noResults"))}_setFocusable(){const e=this.disabled||this.unfocusable?-1:0,t=Array.from(this.$.sortable.getElementsByClassName("toggle-visibility"));this.$.find.tabIndex=e,this.$.clearButton.tabIndex=e,this.$.buttonsContainer.firstElementChild.tabIndex=e,this.$.buttonsContainer.children[1].tabIndex=e,t.forEach(t=>t.tabIndex=t.classList.contains("disable-toggle")?-1:e)}}),Smart("smart-formatting-panel",class extends Smart.BaseElement{static get properties(){return{columns:{value:[],type:"array",reflectToAttribute:!1},dataSource:{value:[],type:"any",reflectToAttribute:!1},items:{value:null,type:"array?",reflectToAttribute:!1},dropDownAppendTo:{value:null,type:"any",reflectToAttribute:!1},messages:{value:{en:{add:"Add condition",all:"All columns",apply:"Ok",between:"Between",cancel:"Cancel",close:"Close",column:"Column:",condition:"Condition:",equal:"Equal To",fontFamily:"Font family:",fontSize:"Font size:",format:"Format:",greaterThan:"Greater Than",highlight:"Highlight",lessThan:"Less Than",notEqual:"Not Equal To",remove:"Remove condition",secondValue:"Second value:",text:"Text",value:"Value:"}},type:"object",extend:!0}}}static get listeners(){return{click:"_interactionHandler",keydown:"_interactionHandler",change:"_changeHandler","popup.change":"_changeHandler","popup.click":"_interactionHandler","popup.keydown":"_interactionHandler","document.down":"_documentDownHandler"}}template(){return'<div id="container" role="presentation">\n                    <div id="itemsContainer" class="smart-formatting-panel-items-container" role="presentation"></div>\n                    <div id="addNewButton" class="smart-add-new-button" role="button" aria-label="Add new condition"></div>\n                    <div id="popup" class="smart-formatting-panel-popup smart-hidden smart-visibility-hidden" role="dialog">\n                        <div id="popupHeader" class="header" role="presentation">\n                            <div id="text" class="selected" role="button" aria-label="Text color"></div>\n                            <div id="highlight" role="button" aria-label="Highlight color"></div>\n                        </div>\n                        <div id="colorCode" class="color-code"></div>\n                        <input id="colorInput" type="color" />\n                        <div id="colorsContainer" class="colors-container"></div>\n                        <smart-button id="apply" class="ok primary" animation="[[animation]]" right-to-left="[[rightToLeft]]" theme="[[theme]]" unfocusable="[[unfocusable]]"></smart-button>\n                        <smart-button id="cancel" class="cancel" animation="[[animation]]" right-to-left="[[rightToLeft]]" theme="[[theme]]" unfocusable="[[unfocusable]]"></smart-button>\n                    </div>\n                </div>'}render(){const e=getComputedStyle(this);this.setAttribute("role","dialog"),this.$.popup.id=this.id+"Popup",this._basicColors=[[0,0,0],[68,68,68],[102,102,102],[153,153,153],[204,204,204],[238,238,238],[243,243,243],[255,255,255],[255,0,0],[255,153,0],[255,255,0],[0,255,0],[0,255,255],[0,0,255],[153,0,255],[255,0,255],[244,204,204],[252,229,205],[255,242,204],[217,234,211],[208,224,227],[207,226,243],[217,210,233],[234,209,220],[234,153,153],[249,203,156],[255,229,153],[182,215,168],[162,196,201],[159,197,232],[180,167,214],[213,166,189],[224,102,102],[246,178,107],[255,217,102],[147,196,125],[118,165,175],[111,168,220],[142,124,195],[194,123,160],[204,0,0],[230,145,56],[241,194,50],[106,168,79],[69,129,142],[61,133,198],[103,78,167],[166,77,121],[153,0,0],[180,95,6],[191,144,0],[56,118,29],[19,79,92],[11,83,148],[53,28,117],[116,27,71],[102,0,0],[120,63,4],[127,96,0],[39,78,19],[12,52,61],[7,55,99],[32,18,77],[76,17,48]],this._defaults={fontFamily:e.fontFamily,fontSize:e.fontSize,text:this._toHex(e.color),highlight:this._toHex(e.backgroundColor)},this._localize(),this._setFocusable(),this._populatePopupWithColors(),this._processColumnsAndDataSource(),this._addDefaultItems(),super.render()}attached(){const e=this;super.attached(),e.isCompleted&&e._addDefaultItemsOnAttach&&e._addDefaultItems()}add(e,t){const a=this;if(e&&e.column&&"all"!==e.column&&!a.columns.find(t=>t.dataField===e.column))return void a.items.splice(t,1);const i=document.createElement("div"),n=a._defaults,l=` animation="${a.animation}"${a.rightToLeft?" right-to-left":""} theme="${a.theme}"${a.unfocusable?" unfocusable":""}`,o=a.disabled||a.unfocusable?"":' tabindex="0"';e=Object.assign({column:"all",condition:"lessThan",firstValue:0,secondValue:1,fontFamily:n.fontFamily,fontSize:n.fontSize,text:n.text,highlight:n.highlight},e);const r=`\n<div class="value-label">${a.localize("value")}</div>\n<smart-input class="columns-input underlined" data-source='${JSON.stringify(a._columnsInputDataSource)}' placeholder="${a.localize("column")}" readonly value="${a._columnsInputDataSource.find(t=>t.value===e.column).label}"${l}></smart-input>\n<smart-input class="condition-input underlined" data-source='${a._conditionsDataSource}' placeholder="${a.localize("condition")}" readonly value="${a.localize(e.condition)}"${l}></smart-input>\n<smart-input class="first-value underlined" type="number" placeholder="${a.localize("value")}" value="${e.firstValue}"${l}></smart-input>\n<div class="ampersand">&</div>\n<smart-input class="second-value underlined" type="number" placeholder="${a.localize("secondValue")}" value="${e.secondValue}"${l}></smart-input>\n<div class="close-button" title="${a.localize("close")}"${o} role="button" aria-label="Close"></div>\n<div class="format-label">${a.localize("format")}</div>\n<smart-input class="font-family-input underlined" drop-down-height="auto" placeholder="${a.localize("fontFamily")}" readonly${l}></smart-input>\n<smart-input class="font-size-input underlined" data-source='["8px", "9px", "10px", "11px", "12px", "13px", "14px", "15px", "16px"]' drop-down-height="auto" placeholder="${a.localize("fontSize")}" readonly value="${e.fontSize}"${l}></smart-input>\n<div class="popup-button smart-unselectable"${o} role="button" aria-haspopup="dialog" aria-label="Toggle pop-up">A</div>\n<div class="preview smart-unselectable">2.71828</div>`;i.classList.add("smart-formatting-panel-item"),i.classList.toggle("between","between"===e.condition),i.innerHTML=r,i.columnsInput=i.querySelector(".columns-input"),i.conditionInput=i.querySelector(".condition-input"),i.firstValue=i.querySelector(".first-value"),i.secondValue=i.querySelector(".second-value"),i.closeButton=i.querySelector(".close-button"),i.fontFamilyInput=i.querySelector(".font-family-input"),i.fontFamilyInput.dataSource=[n.fontFamily,"Arial","Verdana","Courier New","Georgia","Times New Roman"],i.fontFamilyInput.value=e.fontFamily,i.fontSizeInput=i.querySelector(".font-size-input"),i.popupButton=i.querySelector(".popup-button"),i.fontFamilyInput=i.querySelector(".font-family-input"),i.preview=i.querySelector(".preview"),i.popupButton.style.color=e.text,i.popupButton.style.backgroundColor=e.highlight,i.preview.style.fontFamily=e.fontFamily,i.preview.style.fontSize=e.fontSize,i.preview.style.color=e.text,i.preview.style.backgroundColor=e.highlight,i.data=e,a.$.itemsContainer.appendChild(i),i.columnsInput.$.input.dataValue="all",i.conditionInput.$.input.dataValue=e.condition,a._checkScrollBar()}apply(){const e=this,t=new Smart.Utilities.ConditionalFormatter(e.dataSource),a=Array.from(e.$.itemsContainer.children),i=[];let n;if(0===a.length)return;if(e.ownerElement&&"smart-pivot-table"===e.ownerElement.nodeName.toLowerCase()){const t=e.ownerElement._dynamicColumns;n=function(e){return"all"===e?t.map(e=>e.id):t.filter(t=>t.dataFields[t.dataFields.length-1].dataField===e).map(e=>e.id)}}else n=function(t){return"all"===t?e._columns.map(e=>e.value):[t]};for(let e=0;e<a.length;e++){const l=a[e].data,o=n(l.column),r=l.condition;t.color=l.highlight,t.comparator=l.firstValue,t.min=l.firstValue,t.max=l.secondValue;const s=t.format(r,o);for(let e in s){const t=s[e];for(let e in t){const a=t[e];a.color=l.text,a.fontFamily=l.fontFamily,a.fontSize=l.fontSize}}i.push(s)}if(0===i.length)return i[0];const l={};for(let e=0;e<i.length;e++){const t=i[e];for(let e in t){const a=t[e];l[e]||(l[e]={});for(let t in a)l[e][t]=Object.assign({},l[e][t],a[t])}}return l}getItems(){return Array.from(this.$.itemsContainer.children).map(e=>e.data)}propertyChangedHandler(e,t,a){super.propertyChangedHandler(e,t,a);const i=this;switch(e){case"animation":case"theme":case"rightToLeft":if(Array.from(i.$.itemsContainer.querySelectorAll(".smart-element")).forEach(t=>t[e]=a),null!==i.dropDownAppendTo&&(i.$.apply[e]=a,i.$.cancel[e]=a),"theme"===e){const e=getComputedStyle(i);i._defaults.text=i._toHex(e.color),i._defaults.highlight=i._toHex(e.backgroundColor)}break;case"columns":case"items":"columns"===e&&(i._processColumnsAndDataSource(),i.items=null),i.$.itemsContainer.innerHTML="",i._addDefaultItems();break;case"disabled":case"unfocusable":{const t=i.disabled||i.unfocusable,n=Array.from(i.$.itemsContainer.querySelectorAll(".close-button, .popup-button"));"disabled"===e?i._closePopup():null!==i.dropDownAppendTo&&(i.$.apply.unfocusable=a,i.$.cancel.unfocusable=a),i._setFocusable(),Array.from(i.$.itemsContainer.querySelectorAll(".smart-element")).forEach(e=>e.unfocusable=t),t?n.forEach(e=>e.removeAttribute("tabindex")):n.forEach(e=>e.setAttribute("tabindex",0));break}case"dataSource":Smart.DataAdapter&&a instanceof Smart.DataAdapter&&(i.dataSource=a.toArray());break;case"locale":case"messages":i.items=i.getItems(),i.$.itemsContainer.innerHTML="",i._localize(),i._columnsInputDataSource=i._columns.concat([{label:i.localize("all"),value:"all"}]),i._addDefaultItems()}}_populatePopupWithColors(){const e=this,t=e._basicColors,a=document.createDocumentFragment();for(let i=0;i<t.length;i++){const n=document.createElement("div"),l=t[i],o=`rgb(${l[0]}, ${l[1]}, ${l[2]})`,r=e._toHex(o);n.setAttribute("role","button"),n.setAttribute("aria-label","Select color "+r),n.index=i,n.value=r,n.style.backgroundColor=o,a.appendChild(n)}e.$.colorsContainer.appendChild(a)}_processColumnsAndDataSource(){const e=this,t=e.columns,a=e.dataSource,i=[];Smart.DataAdapter&&a instanceof Smart.DataAdapter&&(e.dataSource=a.toArray());for(let e=0;e<t.length;e++){const a=t[e];"number"===a.dataType&&i.push({label:a.label,value:a.dataField})}e._columns=i,e._columnsInputDataSource=i.concat([{label:e.localize("all"),value:"all"}])}_addDefaultItems(){const e=this,t=e.items,a=e.getRootNode();a===document||document.body.contains(a)?(t&&t.length>0?t.forEach((t,a)=>e.add(t,a)):(e.add({condition:"greaterThan",firstValue:100}),e.add({condition:"lessThan",firstValue:0})),delete e._addDefaultItemsOnAttach):e._addDefaultItemsOnAttach=!0}_changeHandler(e){const t=this,a=t.isInShadowDOM?e.composedPath()[0]:e.target,i=a.closest(".smart-formatting-panel-item");if(i)if(a!==i.columnsInput){if(a===i.conditionInput)return i.data.condition=a.$.input.dataValue,void i.classList.toggle("between","between"===a.$.input.dataValue);if(i.firstValue.contains(a))i.data.firstValue=parseFloat(a.value);else{if(!i.secondValue.contains(a))return a===i.fontFamilyInput?(i.data.fontFamily=a.value,void(i.preview.style.fontFamily=a.value)):void(a===i.fontSizeInput&&(i.data.fontSize=a.value,i.preview.style.fontSize=a.value));i.data.secondValue=parseFloat(a.value)}}else i.data.column=a.$.input.dataValue;else{t.$.popup.contains(a)&&t._updateUI(a.value.toUpperCase())}}_checkScrollBar(){this.classList.toggle("scroll",this.$.itemsContainer.offsetHeight<this.$.itemsContainer.scrollHeight)}_interactionHandler(e){const t=this;if(!t.dropDownAppendTo&&e.currentTarget===t.$.popup)return;if("keydown"===e.type){if(-1===[" ","Enter"].indexOf(e.key))return void(t.disabled||t.readonly||t._keydownHandler(e));e.preventDefault()}const a=t.isInShadowDOM?e.composedPath()[0]:e.target;if(a===t.$.addNewButton)return void t.add();const i=a.closest(".smart-formatting-panel-item");if(i)return void(a===i.closeButton?(i.remove(),this._checkScrollBar()):a===i.popupButton&&(t._togglePopup(i),t._activePopupButton=a));const n=t.$.popup;if(n.contains(a)){if(a.parentElement===t.$.colorsContainer)return void t._updateUI(a.value);if(a.parentElement===t.$.popupHeader)a.classList.add("selected"),a===t.$.text?(n.selection="currentText",t.$.highlight.classList.remove("selected")):(n.selection="currentHighlight",t.$.text.classList.remove("selected")),t._updateUI(n[n.selection]);else if(a.classList.contains("smart-button")){if(t.$.apply.contains(a)){const e=n.item;e.data.text=n.currentText,e.data.highlight=n.currentHighlight,e.popupButton.style.color=n.currentText,e.popupButton.style.backgroundColor=n.currentHighlight,e.preview.style.color=n.currentText,e.preview.style.backgroundColor=n.currentHighlight}t._closePopup()}}}_keydownHandler(e){const t=this,a=e.key;if(-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Escape","Home","PageDown","PageUp"].indexOf(a))return;if(e.preventDefault(),"Escape"===a&&!t.$.popup.classList.contains("smart-hidden"))return void t._closePopup();if(t.getRootNode().activeElement!==t.$.colorsContainer)return;const i=Array.from(this.$.colorsContainer.children),n=this.$.colorsContainer.querySelector(".selected");let l,o="ArrowRight",r="ArrowLeft";if(t.rightToLeft&&(o="ArrowLeft",r="ArrowRight"),n){let e=n.index;switch(a){case r:e=Math.max(e-1,e-e%8);break;case o:e=Math.min(e+1,e+8-e%8-1);break;case"ArrowUp":e=Math.max(e-8,e%8);break;case"ArrowDown":e=Math.min(e+8,56+e%8);break;case"Home":e-=e%8;break;case"End":e=e+8-e%8-1;break;case"PageUp":e%=8;break;case"PageDown":e=56+e%8}l=i[e]}else l=i[0];t._updateUI(l.value,l)}_togglePopup(e){const t=this,a=t.$.popup;if(e===a.item)return void t._closePopup();if(a.setAttribute("animation",t.animation),a.setAttribute("theme",t.theme),t.rightToLeft&&a.setAttribute("right-to-left",""),a.classList.contains("smart-hidden")&&a.classList.remove("smart-hidden"),t.dropDownAppendTo)if("body"===t.dropDownAppendTo)document.body.appendChild(a);else{const e=document.querySelector(t.dropDownAppendTo);e&&e.appendChild(a)}const i=e.popupButton,n=i.getBoundingClientRect(),l=i.offsetLeft,o=i.offsetTop,r=a.offsetWidth,s=a.offsetHeight,d=t.$.itemsContainer.scrollTop,c=t._toHex(e.data.text),u=t._toHex(e.data.highlight);n.top>=s+5?a.style.top=o-(s+d+5)+"px":a.style.top=o+n.height-d+5+"px",a.style.left=l+n.width/2-r/2+"px",t.dropDownAppendTo&&(a.style.top=n.bottom+5+"px",a.style.left=n.left+n.width/2-r/2+"px"),t.$.text.classList.add("selected"),t.$.highlight.classList.remove("selected"),t.$.text.focus(),a.item=e,a.selection="currentText",a.currentText=c,a.currentHighlight=u,t._updateUI(c),a.controlledBy&&(a.controlledBy.removeAttribute("aria-controls"),a.controlledBy.removeAttribute("aria-expanded")),i.setAttribute("aria-controls",a.id),i.setAttribute("aria-expanded",!0),a.controlledBy=i,a.classList.remove("smart-visibility-hidden")}_closePopup(){const e=this,t=e.$.popup;"none"!==e.animation?(t.addEventListener("transitionend",(function e(){t.classList.add("smart-hidden"),t.removeEventListener("transitionend",e)})),t.classList.add("smart-visibility-hidden")):(t.classList.add("smart-visibility-hidden"),t.classList.add("smart-hidden")),delete t.item,e._activePopupButton&&e._activePopupButton.focus(),t.controlledBy&&(t.controlledBy.removeAttribute("aria-controls"),t.controlledBy.removeAttribute("aria-expanded"))}_toHex(e){if(-1!==e.indexOf("#"))return e;const t=/rgb\((\d+), (\d+), (\d+)\)/g.exec(e);return t?"#"+(parseFloat(t[1]).toString(16).padStart(2,"0")+parseFloat(t[2]).toString(16).padStart(2,"0")+parseFloat(t[3]).toString(16).padStart(2,"0")).toUpperCase():"#FFFFFF"}_updateUI(e,t){this.$.colorInput.value=e,this.$.colorCode.innerHTML=e,this._selectColor(e,t)}_selectColor(e,t){const a=this.$.popup,i=Array.from(this.$.colorsContainer.children);i.forEach(e=>e.classList.remove("selected")),(t=t||i.find(t=>t.value===e))&&t.classList.add("selected"),a[a.selection]=e}_localize(){this._conditionsDataSource=JSON.stringify([{label:this.localize("lessThan"),value:"lessThan"},{label:this.localize("greaterThan"),value:"greaterThan"},{label:this.localize("equal"),value:"equal"},{label:this.localize("notEqual"),value:"notEqual"},{label:this.localize("between"),value:"between"}]),this.$.text.innerHTML=this.localize("text"),this.$.highlight.innerHTML=this.localize("highlight"),this.$.apply.innerHTML=this.localize("apply"),this.$.cancel.innerHTML=this.localize("cancel"),this.$.addNewButton.title=this.localize("add")}_setFocusable(){const e=this,t=!e.disabled&&!e.unfocusable,a=[e.$.addNewButton,e.$.text,e.$.highlight,e.$.colorsContainer];t?(a.forEach(e=>e.setAttribute("tabindex",0)),e.$.colorInput.removeAttribute("tabindex")):(a.forEach(e=>e.removeAttribute("tabindex")),e.$.colorInput.setAttribute("tabindex",-1))}_documentDownHandler(e){const t=this,a=t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target,i=t.$.popup;i.classList.contains("smart-hidden")||i.contains(a)||a.classList.contains("popup-button")||(delete t._activePopupButton,t._closePopup())}}),Smart("smart-data-view",class extends Smart.BaseElement{static get properties(){return{addNewButton:{value:!1,type:"boolean"},allowDrag:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},columns:{value:[],type:"object",reflectToAttribute:!1},dataSource:{value:null,type:"object?",reflectToAttribute:!1},editable:{value:!1,type:"boolean"},headerPosition:{value:"none",allowedValues:["none","top","bottom"],type:"string"},messages:{value:{en:{addFilter:"+ Add filter",and:"And",apply:"Ok",booleanFirst:"☐",booleanLast:"☑",cancel:"Cancel",CONTAINS:"contains",CONTAINS_CASE_SENSITIVE:"contains (case sensitive)",dateFirst:"1",dateLast:"9",DOES_NOT_CONTAIN:"does not contain",DOES_NOT_CONTAIN_CASE_SENSITIVE:"does not contain (case sensitive)",EMPTY:"empty",ENDS_WITH:"ends with",ENDS_WITH_CASE_SENSITIVE:"ends with (case sensitive)",EQUAL:"equal",EQUAL_CASE_SENSITIVE:"equal (case sensitive)",filter:"Filter",customize:"Customize Columns",filteredByMultiple:"{{n}} filters",filteredByOne:"1 filter",filterValuePlaceholder:"Value",find:"Find a field",findInView:"Find in view",firstBy:"Sort by",found:"{{nth}} of {{n}}",from:"from",GREATER_THAN:"greater than",GREATER_THAN_OR_EQUAL:"greater than or equal",LESS_THAN:"less than",LESS_THAN_OR_EQUAL:"less than or equal",noFilters:"No filters applied",noResults:"No results",noSorting:"No sorting applied",NOT_EMPTY:"not empty",NOT_EQUAL:"not equal",NOT_NULL:"not null",NULL:"null",numberFirst:"1",numberLast:"9",ok:"OK",or:"Or",pickAnother:"Pick another field to sort by",sort:"Sort",group:"Group",fontFamily:"Font family:",fontSize:"Font size:",format:"Format:",formatColumn:"Format Column",formating:"Conditional Formating",sortedByMultiple:"Sorted by {{n}} fields",sortedByOne:"Sorted by 1 field",STARTS_WITH:"starts with",STARTS_WITH_CASE_SENSITIVE:"starts with (case sensitive)",stringFirst:"A",stringLast:"Z",thenBy:"then by",where:"Where",collapseAll:"Collapse all",expandAll:"Expand all",noGrouping:"No grouping",groupedByMultiple:"{{n}} groups",groupedByOne:"1 group",firstByGroup:"Group by",pickAnotherGroupBy:"Pick another field to group by",add:"Add condition",all:"All columns",between:"Between",close:"Close",column:"Column:",condition:"Condition:",equal:"Equal To",greaterThan:"Greater Than",highlight:"Highlight",lessThan:"Less Than",notEqual:"Not Equal To",remove:"Remove condition",secondValue:"Second value:",text:"Text",value:"Value:"}}}}}static get listeners(){return{"header.apply":"_applyHandler","header.cancel":"closePanel","headerDropDown.transitionend":"_headerDropDownTransitionendHandler","searchInput.keyup":"_searchInputKeyupHandler",resize:"_resizeHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}render(){const e=this;e.$.headerDropDown.id||(e.$.headerDropDown.id=e.id+"HeaderDropDown"),e.setAttribute("role","group"),e._isMobile=Smart.Utilities.Core.isMobile,super.render()}addFilter(e,t="and"){if(!Array.isArray(e)||e.length>0&&!Array.isArray(e[0]))return;let a;this.closePanel(),arguments[2]?a={filters:arguments[2],operator:t}:(a={filters:[],operator:t},e.forEach(e=>{e[1].filters.forEach(t=>{a.filters.push([e[0],t.condition,t.value])})})),JSON.stringify(a)!==JSON.stringify(this._appliedFiltering)&&(a.filterGroups=e,this._appliedFiltering=a,this._applyFilter(e,t),this.$.fireEvent("filter"),this._refreshFilterButton())}_refreshFilterButton(){const e=this,t=e._appliedFiltering.filters?e._appliedFiltering.filters.length:0;if(0===t)return e.$.filterButton.firstElementChild.innerHTML=e.localize("filter"),void e.$.filterButton.classList.remove("filtered");e.$.filterButton.firstElementChild.innerHTML=1===t?e.localize("filteredByOne"):e.localize("filteredByMultiple",{n:t}),e.$.filterButton.classList.add("filtered")}addSort(e,t){const a=this,i=a.dataSource,n=JSON.stringify(a._appliedSorting);let l;function o(e,n){if(a.columns.find(t=>t.dataField===e)){let a=Array.isArray(t)?t[n]:"string"==typeof t?t:"ascending";l.dataFields.push(e),l.dataTypes.push(i.dataFields.find(t=>t.name===e).dataType),a=a&&-1!==a.indexOf("desc")?"descending":"ascending",l.orderBy.push(a)}}if(0!==arguments.length&&i&&0!==i.length){if(a.closePanel(),1===arguments.length&&"object"==typeof e)l=e;else if(l={dataFields:[],dataTypes:[],orderBy:[]},Array.isArray(e))e.forEach(o);else{if("string"!=typeof e)return;o(e,0)}a.closePanel(),a._appliedSorting=l,n!==JSON.stringify(a._appliedSorting)&&(a._applySort(),a.$.fireEvent("sort"),a._refreshSortButton())}}_refreshSortButton(){const e=this,t=e._appliedSorting.dataFields.length;if(0===t)return e.$.sortButton.firstElementChild.innerHTML=e.localize("sort"),void e.$.sortButton.classList.remove("sorted");e.$.sortButton.firstElementChild.innerHTML=1===t?e.localize("sortedByOne"):e.localize("sortedByMultiple",{n:t}),e.$.sortButton.classList.add("sorted")}closePanel(){const e=this.$.headerDropDown;e.classList.remove("open"),setTimeout(()=>{e.classList.add("smart-visibility-hidden")},150),this._closeSearchPanel(),e.controlledBy&&(e.controlledBy.removeAttribute("aria-controls"),e.controlledBy.setAttribute("aria-expanded",!1),delete e.controlledBy)}_closeSearchPanel(){const e=this;e._searchInfo&&delete e._searchInfo}_closeDialog(){const e=this;e._editInfo&&e._editInfo.window.close()}openFormatPanel(){}openFilterPanel(e,t){const a=this,i=a.dataSource;if(!i||0===i.length&&!i.virtualDataSource||a.disabled||"none"===a.headerPosition)return;let n;a._editInfo&&a._editInfo.window.close(),a.$.headerDropDown.classList.add("filter-panel"),a.$.headerDropDown.classList.remove("customize-panel","sort-panel","search-panel","format-panel"),a.$.filter.classList.remove("smart-hidden"),a.$.customize.classList.add("smart-hidden"),a.$.sort.classList.add("smart-hidden"),a.$.format&&a.$.format.classList.add("smart-hidden"),a.$.group&&a.$.group.classList.add("smart-hidden"),a.$.search.classList.add("smart-hidden"),a._closeSearchPanel(),a._filterPartCreated?(n=a.$.filter.firstElementChild,n.set("operator",a._appliedFiltering.operator),n.set("value",a._appliedFiltering.filters),n._applyValue(),n.rightToLeft=a.rightToLeft):(n=document.createElement("smart-multi-column-filter-panel"),n.rightToLeft=a.rightToLeft,n.animation=a.animation,n.dataSource=e,n.locale=a.locale,n.messages=a._innerElementMessages.multiColumnFilterPanel,n.operator=a._appliedFiltering.operator,n.editorPlaceholder=a.localize("filterValuePlaceholder"),n.theme=a.theme,n.value=a._appliedFiltering.filters,n.editorCallback=t,a.$.filter.appendChild(n),a._filterPartCreated=!0),a._openHeaderDropDown(a.$.filterButton)}openSortPanel(e){const t=this,a=t.dataSource;if(!a||0===a.length&&!a.virtualDataSource||t.disabled||"none"===t.headerPosition)return;let i;t._closeDialog(),t.$.headerDropDown.classList.add("sort-panel"),t.$.headerDropDown.classList.remove("customize-panel","filter-panel","format-panel","search-panel"),t.$.sort.classList.remove("smart-hidden"),t.$.customize.classList.add("smart-hidden"),t.$.filter.classList.add("smart-hidden"),t.$.format&&t.$.format.classList.add("smart-hidden"),t.$.group&&t.$.group.classList.add("smart-hidden"),t.$.search.classList.add("smart-hidden"),t._closeSearchPanel(),t._sortPartCreated?(i=t.$.sort.firstElementChild,i.rightToLeft=t.rightToLeft,i.set("dataSource",e),i.propertyChangedHandler("dataSource",void 0,e)):(i=document.createElement("smart-sort-panel"),i.rightToLeft=t.rightToLeft,i.animation=t.animation,i.dataSource=e,i.locale=t.locale,i.messages=t._innerElementMessages.sortPanel,i.theme=t.theme,t.$.sort.appendChild(i),t._sortPartCreated=!0),t._openHeaderDropDown(t.$.sortButton)}removeFilter(){this.addFilter([])}removeSort(){this.addSort({dataFields:[],dataTypes:[],orderBy:[]})}_clearFilterAndSortUI(){this._appliedFiltering={filterGroups:[],filters:[],operator:"and"},this._appliedSorting={dataFields:[],dataTypes:[],orderBy:[]},this._appliedGrouping={dataFields:[]},this.$.filterButton.classList.remove("filtered"),this.$.sortButton.classList.remove("sorted"),this.$.filterButton.firstElementChild.innerHTML=this.localize("filter"),this.$.sortButton.firstElementChild.innerHTML=this.localize("sort")}_getInnerElementMessages(){const e=this.locale,t={columnPanel:{},groupPanel:{},multiColumnFilterPanel:{},sortPanel:{},formattingPanel:{},dateTimePicker:{}};t.formattingPanel[e]={add:this.localize("add"),all:this.localize("all"),apply:this.localize("apply"),between:this.localize("between"),cancel:this.localize("cancel"),close:this.localize("close"),column:this.localize("column"),condition:this.localize("condition"),equal:this.localize("equal"),fontFamily:this.localize("fontFamily"),fontSize:this.localize("fontSize"),format:this.localize("format"),greaterThan:this.localize("greaterThan"),highlight:this.localize("highlight"),lessThan:this.localize("lessThan"),notEqual:this.localize("notEqual"),remove:this.localize("remove"),secondValue:this.localize("secondValue"),text:this.localize("text"),value:this.localize("value")},t.columnPanel[e]={apply:this.localize("apply"),cancel:this.localize("cancel"),find:this.localize("find"),noResults:this.localize("noResults")},t.groupPanel[e]={apply:this.localize("apply"),cancel:this.localize("cancel"),collapseAll:this.localize("collapseAll"),expandAll:this.localize("expandAll"),firstBy:this.localize("firstByGroup"),noGrouping:this.localize("noGrouping"),pickAnother:this.localize("pickAnotherGroupBy"),stringFirst:this.localize("stringFirst"),stringLast:this.localize("stringLast"),thenBy:this.localize("thenBy"),from:this.localize("from"),booleanFirst:this.localize("booleanFirst"),booleanLast:this.localize("booleanLast"),dateFirst:this.localize("dateFirst"),dateLast:this.localize("dateLast"),numberFirst:this.localize("numberFirst"),numberLast:this.localize("numberLast")},t.multiColumnFilterPanel[e]={addFilter:this.localize("addFilter"),and:this.localize("and"),apply:this.localize("apply"),cancel:this.localize("cancel"),CONTAINS:this.localize("CONTAINS"),CONTAINS_CASE_SENSITIVE:this.localize("CONTAINS_CASE_SENSITIVE"),DOES_NOT_CONTAIN:this.localize("DOES_NOT_CONTAIN"),DOES_NOT_CONTAIN_CASE_SENSITIVE:this.localize("DOES_NOT_CONTAIN_CASE_SENSITIVE"),EMPTY:this.localize("EMPTY"),ENDS_WITH:this.localize("ENDS_WITH"),ENDS_WITH_CASE_SENSITIVE:this.localize("ENDS_WITH_CASE_SENSITIVE"),EQUAL:this.localize("EQUAL"),EQUAL_CASE_SENSITIVE:this.localize("EQUAL_CASE_SENSITIVE"),GREATER_THAN:this.localize("GREATER_THAN"),GREATER_THAN_OR_EQUAL:this.localize("GREATER_THAN_OR_EQUAL"),LESS_THAN:this.localize("LESS_THAN"),LESS_THAN_OR_EQUAL:this.localize("LESS_THAN_OR_EQUAL"),noFilters:this.localize("noFilters"),NOT_EMPTY:this.localize("NOT_EMPTY"),NOT_EQUAL:this.localize("NOT_EQUAL"),NOT_NULL:this.localize("NOT_NULL"),NULL:this.localize("NULL"),or:this.localize("or"),STARTS_WITH:this.localize("STARTS_WITH"),STARTS_WITH_CASE_SENSITIVE:this.localize("STARTS_WITH_CASE_SENSITIVE"),where:this.localize("where")},t.sortPanel[e]={apply:this.localize("apply"),booleanFirst:this.localize("booleanFirst"),booleanLast:this.localize("booleanLast"),cancel:this.localize("cancel"),dateFirst:this.localize("dateFirst"),dateLast:this.localize("dateLast"),firstBy:this.localize("firstBy"),from:this.localize("from"),numberFirst:this.localize("numberFirst"),numberLast:this.localize("numberLast"),noSorting:this.localize("noSorting"),pickAnother:this.localize("pickAnother"),stringFirst:this.localize("stringFirst"),stringLast:this.localize("stringLast"),thenBy:this.localize("thenBy")},t.dateTimePicker[e]={now:this.localize("now"),dateTabLabel:this.localize("dateTabLabel"),timeTabLabel:this.localize("timeTabLabel")},this._innerElementMessages=t}_handleHeaderPosition(e){const t=this,a=t.headerPosition,i=t.$.header;"none"!==a?(i.classList.remove("smart-hidden"),"top"===a&&i.nextElementSibling!==e?t.$.container.insertBefore(i,e):"bottom"===a&&i.previousElementSibling!==e&&t.$.container.insertBefore(i,t.$.loadingIndicatorContainer)):i.classList.add("smart-hidden")}_headerClickHandler(e){const t=this,a=t.$.headerDropDown;function i(e,i){a.classList.contains("smart-visibility-hidden")||e.classList.contains("smart-hidden")?t[i]():t.closePanel()}if(t.$.customizeButton.contains(e))i(t.$.customize,"openCustomizePanel");else if(t.$.filterButton.contains(e))i(t.$.filter,"openFilterPanel");else if(t.$.sortButton.contains(e))i(t.$.sort,"openSortPanel");else if(t.$.formatButton&&t.$.formatButton.contains(e))i(t.$.format,"openFormatPanel");else if(e===t.$.searchButton)i(t.$.search,"_openSearchPanel");else if(t.$.groupButton&&t.$.groupButton.contains(e))i(t.$.group,"openGroupPanel");else if(e===t.$.searchClose)t.closePanel();else if(e===t.$.searchPrev||e===t.$.searchNext){const a=t._searchInfo,i=a.foundIdsArray,n=e===t.$.searchNext,l=i.length;let o;if(void 0===a.highlighted)o=n?0:l-1;else{if(1===i.length)return;{const e=i.indexOf(a.highlighted);o=n?(e+1)%l:e-1>=0?e-1:l-1}}a.highlighted=i[o],t.grid?(t.grid.highlighted=a.highlighted,t.grid.ensureVisible(a.highlighted),t.grid._recycle(!1)):t.ensureVisible&&t.ensureVisible(a.highlighted),t.$.searchLabel.innerHTML=t.localize("found",{nth:o+1,n:i.length})}}_headerDropDownTransitionendHandler(e){const t=this,a=t.$.headerDropDown;e&&("visibility"!==e.propertyName||a.classList.contains("smart-visibility-hidden"))||(a.classList.contains("search-panel")?t.$.searchInput.focus():!1===t.unfocusable&&(!t._isMobile&&a.classList.contains("customize-panel")?a.querySelector("smart-column-panel").$.find.focus():a.classList.contains("filter-panel")?a.querySelector("smart-multi-column-filter-panel").$.addFilterButton.focus():a.classList.contains("sort-panel")&&a.querySelector("smart-sort-panel").$.inputNotSorted.focus()))}_localizeHeader(){const e=this;e.$.customizeButton.firstElementChild.innerHTML=e.localize("customize"),e.$.groupButton&&(e.$.groupButton.firstElementChild.innerHTML=e.localize("group")),0===e._appliedFiltering.filters.length?e.$.filterButton.firstElementChild.innerHTML=e.localize("filter"):1===e._appliedFiltering.filters.length?e.$.filterButton.firstElementChild.innerHTML=e.localize("filteredByOne"):e.$.filterButton.firstElementChild.innerHTML=e.localize("filteredByMultiple",{n:e._appliedFiltering.filters.length}),0===e._appliedSorting.dataFields.length?e.$.sortButton.firstElementChild.innerHTML=e.localize("sort"):1===e._appliedSorting.dataFields.length?e.$.sortButton.firstElementChild.innerHTML=e.localize("sortedByOne"):e.$.sortButton.firstElementChild.innerHTML=e.localize("sortedByMultiple",{n:e._appliedSorting.dataFields.length}),e.$.formatButton&&(e.$.formatButton.firstElementChild.innerHTML=e.localize("formating")),e.$.searchInput.placeholder=e.localize("findInView")}_openHeaderDropDown(e){const t=this,a=t.$.headerDropDown;"top"===t.headerPosition?(a.style.bottom=null,a.style.top="100%"):(a.style.top=null,a.style.bottom="100%"),e!==t.$.searchButton?a.style.left=e.offsetLeft-(t.rightToLeft?a.offsetWidth-e.offsetWidth:0)+"px":a.style.left=(t.rightToLeft?e.offsetLeft:e.offsetLeft+Math.max(25,e.offsetWidth)-a.offsetWidth)+"px",a.classList.remove("smart-visibility-hidden"),a.classList.add("open"),a.controlledBy&&(a.controlledBy.removeAttribute("aria-controls"),a.controlledBy.setAttribute("aria-expanded",!1)),a.controlledBy=e,e.setAttribute("aria-controls",a.id),e.setAttribute("aria-expanded",!0),t._headerDropDownTransitionendHandler()}_searchInputKeyupHandler(){const e=this;function t(){e._searchInfo&&e.$.searchInput.value!==e._searchInfo.query&&e._search(e.$.searchInput.value)}if(clearTimeout(e._searchInputTimeout),"Enter"===event.key&&e._searchInfo.foundIdsArray&&e._searchInfo.foundIdsArray.length>1)return t(),void e._headerClickHandler(e.$.searchNext,e.$.cardContainer||e.$.body);e._searchInputTimeout=setTimeout(t,500)}})}});