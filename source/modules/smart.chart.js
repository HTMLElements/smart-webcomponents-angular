/*!
 * 
 * /* Smart HTML Elements v7.3.0 (2020-Apr) 
 * Copyright (c) 2011-2020 jQWidgets. 
 * License: https://htmlelements.com/license/ * /
 * 
 * 
 */!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=94)}({0:function(e,t){function r(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function n(e){return function(){var t,r=f(e);if(c()){var i=f(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)}}function o(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return d(e,arguments,f(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),h(i,e)})(e)}function d(e,t,r){return(d=c()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&h(a,r.prototype),a}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),e}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==y(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=37)}({37:function(e,t){!function(){"use strict";var e=[],t="Smart";if(window[t]&&window[t].Version){if("7.2.0"===window[t].Version)return;if("7.2.0"!==window[t].Version)t+="7.2.0";else for(var i=2;window[t];)t+=i.toString(),i++}var d=navigator.userAgent.indexOf("Edge")>-1&&navigator.appVersion.indexOf("Edge")>-1;document.elementsFromPoint||(document.elementsFromPoint=document.msElementsFromPoint);var c=function(){function e(){p(this,e)}return m(e,null,[{key:"isBoolean",value:function(e){return"boolean"==typeof e}},{key:"isFunction",value:function(e){return!!(e&&e.constructor&&e.call&&e.apply)}},{key:"isArray",value:function(e){return Array.isArray(e)}},{key:"isObject",value:function(e){return e&&("object"==y(e)||this.isFunction(e))||!1}},{key:"isDate",value:function(e){return e instanceof Date}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"getType",value:function(e){var t=this,r=["Boolean","Number","String","Function","Array","Date","Object"].find((function(r){if(t["is"+r](e))return r}));return r?r.toLowerCase():void 0}}]),e}(),h=function(){function e(){p(this,e)}return m(e,null,[{key:"animate",value:function(e,r,i,a){var n=e;if(n&&n instanceof HTMLElement!=0){if(0===n.getElementsByClassName("smart-ripple").length){var o=document.createElement("span");o.classList.add("smart-ripple"),o.setAttribute("role","presentation");var s=!0,l=null;if(window[t].EnableShadowDOM&&n.enableShadowDOM&&!0!==n.isInShadowDOM){for(var u=0;u<n.shadowRoot.host.shadowRoot.children.length;u++)"link"!==n.shadowRoot.host.shadowRoot.children[u].tagName.toLowerCase()&&(l=n.shadowRoot.host.shadowRoot.children[u]);n.shadowRoot.host.shadowRoot.querySelector(".smart-ripple")&&(s=!1)}else l=n.firstElementChild;s&&(l&&!l.noRipple&&l.offsetHeight>0?l.appendChild(o):n.appendChild(o))}var d=null;if(d=window[t].EnableShadowDOM&&n.shadowRoot?n.shadowRoot.host.shadowRoot.querySelector(".smart-ripple"):n.getElementsByClassName("smart-ripple")[0]){d.innerHTML="",d.classList.remove("smart-animate"),d.style.height=d.style.width=Math.max(n.offsetHeight,n.offsetWidth)+"px";var c=window.getComputedStyle(d.parentElement),h=parseInt(c.borderLeftWidth)||0,f=parseInt(c.borderTopWidth)||0,p=n.getBoundingClientRect(),v=r-(p.left+window.pageXOffset)-d.offsetWidth/2-h,m=i-(p.top+window.pageYOffset)-d.offsetHeight/2-f;d.style.left=v+"px",d.style.top=m+"px",d.classList.add("smart-animate"),d.addEventListener("animationend",(function e(){d.parentElement&&d.parentElement.removeChild(d),a&&a(),d.removeEventListener("animationend",e),d.removeEventListener("animationcancel",e)})),d.addEventListener("animationcancel",(function e(){d.parentElement&&d.parentElement.removeChild(d),a&&a(),d.removeEventListener("animationcancel",e),d.removeEventListener("animationend",e)}))}}}}]),e}(),v=function(){function e(){p(this,e)}return m(e,null,[{key:"easeInQuad",value:function(e,t,r,i){return r*(e/=i)*e+t}},{key:"easeOutQuad",value:function(e,t,r,i){return-r*(e/=i)*(e-2)+t}},{key:"easeInOutQuad",value:function(e,t,r,i){return(e/=i/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t}},{key:"easeInCubic",value:function(e,t,r,i){return r*(e/=i)*e*e+t}},{key:"easeOutCubic",value:function(e,t,r,i){return r*((e=e/i-1)*e*e+1)+t}},{key:"easeInOutCubic",value:function(e,t,r,i){return(e/=i/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t}},{key:"easeInQuart",value:function(e,t,r,i){return r*(e/=i)*e*e*e+t}},{key:"easeOutQuart",value:function(e,t,r,i){return-r*((e=e/i-1)*e*e*e-1)+t}},{key:"easeInOutQuart",value:function(e,t,r,i){return(e/=i/2)<1?r/2*e*e*e*e+t:-r/2*((e-=2)*e*e*e-2)+t}},{key:"easeInQuint",value:function(e,t,r,i){return r*(e/=i)*e*e*e*e+t}},{key:"easeOutQuint",value:function(e,t,r,i){return r*((e=e/i-1)*e*e*e*e+1)+t}},{key:"easeInOutQuint",value:function(e,t,r,i){return(e/=i/2)<1?r/2*e*e*e*e*e+t:r/2*((e-=2)*e*e*e*e+2)+t}},{key:"easeInSine",value:function(e,t,r,i){return-r*Math.cos(e/i*(Math.PI/2))+r+t}},{key:"easeOutSine",value:function(e,t,r,i){return r*Math.sin(e/i*(Math.PI/2))+t}},{key:"easeInOutSine",value:function(e,t,r,i){return-r/2*(Math.cos(Math.PI*e/i)-1)+t}},{key:"easeInExpo",value:function(e,t,r,i){return 0===e?t:r*Math.pow(2,10*(e/i-1))+t}},{key:"easeOutExpo",value:function(e,t,r,i){return e===i?t+r:r*(1-Math.pow(2,-10*e/i))+t}},{key:"easeInOutExpo",value:function(e,t,r,i){return 0===e?t:e===i?t+r:(e/=i/2)<1?r/2*Math.pow(2,10*(e-1))+t:r/2*(2-Math.pow(2,-10*--e))+t}},{key:"easeInCirc",value:function(e,t,r,i){return-r*(Math.sqrt(1-(e/=i)*e)-1)+t}},{key:"easeOutCirc",value:function(e,t,r,i){return r*Math.sqrt(1-(e=e/i-1)*e)+t}},{key:"easeInOutCirc",value:function(e,t,r,i){return(e/=i/2)<1?-r/2*(Math.sqrt(1-e*e)-1)+t:r/2*(Math.sqrt(1-(e-=2)*e)+1)+t}},{key:"easeInElastic",value:function(e,t,r,i){var a=1.70158,n=0,o=r;return 0===e?t:1==(e/=i)?t+r:(n||(n=.3*i),o<Math.abs(r)?(o=r,a=n/4):a=n/(2*Math.PI)*Math.asin(r/o),-o*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/n)+t)}},{key:"easeOutElastic",value:function(e,t,r,i){var a=1.70158,n=0,o=r;return 0===e?t:1==(e/=i)?t+r:(n||(n=.3*i),o<Math.abs(r)?(o=r,a=n/4):a=n/(2*Math.PI)*Math.asin(r/o),o*Math.pow(2,-10*e)*Math.sin((e*i-a)*(2*Math.PI)/n)+r+t)}},{key:"easeInOutElastic",value:function(e,t,r,i){var a=1.70158,n=0,o=r;return 0===e?t:2==(e/=i/2)?t+r:(n||(n=i*(.3*1.5)),o<Math.abs(r)?(o=r,a=n/4):a=n/(2*Math.PI)*Math.asin(r/o),e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/n)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/n)*.5+r+t)}},{key:"easeInBack",value:function(e,t,r,i,a){return void 0===a&&(a=1.70158),r*(e/=i)*e*((a+1)*e-a)+t}},{key:"easeOutBack",value:function(e,t,r,i,a){return void 0===a&&(a=1.70158),r*((e=e/i-1)*e*((a+1)*e+a)+1)+t}},{key:"easeInOutBack",value:function(e,t,r,i,a){return void 0===a&&(a=1.70158),(e/=i/2)<1?r/2*(e*e*((1+(a*=1.525))*e-a))+t:r/2*((e-=2)*e*((1+(a*=1.525))*e+a)+2)+t}},{key:"easeInBounce",value:function(e,t,r,i){return r-this.easeOutBounce(i-e,0,r,i)+t}},{key:"easeOutBounce",value:function(e,t,r,i){return(e/=i)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t}},{key:"easeInOutBounce",value:function(e,t,r,i){return e<i/2?.5*this.easeInBounce(2*e,0,r,i)+t:.5*this.easeOutBounce(2*e-i,0,r,i)+.5*r+t}}]),e}(),g=function(){function e(){p(this,e)}return m(e,null,[{key:"toCamelCase",value:function(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}},{key:"toDash",value:function(e){return e.split(/(?=[A-Z])/).join("-").toLowerCase()}},{key:"unescapeHTML",value:function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}},{key:"escapeHTML",value:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))}},{key:"createGUID",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"getScriptLocation",value:function(){return"./"!==window[t].BaseUrl?window[t].BaseUrl:function(){if(document.currentScript){var e=document.currentScript.src,t=e.lastIndexOf("/");return e=e.substring(0,t)}var r=new Error,i="(",a=")";if(Smart.Utilities.Core.Browser.Safari&&(i="@",a="\n"),r.fileName)return r.fileName.replace("/smart.element.js","");var n=r.stack.split(i);return(n=(n=(n=n[1]).split(a)[0]).split(":")).splice(-2,2),(n=n.join(":")).replace("/smart.element.js","")}()}},{key:"CSSVariablesSupport",value:function(){return window.CSS&&window.CSS.supports&&window.CSS.supports("(--fake-var: 0)")}},{key:"assign",value:function(e,t){var r=this,i=function(e){return e&&"object"==y(e)&&!Array.isArray(e)&&null!==e},a=Object.assign({},e);return i(e)&&i(t)&&Object.keys(t).forEach((function(n){var o,s,l;i(t[n])&&n in e?a[n]=r.assign(e[n],t[n]):Object.assign(a,(o={},s=n,l=t[n],s in o?Object.defineProperty(o,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[s]=l,o))})),a}},{key:"html",value:function(e,t){var r="",i=e.childNodes;if(!t){for(var a,n=0,o=i.length;n<o&&(a=i[n]);n++){if(a instanceof HTMLElement||a.tagName&&["strong"].indexOf(a.tagName.toLowerCase())>=0){for(var s,l=a.tagName.toLowerCase(),u=a.attributes,d="<"+l,c=0;s=u[c];c++)d+=" "+s.name+'="'+s.value.replace(/[&\u00A0"]/g,M.Core.escapeHTML)+'"';d+=">",["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"][l]&&(r+=d),r=r+d+this.html(a)+"</"+l+">"}else{if(8===a.nodeType)continue;r+=a.textContent.replace(/[&\u00A0<>]/g,M.Core.escapeHTML)}}return r}e.innerHTML=t.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")}},{key:"isMobile",get:function(){return/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase())}},{key:"Browser",get:function(){var e,t=function(t){var r=t.indexOf(e);if(-1!==r){var i=t.indexOf("rv:");return"Trident"===e&&-1!==i?parseFloat(t.substring(i+3)):parseFloat(t.substring(r+e.length+1))}},r={};return r[function(){for(var t=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}],r=0;r<t.length;r++){var i=t[r].string;if(e=t[r].subString,-1!==i.indexOf(t[r].subString))return t[r].identity}return"Other"}()]=!0,r.version=t(navigator.userAgent)||t(navigator.appVersion)||"Unknown",r}}]),e}(),b=[],_=function(){function e(){p(this,e)}return m(e,null,[{key:"watch",value:function(t){b.push(t),e.interval&&clearInterval(e.interval),e.interval=setInterval((function(){e.observe()}),100)}},{key:"observeElement",value:function(e){var t=e,r=e._computedStyle||"resize"!==t.hasStyleObserver?document.defaultView.getComputedStyle(t,null):{},i=!0,a="resize"!==t.hasStyleObserver?["paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","display","visibility","font-size","font-family","font-style","font-weight","max-height","min-height","max-width","min-width","overflow","overflow-x","overflow-y"]:[];if(e.styleProperties&&(a=a.concat(e.styleProperties)),e.observableStyleProperties&&(a=e.observableStyleProperties),t._styleInfo){if(e.isHidden||"none"!==r.display&&(0!==e.offsetWidth&&0!==e.offsetHeight||(e.isHidden=!0)),e.isHidden){if(e.visibilityChangedHandler(),e.isHidden)return;i=!1}for(var n=[],o=0;o<a.length;o++){var s=a[o],l=s.startsWith("--")?r.getPropertyValue(s):r[s];t._styleInfo[s]!==l&&(n[s]={oldValue:t._styleInfo[s],value:l},n.length++),t._styleInfo[s]=l}n.length>0&&(t.$.fireEvent("styleChanged",{styleProperties:n},{bubbles:!1,cancelable:!0}),n.display&&i&&t.$.fireEvent("resize",t,{bubbles:!1,cancelable:!0}))}else{t._styleInfo=[];for(var u=0;u<a.length;u++){var d=a[u],c=d.startsWith("--")?r.getPropertyValue(d):r[d];t._styleInfo[d]=c}}}},{key:"observe",value:function(){for(var e=0;e<b.length;e++){var t=b[e];this.observeElement(t)}}},{key:"unwatch",value:function(t){e.interval&&clearInterval(e.interval);var r=b.indexOf(t);-1!==r&&b.splice(r,1),b.length>0&&(e.interval=setInterval((function(){e.observe()}),100))}}]),e}(),x=[],w=[],S=["resize","down","up","move","tap","taphold","swipeleft","swiperight","swipetop","swipebottom"],k=function(){function e(t){p(this,e);var r=this;r.target=t,r.$target=new A(t),r.$document=t.$document?t.$document:new A(document),r.id=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase();var i={handlers:{},boundEventTypes:[],listen:r.listen.bind(r),unlisten:r.unlisten.bind(r)};return r.tapHoldDelay=750,r.swipeMin=10,r.swipeMax=5e3,r.swipeDelay=1e3,r.tapHoldDelay=750,r.inputEventProperties=["clientX","clientY","pageX","pageY","screenX","screenY"],S.forEach((function(e){i[e]=function(t){i.handlers[e]=t},r[e]=function(e){if(!i.handlers[e.type]){if(("mousemove"===e.type||"pointermove"===e.type||"touchmove"===e.type)&&i.handlers.move){var t=r.createEvent(e,"move");i.handlers.move(t)}return!0}return i.handlers[e.type](e)}})),r.listen(),r.handlers=i.handlers,i}return m(e,[{key:"listen",value:function(e){var r=this;if("resize"===e&&!r.target.resizeTrigger&&r.target!==document&&r.target!==window&&!1!==r.target.hasResizeObserver){var i=document.createElement("div");i.className="smart-resize-trigger-container",i.innerHTML='<div class="smart-resize-trigger-container"><div class="smart-resize-trigger"></div></div><div class="smart-resize-trigger-container"><div class="smart-resize-trigger-shrink"></div></div>',i.setAttribute("aria-hidden",!0),window[t].EnableShadowDOM&&r.target.shadowRoot?r.target.shadowRoot.appendChild(i):r.target.appendChild(i),r.target.resizeTrigger=i;var a,n,o,s,l=i.childNodes[0],u=l.childNodes[0],d=i.childNodes[1],c=function(){u.style.width="100000px",u.style.height="100000px",l.scrollLeft=1e5,l.scrollTop=1e5,d.scrollLeft=1e5,d.scrollTop=1e5},h=r.target.offsetWidth,f=r.target.offsetHeight;if(0===h||0===f){r.target.addEventListener("resize",(function e(){c(),r.target.removeEventListener("resize",e)})),c()}else c();r.target.resizeHandler=function(){n||(n=requestAnimationFrame((function(){if(n=0,o=r.target.offsetWidth,s=r.target.offsetHeight,a=o!==h||s!==f,r.target.requiresLayout&&(a=!0),a){h=o,f=s;var e=new CustomEvent("resize",{bubbles:!1,cancelable:!0});r.resize(e),r.target.requiresLayout=!1}}))),c()},l.addEventListener("scroll",r.target.resizeHandler),d.addEventListener("scroll",r.target.resizeHandler)}r.isListening||(r.isListening=!0,r.isPressed=!1,r.isReleased=!1,r.isInBounds=!1,window.PointerEvent?(r.$target.listen("pointerdown.inputEvents"+r.id,r.pointerDown.bind(r)),r.$target.listen("pointerup.inputEvents"+r.id,r.pointerUp.bind(r)),r.$target.listen("pointermove.inputEvents"+r.id,r.pointerMove.bind(r)),r.$target.listen("pointercancel.inputEvents"+r.id,r.pointerCancel.bind(r))):("ontouchstart"in window&&(r.$target.listen("touchmove.inputEvents"+r.id,r.touchMove.bind(r)),r.$target.listen("touchstart.inputEvents"+r.id,r.touchStart.bind(r)),r.$target.listen("touchend.inputEvents"+r.id,r.touchEnd.bind(r)),r.$target.listen("touchcancel.inputEvents"+r.id,r.touchCancel.bind(r))),r.$target.listen("mousedown.inputEvents"+r.id,r.mouseDown.bind(r)),r.$target.listen("mouseup.inputEvents"+r.id,r.mouseUp.bind(r)),r.$target.listen("mousemove.inputEvents"+r.id,r.mouseMove.bind(r)),r.$target.listen("mouseleave.inputEvents"+r.id,r.mouseLeave.bind(r))),r.target._handleDocumentUp||(r.target._handleDocumentUp=r.handleDocumentUp.bind(r),r.target._handleDocumentUpId=r.id,r.$document.listen("mouseup.inputEvents"+r.target._handleDocumentUpId,r.target._handleDocumentUp)))}},{key:"unlisten",value:function(e){var t=this;if(t.isListening=!1,window.PointerEvent?(t.$target.unlisten("pointerdown.inputEvents"+t.id),t.$target.unlisten("pointerup.inputEvents"+t.id),t.$target.unlisten("pointermove.inputEvents"+t.id),t.$target.unlisten("pointercancel.inputEvents"+t.id)):("ontouchstart"in window&&(t.$target.unlisten("touchstart.inputEvents"+t.id),t.$target.unlisten("touchmove.inputEvents"+t.id),t.$target.unlisten("touchend.inputEvents"+t.id),t.$target.unlisten("touchcancel.inputEvents"+t.id)),t.$target.unlisten("mousedown.inputEvents"+t.id),t.$target.unlisten("mouseup.inputEvents"+t.id),t.$target.unlisten("mousemove.inputEvents"+t.id),t.$target.unlisten("mouseleave.inputEvents"+t.id)),t.target._handleDocumentUp&&(t.$document.unlisten("mouseup.inputEvents"+t.target._handleDocumentUpId,t.target._handleDocumentUp),delete t.target._handleDocumentUp,delete t.target._handleDocumentUpId),"resize"===e&&t.target.resizeTrigger){var r=t.target.resizeTrigger,i=r.childNodes[0],a=r.childNodes[1];i.removeEventListener("scroll",t.target.resizeHandler),a.removeEventListener("scroll",t.target.resizeHandler),t.target.resizeHandler=null,r.parentNode.removeChild(r),delete t.target.resizeTrigger}}},{key:"handleDocumentUp",value:function(e){this.isPressed=!1,this.isReleased=!1,this.resetSwipe(e)}},{key:"createEvent",value:function(e,t){var r=this,i=e.touches,a=e.changedTouches,n=i&&i.length?i[0]:a&&a.length?a[0]:void 0,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,composed:void 0!==r.$target.element.getRootNode().host});if(o.originalEvent=e,n){for(var s=0;s<r.inputEventProperties.length;s++){var l=r.inputEventProperties[s];o[l]=n[l]}return o}for(var u in e)u in o||(o[u]=e[u]);return o}},{key:"fireTap",value:function(e){if(clearTimeout(this.tapHoldTimeout),!this.tapHoldFired&&this.isInBounds){var t=this.createEvent(e,"tap");this.tap(t)}}},{key:"initTap",value:function(e){var t=this;t.isInBounds=!0,t.tapHoldFired=!1,t.tapHoldTimeout=setTimeout((function(){if(t.isInBounds){t.tapHoldFired=!0;var r=t.createEvent(e,"taphold");t.taphold(r)}}),t.tapHoldDelay)}},{key:"pointerDown",value:function(e){return this.handleDown(e)}},{key:"mouseDown",value:function(e){if(!(this.isPressed||this.touchStartTime&&new Date-this.touchStartTime<500))return this.handleDown(e)}},{key:"touchStart",value:function(e){return this.touchStartTime=new Date,this.isTouchMoved=!0,this.handleDown(e)}},{key:"mouseUp",value:function(e){if(!(this.isReleased||this.touchEndTime&&new Date-this.touchEndTime<500))return this.handleUp(e)}},{key:"handleDown",value:function(e){var t=this;t.isReleased=!1,t.isPressed=!0;var r=t.createEvent(e,"down");return(t.handlers.tap||t.handlers.taphold)&&t.initTap(r),(t.handlers.swipeleft||t.handlers.swiperight||t.handlers.swipetop||t.handlers.swipebottom)&&t.initSwipe(r),t.down(r)}},{key:"handleUp",value:function(e){var t=this;t.isReleased=!0,t.isPressed=!1;var r=t.createEvent(e,"up"),i=t.up(r);return(t.handlers.tap||t.handlers.taphold)&&t.fireTap(r),t.resetSwipe(r),i}},{key:"handleMove",value:function(e){var t=this,r=t.move(e);return t.isPressed&&(t._maxSwipeVerticalDistance=Math.max(t._maxSwipeVerticalDistance,Math.abs(t._startY-e.pageY)),t._maxSwipeHorizontalDistance=Math.max(t._maxSwipeHorizontalDistance,Math.abs(t._startX-e.pageX)),r=t.handleSwipeEvents(e)),r}},{key:"touchEnd",value:function(e){return this.touchEndTime=new Date,this.handleUp(e)}},{key:"pointerUp",value:function(e){return this.handleUp(e)}},{key:"pointerCancel",value:function(e){this.pointerUp(e)}},{key:"touchCancel",value:function(e){this.touchEnd(e)}},{key:"mouseLeave",value:function(){this.isInBounds=!1}},{key:"mouseMove",value:function(e){if(!this.isTouchMoved)return this.handleMove(e)}},{key:"pointerMove",value:function(e){return this.handleMove(e)}},{key:"touchMove",value:function(e){for(var t=this,r=e.touches,i=e.changedTouches,a=r&&r.length?r[0]:i&&i.length?i[0]:void 0,n=0;n<t.inputEventProperties.length;n++){var o=t.inputEventProperties[n];void 0===e[o]&&(e[o]=a[o])}return t.isTouchMoved=!0,t.handleMove(e)}},{key:"handleSwipeEvents",value:function(e){var t=!0;return(this.handlers.swipetop||this.handlers.swipebottom)&&(t=this.handleVerticalSwipeEvents(e)),!1===t||(this.handlers.swipeleft||this.handlers.swiperight)&&(t=this.handleHorizontalSwipeEvents(e)),t}},{key:"handleVerticalSwipeEvents",value:function(e){var t;return t=e.pageY-this._startY,this.swiped(e,t,"vertical")}},{key:"handleHorizontalSwipeEvents",value:function(e){var t;return t=e.pageX-this._startX,this.swiped(e,t,"horizontal")}},{key:"swiped",value:function(e,t,r){var i=this;if(r=r||0,Math.abs(t)>=i.swipeMin&&!i._swipeEvent&&!i._swipeLocked){var a=t<0?"swipeleft":"swiperight";if("horizontal"===r?i._swipeEvent=i.createEvent(e,a):(a=t<0?"swipetop":"swipebottom",i._swipeEvent=i.createEvent(e,t<0?"swipetop":"swipebottom")),i[a]&&(i[a](this._swipeEvent),Math.abs(t)<=this.swipeMax))return e.stopImmediatePropagation(),!1}return!0}},{key:"resetSwipe",value:function(){this._swipeEvent=null,clearTimeout(this._swipeTimeout)}},{key:"initSwipe",value:function(e){var t=this;t._maxSwipeVerticalDistance=0,t._maxSwipeHorizontalDistance=0,t._startX=e.pageX,t._startY=e.pageY,t._swipeLocked=!1,t._swipeEvent=null,t._swipeTimeout=setTimeout((function(){t._swipeLocked=!0}),t.swipeDelay)}}]),e}(),C=function(){function e(t,r,i){p(this,e),this.container=t,this.horizontalScrollBar=r,this.verticalScrollBar=i,this.disableSwipeScroll=!1,this.listen()}return m(e,[{key:"scrollWidth",get:function(){return this.horizontalScrollBar?this.horizontalScrollBar.max:-1},set:function(e){e<0&&(e=0),this.horizontalScrollBar&&(this.horizontalScrollBar.max=e)}},{key:"scrollHeight",get:function(){return this.verticalScrollBar?this.verticalScrollBar.max:-1},set:function(e){e<0&&(e=0),this.verticalScrollBar&&(this.verticalScrollBar.max=e)}},{key:"scrollLeft",get:function(){return this.horizontalScrollBar?this.horizontalScrollBar.value:-1},set:function(e){e<0&&(e=0),this.horizontalScrollBar&&(this.horizontalScrollBar.value=e)}},{key:"scrollTop",get:function(){return this.verticalScrollBar?this.verticalScrollBar.value:-1},set:function(e){e<0&&(e=0),this.verticalScrollBar&&(this.verticalScrollBar.value=e)}},{key:"vScrollBar",get:function(){return this.verticalScrollBar}},{key:"hScrollBar",get:function(){return this.horizontalScrollBar}}]),m(e,[{key:"listen",value:function(){var e,t,r,i,a,n,o,s,l=this,u=g.isMobile,d=l.horizontalScrollBar,c=l.verticalScrollBar;l.inputEvents=new k(l.container);var h,f=function(e){return{amplitude:0,delta:0,initialValue:0,min:0,max:e.max,previousValue:0,pointerPosition:0,targetValue:0,scrollBar:e,value:0,velocity:0}},p=f(d),v=f(c),m=function(){var e=l.container.touchVelocityCoefficient||50;n=Date.now(),o=n-i,i=n;var t=function(t){t.delta=t.value-t.previousValue,t.previousValue=t.value;var r=e*t.delta/(1+o);t.velocity=.8*r+.2*t.velocity};t(v),t(p)},y=function(e){return s.value=e>s.max?s.max:e<s.min?s.min:e,s.scrollBar.value=s.value,e>s.max?"max":e<s.min?"min":"value"};function b(){var e,r;s.amplitude&&(l.container.$.fireEvent("kineticScroll"),e=Date.now()-i,(r=-s.amplitude*Math.exp(-e/500))>5||r<-5?(y(s.targetValue+r),cancelAnimationFrame(t),t=0,t=requestAnimationFrame(b)):y(s.targetValue))}l.inputEvents.down((function(t){if(u){var n=t.originalEvent.target,o=n&&n.closest?n.closest("smart-scroll-bar"):void 0;if(o!==l.horizontalScrollBar&&o!==l.verticalScrollBar){r=!0,e=!1;var s=function(e,t){e.amplitude=0,e.pointerPosition=t,e.previousValue=e.value,e.value=e.scrollBar.value,e.initialValue=e.value,e.max=e.scrollBar.max};s(v,t.clientY),s(p,t.clientX),i=Date.now(),clearInterval(a),a=setInterval(m,500)}}})),l.inputEvents.up((function(){if(!r)return!0;if(clearInterval(a),l.disableSwipeScroll)r=!1;else{var e=function(e){s=e,e.amplitude=.8*e.velocity,e.targetValue=Math.round(e.value+e.amplitude),i=Date.now(),cancelAnimationFrame(t),t=requestAnimationFrame(b),e.velocity=0};v.velocity>10||v.velocity<-10?e(v):(p.velocity>10||p.velocity<-10)&&e(p),r=!1}})),l.inputEvents.move((function(t){if(!r)return!0;if(!l.disableSwipeScroll&&(e&&(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation()),p.visible=d.offsetHeight>0,v.visible=c.offsetWidth>0,r&&(p.visible||v.visible))){var i,a,n=l.container.touchScrollRatio;n&&("number"==typeof n?(i=-n,a=-n):"function"==typeof n&&(i=n(v.max,v.scrollBar.offsetHeight),a=n(p.max,p.scrollBar.offsetWidth))),v.ratio=i||-v.max/v.scrollBar.offsetHeight,v.delta=(t.clientY-v.pointerPosition)*v.ratio,p.ratio=a||-p.max/p.scrollBar.offsetWidth,p.delta=(t.clientX-p.pointerPosition)*p.ratio;var o="value",u=function(t,r,i){return t.delta>5||t.delta<-5?(s=t,"min"===(o=t.initialValue+t.delta>s.max?"max":t.initialValue+t.delta<s.min?"min":"value")&&0===t.initialValue||"max"===o&&t.initialValue===t.max||!t.visible||(l.container.$.fireEvent("kineticScroll"),y(t.initialValue+t.delta),m(),i.originalEvent.preventDefault(),i.originalEvent.stopPropagation(),e=!0,!1)):null},h=u(v,t.clientY,t);if(null!==h)return h;var f=u(p,t.clientX,t);return null!==f?f:void 0}})),l.scrollTo=function(e,r){var a=!1===r?p:v,n=!1;i||(i=Date.now()),h||(h=Date.now()),Math.abs(Date.now()-h)>375?i=Date.now():n=!0,h=Date.now(),a.value=a.scrollBar.value,a.delta=e-a.value,a.max=a.scrollBar.max,e<=a.min&&(e=a.min),e>=a.max&&(e=a.max),a.targetValue=e;var o=e,s=a.value;a.velocity=100*a.delta/(1+a.max),a.from=s;var u=function(e){return a.value=e>a.max?a.max:e<a.min?a.min:e,a.scrollBar.value=a.value,e>a.max?"max":e<a.min?"min":"value"};cancelAnimationFrame(t),t=requestAnimationFrame((function r(){var d,c=Date.now()-h,f=Math.min(1e3,Date.now()-i),p=a.velocity*Math.exp(f/175);if(n)(p<0&&a.value<=e||p>0&&a.value>=e)&&(p=0),(a.value+p<=a.min||a.value+p>=a.max)&&(p=0),p>.5||p<-.5?(u(a.value+p),cancelAnimationFrame(t),t=0,t=requestAnimationFrame(r)):u(a.targetValue);else{if(c>=175)return cancelAnimationFrame(t),l.container.$.fireEvent("kineticScroll"),void(t=0);d=M.Animation.Easings.easeInSine(c,s,o-s,175),u(d),cancelAnimationFrame(t),t=0,t=requestAnimationFrame(r)}}))},l.inputEvents.listen()}},{key:"unlisten",value:function(){var e=this;e.inputEvents&&e.inputEvents.unlisten(),delete e.inputEvents}}]),e}(),A=function(){function e(t){p(this,e),this.events={},this.handlers={},this.element=t}return m(e,[{key:"hasClass",value:function(e){for(var t=e.split(" "),r=0;r<t.length;r++)if(!this.element.classList.contains(t[r]))return!1;return!0}},{key:"addClass",value:function(e){var t=this;if(!t.hasClass(e)){for(var r=e.split(" "),i=0;i<r.length;i++)t.element.classList.add(r[i]);t.isNativeElement||_.observeElement(t.element)}}},{key:"removeClass",value:function(e){var t=this;if(0!==arguments.length){for(var r=e.split(" "),i=0;i<r.length;i++)t.element.classList.remove(r[i]);""===t.element.className&&t.element.removeAttribute("class"),t.isNativeElement||_.observeElement(t.element)}else t.element.removeAttribute("class")}},{key:"dispatch",value:function(e){var t=this.events[e.type],r=!1;if(t.length>1)for(var i=0;i<t.length;i++){var a=t[i];if(a.namespace&&a.namespace.indexOf("_")>=0){r=!0;break}}r&&t.sort((function(e,t){var r=e.namespace,i=t.namespace;return(r=-1===r.indexOf("_")?0:parseInt(r.substring(r.indexOf("_")+1)))<(i=-1===i.indexOf("_")?0:parseInt(i.substring(i.indexOf("_")+1)))?-1:r>i?1:0}));for(var n=0;n<t.length;n++){var o=t[n];if(e.namespace=o.namespace,e.context=o.context,e.defaultPrevented)break;var s=o.handler.apply(this.element,[e]);if(void 0!==s&&(e.result=s,!1===s)){e.preventDefault(),e.stopPropagation();break}}return e.result}},{key:"fireEvent",value:function(e,t,r){r||(r={bubbles:!0,cancelable:!0,composed:this.isInShadowDOM}),r.detail=t||{};var i=new CustomEvent(e,r);return i.originalStopPropagation=i.stopPropagation,i.stopPropagation=function(){return i.isPropagationStopped=!0,i.originalStopPropagation()},this.dispatchEvent(i),i}},{key:"dispatchEvent",value:function(e){var t=this,r=e.type,i=t.element.context,a=r.substring(0,1).toUpperCase()+r.substring(1);t.element.context=document,t.element["on"+a]?t.element["on"+a](e):t.element["on"+r.toLowerCase()]?t.element["on"+r.toLowerCase()](e):t.element.dispatchEvent(e),t.element.context=i}},{key:"listen",value:function(e,t){var r=this,i=e.split("."),a=i.slice(1).join("."),n=i[0];r.events[n]||(r.events[n]=[]);var o={type:n,handler:t,context:r.element,namespace:a};S.indexOf(n)>=0&&(r.inputEvents||(r.inputEvents=new k(r.element)),r.inputEvents[n]((function(e){r.dispatchEvent(e)})),r.inputEvents.boundEventTypes.push(n),r.inputEvents.listen(n)),0===r.events[n].length&&(r.handlers[n]=r.dispatch.bind(r),"wheel"===n?r.element.addEventListener("wheel",r.handlers[n],!!r.isPassiveSupported&&{passive:!1}):r.element.addEventListener(n,r.handlers[n],!1)),r.events[n].push(o)}},{key:"unlisten",value:function(e){var t=this,r=e.split("."),i=r.slice(1).join("."),a=r[0],n=t.events[a];if(t.inputEvents&&t.inputEvents.boundEventTypes.indexOf(a)>=0&&(t.inputEvents.boundEventTypes.splice(t.inputEvents.boundEventTypes.indexOf(a),1),0===t.inputEvents.boundEventTypes.length&&t.inputEvents.unlisten(a)),n){for(var o=0;o<n.length;o++){if(""!==i){var s=n.findIndex((function(e){return e.namespace===i}));n.splice(s,1);break}n=[]}0===n.length&&(t.element.removeEventListener(a,t.handlers[a]),t.events[a]=[],delete t.handlers[a])}}},{key:"getAttributeValue",value:function(e,t){var r=this,i=r.element.getAttribute(e);if(r.isNativeElement)return r.deserialize(i,t);var a=r.element.propertyByAttributeName[e];return void 0===a.deserialize?r.deserialize(i,t,a.nullable):r.element[a.deserialize](i)}},{key:"setAttributeValue",value:function(e,t,r){var i,a=this,n=!1;if(a.isNativeElement){if(i=a.serialize(t,r),"boolean"===r&&["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(e)>=0)return void(t?a.element.setAttribute(e,""):a.element.removeAttribute(e))}else{var o=a.element.propertyByAttributeName[e];n=!o||o.nullable,i=o&&o.serialize?a.element[o.serialize](t):a.serialize(t,r,n)}"array"!==r&&"object"!==r||"[]"!==i&&"{}"!==i?void 0===i?(a.element.removeAttribute(e),a.element.shadowRoot&&a.element.$.root&&a.element.$.root.removeAttribute(e)):(a.element.setAttribute(e,i),a.element.shadowRoot&&a.element.$.root&&a.element.$.root.setAttribute(e,i)):a.element.removeAttribute(e)}},{key:"serialize",value:function(e,t,r){if(void 0===t&&(t=M.Types.getType(e)),void 0!==e&&(r||null!==e)){if(r&&null===e)return"null";if("string"===t)return e;if("boolean"===t||"bool"===t){if(!0===e||"true"===e||1===e||"1"===e)return"";if(!1===e||"false"===e||0===e||"0"===e)return}return"array"===t?JSON.stringify(e):["string","number","int","integer","float","date","any","function"].indexOf(t)>=0?e.toString():"object"===t?JSON.stringify(e):void 0}}},{key:"deserialize",value:function(e,t,r){var i="null"===e;if(void 0!==e&&(!i||r)){if(i&&r)return null;if("boolean"===t||"bool"===t)return null!==e;if("number"===t||"float"===t)return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:parseFloat(e);if("int"===t||"integer"===t)return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:parseInt(e);if("string"===t)return e;if("any"===t)return e;if("date"===t)return new Date(e);if("function"===t){if("function"==typeof window[e])return window[e]}else if("array"===t||"object"===t)try{var a=JSON.parse(e);if(a)return a}catch(r){if(window[e]&&"object"==y(window[e]))return window[e];if("array"===t&&e.indexOf("[")>=0){if(e.indexOf("{")>=0){var n=e.replace(/{/gi,"").replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim();n=n.split("},");for(var o=0;o<n.length;o++){for(var s={},l=n[o].trim().split(","),u=0;u<l.length;u++){var d=l[u].split(":")[0].trim(),c=l[u].split(":")[1].trim();s[d]=c}n[o]=s}return n}return e.replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim().split(",")}}}}},{key:"isCustomElement",get:function(){return!!this.element.tagName.startsWith(t)||this.element instanceof window[t].BaseElement==1||"DIV"!==this.element.tagName&&"SPAN"!==this.element.tagName&&"BUTTON"!==this.element.tagName&&"INPUT"!==this.element.tagName&&"UL"!==this.element.tagName&&"LI"!==this.element.tagName&&document.createElement(this.element.nodeName)instanceof window[t].BaseElement==1}},{key:"isNativeElement",get:function(){return!this.isCustomElement}},{key:"isPassiveSupported",get:function(){var e=this;if(void 0!==e.supportsPassive)return e.supportsPassive;e.supportsPassive=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e.supportsPassive=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e.supportsPassive}}]),e}(),N=function(){function e(){p(this,e)}return m(e,null,[{key:"Ripple",get:function(){return h}},{key:"Easings",get:function(){return v}}]),e}(),M=function(){function e(){p(this,e)}return m(e,null,[{key:"Extend",value:function(e){return new A(e)}},{key:"Assign",value:function(t,r){if(t.indexOf(".")>=0){var i=t.split(".");return e[i[0]]||(e[i[0]]={}),void(e[i[0]][i[1]]=r)}e[t]=r}},{key:"Types",get:function(){return c}},{key:"Core",get:function(){return g}},{key:"Animation",get:function(){return N}},{key:"Scroll",get:function(){return C}},{key:"InputEvents",get:function(){return k}}]),e}(),T=M.Extend(document),D=function e(){p(this,e)};D.cache={};var O=function(r){l(a,r);var i=n(a);function a(){return p(this,a),i.apply(this,arguments)}return m(a,[{key:"getBindings",value:function(e,t){var r=this,i=0,a={},n=function(e){if(e instanceof HTMLElement)return r.parseAttributes(e);var t=r.parseProperty(e.data?e.data.trim():null,"textContent",e);return t?(r&&e.parentNode===r.$.content&&(t.value=""!==r.$.html?r.$.html:void 0,r.innerHTML=""),{textContent:t}):void 0}(e);n&&(a.data=n),t||(a.mapping=[],t=a),e.getAttribute&&(a.nodeId=e.getAttribute("smart-id"),t&&n&&(t.mapping[a.nodeId]=n)),a.node=e,e.firstChild&&(a.children={});for(var o=e.firstChild;o;o=o.nextSibling)a.children[i++]=r.getBindings(o,t);return a}},{key:"_addRemovePropertyBinding",value:function(e,t,r,i,a){if(e&&t&&r){var n=this,o=n.bindings,s=r.getAttribute("smart-id"),l=e.indexOf("{{")>=0,u=!1;(e=e.replace("{{","").replace("}}","").replace("[[","").replace("]]","")).indexOf("!")>=0&&(e=e.replace("!",""),u=!0);var d=n._properties[e],c={name:e,reflectToAttribute:d.reflectToAttribute,twoWay:l,type:d.type,not:u};if(a&&!i){var h={},f={name:e,targetPropertyName:t,reflectToAttribute:d.reflectToAttribute,twoWay:l,type:d.type,not:u};h[e]=f,o.mapping[s]=h}(function e(a){for(var o in a){var l=a[o];if(l.nodeId===s){l.data||(l.data={}),i?(l.data[t]=null,delete l.data[t]):l.data[t]=c;break}if(l.children)e(l.children);else if(l.node&&l.node.children&&l.node===r.parentElement){var u=l.node;if(!u.firstChild)continue;l.children={};for(var d=0,h=u.firstChild;h;h=h.nextSibling)l.children[d++]=n.getBindings(h);e(l.children)}}})(o.children),i?delete n.boundProperties[e]:n.boundProperties[e]=!0,n.updateBoundNodes(e)}}},{key:"addPropertyBinding",value:function(e,t,r,i){this._addRemovePropertyBinding(e,t,r,!1,i)}},{key:"removePropertyBinding",value:function(e,t,r,i){this._addRemovePropertyBinding(e,t,r,!0,i)}},{key:"parseAttributes",value:function(e){for(var t=this,r=void 0,i=0;i<e.attributes.length;i++){var a=e.attributes[i],n=a.name,o=a.value;D.cache["toCamelCase"+n]||(D.cache["toCamelCase"+n]=M.Core.toCamelCase(n));var s=D.cache["toCamelCase"+n];if(n.indexOf("(")>=0){var l=n.substring(1,n.length-1);if(t&&!t.dataContext){t.templateListeners[e.getAttribute("smart-id")+"."+l]=o,e.removeAttribute(n);continue}r||(r={});var u=o.substring(0,o.indexOf("("));r[s]={isEvent:!0,name:l,value:u}}else{var d=t.parseProperty(o,n,e);d&&(r||(r={}),r[s]=d)}}return r}},{key:"parseProperty",value:function(e,t){if(e&&e.length){for(var r,i=this,a=e.length,n=0,o=0,s=0,l=!0;o<a;){n=e.indexOf("{{",o);var u=e.indexOf("[[",o),d="}}";if(u>=0&&(n<0||u<n)&&(n=u,l=!1,d="]]"),(s=n<0?-1:e.indexOf(d,n+2))<0)return;r=r||{};var c=e.slice(n+2,s).trim();r.name=c,o=s+2}var h=r.name,f=i?i._properties[h]:null;return r.twoWay=l,r.ready=!1,i&&(h.indexOf("::")>=0?i.boundProperties[h.substring(0,h.indexOf("::"))]=!0:i.boundProperties[h]=!0),f?(r.type=f.type,r.reflectToAttribute=f.reflectToAttribute):(["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(t)>=0?r.type="boolean":r.type="string",r.reflectToAttribute=!0),r}}},{key:"updateTextNodes",value:function(){this.updateTextNode(this.shadowRoot||this,this.bindings,this)}},{key:"updateTextNode",value:function(e,t,r){if(t){for(var i=0,a=e.firstChild;a&&t.children;a=a.nextSibling)this.updateTextNode(a,t.children[i++],r);if(t&&t.data)for(var n in t.data){var o=t.data[n],s=o.name;"textContent"===n&&o.twoWay&&!o.updating&&void 0!==o.value&&(r[s]=o.value)}}}},{key:"updateBoundProperty",value:function(e,t){if(!t.updating){t.updating=!0,this[e]=t.value,t.updating=!1}}},{key:"updateBoundNodes",value:function(e){var t=this;if(t.updateBoundNode(t.shadowRoot||t,t.bindings,t,e),t.detachedChildren.length>0)for(var r=function(r){var i=t.detachedChildren[r],a=i.getAttribute("smart-id"),n=function e(t){if(t.nodeId===a)return t;for(var r in t.children){var i=t.children[r];if((i.getAttribute?i.getAttribute("smart-id"):"")===a)return t;if(i.children){var n=e(i);if(n)return n}}return null}(t.bindings);if(n)t.updateBoundNode(i,n,t,e,!0);else if(i.getAttribute&&t.bindings.mapping){var o=t,s=t.bindings;if(s)for(var l in s.mapping){var u=o.querySelector('[smart-id="'+l+'"]');if(u){var d=s.mapping[l];t.updateBoundData(u,d,o,e)}}}},i=0;i<t.detachedChildren.length;i++)r(i)}},{key:"updateBoundMappedNodes",value:function(){var e=this,t=e.bindings,r=e;if(t.mapping)for(var i in t.mapping){var a=r.querySelector('[smart-id="'+i+'"]');if(r.shadowRoot&&((a=r.querySelector('[id="'+i+'"]'))||(a=r.shadowRoot.querySelector('[id="'+i+'"]')||r.shadowRoot.querySelector('[smart-id="'+i+'"]'))),a){var n=t.mapping[i];e.updateBoundData(a,n,r)}else if(r.getAttribute("aria-controls")){var o=document.getElementById(r.getAttribute("aria-controls"));if(!o&&r.shadowRoot&&(o=r.shadowRoot.getElementById(r.getAttribute("aria-controls"))),a=o.querySelector('[smart-id="'+i+'"]')){var s=t.mapping[i];e.updateBoundData(a,s,r)}}}}},{key:"updateBoundNode",value:function(e,t,r,i,a){var n=this;if(t){var o=0;if(a){if(a&&!t.data)for(var s=e.firstChild;s&&t.children;s=s.nextSibling)s.getAttribute?function(){var e=s.getAttribute("smart-id"),a=function(){for(var r in t.children)if(t.children[r].nodeId===e)return t.children[r]}();n.updateBoundNode(s,a,r,i),o++}():n.updateBoundNode(s,t.children[o++],r,i,a)}else for(var l=e.firstChild;l&&t.children;l=l.nextSibling)l.getAttribute?function(){var e=l.getAttribute("smart-id"),a=function(){for(var r in t.children)if(t.children[r].nodeId===e)return t.children[r]}();n.updateBoundNode(l,a,r,i),o++}():n.updateBoundNode(l,t.children[o++],r,i);if(t&&t.data){var u=t.data;n.updateBoundData(e,u,r,i)}}}},{key:"updateBoundData",value:function(e,t,r,i){var a=this,n=function(n){var o=t[n],s=o.name;if(!o.updating&&(s.indexOf("::")>=0&&(s=s.substring(0,s.indexOf("::"))),void 0===i||i===s)){if(s.indexOf("(")>=0){var l=s.substring(s.indexOf("(")),u=s.substring(0,s.indexOf("("));if((l=(l=(l=l.substring(1,l.length-1)).replace(/ /gi,"")).split(",")).length>0&&""!==l[0]){for(var d=[],c=0;c<l.length;c++)d.push(r[l[c]]);o.value=r[u].apply(r,d)}else o.value=r[u]();o.type=y(o.value)}else o.value=r[s];if("innerHTML"===s?e[n].toString().trim()!==r[s].toString().trim()&&(o.ready||r._properties[s].defaultValue!==o.value)&&(e[n]=o.value.toString().trim()):o.not?(e[n]=!o.value,o.targetPropertyName&&(e[o.targetPropertyName]=!o.value)):(e[n]=o.value,o.targetPropertyName&&(e[o.targetPropertyName]=o.value)),e.$&&e.$.isNativeElement){D.cache["toDash"+n]||(D.cache["toDash"+n]=M.Core.toDash(n));var h=D.cache["toDash"+n],f=e.$.getAttributeValue(h,o.type);!o.reflectToAttribute||f===o.value&&o.ready||e.$.setAttributeValue(h,o.value,o.type),o.reflectToAttribute||e.$.setAttributeValue(h,null,o.type)}if(!o.ready){if(e.$&&e.$.isCustomElement){D.cache["toDash"+n]||(D.cache["toDash"+n]=M.Core.toDash(n));var p=D.cache["toDash"+n];e._properties||(e._beforeCreatedProperties=e._properties=e.propertyByAttributeName=[]),e._properties[n]||(e._properties[n]={attributeName:p},e._beforeCreatedProperties&&(e._beforeCreatedProperties[n]=e._properties[n]),e.propertyByAttributeName[p]=e._properties[n]);var v=e._properties[n];v.isUpdating=!0,o.reflectToAttribute&&(o.not?e.$.setAttributeValue(v.attributeName,!o.value,o.type):e.$.setAttributeValue(v.attributeName,o.value,o.type)),o.reflectToAttribute||e.$.setAttributeValue(v.attributeName,null,o.type),v.isUpdating=!1}if(o.twoWay){var m=function(t){if(o.value=t,e.$&&e.$.isNativeElement){D.cache["toDash"+n]||(D.cache["toDash"+n]=M.Core.toDash(n));var r=D.cache["toDash"+n],i=e.$.getAttributeValue(r,o.type);o.reflectToAttribute&&i!==o.value&&e.$.setAttributeValue(r,o.value,o.type),o.reflectToAttribute||e.$.setAttributeValue(r,null,o.type)}};if(o.name.indexOf("::")>=0){var g=o.name.indexOf("::"),b=o.name.substring(g+2);a["$"+e.getAttribute("smart-id")].listen(b,(function(){m(e[n]);var t=o.name.substring(0,o.name.indexOf("::"));a.updateBoundProperty(t,o)}))}if(e.$&&e.$.isCustomElement){e._properties[n]&&(e._properties[n].notify=!0),D.cache["toDash"+n]||(D.cache["toDash"+n]=M.Core.toDash(n));var _=D.cache["toDash"+n];a["$"+e.getAttribute("smart-id")].listen(_+"-changed",(function(e){var t=e.detail;m(t.value);var r=a.context;e.context!==document&&(a.context=a),a.updateBoundProperty(o.name,o),a.context=r}))}}}o.ready=!0}};for(var o in t)n(o)}},{key:"addMessages",value:function(e,t){Object.assign(this.messages[e],t)}},{key:"localize",value:function(e,t){var r=this;if(r.messages&&r.messages[r.locale]){var i=r.messages[r.locale][e];if(""===i)return"";if(i){var a=i;for(var n in t){var o=t[n];i=i.replace(new RegExp("{{"+n+"}}","g"),o)}return r.localizeFormatFunction&&r.localizeFormatFunction(a,i,t),i}}}},{key:"log",value:function(e){this._logger("log",e)}},{key:"warn",value:function(e){this._logger("warn",e)}},{key:"error",value:function(e){this._logger("error",e)}},{key:"_logger",value:function(e,t){if(this.debugMode){var r=t instanceof Error?t.message:t.toString();console[e](r)}if(this.rethrowError&&"error"===e)throw t}},{key:"template",value:function(){return"<div></div>"}},{key:"registered",value:function(){this.onRegistered&&this.onRegistered()}},{key:"created",value:function(){var e=this;e.isReady=!1,e._initElement(e),e._setModuleState("created"),e.onCreated&&e.onCreated()}},{key:"completed",value:function(){var e=this;e.isCompleted=!0,e._onCompleted&&e._onCompleted(),e.onCompleted&&e.onCompleted()}},{key:"whenReady",value:function(e){var t=this;t.isCompleted?e():(t.whenReadyCallbacks||(t.whenReadyCallbacks=[]),t.whenReadyCallbacks.push(e))}},{key:"whenRendered",value:function(e){var t=this;t.isRendered?e():(t.whenRenderedCallbacks||(t.whenRenderedCallbacks=[]),t.whenRenderedCallbacks.push(e))}},{key:"addThemeClass",value:function(){var e=this;""!==e.theme&&e.classList.add("smart-"+e.theme)}},{key:"addDefaultClass",value:function(){this.classList.add(t.toLowerCase()+"-element"),this.classList.add(this.nodeName.toLowerCase())}},{key:"_renderShadowRoot",value:function(){var e=this;if(e.shadowRoot){e.$.root.classList.add(e.nodeName.toLowerCase());for(var t=0;t<e.attributes.length;t++){var r=e.attributes[t];"class"===r.name||"id"===r.name||"style"===r.name||"tabindex"===r.name||r.name.indexOf("aria")>=0||e.$.root.setAttribute(r.name,r.value)}for(var i=0;i<e.classList.length;i++){var a=e.classList[i];"smart-element-init"!==a&&"smart-element"!==a&&"smart-hidden"!==a&&"smart-visibility-hidden"!==a&&e.$.root.classList.add(a)}}}},{key:"render",value:function(){var e=this;if(!e.isRendered&&(e.isRendered=!0,e.isRendering=!1,e.context=document,e._renderShadowRoot(),e.whenRenderedCallbacks)){for(var t=0;t<e.whenRenderedCallbacks.length;t++)e.whenRenderedCallbacks[t]();e.whenRenderedCallbacks=[]}e.onRender&&e.onRender(),e.disabled&&e.setAttribute("aria-disabled",!0),e.readonly&&-1!==["checkbox","combobox","grid","gridcell","listbox","radiogroup","slider","spinbutton","textbox"].indexOf(e.getAttribute("role"))&&e.setAttribute("aria-readonly",!0)}},{key:"ready",value:function(){var e=this;if(e._setId(),e.addThemeClass(),e.addDefaultClass(),"collapsed"===e.visibility?e.classList.add("smart-hidden"):"hidden"===e.visibility&&e.classList.add("smart-visibility-hidden"),e.dataContext&&e.applyDataContext(),e.onReady&&e.onReady(),e.shadowRoot&&Smart(e._selector)){if(Smart(e._selector).styleUrls)for(var t=Smart(e._selector).styleUrls,r=0;r<t.length;r++)e.importStyle(t[r]);if(Smart(e._selector).styles){var i=document.createElement("style");i.innerHTML=Smart(e._selector).styles,e.shadowRoot.insertBefore(i,e.shadowRoot.firstChild)}}Smart(e._selector)&&Smart(e._selector).ready&&Smart(e._selector).ready()}},{key:"_setId",value:function(){var e=this;if(!e.id){var t=e.elementName;e.id=t.slice(0,1).toLowerCase()+t.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}},{key:"checkLicense",value:function(){}},{key:"logWatermark",value:function(){var e=document.createElement("a");e.href="https://www.htmlelements.com/",e.innerHTML="https://www.htmlelements.com/",e.style.position="absolute",e.style.right="5px",e.style.bottom="5px",e.style.color="#fff",e.style.padding="20px",e.style.borderRadius="5px",e.style.background="#20C933",e.style.cursor="pointer",e.style.zIndex="999999",e.style.display="block",e.style.fontSize="24px",e.style.textDecoration="none",e.style.fontWeight="bold",e.style.opacity=0,e.style.transition="opacity .35s ease-in-out",e.id="watermark",document.getElementById("watermark")||setTimeout((function(){document.getElementById("watermark")||(document.body.appendChild(e),setTimeout((function(){e.style.opacity=1})),setTimeout((function(){e.style.opacity=0,setTimeout((function(){e.parentNode.removeChild(e)}),350)}),6e3))}),1e3)}},{key:"logLicense",value:function(){console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("*Smart HTML Elements License Key Not Found."),console.log("*This is an evaluation only version, it is not licensed for development projects intended for production."),console.log("*if you want to hide the watermark, please send an email to: info@htmlelements.com for a license."),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************")}},{key:"applyDataContext",value:function(e){var t=this,r="string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext;if(e&&(r=e,t.dataContext=e),r){if(!r._uid){r._uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),r._properties=[];var i=function(e){var i=r[e];"function"!=typeof i&&"_properties"!==e&&"_uid"!==e&&(r._properties[e]=i,Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:function(){return r._properties[e]},set:function(i){var a=r._properties[e];r._properties[e]=i;var n=[];n[e]={oldValue:a,value:i},n.length++,t.updatingDataContext=!0,T.fireEvent("dataContextPropertyChanged",{dataContext:r,properties:n},{bubbles:!1,cancelable:!0}),t.updatingDataContext=!1}}))};for(var a in r)i(a)}if(t.dataContextProperties=t.parseAttributes(t),t.dataContextPropertiesMap={},t.dataContextListeners={},t.dataContextProperties){for(var n in t.updatingDataContext=!0,t.dataContextProperties){var o=t.dataContextProperties[n],s=o.name;if(o.propertyName=n,t.dataContextPropertiesMap[s]=n,D.cache["toDash"+n]||(D.cache["toDash"+n]=M.Core.toDash(s)),o.isEvent&&function(){var e=o.value;t.dataContextListeners[s]&&t.removeEventListener(s,t.dataContextListeners[s]),t.dataContextListeners[s]=function(t){r[e](t)},t.addEventListener(s,t.dataContextListeners[s])}(),s.indexOf(".")>=0){for(var l=s.split("."),u=r[l[0]],d=1;d<l.length;d++)u=u[l[d]];void 0!==u&&(t[n]=u)}else t[n]=r[s]}t.dataContextPropertyChangedHandler=function(e){var r=e.detail.properties;if(e.detail.dataContext===("string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext))for(var i in r){var a=t.dataContextPropertiesMap[i],n=t.context;a&&(t.context=document,t[a]=r[i].value,t.context=n)}},T.listen("dataContextPropertyChanged",t.dataContextPropertyChangedHandler),t.updatingDataContext=!1}else t.dataContextProperties=null}else{t.dataContextProperties=null;window.addEventListener("load",(function e(){("string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext)&&(t.applyDataContext(),window.removeEventListener("load",e))}))}}},{key:"updateDataContextProperty",value:function(e){var t=this,r="string"==typeof t.dataContext?window[t.dataContext]||document[t.dataContext]:t.dataContext,i=t.dataContextProperties[e];if(!t.updatingDataContext&&i.twoWay){var a=i.name;if(a.indexOf(".")>=0){for(var n=a.split("."),o=r[n[0]],s=1;s<n.length;s++)o=o[n[s]];void 0!==o&&(o=t[e],x[r._uid]&&(x[r._uid][e]=o))}else r[a]=t[e],x[r._uid]&&(x[r._uid][e]=r[a])}}},{key:"initProperties",value:function(){var e=this;if(Smart(e._selector)&&Smart(e._selector).properties&&(e._initProperties=Smart(e._selector).properties),e.hasAttribute("props")&&!e.props?e._initProperties=window[e.getAttribute("props")]:e.props&&(e._initProperties=e.props),e._initProperties)for(var t=Object.keys(e._initProperties),r=0;r<t.length;r++){var i=t[r],a=e._initProperties[i];if(a.constructor===Smart.ObservableArray||a instanceof Smart.ObservableArray)e[i]=a.toArray();else if(a.constructor===Smart.DataAdapter||"smartDataAdapter"===a.constructor.name||"object"==y(a)&&Smart.DataAdapter&&a instanceof Smart.DataAdapter||a instanceof Smart.Observable||a.constructor===Smart.Observable||"object"!=y(a)||M.Types.isArray(a)){if(void 0===e[i]&&-1===["onReady","onAttached","onDetached","onCreated","onCompleted"].indexOf(i)){var n=e.localize("propertyUnknownName",{name:i});e.log(n)}e[i]=a}else"messages"!==i?"object"==y(a)&&function t(r,i){for(var a=Object.keys(r),n=0;n<a.length;n++){var o=a[n],s=r[o],l=e._properties[i+"_"+o];if(l&&null===l.value){if(void 0===e[i+"_"+o]){var u=e.localize("propertyUnknownName",{name:i+"_"+o});e.log(u)}e[i+"_"+o]=s}else if("object"==y(s)&&!M.Types.isArray(s)&&s&&s.constructor!==Date)t(s,i+"_"+o);else{if(void 0===e[i+"_"+o]){var d=e.localize("propertyUnknownName",{name:i+"_"+o});e.log(d)}e[i+"_"+o]=s}}}(a,i):e[i]=a}}},{key:"setup",value:function(){var e=this;if(e.context=this,!e.isReady||e.isCompleted){if(e.isReady)return e._setModuleState("attached"),e.isAttached=!0,e.attached(),e._handleListeners("listen"),void(e.context=document);e.ownerElement&&e.ownerElement.detachedChildren.indexOf(e)>=0&&e.ownerElement.detachedChildren.splice(e.ownerElement.detachedChildren.indexOf(e),1),e.isReady=!0,e.methods=e.getStaticMember("methods"),e.initProperties(),g.isMobile&&e.classList.add("smart-mobile");for(var t=0;t<e.attributes.length;t+=1){var r=e.propertyByAttributeName[e.attributes[t].name];if(r){var i=e.$.getAttributeValue(r.attributeName,r.type),a=i?i.toString():"";if(!(a.indexOf("{{")>=0||a.indexOf("[[")>=0||"object"!==r.type&&"array"!==r.type&&(e.attributes[t].value.indexOf("{{")>=0||e.attributes[t].value.indexOf("[[")>=0)||void 0===i||r.value===i)){var n=M.Types.getType(i),o=e.attributes[t].value;if(("any"===r.type||"object"===r.type)&&""+e[r.name]===i)continue;if("array"===r.type&&e[r.name]&&JSON.stringify(e[r.name])===i)continue;if("number"===n&&isNaN(i)&&"NaN"!==o&&"Infinity"!==o&&"-Infinity"!==o){var s=e.localize("propertyInvalidValueType",{name:r.name,actualType:"string",type:r.type});e.log(s)}r.isUpdatingFromAttribute=!0,e[r.name]=i,r.isUpdatingFromAttribute=!1}}}for(var l in e._properties){var u=e._properties[l];if("innerHTML"===l&&u.value===u.defaultValue&&(u.value=u.defaultValue=M.Core.html(e)),"boolean"!==u.type&&"bool"!==u.type||"false"===e.getAttribute(u.attributeName)&&(u.isUpdating=!0,e.setAttribute(u.attributeName,""),u.isUpdating=!1),u.defaultReflectToAttribute&&u.reflectToAttribute){if(u.defaultReflectToAttribute&&u.defaultReflectToAttributeConditions){for(var d=!0,c=0;c<u.defaultReflectToAttributeConditions.length;c++){var h=u.defaultReflectToAttributeConditions[c],f=void 0,p=void 0;for(var v in h)f=v,p=h[v];e._properties[f]&&e._properties[f].value!==p&&(d=!1)}if(!d)continue}u.isUpdating=!0,e.$.setAttributeValue(u.attributeName,u.value,u.type),u.isUpdating=!1}}var m=[];if(e.children.length>0)for(var y=0;y<e.children.length;y++){var b=e.children[y];M.Extend(b).isCustomElement&&m.push(b)}e.applyTemplate(),e.complete=function(){if(!e.templateBindingsReady){var t=function(e){e.templateBindingsReady||(e.templateBindingsReady=!0,e.updateTextNodes(),e.updateBoundNodes())};if(e.ownerElement){for(var r=e.ownerElement,i=[];r;)i.push(r),r=r.ownerElement;for(var a=i.length-1;a>=0;a--)t(i[a]);t(e)}else t(e)}var n=function(){if(e._setModuleState("ready"),e.ready(),"auto"!==e.renderMode||e.isRendered||e.render(),e.isAttached=!0,e._setModuleState("attached"),e.attached(),e._handleListeners("listen"),e.isHidden||0!==e.offsetWidth&&0!==e.offsetHeight||(e.isHidden=!0),e.completed(),e.isRendered&&(e.context=document),e.whenReadyCallbacks){for(var t=0;t<e.whenReadyCallbacks.length;t++)e.whenReadyCallbacks[t]();e.whenReadyCallbacks=[]}};if(e.wait)e.classList.add("smart-visibility-hidden");else if(e.classList.contains("smart-async"))requestAnimationFrame((function(){n()}));else{var o=e.shadowParent;e.shadowParent=null;var s=e.parents;if(e.shadowParent=o,0===s.length)return;var l=function(){for(var t=e.ownerElement,r=[];t;)r.push(t),t=t.ownerElement;for(var i=r.length-1;i>=0;i--)r[i].updateBoundMappedNodes()};e.ownerElement&&"HTML"!==s[s.length-1].nodeName?e.ownerElement&&"HTML"===e.ownerElement.parents[e.ownerElement.parents.length-1].nodeName?(l(),n()):e.checkIsInDomInterval=setInterval((function(){var t=e.parents;"HTML"===t[t.length-1].nodeName&&(clearInterval(e.checkIsInDomInterval),l(),n())}),100):n()}};var _=[].slice.call(e.querySelectorAll("[smart-id]")).concat(m);if(e.enableShadowDOM&&!0!==e.isInShadowDOM&&(_=[].slice.call(e.shadowRoot.querySelectorAll("[smart-id]")).concat(m)),0===_.length)e.complete();else{e._completeListeners=0;for(var x=function(t){var r=_[t];if(M.Extend(r).isCustomElement){var i=function(){e._completeListeners--,0===e._completeListeners&&(e.complete(),delete e._completeListeners)}.bind(e);r.isCompleted||r.isUtilityElement||!0===r.wait||(e._completeListeners++,r._onCompleted||(r.completeHandlers=[],r._onCompleted=function(){for(var e=0;e<r.completeHandlers.length;e++)r.completeHandlers[e]()}),r.completeHandlers.push(i))}},w=0;w<_.length;w++)x(w);0===e._completeListeners&&e.complete()}}}},{key:"visibilityChangedHandler",value:function(){var e=this;e.isReady&&requestAnimationFrame((function(){0===e.offsetWidth||0===e.offsetHeight?e.isHidden=!0:(e.isHidden=!1,e.$.fireEvent("resize",e,{bubbles:!1,cancelable:!0}))}))}},{key:"attributeChangedCallback",value:function(e,t,r){var i=this,a=i.propertyByAttributeName[e];if("class"!==e&&"style"!==e||i.visibilityChangedHandler(),a||i.attributeChanged(e,t,r),!(!a||a&&a.isUpdating)){var n=i.$.getAttributeValue(a.attributeName,a.type);void 0!==r&&i[a.name]!==n&&(a.isUpdatingFromAttribute=!0,i[a.name]=void 0!==n?n:i._properties[a.name].defaultValue,a.isUpdatingFromAttribute=!1)}}},{key:"attributeChanged",value:function(e,t,r){}},{key:"attached",value:function(){var e=this;e.hasStyleObserver&&_.watch(e),e.onAttached&&e.onAttached(),Smart(e._selector)&&Smart(e._selector).attached&&Smart(e._selector).attached()}},{key:"detached",value:function(){var e=this;e.hasStyleObserver&&_.unwatch(e),e._setModuleState("detached"),e.isAttached=!1,e.ownerElement&&-1===e.ownerElement.detachedChildren.indexOf(e)&&e.ownerElement.detachedChildren.push(e),e._handleListeners("unlisten"),e.onDetached&&e.onDetached(),Smart(e._selector)&&Smart(e._selector).detached&&Smart(e._selector).detached()}},{key:"propertyChangedHandler",value:function(e,t,r){var i=this;t!==r&&("theme"===e&&(""!==t&&i.classList.remove("smart-"+t),""!==r&&i.classList.add("smart-"+r)),"visibility"===e?("collapsed"===t?i.classList.remove("smart-hidden"):"hidden"===t&&i.classList.remove("smart-visibility-hidden"),"collapsed"===r?i.classList.add("smart-hidden"):"hidden"===r&&i.classList.add("smart-visibility-hidden")):("disabled"===e||"readonly"===e)&&i._ariaPropertyChangedHandler(e,r),i.propertyChanged&&i.propertyChanged(e,t,r))}},{key:"_ariaPropertyChangedHandler",value:function(e,t){var r=this;"readonly"===e&&-1===["checkbox","combobox","grid","gridcell","listbox","radiogroup","slider","spinbutton","textbox"].indexOf(r.getAttribute("role"))||(t?r.setAttribute("aria-"+e,!0):r.removeAttribute("aria-"+e))}},{key:"_handleListeners",value:function(e){var t=this,r=t.tagName.toLowerCase(),i=function(i){var a=function(a){var n=a.split("."),o=n[0],s=t.$;if(n[1])if(o=n[1],s=t["$"+n[0]],"document"===n[0]){var l=t.smartId;""===l&&(l=M.Core.toCamelCase(r)),o=o+"."+l}else t.smartId&&(o=o+"."+t.smartId+"_"+t.parents.length);else t.smartId&&(o=o+"."+t.smartId);var u=i[a];s&&s[e](o,(function(e){var r=t.context;t.context=t,t[u]&&t[u].apply(t,[e]),t.context=r}))};for(var n in i)a(n)};i(t.getStaticMember("listeners")),i(t.templateListeners),Smart(t._selector)&&Smart(t._selector).properties&&i(Smart(t._selector).listeners)}},{key:"parseTemplate",value:function(){var t=this,r=t.template(),i=document.createDocumentFragment();if(e[t.nodeName]&&!d)return e[t.nodeName].cloneNode(!0);if(""===r)return null;var a=document.createElement("div");i.appendChild(a),a.innerHTML=r;var n=a.childNodes;a.parentNode.removeChild(a);for(var o=0;o<n.length;o++)i.appendChild(n[o]);return e[t.nodeName]=i,d?i:i.cloneNode(!0)}},{key:"applyTemplate",value:function(){var e=this,t=e.parseTemplate();if(t&&t.hasChildNodes){var r=t.childNodes[0],i=function(t,r){e["$"+t]=r.$=M.Extend(r),e.$[t]=r,r.ownerElement=e},a=r;if(r.getElementsByTagName("content").length>0){var n=r.getElementsByTagName("content")[0];(a=n.parentNode).removeChild(n)}else{var o=t.querySelectorAll("[inner-h-t-m-l]");o&&o.length>0&&(a=o[0])}e.$.template="template"===r.nodeName.toLowerCase()?r:r.querySelector("template");var s=t.querySelectorAll("[id]");0===s.length&&(s=t.querySelectorAll("*")),i("root",r),i("content",a),e.$.html=e.innerHTML.toString().trim();for(var l=0;l<s.length;l+=1){var u=s[l];""===u.id&&(u.id="child"+l),i(u.id,u),u.setAttribute("smart-id",u.id),e.shadowRoot?u.shadowParent=e:u.removeAttribute("id")}for(!1!==e.hasTemplateBindings?e.bindings=e.getBindings(t):e.bindings=[],e.$root.addClass("smart-container");e.childNodes.length;)a.appendChild(e.firstChild);if(e.appendTemplate(t),e.$.template){var d=document.createElement("div");d.classList.add("smart-template-container"),e.$.templateContainer=d,e.$.template.parentNode.insertBefore(d,e.$.template),e.refreshTemplate()}}}},{key:"refreshTemplate",value:function(){var e=this;if(e.$.templateContainer){e.templateDetached(e.$.templateContainer);var t=e.$.template.content.cloneNode(!0);e.templateBindings=e.getBindings(t),e.templateProperties=[];var r=document.createDocumentFragment();(function t(r,i,a){for(var n in r){var o=r[n],s=o.node.cloneNode();i.appendChild(s);var l=[],u=!1;if(o.data)for(var d in o.data){var c=o.data[d],h=c.name;if(e.templateProperties[h]=!0,s.removeAttribute(M.Core.toDash(d)),"*items"===d)l=e[h],u=!0;else if(h.indexOf("item.")>=0&&void 0!==a)c.value=a[h.substring("item.".length)],s[d]=c.value;else if(h.indexOf("item")>=0&&void 0!==a)c.value=a,s[d]=c.value;else if("*if"===d)if(h.indexOf("(")>=0){var f=void 0,p=h.substring(h.indexOf("(")),v=h.substring(0,h.indexOf("("));if((p=(p=(p=p.substring(1,p.length-1)).replace(/ /gi,"")).split(",")).length>0&&""!==p[0]){for(var m=[],y=0;y<p.length;y++)m.push(e[p[y]]);f=e[v].apply(e,m)}else f=e[v]();!1===f&&i.removeChild(s)}else e[h]||i.removeChild(s);else e.updateBoundNode(s,o,e,h)}if(l.length>0||u){for(var g=0;g<l.length;g++)o.children&&t(o.children,s,l[g]);if("number"==typeof l)for(var b=0;b<l;b++)o.children&&t(o.children,s,b)}else o.children&&t(o.children,s,a)}})(e.templateBindings.children,r),e.$.templateContainer.innerHTML="",e.$.templateContainer.appendChild(r),e.templateAttached(e.$.templateContainer)}}},{key:"templateAttached",value:function(){}},{key:"templateDetached",value:function(){}},{key:"appendTemplate",value:function(e){this.appendChild(e)}},{key:"defineElementModules",value:function(){var e=this,t=e.constructor.prototype;if("BaseElement"===t.elementName){t.modules=e.constructor.modules;for(var r=t.modules,i=0;i<r.length;i+=1)e.addModule(r[i])}else for(var a=t.modules,n=0;n<a.length;n+=1){var o=a[n],s=o.prototype;e.defineElementMethods(s.methodNames,s),e.defineElementProperties(o.properties)}}},{key:"watch",value:function(e,t){this._watch=null!==e&&null!==t?{properties:e,propertyChangedCallback:t}:null}},{key:"unwatch",value:function(){this._watch=null}},{key:"set",value:function(e,t,r){var i=this,a=i.context;i.context=!0===r?document:i,i[e]=t,i.context=a}},{key:"get",value:function(e){return this[e]}},{key:"_setModuleState",value:function(e,t){for(var r="is"+e.substring(0,1).toUpperCase()+e.substring(1),i="on"+e.substring(0,1).toUpperCase()+e.substring(1),a=0;a<this.modulesList.length;a++){var n=this.modulesList[a];n[r]=!0,n[e]&&n[e](t),n[i]&&n[i](t)}}},{key:"addModule",value:function(e,t){var r=this;if(e){var i=r.modules.slice(0),a=e.prototype,n=Object.getPrototypeOf(e);if(n.name&&n.name!==e.name&&r.addModule(n),!e.moduleName&&e.name&&(e.moduleName=e.name),-1===i.findIndex((function(t){return e.moduleName===t.moduleName}))&&i.push(e),r.defineModule(e),r.defineElementMethods(a.methodNames,a),r.defineElementProperties(e.properties),r.constructor.prototype.modules=i,t)for(var o in Smart.Elements.tagNames){for(var s=Smart.Elements.tagNames[o],l=Object.getPrototypeOf(s),u=[];l!==HTMLElement;)u.push(l.prototype),l=Object.getPrototypeOf(l);u.indexOf(r)>=0&&s!==r&&s.prototype.addModule(e)}}}},{key:"defineModule",value:function(e){if(!e.isDefined){e.prototype._initModule=function(e){this.ownerElement=e};var t=e.properties||{},r=Object.keys(t),i=Object.getOwnPropertyNames(e.prototype);e.prototype.methodNames=i;for(var a=function(i){var a=r[i],n=t[a];Object.defineProperty(e.prototype,a,{configurable:!1,enumerable:!0,get:function(){return this.ownerElement?this.ownerElement[a]:n.value},set:function(e){this.ownerElement[a]=e}})},n=0;n<r.length;n+=1)a(n);e.isDefined=!0}}},{key:"getStaticMember",value:function(e,r){var i=window[t][this.elementName],a=i[e];r||(r="");for(var n="array"===r?[]:"string"===r?"":{},o=Object.getPrototypeOf(i),s=[];o[e];)s.push(o[e]),o=Object.getPrototypeOf(o);for(var l=s.length-1;l>=0;l--)if("array"===r)for(var u=0;u<s[l].length;u++)-1===n.indexOf(s[l][u])&&n.push(s[l][u]);else"string"===r?-1===n.indexOf(s[l])&&(n+=s[l]):n=M.Core.assign(n,s[l]);if("array"===r){for(var d=0;d<a.length;d++)-1===n.indexOf(a[d])&&n.push(a[d]);return n}return"string"===r?(-1===n.indexOf(a)&&(n+=a),n):M.Core.assign(n,a)}},{key:"defineElementHierarchicalProperties",value:function(e,t){var r=[];!function(e){for(var i=Object.keys(e),a=0;a<i.length;a++){var n=i[a];if("messages"!==n){var o=e[n],s=Object.keys(o),l=s.indexOf("value")>=0&&s.indexOf("type")>=0&&"object"==y(o.value);("propertyObject"===o.type||l)&&function e(i,a){if(i.value){var n=Object.keys(i.value),o=function(o){var s=n[o],l=i.value[s],u=a+"_"+s;if("object"!=y(l)||null===l)return"break";var d=Object.keys(l);if(!(d.indexOf("value")>=0&&d.indexOf("type")>=0))return"break";if("array"!==i.type&&(i.isHierarchicalProperty=!0),l.parentPropertyName=a,t){var c=t._properties[u];if(i.value.hasOwnProperty(s)){if(c.isDefined)return"continue";delete i.value[s]}c.isDefined=!0,Object.defineProperty(i.value,s,{configurable:!1,enumerable:!0,get:function(){return t._properties[u].value},set:function(e){t.updateProperty(t,t._properties[u],e)}})}r[u]||(r[u]=l,r.length++),("propertyObject"===l.type||"object"==y(l.value)&&"array"!==l.type)&&e(t?t._properties[u]:l,u)};e:for(var s=0;s<n.length;s++)switch(o(s)){case"break":break e;case"continue":continue}}}(o,n)}}}(e),r.length>0&&!t&&this.defineElementProperties(r)}},{key:"defineElement",value:function(){var e=this.constructor.prototype,t=this.getStaticMember("properties"),r=Object.getOwnPropertyNames(e);e.extendedProperties={},e.boundProperties={},e.templateListeners={},this.defineElementModules(),this.defineElementMethods(r,e),this.defineElementProperties(t),this.defineElementHierarchicalProperties(this.extendedProperties),e._initElement=function(){var t=this,r=e.extendedProperties,i=Object.keys(r),a=t.modules;t.$=M.Extend(t),t.$document=T,t.smartId=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),t.isCreated||(t.modulesList=[],t._properties=[],t._beforeCreatedProperties&&(t._properties=t._beforeCreatedProperties,delete t._beforeCreatedProperties),t.detachedChildren=[],t.propertyByAttributeName=[]);for(var n=0;n<a.length;n+=1){var o=new(0,a[n]);o._initModule(t),t.modulesList.push(o)}for(var s=function(e){var a=i[e],n=r[a],o=n.value;if(t._properties[a]){if(void 0!==t._properties[a].notify)return"continue";delete t._properties[a]}if(E&&"innerHTML"===a&&delete t[a],-1===window.navigator.userAgent.indexOf("PhantomJS")&&t.hasOwnProperty(a)&&(o=t[a],delete t[a]),"array"===n.type&&null!=o&&(o=o.slice(0)),"object"===n.type&&null!=o&&(o=Array.isArray(o)?o.slice(0):Object.assign({},o)),t._properties[a]={name:a,notify:n.notify,allowedValues:n.allowedValues,type:n.type,nullable:n.nullable,reflectToAttribute:n.reflectToAttribute,defaultReflectToAttribute:n.defaultReflectToAttribute,defaultReflectToAttributeConditions:n.defaultReflectToAttributeConditions,value:o,readOnly:n.readOnly,defaultValue:o,attributeName:n.attributeName,observer:n.observer,inherit:n.inherit,extend:n.extend,validator:n.validator},t.propertyByAttributeName[n.attributeName]=t._properties[a],!n.hasOwnProperty("type")){var s=t.localize("propertyUnknownType",{name:a});t.log(s)}if("any"===n.type||"propertyObject"===n.type)return"continue";var l=M.Types.getType(o);if(null!=o&&n.type!==l&&!n.validator){if("object"===n.type&&"array"===l)return"continue";if("number"===l&&["integer","int","float"].findIndex((function(e){return e===n.type}))>=0)return"continue";var u=t.localize("propertyInvalidValueType",{name:a,actualType:l,type:n.type});t.log(u)}},l=0;l<i.length;l+=1)s(l);t.defineElementHierarchicalProperties(t._properties,t),t.isCreated=!0},e.registered()}},{key:"defineElementMethods",value:function(e,t){var r=this.constructor.prototype,i=["constructor","ready","created","render","attached","detached","appendChild","insertBefore","removeChild","connect","disconnectedCallback","connectedCallback","attributeChangedCallback","propertyChangedHandler","enableShadowDOM","isInShadowDOM","addPropertyBindings"],a=function(a){var n=e[a];n.startsWith("_")||void 0!==i.find((function(e){return e===n}))||r.extendedProperties[n]||M.Types.isFunction(t[n])&&(r[n]=function(e,t){var r=Array.prototype.slice.call(arguments,2),i=function(){if(!this.isReady&&"localize"!==t&&"localize"!==t&&"cloneNode"!==t&&"importStyle"!==t&&"log"!==t&&"parseAttributes"!==t){var i=this.localize("elementNotInDOM");this.log(i)}for(var a=this,n=0;n<this.modulesList.length;n++){var o=this.modulesList[n];if(t in o){a=o;break}}var s=this.context,l=r.concat(Array.prototype.slice.call(arguments)),u=null,d=function(e,t){return e===t||"number"===e&&("int"===t||"integer"===t||"float"===t)||"bool"===e&&"boolean"===t||"boolean"===e&&"bool"===t||"object"===e&&"any"===t||void 0};if(this.methods){var c=this.methods[t];if(c){var h=c.split(":");u=h[h.length-1].trim();for(var f=[],p=c.substring(1+c.indexOf("("),c.lastIndexOf(")")).split(","),v="",m=0;m<p.length;m++){var y=p[m];v+=y,y.indexOf(":")>=0?(f.push(v),v=""):v+=","}for(var g=f.length,b=0;b<f.length;b++){var _=f[b].trim().split(":"),x=_[0].split("=")[0].trim().indexOf("?")>=0,w=_[1].indexOf("?")>=0,S=_[1].replace(/\?/gi,"").trim(),k=S.split("|"),C=_[0].split("=")[1],A=M.Types.getType(l[b]);if(void 0===l[b]&&C){switch(C=C.trim(),S[0]){case"date":var N=C.substring(C.indexOf("(")+1,C.lastIndexOf(")"));C=0===(N=N.length>0?N.split(",").map((function(e){return parseInt(e)})):[]).length?new Date:new Date(N[0],N[1],N[2]);break;case"bool":case"boolean":C="true"===C||"1"===C;break;case"int":case"integer":C=parseInt(C);break;case"float":case"number":C=parseFloat(C);break;case"any":case"object":C=C.indexOf("{")>=0?JSON.parse(C):C}l.push(C)}else x&&g--;if(S!==A&&A){for(var T=!0,D=0;D<k.length;D++)if(d(A,k[D])){T=!1;break}if(T&&(null!==l[b]||!w)){var O=this.localize("methodInvalidValueType",{name:t,actualType:A,type:S,argumentIndex:b});this.log(O)}}if(l.length<g){var P=this.localize("methodInvalidArgumentsCount",{name:t,actualArgumentsCount:l.length,argumentsCount:g});this.log(P)}}}}this.context=this;var F=e.apply(a,l);if(u){var I=void 0===M.Types.getType(F)?"void":M.Types.getType(F);if(!d(I,u)){var E=this.localize("methodInvalidReturnType",{name:t,actualType:I,type:u});this.log(E)}}return this.context=s,F};return i}(t[n],n))};for(var n in e)a(n)}},{key:"defineElementProperties",value:function(e){if(e){var t=this.constructor.prototype,r=Object.keys(e),i=this.getStaticMember("properties");Object.assign(t.extendedProperties,e),this.updateProperty=function(e,t,r){var i=e;if(t&&!t.readOnly){if(t.allowedValues){for(var a=!1,n=0;n<t.allowedValues.length;n++)if(t.allowedValues[n]===r){a=!0;break}if(!a){var o=JSON.stringify(t.allowedValues).replace(/\[|\]/gi,"").replace(",",", ").replace(/"/gi,"'"),s="'"+r+"'",l=i.localize("propertyInvalidValue",{name:t.name,actualValue:s,value:o});return void i.log(l)}}var u=t.name,d=i._properties[u].value;if(t.validator&&i[t.validator]){var c=i.context;i.context=i;var h=i[t.validator](d,r);void 0!==h&&(r=h),i.context=c}if(d!==r){if(i.propertyChanging){var f=i.propertyChanging(u,d,r);if(!1===f||null===f)return}if(!t.hasOwnProperty("type")){var p=i.localize("propertyUnknownType",{name:u});i.log(p)}if("array"!==t.type||JSON.stringify(d)!==JSON.stringify(r)){if(null!=r&&"any"!==t.type&&"propertyObject"!==t.type&&t.type!==M.Types.getType(r)&&!t.validator||null===r&&!t.nullable){var v=!0;if("object"===t.type&&"array"===M.Types.getType(r)&&(v=!1),"number"===M.Types.getType(r)&&["integer","int","float"].findIndex((function(e){return e===t.type}))>=0&&(v=!1),v){var m=i.localize("propertyInvalidValueType",{name:u,actualType:M.Types.getType(r),type:t.type});return void i.error(m)}}if(t.isUpdating=!0,t.isHierarchicalProperty){!function e(t,r){for(var a=Object.keys(t),n=0;n<a.length;n++){var o=a[n],s=t[o];"object"==y(s)&&!M.Types.isArray(s)&&s&&s.constructor!==Date?e(s,r+"_"+o):i[r+"_"+o]=s}}(r,u)}else i._properties[u].value=r;if(!t.isUpdatingFromAttribute&&t.reflectToAttribute&&i.$.setAttributeValue(t.attributeName,r,t.type),i.isReady&&(!i.ownerElement||i.ownerElement&&i.ownerElement.isReady)){if("wait"===u&&(r||!d||i.isCompleted||(i.classList.remove("smart-visibility-hidden"),i.ownerElement&&i.ownerElement.updateBoundMappedNodes(),i.updateBoundMappedNodes(),i.complete())),"renderMode"===u)return;if(i.context!==i&&!i.wait){var g=i.context;i.context=i,i.propertyChangedHandler(u,d,r),i.context=g,t.observer&&i[t.observer]&&(i.context=i,i[t.observer](d,r),i.context=document),i._watch&&i._watch.properties.indexOf(u)>=0&&i._watch.propertyChangedCallback(u,d,r)}var b=t.notify||i.boundProperties[u];b&&(i.$.fireEvent(t.attributeName+"-changed",{context:i.context,oldValue:d,value:i[u]}),i.boundProperties[u]&&i.updateBoundNodes(u)),b&&i.templateProperties&&i.templateProperties[u]&&i.refreshTemplate(),i.dataContextProperties&&("dataContext"===u?i.applyDataContext():i.dataContextProperties[u]&&i.updateDataContextProperty(u))}t.isUpdating=!1}}}};for(var a=function(a){var n=r[a],o=e[n],s=M.Core.toDash(n),l=o.type||"any",u=l.indexOf("?")>=0||"any"===l;u&&"any"!==l&&(o.type=l.substring(0,l.length-1)),o.nullable=u,o.attributeName=s.toLowerCase(),o.name=n,o.reflectToAttribute=void 0===o.reflectToAttribute||o.reflectToAttribute,o.inherit&&i[n]&&(o.value=i[n].value),o.extend&&i[n]&&M.Core.assign(o.value,i[n].value),t.hasOwnProperty(n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:function(){if(this._properties[n])return this._properties[n].value},set:function(e){this.updateProperty(this,this._properties[n],e)}})},n=0;n<r.length;n+=1)a(n)}}},{key:"classNamesMap",get:function(){return{animation:"smart-animate",rippleAnimation:"smart-ripple"}}},{key:"hasAnimation",get:function(){return"none"!==this.animation}},{key:"hasRippleAnimation",get:function(){return"none"!==this.animation&&"advanced"===this.animation}},{key:"properties",get:function(){var e=this;return e._properties||(e._properties=[]),e._properties}},{key:"parents",get:function(){for(var e=this,r=[],i=e.parentNode;i&&9!==i.nodeType;)i instanceof HTMLElement==1&&r.push(i),i=i.parentNode;return window[t].EnableShadowDOM&&e.isInShadowDOM&&e.shadowParent&&(r=r.concat(e.shadowParent.parents)),r}},{key:"focused",get:function(){return this.contains(document.activeElement)}},{key:"_selector",get:function(){var e=this;return e.id?"#"+e.id:e.classList.length>0?"."+e.classList[0]:void 0}},{key:"hasStyleObserver",set:function(e){var t=this;void 0===t._hasStyleObserver&&(t._hasStyleObserver=e),e?_.watch(t):_.unwatch(t)},get:function(){return void 0===this._hasStyleObserver||this._hasStyleObserver}}],[{key:"clearCache",value:function(){this.cache={}}},{key:"properties",get:function(){return{animation:{value:"advanced",type:"string",allowedValues:["none","simple","advanced"]},unfocusable:{value:!1,type:"boolean"},disabled:{value:!1,type:"boolean"},dataContext:{value:null,reflectToAttribute:!1,type:"any"},debugMode:{value:!0,type:"boolean",reflectToAttribute:!1},locale:{value:"en",type:"string",reflectToAttribute:!1},localizeFormatFunction:{value:void 0,type:"function",reflectToAttribute:!1},messages:{value:{en:{propertyUnknownName:"Invalid property name: '{{name}}'!",propertyUnknownType:"'{{name}}' property is with undefined 'type' member!",propertyInvalidValue:"Invalid '{{name}}' property value! Actual value: '{{actualValue}}', Expected value: '{{value}}'!",propertyInvalidValueType:"Invalid '{{name}}' property value type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",methodInvalidValueType:"Invalid '{{name}}' method argument value type! Actual type: '{{actualType}}', Expected type: '{{type}}' for argument with index: '{{argumentIndex}}'!",methodInvalidArgumentsCount:"Invalid '{{name}}' method arguments count! Actual arguments count: '{{actualArgumentsCount}}', Expected at least: '{{argumentsCount}}' argument(s)!",methodInvalidReturnType:"Invalid '{{name}}' method return type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",elementNotInDOM:"Element does not exist in DOM! Please, add the element to the DOM, before invoking a method.",moduleUndefined:"Module is undefined.",missingReference:"{{elementType}}: Missing reference to '{{files}}'.",htmlTemplateNotSuported:"{{elementType}}: Web Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: '{{property}}' property accepts a string that must match the id of an HTMLTemplate element from the DOM."}},reflectToAttribute:!1,inherit:!0,type:"object"},props:{value:null,reflectToAttribute:!1,isHierarchicalProperty:!0,type:"any"},readonly:{value:!1,type:"boolean"},renderMode:{value:"auto",type:"string",reflectToAttribute:!1,allowedValues:["auto","manual"]},rightToLeft:{value:!1,type:"boolean"},rethrowError:{value:!0,type:"boolean",reflectToAttribute:!1},theme:{value:window[t].Theme,type:"string"},visibility:{value:"visible",allowedValues:["visible","collapsed","hidden"],type:"string"},wait:{value:!1,type:"boolean"}}}},{key:"requires",get:function(){return{}}},{key:"listeners",get:function(){return{"theme-changed":function(e){this.theme=e.detail.newValue}}}},{key:"methods",get:function(){return{}}},{key:"modules",get:function(){return window[t].Modules}},{key:"version",get:function(){return window[t].Version}}]),a}(u(HTMLElement)),P=[],F=[],I=[],E=!1,L=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);L&&parseInt(L[2],10)<=50&&(E=!0);var R=function(){function e(){p(this,e)}return m(e,null,[{key:"register",value:function(e,r){var i=r.prototype,a=g.toCamelCase(e).replace(/[a-z]+/,""),n=r.version||window[t].Version;if(!window.customElements.get(e)||window.customElements.get(e).version!==n){var o=e;for(n=n.split(".");window.customElements.get(e);)e=o+"-"+n.join("."),n[2]=parseInt(n[2])+1;if(!P[e]){if(e.startsWith(t.toLowerCase()))P[e]=window[t][a]=window[t.toLowerCase()+a]=r;else{var s=e.split("-")[0];s=s.substring(0,1).toUpperCase()+s.substring(1),window[t][s]||(window[t][s]={}),P[e]=window[t][s][a]=window[s.toLowerCase()+a]=r,window[t][a]&&(a=g.toCamelCase(e)),window[t][a]=r}i.elementName=a,i.defineElement(),F[e]&&F[e](i),window.customElements.define(e,r)}}}},{key:"registerElements",value:function(){var e=this;if(e.toRegister){e.isRegistering=!0;for(var t=0;t<e.toRegister.length;t++){var r=e.toRegister[t];e.register(r.tagName,r.element)}e.isRegistering=!1}}},{key:"get",value:function(e){if(P[e])return P[e]}},{key:"whenRegistered",value:function(e,t){if(!e)throw new Error("Syntax Error: Invalid tag name");var r=F[e],i=this.get(e),a=i?i.modules.length:3;try{r||i?!r&&i?(t(i.prototype),F[e]=void 0):r&&!i?F[e]=function(e){r(e),t(e)}:r&&i&&(i.proto&&(r(i.proto),t(i.proto)),F[e]=void 0):F[e]=function(e){try{t(e)}catch(e){var r=e instanceof Error?e.message:e.toString();console.log(r)}}}catch(e){var n=e instanceof Error?e.message:e.toString();console.log(n)}if(i&&a!==i.prototype.modules.length)for(var o=document.querySelectorAll(e),s=0;s<o.length;s++){var l=o[s];l.isCreated&&l._initElement()}}}]),e}();R.lazyRegister=!1,R.tagNames=[];var B=function(){function e(){p(this,e);var t=this;t.name="observableArray",t.observables=arguments.length<3?null:arguments[2];var r=new Proxy(t,{deleteProperty:function(e,t){return delete e[t],!0},apply:function(e,t,r){return e.apply(t,r)},get:function(e,r){return e[r]||isNaN(parseInt(r))?e[r]:t.getItem(parseInt(r))},set:function(e,r,i){return e[r]||isNaN(parseInt(r))?(e[r]=i,!0):(t.setItem(parseInt(r),i),!0)}});if(t._addArgs={eventName:"change",object:r,action:"add",index:null,removed:new Array,addedCount:1},t._removeArgs={eventName:"change",object:r,action:"remove",index:null,removed:null,addedCount:0},arguments.length>=1&&Array.isArray(arguments[0])){t._array=[];for(var i=arguments[0],a=0,n=i.length;a<n;a++){var o=t._getItem(t._array.length,i[a]);t._array.push(o)}}else t._array=Array.apply(null,arguments);return 2===arguments.length&&(t.notifyFn=arguments[1]),r}return m(e,[{key:"_notify",value:function(e){var t=this;t.canNotify&&t.notifyFn&&t.notifyFn(e)}},{key:"notify",value:function(e){e&&(this.notifyFn=e)}},{key:"toArray",value:function(){return this._array}},{key:"_getItem",value:function(e,t){var r=this;return"string"==typeof t||"number"==typeof t||void 0===t?t:new Proxy(t,{deleteProperty:function(e,t){delete e[t]},set:function(t,i,a){var n=t[i];return t[i]=a,!r._canNotify||!1===t.canNotify||(r.observables&&!r.observables[i]||r._notify({eventName:"change",object:r,target:t,action:"update",index:e,path:e+"."+i,oldValue:n,newValue:a,propertyName:i}),!0)}})}},{key:"getItem",value:function(e){return this._array[e]}},{key:"setItem",value:function(e,t){var r=this._array[e];this._array[e]=this._getItem(e,t),this._notify({eventName:"change",object:this._array,action:"update",index:e,removed:[r],addedCount:1})}},{key:"toString",value:function(){return this._array.toString()}},{key:"toLocaleString",value:function(){return this._array.toLocaleString()}},{key:"concat",value:function(){this._addArgs.index=this._array.length;var e=this._array.concat.apply(this._array,arguments);return new Smart.ObservableArray(e)}},{key:"join",value:function(e){return this._array.join(e)}},{key:"pop",value:function(){this._removeArgs.index=this._array.length-1,delete this[this._array.length-1];var e=this._array.pop();return this._removeArgs.removed=[e],this._notify(this._removeArgs),this._notifyLengthChange(),e}},{key:"push",value:function(){var e=this;if(e._addArgs.index=e._array.length,1===arguments.length&&Array.isArray(arguments[0]))for(var t=arguments[0],r=0,i=t.length;r<i;r++){var a=e._getItem(e._array.length,t[r]);e._array.push(a)}else{var n=e._getItem(e._addArgs.index,arguments[0]);e._array.push.apply(e._array,[n])}return e._addArgs.addedCount=e._array.length-e._addArgs.index,e._notify(e._addArgs),e._notifyLengthChange(),e._array.length}},{key:"_notifyLengthChange",value:function(){if(this.canNotify){var e=this._createPropertyChangeData("length",this._array.length);this._notify(e)}}},{key:"_createPropertyChangeData",value:function(e,t,r){return{eventName:"change",object:this,action:e,value:t,oldValue:r}}},{key:"reverse",value:function(){return this._array.reverse()}},{key:"shift",value:function(){var e=this._array.shift();return this._removeArgs.index=0,this._removeArgs.removed=[e],this._notify(this._removeArgs),this._notifyLengthChange(),e}},{key:"slice",value:function(e,t){return this._array.slice(e,t)}},{key:"sort",value:function(e){return this._array.sort(e)}},{key:"splice",value:function(e,t,r){var i,a=this,n=a._array.length;if(r&&r.length)for(var o=0;o<r.length;o++)i=a._array.splice(e+o,t,r[o]);else i=a._array.splice.apply(a._array,arguments);if(r){var s=a.canNotify;if(a.canNotify=!1,r.length)for(var l=0;l<r.length;l++)a.setItem(e+l,r[l]);else a.setItem(e,r);a.canNotify=s,a._notify({eventName:"change",object:this,action:"add",index:e,added:i,addedCount:a._array.length>n?a._array.length-n:0})}else a._notify({eventName:"change",object:this,action:"remove",index:e,removed:i,addedCount:a._array.length>n?a._array.length-n:0});return a._array.length!==n&&a._notifyLengthChange(),i}},{key:"unshift",value:function(){var e=this._array.length,t=this._array.unshift.apply(this._array,arguments);return this._addArgs.index=0,this._addArgs.addedCount=t-e,this._notify(this._addArgs),this._notifyLengthChange(),t}},{key:"indexOf",value:function(e,t){for(var r=t||0,i=this._array.length;r<i;r++)if(this._array[r]===e)return r;return-1}},{key:"lastIndexOf",value:function(e,t){for(var r=t||this._array.length-1;r>=0;r--)if(this._array[r]===e)return r;return-1}},{key:"find",value:function(e,t){return this._array.find(e,t)}},{key:"findIndex",value:function(e,t){return this._array.findIndex(e,t)}},{key:"every",value:function(e,t){return this._array.every(e,t)}},{key:"some",value:function(e,t){return this._array.some(e,t)}},{key:"forEach",value:function(e,t){this._array.forEach(e,t)}},{key:"map",value:function(e,t){return this._array.map(e,t)}},{key:"filter",value:function(e,t){return this._array.filter(e,t)}},{key:"reduce",value:function(e,t){return void 0!==t?this._array.reduce(e,t):this._array.reduce(e)}},{key:"reduceRight",value:function(e,t){return void 0!==t?this._array.reduceRight(e,t):this._array.reduceRight(e)}},{key:"move",value:function(e,t){this.splice(t,0,this.splice(e,1)[0])}},{key:"canNotify",get:function(){var e=this;return void 0===e._canNotify&&(e._canNotify=!0),e._canNotify},set:function(e){this._canNotify=e}},{key:"length",get:function(){return this._array.length},set:function(e){var t=this;c.isNumber(e)&&t._array&&t._array.length!==e&&t.splice(e,t._array.length-e)}}]),e}(),H={};window[t]&&(H=window[t]),window[t]=function(e,r){var i=e;if(e){if(e.indexOf("#")>=0||e.indexOf(".")>=0)return w[e]?w[e]:r?(w[e]=new r,function(e,t){var r=t.properties;t._properties=[];(function r(i,a){for(var n=Object.keys(i),o=function(o){var s=n[o],l=i[s];t._properties[a+s]=l,Array.isArray(l)?t._properties[a+s]=new B(l,(function(t){var r=s+"."+t.path,i=t.newValue,a=document.querySelector(e);if(a){for(var n=r.split("."),o=a,l=0;l<n.length;l++)o=o[n[l]];o=i}})):(Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:function(){return t._properties[a+s]},set:function(e){t._properties[a+s]=e}}),l&&"DataAdapter"===l.constructor.name||l&&"object"==y(l)&&Smart.DataAdapter&&l instanceof Smart.DataAdapter||"object"==y(l)&&l&&Object.keys(l).length>0&&r(l,a+s+"."))},s=0;s<n.length;s++)o(s)})(r,""),Object.defineProperty(t,"properties",{configurable:!1,enumerable:!0,get:function(){return r}});var i=document.querySelector(e);if(i&&i.isReady)for(var a in r)i[a]=r[a]}(e,w[e]),w[e]):void 0;if(r){if(R.tagNames[e]=r,R.lazyRegister){R.toRegister||(R.toRegister=[]);var a=g.toCamelCase(i).replace(/[a-z]+/,"");return window[t][a]=r,void R.toRegister.push({tagName:i,element:r})}R.register(i,r)}}},window.addEventListener("load",(function(){var e=window[t].Elements.tagNames,r=[];for(var i in e){for(var a=e[i],n=document.querySelectorAll("["+i+"]"),o=0;o<n.length;o++){var s=n[o];s instanceof HTMLDivElement&&(s.__proto__=a.prototype,s.created(),s.connectedCallback()),s.classList.add("smart-element-ready")}var l=a.name;"Item"===l&&(l="ListItem"),n=document.querySelectorAll('[is="'+t.toLocaleLowerCase()+l+'"]');for(var u=0;u<n.length;u++)r.push(n[u])}if(r.length>0){var d=function(e){for(var t=[],r=e.parentNode;r&&9!==r.nodeType;)r instanceof HTMLElement==1&&t.push(r),r=r.parentNode;return t};r.sort((function(e,t){var r=d(e).length,i=d(t).length;return r<i?1:r>i?-1:0}));for(var c=0;c<r.length;c++){var h=r[c],f=h.getAttribute("is");("smartItem"===f?new window.smartListItem(h):new window[f](h)).removeAttribute("is")}}}));var V=function e(){if("complete"===document.readyState&&"manual"!==window[t].RenderMode){I.sort((function(e,t){var r=e.element.parents.length,i=t.element.parents.length;return r<i?-1:r>i?1:0}));for(var r=0;r<I.length;r++)I[r].element.isLoading=!1,I[r].callback();I=[],document.removeEventListener("readystatechange",e)}};Object.assign(window[t],{Elements:R,Modules:[],BaseElement:function(e){l(u,e);var i=n(u);function u(e,t){var a;p(this,u);var n=s(a=i.call(this));if(e){t&&(n._initProperties=t);var l=function(e){if("string"==typeof e?document.querySelector(e):e){var i="string"==typeof e?document.querySelector(e):e;if(i instanceof HTMLDivElement){var a,o=document.createElement(n.tagName),s=r(i.attributes);try{for(s.s();!(a=s.n()).done;){var l=a.value;o.setAttribute(l.name,i.getAttribute(l.name))}}catch(e){s.e(e)}finally{s.f()}for(;i.childNodes.length;)o.appendChild(i.firstChild);return"string"==typeof e&&(o.id=e.substring(1)),o._initProperties=t,i.parentNode&&i.parentNode.replaceChild(o,i),o}if(t){var u=i.context;if(i._initProperties=t,i.isReady){i.context=i;var d={},c={};for(var h in t)d[h]=i[h],c[h]=t[h];Object.getOwnPropertyNames(t).length>0&&(i.initProperties(),i.propertyChangedHandler(t,d,c)),i.context=u}}return i}};if("string"==typeof e){var d=document.querySelectorAll(e),c=[];if(d.length>1){for(var h=0;h<d.length;h++){var f=l(d[h]);c.push(f)}return o(a,c)}}else if(e&&e.length>0){var v=e;if(v.length>1){for(var m=0;m<v.length;m++){var y=l(v[m]);P.push(y)}return o(a,P)}}return o(a,l(e))}return n._styleUrl="",n.isUtilityElement||n.created(),a}return m(u,[{key:"importStyle",value:function(e,t){this._importStyle(e,t)}},{key:"_importStyle",value:function(e,t){var r=this;if(r.shadowRoot&&e){var i=function(e){for(var i=r.shadowRoot.children,a=0;a<i.length;a++){var n=i[a];if(n instanceof HTMLLinkElement&&n.href===e)return t&&t(),null}var o=document.createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=e,o.onload=t,o},a=function(){for(var e=r.shadowRoot.children,t=null,i=0;i<e.length;i++){var a=e[i];a instanceof HTMLLinkElement&&(t=a)}return t}(),n=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)};if(Array.isArray(e)){for(var o=document.createDocumentFragment(),s=0;s<e.length;s++){var l=i(e[s]);l&&o.appendChild(l)}a?n(o,a):r.shadowRoot.insertBefore(o,r.shadowRoot.firstChild)}else{var u=i(e);if(!u)return;a?n(u,a):r.shadowRoot.insertBefore(u,r.shadowRoot.firstChild)}}}},{key:"attributeChanged",value:function(e,t,r){"style-url"===e&&(this.styleUrl=r)}},{key:"attributeChangedCallback",value:function(e,t,r){this.isReady&&a(f(u.prototype),"attributeChangedCallback",this).call(this,e,t,r)}},{key:"styleUrl",get:function(){return this._styleUrl},set:function(e){this._styleUrl=e}},{key:"isInShadowDOM",get:function(){var e=this;if(e.shadowParent)return!0;var t=!1;return void 0!==e.enableShadowDOM&&(t=function(t){for(;t;t=t.parentNode)if(t.host||t.enableShadowDOM||t.shadowRoot)return e.shadowParent=t.host?t.host:t,!0;return!1}(e.parentNode)),t}},{key:"enableShadowDOM",get:function(){return window[t].EnableShadowDOM}}],[{key:"observedAttributes",get:function(){var e=["external-style"];for(var t in this.prototype.extendedProperties){var r=this.prototype.extendedProperties[t];e.push(r.attributeName)}return e}},{key:"styleUrls",get:function(){return[]}},{key:"styles",get:function(){return""}}]),m(u,[{key:"_getRootShadowParent",value:function(){for(var e=this.shadowParent;e;){if(!e.shadowParent)return e;e=e.shadowParent}return e||this.shadowParent}},{key:"_getStyleUrl",value:function(e){var r=M.Core.getScriptLocation()+window[t].StyleBaseUrl+e;return this.shadowParent&&(r=r.replace("scoped/","")),r}},{key:"_getStyleUrls",value:function(){var e=this;e.nodeName.startsWith(t);for(var r=e.getStaticMember("styleUrls","array"),i=[],a=0;a<r.length;a++){var n=r[a],o=e._getStyleUrl(n);i.push(o)}return i}},{key:"_setupShadowRoot",value:function(){var e=this;e.classList.add("smart-element-init");var r=function(r){r.$.root&&(r.$.root.classList.add(t.toLowerCase()+"-element"),r.$.root.classList.add(e.nodeName.toLowerCase())),r.setup(),r.classList.remove("smart-element-init")};if(document.adoptedStyleSheets)if(window[t].AdoptedStyleSheets)window[t].AdoptedStyleSheetsLoaded?(e.shadowRoot.adoptedStyleSheets=window[t].AdoptedStyleSheets,r(e)):(e.shadowRoot.adoptedStyleSheets=window[t].AdoptedStyleSheets,window[t].AdoptedStyleSheetsLoadedQueue||(window[t].AdoptedStyleSheetsLoadedQueue=[]),window[t].AdoptedStyleSheetsLoadedQueue.push(e));else{var i=new CSSStyleSheet,a=M.Core.getScriptLocation()+"/styles/smart.default.css";i.replace('@import url("'+a+'")').then((function(){if(r(e),window[t].AdoptedStyleSheetsLoaded=!0,window[t].AdoptedStyleSheetsLoadedQueue){for(var i=window[t].AdoptedStyleSheetsLoadedQueue,a=0;a<i.length;a++){var n=i[a];r(n)}delete window[t].AdoptedStyleSheetsLoadedQueue}})).catch((function(e){console.error("Failed to load:",e)})),window[t].AdoptedStyleSheets=[i],document.adoptedStyleSheets=[i],e.shadowRoot.adoptedStyleSheets=window[t].AdoptedStyleSheets}}},{key:"connect",value:function(){var e=this;e.enableShadowDOM&&!e.shadowRoot&&!0!==e.isInShadowDOM&&(e.attachShadow({mode:"open"}),e.shadowRoot&&e.$.root&&(e.shadowRoot.appendChild(e.$.root),e.$.root.classList.add(e.nodeName.toLowerCase()))),e.shadowRoot||e.shadowParent?e.shadowRoot?e._setupShadowRoot():(e.shadowParent&&e.enableShadowDOM,e.setup()):e.setup()}},{key:"connectedCallback",value:function(){var e=this;if(!e.isLoading&&!e.isUtilityElement){e.classList.add("smart-element-init");var r=function(){e.classList.remove("smart-element-init")};if("complete"===document.readyState&&"manual"!==window[t].RenderMode){var i=e.parents;i.length&&"HTML"===i[i.length-1].nodeName?(e.checkIsInDomTimer&&clearInterval(e.checkIsInDomTimer),r(),e.connect()):(e.checkIsInDomTimer&&clearInterval(e.checkIsInDomTimer),i.length>0&&(e.checkIsInDomTimer=setInterval((function(){var t=e.parents;0===t.length&&clearInterval(e.checkIsInDomTimer),t.length>0&&"HTML"===t[t.length-1].nodeName&&(clearInterval(e.checkIsInDomTimer),r(),e.connect())}),100)))}else e.isLoading=!0,I.push({element:this,callback:function(){this.isReady||(r(),this.connect())}.bind(e)})}}},{key:"disconnectedCallback",value:function(){var e=this;e.isAttached?(e.shadowParent=null,e.detached()):e._resetShadowParent()}},{key:"adoptedCallback",value:function(){this.setup()}},{key:"appendTemplate",value:function(e){var t=this;t.shadowRoot?t.shadowRoot.appendChild(e):t.appendChild(e)}},{key:"_resetShadowParent",value:function(){var e=this;if(e.enableShadowDOM&&null!==e.shadowParent){for(var t=[],r=e.parentNode;r&&9!==r.nodeType;){if(r instanceof HTMLElement==1)t.push(r);else if(11===r.nodeType&&r.host){r=r.host;continue}r=r.parentNode}for(var i=0;i<t.length;i++)if(t[i]===e.shadowParent)return;t.length>0&&"HTML"===t[t.length-1].nodeName&&(e.shadowParent=null)}}}]),u}(O),Utilities:M,Import:function(e,t){var r=0,i=function(e,t){return new Promise((function(r){var i=document.createElement("script");i.src=e,i.onload=r;for(var a=0;a<document.head.children.length;a++){var n=document.head.children[a];if(n.src&&n.src.toString().indexOf(t)>=0)return void r()}document.head.appendChild(i)}))};return new Promise((function(a){var n=M.Core.getScriptLocation();if(t)for(var o=0;o<e.length;o++){var s=n+"/"+e[o];i(s,e[o]).then((function(){++r===e.length&&a()}))}else!function t(o){if(e[o]){var s=n+"/"+e[o];i(s,e[o]).then((function(){++r===e.length&&a(),t(o+1)}))}}(0)}))},ObservableArray:B,Observable:function(){function e(t,r){p(this,e);var i,a=this;return this.name="observable",t&&Object.assign(a,t),i=t,Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach((function(e){return"constructor"===e||!!e.startsWith("_")||void(a[e]=i[e])})),new Proxy(a,{deleteProperty:function(e,t){return delete e[t],!0},get:function(e,t){return e[t]},set:function(e,t,i){var n=e[t];return n===i||(e[t]=i,!("notifyFn"!==t&&!t.startsWith("_")&&"canNotify"!==t&&(!r||-1!==r.indexOf(t))&&a.canNotify&&(a._notify({target:e,propertyName:t,oldValue:n,newValue:i}),0)))}})}return m(e,[{key:"_notify",value:function(e){var t=this;if(t.canNotify&&t.notifyFn)for(var r=0;r<t.notifyFn.length;r++)t.notifyFn[r](e)}},{key:"notify",value:function(e){var t=this;e&&(t.notifyFn||(t.notifyFn=[]),t.notifyFn.push(e))}},{key:"canNotify",get:function(){var e=this;return void 0===e._canNotify&&(e._canNotify=!0),e._canNotify},set:function(e){this._canNotify=e}}]),e}(),Component:function(){function e(t,r){p(this,e);var i=this.name,a=null;return t?a=new window[i](t,r):(a=new window[i])._initProperties=r,this._element=a,a}return m(e,[{key:"name",get:function(){return"Component"}},{key:"element",get:function(){return this._element}}]),e}(),Theme:H.Theme||"",EnableShadowDOM:!1,BaseUrl:"./",StyleBaseUrl:"/styles/default/",Version:"7.2.0",RenderMode:H.RenderMode||"auto",Render:function(){var e=function(){window[t].RenderMode="",V()};"complete"===document.readyState?e():(window.removeEventListener("load",e),window.addEventListener("load",e))},License:"Evaluation"});var j=window[t].Theme;"manual"!==window[t].RenderMode&&document.addEventListener("readystatechange",V),Object.defineProperty(window[t],"Theme",{configurable:!1,enumerable:!0,get:function(){return j},set:function(e){var t=j;j=e,T.fireEvent("theme-changed",{oldValue:t,newValue:e},{bubbles:!0,cancelable:!0})}}),window[t]("smart-base-element",window[t].BaseElement),window[t]("smart-content-element",function(e){l(r,e);var t=n(r);function r(){return p(this,r),t.apply(this,arguments)}return m(r,[{key:"template",value:function(){return"<div inner-h-t-m-l='[[innerHTML]]'></div>"}},{key:"ready",value:function(){a(f(r.prototype),"ready",this).call(this),this.applyContent()}},{key:"clearContent",value:function(){for(var e=this;e.$.content.firstChild;)e.$.content.removeChild(e.$.content.firstChild)}},{key:"applyContent",value:function(){var e=this;if(void 0!==e.content)if(""!==e.content&&null!==e.content){if(e.content instanceof HTMLElement)return e.clearContent(),void e.$.content.appendChild(e.content);var t=document.createDocumentFragment(),r=document.createElement("div");t.appendChild(r),e.content instanceof HTMLElement?r.appendChild(e.content):r.innerHTML=e.content;var i=Array.from(r.childNodes);r.parentNode.removeChild(r);for(var a=0;a<i.length;a++)t.appendChild(i[a]);e.clearContent(),e.$.content.appendChild(t)}else e.clearContent();else e.content=e.$.content}},{key:"propertyChangedHandler",value:function(e,t,i){a(f(r.prototype),"propertyChangedHandler",this).call(this,e,t,i);var n=this;t!==i&&("innerHTML"===e&&(n.content=i,n.applyContent(),n.innerHTML=n.content=M.Core.html(n.$.content)),"content"===e&&n.applyContent())}}],[{key:"properties",get:function(){return{content:{type:"any",reflectToAttribute:!1},innerHTML:{type:"string",reflectToAttribute:!1}}}}]),r}(window[t].BaseElement)),window[t]("smart-scroll-viewer",function(e){l(r,e);var t=n(r);function r(){return p(this,r),t.apply(this,arguments)}return m(r,[{key:"template",value:function(){return'<div id="container" class="smart-container" role="presentation">\n                        <div id="scrollViewerContainer" class="smart-scroll-viewer-container" role="presentation">\n                            <div id="scrollViewerContentContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-scroll-viewer-content-container" role="presentation">\n                                <content></content>\n                            </div>\n                        </div>\n                        <smart-scroll-bar id="verticalScrollBar" animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]" orientation="vertical"></smart-scroll-bar>\n                        <smart-scroll-bar id="horizontalScrollBar" animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]"></smart-scroll-bar>\n                    </div>'}},{key:"appendChild",value:function(e){var t=this;if(e){if(!t.isCompleted||e.classList&&e.classList.contains("smart-resize-trigger-container")){var r=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,r.concat(Array.prototype.slice.call(arguments)))}t.$.scrollViewerContentContainer.appendChild(e)}}},{key:"removeChild",value:function(e){var t=this;if(e){if(!t.isCompleted||e.classList&&e.classList.contains("smart-resize-trigger-container")){var r=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,r.concat(Array.prototype.slice.call(arguments)))}t.$.scrollViewerContentContainer.removeChild(e)}}},{key:"removeAll",value:function(){this.isCompleted&&(this.$.scrollViewerContentContainer.innerHTML="")}},{key:"_horizontalScrollbarHandler",value:function(e){var t=this;t.$.scrollViewerContentContainer.style.left=(t.rightToLeft?1:-1)*t.scrollLeft+"px",e.stopPropagation(),t.onHorizontalChange&&t.onHorizontalChange(e)}},{key:"_verticalScrollbarHandler",value:function(e){var t=this;t.$.scrollViewerContentContainer.style.top=-t.scrollTop+"px",e.stopPropagation(),t.onVerticalChange&&t.onVerticalChange(e)}},{key:"_touchmoveHandler",value:function(e){var t=this;if(t._touchmoveInside&&e.cancelable)return e.preventDefault(),void e.stopPropagation();var r=t.computedVerticalScrollBarVisibility,i=t._touchCoords;if((t.computedHorizontalScrollBarVisibility||r)&&i){var a,n,o,s,l=e.touches[0];t._touchCoords=[l.pageX,l.pageY],r?(a=t.scrollTop,n=t.scrollHeight,o=l.pageY,s=i[1]):(a=t.scrollLeft,n=t.scrollWidth,o=l.pageX,s=i[0]);var u=parseFloat(o.toFixed(5)),d=parseFloat(s.toFixed(5));0===a&&u>=d||a===n&&u<=d||(o!==s&&(t._touchmoveInside=!0),e.cancelable&&(e.preventDefault(),e.stopPropagation()))}}},{key:"_touchstartHandler",value:function(e){var t=e.touches[0];this._touchCoords=[t.pageX,t.pageY]}},{key:"_mouseWheelHandler",value:function(e){var t=this;if(!t.disabled&&(t.computedHorizontalScrollBarVisibility||t.computedVerticalScrollBarVisibility))if(t.computedVerticalScrollBarVisibility){var r=t.scrollTop;if(0===r&&e.deltaY<0||r===t.scrollHeight&&e.deltaY>0)return;e.stopPropagation(),e.preventDefault(),t.scrollHeight>0&&t.scrollTo(t.scrollTop+t._getScrollCoefficient(e,t.offsetHeight))}else if(t.computedHorizontalScrollBarVisibility){var i=t.scrollLeft;if(0===i&&e.deltaX<0||i===t.scrollHeight&&e.deltaX>0)return;e.stopPropagation(),e.preventDefault(),t.scrollWidth>0&&t.scrollTo(void 0,t.scrollLeft+t._getScrollCoefficient(e,t.offsetWidth))}}},{key:"_overriddenHandler",value:function(){}},{key:"_upHandler",value:function(){delete this._touchCoords,delete this._touchmoveInside}},{key:"_getScrollCoefficient",value:function(e,t){var r,i=e.deltaMode,a=Math.abs(e.deltaY);return 0===i?r=a<100/3?a:t:1===i?r=a<1?a*(100/3):t:2===i&&(r=t),e.deltaY<0?-r:r}},{key:"applyContent",value:function(){a(f(r.prototype),"applyContent",this).call(this),this.refresh()}},{key:"scrollTo",value:function(e,t){var r=this;r._scrollView&&(void 0!==e&&r._scrollView.scrollTo(e),void 0!==t&&r._scrollView.scrollTo(t,!1))}},{key:"refreshScrollBarsVisibility",value:function(){var e=this;e._scrollView&&(e._scrollView.hScrollBar.disabled=e.disabled,e._scrollView.vScrollBar.disabled=e.disabled,"disabled"===e.horizontalScrollBarVisibility&&(e._scrollView.hScrollBar.disabled=!0),"disabled"===e.verticalScrollBarVisibility&&(e._scrollView.vScrollBar.disabled=!0),e.scrollWidth>0?e._scrollView.hScrollBar.$.removeClass("smart-hidden"):"visible"!==e.horizontalScrollBarVisibility&&e._scrollView.hScrollBar.$.addClass("smart-hidden"),e.scrollHeight>0?e._scrollView.vScrollBar.$.removeClass("smart-hidden"):"visible"!==e.verticalScrollBarVisibility&&e._scrollView.vScrollBar.$.addClass("smart-hidden"),"hidden"===e.horizontalScrollBarVisibility&&e._scrollView.hScrollBar.$.addClass("smart-hidden"),"hidden"===e.verticalScrollBarVisibility&&e._scrollView.vScrollBar.$.addClass("smart-hidden"),"visible"===e.horizontalScrollBarVisibility&&e._scrollView.hScrollBar.$.removeClass("smart-hidden"),"visible"===e.verticalScrollBarVisibility&&(e._scrollView.vScrollBar.$.removeClass("smart-hidden"),e.disabled||(e._scrollView.vScrollBar.disabled=e.scrollHeight<=0)),e.computedHorizontalScrollBarVisibility&&e.computedVerticalScrollBarVisibility?(e._scrollView.hScrollBar.$.addClass("bottom-corner"),e._scrollView.vScrollBar.$.addClass("bottom-corner")):(e._scrollView.hScrollBar.$.removeClass("bottom-corner"),e._scrollView.vScrollBar.$.removeClass("bottom-corner")))}},{key:"ready",value:function(){a(f(r.prototype),"ready",this).call(this);var e=this;e.$.verticalScrollBar.setAttribute("aria-controls",e.id),e.$.horizontalScrollBar.setAttribute("aria-controls",e.id),e._customScrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.refresh()}},{key:"refresh",value:function(){var e=this;function t(){var t=e.$.scrollViewerContentContainer.offsetWidth-e.$.scrollViewerContainer.offsetWidth;return t>0&&"hidden"!==e.horizontalScrollBarVisibility||"visible"===e.horizontalScrollBarVisibility?e.$.scrollViewerContainer.classList.add("hscroll"):e.$.scrollViewerContainer.classList.remove("hscroll"),t}function r(){var t;if(Smart.Utilities.Core.Browser.Safari){var r=e.$.scrollViewerContentContainer.getBoundingClientRect().height,i=e.$.scrollViewerContainer.getBoundingClientRect().height;t=r&&i?parseInt(r)-parseInt(i):e.$.scrollViewerContentContainer.offsetHeight-e.$.scrollViewerContainer.offsetHeight}else t=e.$.scrollViewerContentContainer.offsetHeight-e.$.scrollViewerContainer.offsetHeight;return t>0&&"hidden"!==e.verticalScrollBarVisibility||"visible"===e.verticalScrollBarVisibility?e.$.scrollViewerContainer.classList.add("vscroll"):e.$.scrollViewerContainer.classList.remove("vscroll"),t}if(e.$.scrollViewerContentContainer){var i=e.scrollWidth,a=e.scrollHeight;e.scrollWidth=t(),e.scrollHeight=r(),e.scrollHeight&&a===e.scrollHeight||(e.scrollWidth=t()),e.scrollWidth&&i===e.scrollWidth||(e.scrollHeight=r()),e.computedVerticalScrollBarVisibility&&(e.scrollHeight+=e._scrollView.hScrollBar.offsetHeight),e.computedHorizontalScrollBarVisibility&&(e.scrollWidth+=e._scrollView.vScrollBar.offsetWidth)}}},{key:"attached",value:function(){var e=this;a(f(r.prototype),"attached",this).call(this),e._scrollView||e._customScrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar))}},{key:"detached",value:function(){var e=this;a(f(r.prototype),"detached",this).call(this),e._scrollView&&(e._scrollView.unlisten(),delete e._scrollView)}},{key:"propertyChangedHandler",value:function(e,t,i){a(f(r.prototype),"propertyChangedHandler",this).call(this,e,t,i),"animation"!==e&&"theme"!==e&&this.refresh()}},{key:"computedHorizontalScrollBarVisibility",get:function(){var e=this;return e._scrollView&&e._scrollView.hScrollBar?!e._scrollView.hScrollBar.$.hasClass("smart-hidden"):null}},{key:"computedVerticalScrollBarVisibility",get:function(){var e=this;return e._scrollView&&e._scrollView.vScrollBar?!e._scrollView.vScrollBar.$.hasClass("smart-hidden"):null}},{key:"scrollWidth",get:function(){var e=this;return e._scrollView&&e._scrollView.hScrollBar?1===e._scrollView.hScrollBar.max&&"visible"===e.horizontalScrollBarVisibility?0:e._scrollView.hScrollBar.max:-1},set:function(e){var t=this;e<0&&(e=0),t._scrollView&&t._scrollView.hScrollBar&&(0===e&&"visible"===t.horizontalScrollBarVisibility?t._scrollView.hScrollBar.max=0:t._scrollView.hScrollBar.max=e,t.refreshScrollBarsVisibility())}},{key:"scrollHeight",get:function(){var e=this;return e._scrollView&&e._scrollView.vScrollBar?1===e._scrollView.vScrollBar.max&&"visible"===e.verticalScrollBarVisibility?0:e._scrollView.vScrollBar.max:0},set:function(e){var t=this;e<0&&(e=0),t._scrollView&&t._scrollView.vScrollBar&&(0===e&&"visible"===t.verticalScrollBarVisibility?t._scrollView.vScrollBar.max=1:t._scrollView.vScrollBar.max=e,t.refreshScrollBarsVisibility())}},{key:"scrollLeft",get:function(){var e=this;return e._scrollView&&e._scrollView.hScrollBar?e._scrollView.hScrollBar.value:0},set:function(e){var t=this;e<0&&(e=0),t._scrollView&&t._scrollView.hScrollBar&&(t._scrollView.hScrollBar.value=e)}},{key:"scrollTop",get:function(){var e=this;return e._scrollView&&e._scrollView.vScrollBar?e._scrollView.vScrollBar.value:0},set:function(e){var t=this;e<0&&(e=0),t._scrollView&&t._scrollView.vScrollBar&&(t._scrollView.vScrollBar.value=e)}}],[{key:"properties",get:function(){return{horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},touchScrollRatio:{type:"any",value:null},touchVelocityCoefficient:{type:"number",value:50},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}},{key:"listeners",get:function(){return{"horizontalScrollBar.change":"_horizontalScrollbarHandler","verticalScrollBar.change":"_verticalScrollbarHandler",touchmove:"_touchmoveHandler",touchstart:"_touchstartHandler",wheel:"_mouseWheelHandler","document.up":"_upHandler"}}},{key:"styleUrls",get:function(){return["smart.scrollviewer.css"]}}]),r}(window[t].ContentElement)),window[t].Utilities.Assign("PositionDetection",function(){function e(t,r,i,a){if(p(this,e),r){var n="dropDown"+Math.floor(65536*(1+Math.random())).toString(16).substring(1);r.id=n,t.setAttribute("aria-owns",n)}this.context=t,this.dropDown=r,this.defaultParent=i,this.closeMethod=a}return m(e,[{key:"handleAutoPositioning",value:function(){var e=this,t=e.context;if("auto"===t.dropDownPosition&&!t.disabled){var r,i=window.requestAnimationFrame,a=Date.now();return r=i((function n(){r=i(n),"auto"===t.dropDownPosition&&!t.disabled&&(t.isInShadowDOM?document.body.contains(t.shadowParent):document.body.contains(t))||cancelAnimationFrame(r),Date.now()-a>=200&&(e.scrollHandler(),a=Date.now())}))}}},{key:"checkBrowserBounds",value:function(e){var t=this.context;if("auto"===t.dropDownPosition&&!t.disabled)switch(e){case"vertically":this.checkBrowserBoundsVertically();break;case"horizontally":this.checkBrowserBoundsHorizontally();break;default:this.checkBrowserBoundsVertically(),this.checkBrowserBoundsHorizontally()}}},{key:"checkBrowserBoundsHorizontally",value:function(){var e,t=this.context,r=this.dropDown,i=0;g.isMobile||window.innerWidth===document.documentElement.clientWidth||(i=window.innerWidth-document.documentElement.clientWidth),null!==t._dropDownParent?e=!0:r.style.left="";var a=window.innerWidth-i,n=t.getBoundingClientRect().left;if(n<0&&(r.style.left=(e?0:Math.abs(n))+"px",n=parseFloat(r.style.left)),n+r.offsetWidth>a){var o=n-Math.abs(a-n-r.offsetWidth);e&&(o+=window.pageXOffset),r.style.left=(e?o:o-n)+"px",window.innerWidth===document.documentElement.clientWidth&&(r.style.left=parseFloat(r.style.left)+i+"px"),e&&window.innerHeight===document.documentElement.clientHeight&&this.positionDropDown(!0)}}},{key:"checkBrowserBoundsVertically",value:function(e){var t=this.context,r=this.dropDown,i=t._dropDownListPosition;e||(e=t.getBoundingClientRect()),0!==e.height&&(document.documentElement.clientHeight-Math.abs(e.top+e.height+r.offsetHeight)>=0?t._dropDownListPosition="bottom":e.top-r.offsetHeight>=0?t._dropDownListPosition="top":t._dropDownListPosition="overlay-center",this.updatePositionAttribute(i,t._dropDownListPosition))}},{key:"scrollHandler",value:function(){var e=this.context;if(e.parentElement){var t=e.getBoundingClientRect();if(t.top!==e._positionTop){var r=e._dropDownListPosition;this.checkBrowserBoundsVertically(t),e._dropDownListPosition!==r&&this.positionDropDown(),e._positionTop=t.top}}}},{key:"getDropDownParent",value:function(e){var t=this.context,r=this.dropDown,i=t.dropDownAppendTo;t._positionedParent=null,null===i?t._dropDownParent=null:"body"===i||i===document.body?t._dropDownParent=document.body:i instanceof HTMLElement?t._dropDownParent=i:"string"==typeof i?(i=document.getElementById(i))instanceof HTMLElement?t._dropDownParent=i:(t.dropDownAppendTo=null,t._dropDownParent=null):(t.dropDownAppendTo=null,t._dropDownParent=null);var a=t._dropDownParent;if(null!==a){for(;a&&"static"===window.getComputedStyle(a).position&&a!==document.body;)a=a.parentElement;a===document.body?t._positionedParent=null:t._positionedParent=a,r&&(r.setAttribute("animation",t.animation),""!==t.theme&&r.$.addClass(t.theme),e&&(t._dropDownParent.appendChild(r),r.$.addClass("smart-drop-down-repositioned")),-1===t.detachedChildren.indexOf(r)&&t.detachedChildren.push(r))}}},{key:"dropDownAppendToChangedHandler",value:function(){var e=this.context,t=this.dropDown,r=e._dropDownParent;this.getDropDownParent(),e._dropDownParent!==r&&(e[this.closeMethod](),["left","top","font-size","font-family","font-style","font-weight"].forEach((function(e){return t.style[e]=null})),null===e._dropDownParent?(this.defaultParent.appendChild(t),t.$.removeClass("smart-drop-down-repositioned")):(e._dropDownParent.appendChild(t),t.$.addClass("smart-drop-down-repositioned")))}},{key:"dropDownPositionChangedHandler",value:function(){this.dropDown.style.transition="none",this.context[this.closeMethod](),this.setDropDownPosition(),this.handleAutoPositioning()}},{key:"dropDownAttached",value:function(e){var t=this.context;null!==t._dropDownParent&&(t._dropDownParent.appendChild(this.dropDown),this.handleAutoPositioning(),e&&t[e]())}},{key:"dropDownDetached",value:function(){var e=this.context;null!==e._dropDownParent&&document.body.contains(this.dropDown)&&document.body.contains(e._dropDownParent)&&e._dropDownParent.removeChild(this.dropDown)}},{key:"setDropDownPosition",value:function(){var e=this.context,t=e.dropDownPosition,r=e._dropDownListPosition;"auto"===t?this.checkBrowserBounds():e._dropDownListPosition=t,this.updatePositionAttribute(r,e._dropDownListPosition)}},{key:"updatePositionAttribute",value:function(e,t){var r=this.context,i=this.dropDown;r.$.dropDownButton&&!r.$.dropDownButton.hasAttribute(t)&&(r.$.dropDownButton.removeAttribute(e),r.$.dropDownButton.setAttribute(t,"")),i.hasAttribute(t)||(i.style.transition="none",i.removeAttribute(e),i.setAttribute(t,""),requestAnimationFrame((function(){i.style.transition=null})))}},{key:"positionDropDown",value:function(e){var t=this.context,r=this.dropDown;if(t.opened&&null!==t._dropDownParent){var i,a,n=t.getBoundingClientRect();if(this.customPositionDropDown){var o=this.customPositionDropDown(n);i=o.left,a=o.top}else switch(i=n.left,a=n.top,t._dropDownListPosition){case"bottom":a+=t.$.container.offsetHeight-1;break;case"center-bottom":a+=t.$.container.offsetHeight-1,i+=t.offsetWidth-r.offsetWidth/2;break;case"center-top":a-=r.offsetHeight-1,i+=t.offsetWidth-r.offsetWidth/2;break;case"top":a-=r.offsetHeight-1;break;case"overlay-bottom":break;case"overlay-center":a-=r.offsetHeight/2-t.offsetHeight/2;break;case"overlay-top":a-=r.offsetHeight-t.offsetHeight}var s=this.getDropDownOffset();r.style.top=a+s.y+"px",e||(r.style.left=i+s.x+"px")}}},{key:"getDropDownOffset",value:function(){var e,t,r=this.context._positionedParent;if(r){var i=r.getBoundingClientRect();e=-i.left,t=-i.top}else e=window.pageXOffset,t=window.pageYOffset;return{x:e,y:t}}},{key:"placeOverlay",value:function(){var e=this.context;if(e.dropDownOverlay&&!e._overlay){var t=document.createElement("div");t.classList.add("smart-drop-down-overlay"),t.style.width=document.documentElement.scrollWidth+"px",t.style.height=document.documentElement.scrollHeight+"px",document.body.appendChild(t),e._overlay=t}}},{key:"removeOverlay",value:function(e){var t=this,r=t.context;r._overlay&&(r.hasAnimation&&e?requestAnimationFrame((function e(){t.dropDown.getBoundingClientRect().height>0?requestAnimationFrame(e):(document.body.removeChild(r._overlay),delete r._overlay)})):(document.body.removeChild(r._overlay),delete r._overlay))}}]),e}())}()}})},1:function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function n(e,t,r){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function o(e){return function(){var t,r=u(e);if(l()){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)}}function s(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==h(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}({5:function(e,t){Smart("smart-button",function(e){d(i,Smart.ContentElement);var t=o(i);function i(){return r(this,i),t.apply(this,arguments)}return a(i,[{key:"template",value:function(){return"<button class=\"smart-button smart-unselectable\" inner-h-t-m-l='[[innerHTML]]' id='button' type='[[type]]' name='[[name]]' value='[[value]]' disabled='[[disabled]]' role=\"presentation\"></button>"}},{key:"focus",value:function(){var e=this;e.$.button?e.$.button.focus():HTMLElement.prototype.focus.call(e)}},{key:"blur",value:function(){var e=this;e.$.button?e.$.button.blur():HTMLElement.prototype.blur.call(e)}},{key:"_upHandler",value:function(e){e.stopPropagation(),this.$.setAttributeValue("active",!1)}},{key:"_focusHandler",value:function(){this.$.setAttributeValue("focus",!0),this.$.fireEvent("focus")}},{key:"_blurHandler",value:function(){this.$.setAttributeValue("focus",!1),this.$.fireEvent("blur")}},{key:"_clickHandler",value:function(e){("release"!==this.clickMode&&"pressAndRelease"!==this.clickMode||this.readonly)&&(e.preventDefault(),e.stopPropagation())}},{key:"_downHandler",value:function(e){var t=this;if(!(t.disabled||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),t.$.setAttributeValue("active",!0),"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t.readonly))){var r="buttons"in e?e.buttons:e.which;t.$.fireEvent("click",{buttons:r,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}},{key:"_mouseEnterHandler",value:function(e){var t=this;if(!t.readonly&&(t.$button.setAttributeValue("hover",!0),t.$.setAttributeValue("hover",!0),"hover"===t.clickMode)){var r="buttons"in e?e.buttons:e.which;t.$.fireEvent("click",{buttons:r,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}},{key:"_touchEndHandler",value:function(){var e=this;setTimeout((function(){e.$button.setAttributeValue("hover",!1),e.$.setAttributeValue("hover",!1)}),300)}},{key:"_mouseLeaveHandler",value:function(){this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1)}},{key:"propertyChangedHandler",value:function(e,t,r){n(u(i.prototype),"propertyChangedHandler",this).call(this,e,t,r);var a=this;"disabled"===e?(a._setFocusable(),a.$button&&a.$button.setAttributeValue("hover",!1),a.$.setAttributeValue("hover",!1),a instanceof Smart.RepeatButton&&a._stopRepeat()):"unfocusable"===e&&a._setFocusable()}},{key:"_setFocusable",value:function(){var e=this.$.button?this.$.button:this;if(this.disabled||this.unfocusable)return e.removeAttribute("tabindex"),void(e.tabIndex=-1);e.tabIndex=this.tabIndex>0?this.tabIndex:0}},{key:"ready",value:function(){var e=this;n(u(i.prototype),"ready",this).call(this),e.setAttribute("role","button"),e._setFocusable(),e.enableShadowDOM&&e.$.hiddenInput&&e.appendChild(e.$.hiddenInput)}}],[{key:"properties",get:function(){return{value:{type:"string"},name:{type:"string"},type:{value:"button",type:"string"},clickMode:{allowedValues:["hover","press","release","pressAndRelease"],type:"string",value:"release"}}}},{key:"styleUrls",get:function(){return["smart.button.css"]}},{key:"listeners",get:function(){return{"button.down":"_downHandler","button.mouseenter":"_mouseEnterHandler","button.mouseleave":"_mouseLeaveHandler","button.touchend":"_touchEndHandler","button.click":"_clickHandler","button.up":"_upHandler",up:"_upHandler","button.focus":"_focusHandler","button.blur":"_blurHandler"}}}]),i}()),Smart("smart-repeat-button",function(e){d(i,Smart.Button);var t=o(i);function i(){return r(this,i),t.apply(this,arguments)}return a(i,[{key:"_clickHandler",value:function(e){var t=this;("release"!==t.clickMode||t.preventDefaultClick||t.readonly||t.disabled)&&(e.preventDefault(),e.stopPropagation(),t.preventDefaultClick=!1)}},{key:"_updateInBoundsFlag",value:function(e){var t=this;-1!==e.type.indexOf("leave")?(t._isPointerInBounds=!1,t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)):(t._isPointerInBounds=!0,t.$button.setAttributeValue("hover",!0),t.$.setAttributeValue("hover",!0)),1!==("buttons"in e?e.buttons:e.which)&&t._stopRepeat(e)}},{key:"_startRepeat",value:function(e){var t=this;t.setAttribute("active",""),t._initialTimer||t.readonly||(t._initialTimer=setTimeout((function(){t._repeatTimer=setInterval((function(){if(t._isPointerInBounds){var r="buttons"in e?e.buttons:e.which;t.$.fireEvent("click",{buttons:r,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),t.preventDefaultClick=!0}}),t.delay)}),t.initialDelay))}},{key:"_stopRepeat",value:function(e){var t=this;t.readonly||e&&("pointercancel"===e.type||e.originalEvent&&"pointercancel"===e.originalEvent.type)||(t.$.setAttributeValue("active",!1),t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null))}},{key:"_touchmoveHandler",value:function(e){this.preventDefaultClick&&e.cancelable&&(e.preventDefault(),e.stopPropagation())}},{key:"_overriddenHandler",value:function(){}}],[{key:"properties",get:function(){return{delay:{value:50,type:"number"},initialDelay:{value:150,type:"number"}}}},{key:"listeners",get:function(){return{"button.down":"_startRepeat","button.mouseenter":"_overriddenHandler","button.mouseleave":"_overriddenHandler","button.pointerenter":"_updateInBoundsFlag","button.pointerleave":"_updateInBoundsFlag","button.touchmove":"_touchmoveHandler","document.up":"_stopRepeat"}}}]),i}()),Smart("smart-toggle-button",function(e){d(i,Smart.Button);var t=o(i);function i(){return r(this,i),t.apply(this,arguments)}return a(i,[{key:"ready",value:function(){n(u(i.prototype),"ready",this).call(this),this._setAriaState()}},{key:"_setAriaState",value:function(){var e=this,t=e.checked;null!==t?e.setAttribute("aria-pressed",t):e.setAttribute("aria-pressed","mixed")}},{key:"_buttonClickHandler",value:function(){}},{key:"_buttonMouseLeaveHandler",value:function(){this.removeAttribute("hover")}},{key:"_buttonMouseEnterHandler",value:function(){this.setAttribute("hover",""),this.disabled||this.readonly||"hover"!==this.clickMode||(this._changeCheckState("pointer"),this.focus(),this._updateHidenInputNameAndValue())}},{key:"_documentUpHandler",value:function(e){this._pressed&&(this._pressed=!1,this.disabled||this.readonly||"press"===this.clickMode||"pointercancel"===e.originalEvent.type||(this._changeCheckState("pointer"),this.focus(),this._updateHidenInputNameAndValue()))}},{key:"_downHandler",value:function(e){var t=this;t.disabled||t.readonly||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),t._pressed=!0,"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||(t._changeCheckState("pointer"),t.$.fireEvent("click"),t._updateHidenInputNameAndValue()),"press"===t.clickMode&&(e.preventDefault(),e.stopPropagation()))}},{key:"_dragStartHandler",value:function(e){e.preventDefault()}},{key:"_keyHandler",value:function(e){var t=this;if(!0!==t.disabled&&!t.readonly&&32===e.keyCode){if("keydown"===e.type)return void e.preventDefault();if("none"===t.switchMode)return;t._changeCheckState("keyboard"),t._updateHidenInputNameAndValue()}}},{key:"_changeCheckState",value:function(e){var t=this,r=null;null===t.checked?t.checked=!0:(r=t.checked,t.checked=!t.checked),t._handleTextSelection(),t.$.fireEvent("change",{value:t.checked,oldValue:r,changeType:e}),t._setAriaState()}},{key:"_handleTextSelection",value:function(){var e=this;e.$.addClass("smart-unselectable"),e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){return e.$.removeClass("smart-unselectable")}),500)}},{key:"propertyChangedHandler",value:function(e,t,r){n(u(i.prototype),"propertyChangedHandler",this).call(this,e,t,r);var a=this;if("checked"===e)return a.$.fireEvent("change",{value:r,oldValue:t,changeType:"api"}),void a._setAriaState();switch(e){case"trueTemplate":a._handleTemplate(!0);break;case"falseTemplate":a._handleTemplate(!1);break;case"indeterminateTemplate":a._handleTemplate()}}},{key:"_htmlBindOnInitialization",value:function(){this._bindContentProperty("trueContent","smart-true-content"),this._bindContentProperty("falseContent","smart-false-content"),this._bindContentProperty("indeterminateContent","smart-indeterminate-content")}},{key:"_bindContentProperty",value:function(e,t){var r=this;if(r.$[e+"Container"]){var i=document.createElement("div");i.innerHTML=r.innerHTML;var a,n=i.getElementsByClassName(t);if(n.length>0)for(var o=0;o<n.length;o++)a=n[o];""===r[e]&&(r[e]=void 0===a?"":a.outerHTML),r.$[e+"Container"].innerHTML=r[e]}}},{key:"_updateContentProperties",value:function(){var e=this;function t(t){e.$[t+"Container"]&&(e[t]=e.$[t+"Container"].innerHTML)}t("trueContent"),t("falseContent"),t("indeterminateContent")}},{key:"_updateHidenInputValue",value:function(){var e,t=this;t.$.hiddenInput&&(e=null===t.checked?"null":!1===t.checked?"off":t.value||"on",t.$.hiddenInput.setAttribute("value",e))}},{key:"_updateHidenInputName",value:function(){if(this.$.hiddenInput){var e=!1===this.checked?"":this.name||"";this.$.hiddenInput.setAttribute("name",e)}}},{key:"_updateHidenInputNameAndValue",value:function(){this._updateHidenInputName(),this._updateHidenInputValue()}},{key:"_handleTemplate",value:function(e,t){var r,i,a,n=this;if(!0===e?(r=n.trueTemplate,i=n.$.trueContentContainer,a=n.trueContent):!1===e?(r=n.falseTemplate,i=n.$.falseContentContainer,a=n.falseContent):(r=n.indeterminateTemplate,i=n.$.indeterminateContentContainer,a=n.indeterminateContent),t&&(i.innerHTML=a||""),null!==r&&r)if("function"!=typeof r)if("content"in document.createElement("template"))if(null!==(r=document.getElementById(r))&&"content"in r){for(var o,s=r.content,l=s.childNodes.length,u=/{{\w+}}/g,d=[],c=0;c<l;c++)for(o=u.exec(s.childNodes[c].innerHTML);o;)d.push({childNodeIndex:c,bindingString:o[0]}),o=u.exec(s.childNodes[c].innerHTML);for(var h,f,p=d.length,v=document.importNode(r.content,!0),m=0;m<p;m++){h=v.childNodes[d[m].childNodeIndex],f=d.length;for(var y=0;y<f;y++)h.innerHTML=h.innerHTML.replace(d[m].bindingString,a)}i.innerHTML="";for(var g=0;g<v.childNodes.length;g++)v.childNodes[g].outerHTML&&(i.innerHTML+=v.childNodes[g].outerHTML)}else n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:"template"}));else n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}));else r(i,{value:a})}}],[{key:"properties",get:function(){return{checked:{value:!1,type:"boolean?"},falseContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminate:{value:!1,type:"boolean"},trueContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateTemplate:{value:null,type:"any"},trueTemplate:{value:null,type:"any"},falseTemplate:{value:null,type:"any"},type:{value:"toggle",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}},{key:"listeners",get:function(){return{keydown:"_keyHandler",keyup:"_keyHandler",dragstart:"_dragStartHandler","button.click":"_buttonClickHandler","button.mouseenter":"_buttonMouseEnterHandler","button.mouseleave":"_buttonMouseLeaveHandler","document.up":"_documentUpHandler"}}}]),i}())}})},11:function(e,t){function r(e,t,i){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}})(e,t,i||e)}function i(e){return function(){var t,r=s(e);if(o()){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)}}function a(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?n(e):t}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==f(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=32)}({32:function(e,t){Smart.Utilities.Assign("Draw",function(){function e(t,r){d(this,e);var i=this;i.host=t,i.renderEngine=r||"",i.refresh();var a=["clear","removeElement","attr","getAttr","line","circle","rect","path","pieslice","pieSlicePath","text","measureText"];for(var n in a)i._addFn(Smart.Utilities.Draw.prototype,a[n])}return h(e,[{key:"_addFn",value:function(e,t){e[t]||(e[t]=function(){return this.renderer[t].apply(this.renderer,arguments)})}},{key:"_initRenderer",value:function(e){return this.createRenderer(this,e)}},{key:"_internalRefresh",value:function(){var e=this;if(e.renderer||(e.host.innerHTML="",e._initRenderer(e.host)),"none"!==window.getComputedStyle(e.host).display){var t=e.renderer;if(t){var r=t.getRect();e._render({x:1,y:1,width:r.width,height:r.height})}}}},{key:"_render",value:function(e){this._plotRect=e}},{key:"refresh",value:function(){this._internalRefresh()}},{key:"getSize",value:function(){var e=this._plotRect;return{width:e.width,height:e.height}}},{key:"toGreyScale",value:function(e){if(-1===e.indexOf("#"))return e;var t=this.cssToRgb(e);t[0]=t[1]=t[2]=Math.round(.3*t[0]+.59*t[1]+.11*t[2]);var r=this.rgbToHex(t[0],t[1],t[2]);return"#"+r[0]+r[1]+r[2]}},{key:"decToHex",value:function(e){return e.toString(16)}},{key:"hexToDec",value:function(e){return parseInt(e,16)}},{key:"rgbToHex",value:function(e,t,r){return[this.decToHex(e),this.decToHex(t),this.decToHex(r)]}},{key:"hexToRgb",value:function(e,t,r){return[this.hexToDec(e),this.hexToDec(t),this.hexToDec(r)]}},{key:"cssToRgb",value:function(e){return e.indexOf("rgb")<=-1?this.hexToRgb(e.substring(1,3),e.substring(3,5),e.substring(5,7)):e.substring(4,e.length-1).split(",")}},{key:"hslToRgb",value:function(e){var t,r,i,a=parseFloat(e[0]),n=parseFloat(e[1]),o=parseFloat(e[2]);if(0===n)t=r=i=o;else{var s=o<.5?o*(1+n):o+n-o*n,l=2*o-s;t=this.hueToRgb(l,s,a+1/3),r=this.hueToRgb(l,s,a),i=this.hueToRgb(l,s,a-1/3)}return[255*t,255*r,255*i]}},{key:"hueToRgb",value:function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}},{key:"rgbToHsl",value:function(e){var t,r,i=parseFloat(e[0])/255,a=parseFloat(e[1])/255,n=parseFloat(e[2])/255,o=Math.max(i,a,n),s=Math.min(i,a,n),l=(o+s)/2;if(o===s)t=r=0;else{var u=o-s;switch(r=l>.5?u/(2-o-s):u/(o+s),o){case i:t=(a-n)/u+(a<n?6:0);break;case a:t=(n-i)/u+2;break;case n:t=(i-a)/u+4}t/=6}return[t,r,l]}},{key:"swap",value:function(e,t){var r=e;e=t,t=r}},{key:"getNum",value:function(e){if(e.constructor!==Array){if(isNaN(e))return 0}else for(var t=0;t<e.length;t++)if(!isNaN(e[t]))return e[t];return 0}},{key:"_ptRotate",value:function(e,t,r,i,a){var n=Math.sqrt(Math.pow(Math.abs(e-r),2)+Math.pow(Math.abs(t-i),2)),o=Math.asin((e-r)/n)+a;return{x:e=r+Math.cos(o)*n,y:t=i+Math.sin(o)*n}}},{key:"log",value:function(e,t){return Math.log(e)/(t?Math.log(t):1)}},{key:"_mod",value:function(e,t){var r=Math.abs(e>t?t:e),i=1;if(0!==r)for(;r*i<100;)i*=10;return(e*=i)%(t*=i)/i}},{key:"createRenderer",value:function(e,t){var r=e,i=r.renderer=null;return document.createElementNS&&"HTML5"!==r.renderEngine&&(i=new Smart.Utilities.SvgRenderer(this)),null!==i||"HTML5"!==r.renderEngine&&void 0!==r.renderEngine||(i=new Smart.Utilities.HTML5Renderer(this)),i.init(t),r.renderer=i,i}},{key:"getByPriority",value:function(e){for(var t=void 0,r=0;r<e.length;r++){var i=e[r];if(null!=i&&""!==i){t=i;break}}return t}},{key:"get",value:function(e,t,r){return void 0!==r?e[t][r]:e[t]}},{key:"min",value:function(e,t){for(var r=NaN,i=0;i<e.length;i++){var a=this.get(e,i,t);(isNaN(r)||a<r)&&(r=a)}return r}},{key:"max",value:function(e,t){for(var r=NaN,i=0;i<e.length;i++){var a=this.get(e,i,t);(isNaN(r)||a>r)&&(r=a)}return r}},{key:"sum",value:function(e,t){for(var r=0,i=0;i<e.length;i++){var a=this.get(e,i,t);isNaN(a)||(r+=a)}return r}},{key:"count",value:function(e,t){for(var r=0,i=0;i<e.length;i++){var a=this.get(e,i,t);isNaN(a)||r++}return r}},{key:"avg",value:function(e,t){return this.sum(e,t)/Math.max(1,this.count(e,t))}},{key:"filter",value:function(e,t){if(!t)return e;for(var r=[],i=0;i<e.length;i++)t(e[i])&&r.push(e[i]);return r}},{key:"scale",value:function(e,t,r,i){if(isNaN(e))return NaN;if((e<Math.min(t.min,t.max)||e>Math.max(t.min,t.max))&&(!i||!0!==i.ignore_range))return NaN;var a=NaN,n=1;if(void 0===t.type||"logarithmic"!==t.type){var o=Math.abs(t.max-t.min);o||(o=1),n=Math.abs(e-Math.min(t.min,t.max))/o}else if("logarithmic"===t.type){var s=t.base;isNaN(s)&&(s=10);var l=Math.min(t.min,t.max);l<=0&&(l=1);var u=Math.max(t.min,t.max);u<=0&&(u=1);var d=this.log(u,s);u=Math.pow(s,d);var c=this.log(l,s);l=Math.pow(s,c);var h=this.log(e,s);n=Math.abs(h-c)/(d-c)}if("logarithmic"===r.type){var f=r.base;isNaN(f)&&(f=10);var p=this.log(r.max,f),v=this.log(r.min,f);r.flip&&(n=1-n);var m=Math.min(v,p)+n*Math.abs(p-v);a=Math.pow(f,m)}else a=Math.min(r.min,r.max)+n*Math.abs(r.max-r.min),r.flip&&(a=Math.max(r.min,r.max)-a+r.min);return a}},{key:"axis",value:function(e,t,r){if(r<=1)return[t,e];(isNaN(r)||r<2)&&(r=2);for(var i=0;Math.round(e)!==e&&Math.round(t)!==t&&i<10;)e*=10,t*=10,i++;for(var a=(t-e)/r;i<10&&Math.round(a)!==a;)e*=10,t*=10,a*=10,i++;for(var n,o=[1,2,5],s=0;;){var l=s%o.length,u=Math.floor(s/o.length),d=Math.pow(10,u)*o[l];if(l=(s+1)%o.length,u=Math.floor((s+1)/o.length),n=Math.pow(10,u)*o[l],a>=d&&a<n)break;s++}for(var c=n,h=[],f=this.renderer._rnd(e,c,!1),p=i<=0?1:Math.pow(10,i);f<t+c;)h.push(f/p),f+=c;return h}},{key:"_widgetToImage",value:function(e,t,r,i,a){var n=e;if(!n)return!1;void 0!==r&&""!==r||(r="image."+t);var o=n.renderEngine,s=n.animation;if(n.animation="none",n.renderEngine="HTML5",n.renderEngine!==o)try{n.refresh()}catch(e){return n.renderEngine=o,n.refresh(),n.animation=s,!1}var l=n.renderer.getContainer().firstElementChild,u=!0;"function"==typeof i&&(u=i(e,l));var d=!0;return u&&(d=this.exportImage(e,l,t,r,a)),n.renderEngine!==o&&(n.renderEngine=o,n.refresh(),n.animation=s),d}},{key:"_saveAsImage",value:function(e,t){return this._widgetToImage(this,e,t)}},{key:"saveAsPNG",value:function(e){return this._saveAsImage("png",e)}},{key:"saveAsJPEG",value:function(e){return this._saveAsImage("jpeg",e)}},{key:"exportImage",value:function(e,t,r,i,a){if(!t)return!1;var n="pdf"===r.toLowerCase();n&&(r="jpeg"),void 0!==i&&""!==i||(i="image."+r);var o=!0;if("print"!==r){try{if(t)if(n){a=a||"portrait";var s={content:{image:t.toDataURL("image/"+r),width:Math.min(t.width/1.35,"portrait"===a?515:762)},pageOrientation:a};try{pdfMake.createPdf(s).download(i)}catch(t){e.error(e.localize("missingReference",{files:"pdfmake.min.js"}))}}else{Smart.Utilities.DataExporter||e.error(e.localize("missingReference",{files:"smart.export.js"}));var l=new Smart.Utilities.DataExporter;t.toBlob((function(e){l.downloadFile(e,r,i)}))}}catch(e){o=!1}return o}var u=window.open("","","width=800,height=500"),d=u.document.open(),c='<!DOCTYPE html><html><head><meta charset="utf-8" /><title>jQWidgets Chart</title></head><body><img src="'+t.toDataURL()+'" /></html>';try{d.write(c),d.close(),setTimeout((function(){u.print(),u.close()}),100)}catch(e){}}}]),e}()),Smart.Utilities.Assign("Renderer",function(){function e(t){d(this,e),this.draw=t,this._gradients={},this._toRadiansCoefficient=2*Math.PI/360}return h(e,[{key:"pieSlicePath",value:function(e,t,r,i,a,n,o){i||(i=1);var s=Math.abs(a-n),l=s>180?1:0;s>=360&&(n=a+359.99);var u=a*this._toRadiansCoefficient,d=n*this._toRadiansCoefficient,c=e,h=e,f=t,p=t,v=!isNaN(r)&&r>0;v&&(o=0);var m=Math.cos(u),y=Math.sin(u),g=Math.cos(d),b=Math.sin(d);if(o+r>0){if(o>0){var _=(s/2+a)*this._toRadiansCoefficient;e+=o*Math.cos(_),t-=o*Math.sin(_)}v&&(c=e+r*m,f=t-r*y,h=e+r*g,p=t-r*b)}var x=e+i*m,w=e+i*g,S=t-i*y,k=t-i*b,C="",A=Math.abs(Math.abs(n-a)-360)>.02;return v?(C="M "+h+","+p,C+=" a"+r+","+r,C+=" 0 "+l+",1 "+(c-h)+","+(f-p),C+=A?" L"+x+","+S:" M"+x+","+S,C+=" a"+i+","+i,C+=" 0 "+l+",0 "+(w-x)+","+(k-S),A&&(C+=" Z")):(C="M "+w+","+k,C+=" a"+i+","+i,C+=" 0 "+l+",1 "+(x-w)+","+(S-k),A&&(C+=" L"+e+","+t,C+=" Z")),C}},{key:"measureText",value:function(e,t,r,i){var a=this._getTextParts(e,t,r),n=a.width,o=a.height;!1===i&&(o/=.6);var s={};if(isNaN(t)&&(t=0),0===t)s={width:this._rup(n),height:this._rup(o)};else{var l=t*Math.PI*2/360,u=Math.abs(Math.sin(l)),d=Math.abs(Math.cos(l)),c=Math.abs(n*u+o*d),h=Math.abs(n*d+o*u);s={width:this._rup(h),height:this._rup(c)}}return i&&(s.textPartsInfo=a),s}},{key:"alignTextInRect",value:function(e,t,r,i,a,n,o,s,l,u){var d=l*Math.PI*2/360,c=Math.sin(d),h=Math.cos(d),f=a*c,p=a*h;"center"===o||""===o||"undefined"===o?e+=r/2:"right"===o&&(e+=r),"center"===s||"middle"===s||""===s||"undefined"===s?t+=i/2:"bottom"===s?t+=i-n/2:"top"===s&&(t+=n/2);var v="middle";-1!==(u=u||"").indexOf("top")?v="top":-1!==u.indexOf("bottom")&&(v="bottom");var m="center";return-1!==u.indexOf("left")?m="left":-1!==u.indexOf("right")&&(m="right"),"center"===m?(e-=p/2,t-=f/2):"right"===m&&(e-=p,t-=f),"top"===v?(e-=n*c,t+=n*h):"middle"===v&&(e-=n*c/2,t+=n*h/2),{x:e=this._rup(e),y:t=this._rup(t)}}},{key:"adjustColor",value:function(e,t){if("string"!=typeof e)return"#000000";if(-1===e.indexOf("#"))return e;var r=this.draw,i=r.cssToRgb(e),a=r.rgbToHsl(i);a[2]=Math.min(1,a[2]*t),a[1]=Math.min(1,a[1]*t*1.1),i=r.hslToRgb(a),e="#";for(var n=0;n<3;n++){var o=Math.round(i[n]);1===(o=r.decToHex(o)).toString().length&&(e+="0"),e+=o}return e.toUpperCase()}},{key:"_rup",value:function(e){var t=Math.round(e);return e>t&&t++,t}},{key:"_ptdist",value:function(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))}},{key:"_rnd",value:function(e,t,r,i){if(isNaN(e))return e;void 0===i&&(i=!0);var a=e-(!0===i?e%t:this._mod(e,t));return e===a?a:(r?e>a&&(a+=t):a>e&&(a-=t),1===t?Math.round(a):a)}},{key:"_ptrnd",value:function(e){if(!document.createElementNS)return Math.round(e)===e?e:this._rnd(e,1,!1,!0);var t=this._rnd(e,.5,!1,!0);return.5!==Math.abs(t-Math.round(t))?t>e?t-.5:t+.5:t}},{key:"_getContrastColor",value:function(e){if(void 0!==e){var t=this.draw.hexToRgb(e.slice(1,3),e.slice(3,5),e.slice(5,7));return(.299*t[0]+.61*t[1]+.114*t[2])/255>.6?"#000000":"#FFFFFF"}}}]),e}()),Smart.Utilities.Assign("SvgRenderer",function(e){l(a,Smart.Utilities.Renderer);var t=i(a);function a(e){var r;return d(this,a),(r=t.call(this,e))._svgns="http://www.w3.org/2000/svg",r._openGroups=[],r._clipId=0,r}return h(a,[{key:"init",value:function(e){var t=document.createElement("div");t.className="drawContainer",t.onselectstart=function(){return!1},e.appendChild(t),this.host=e,this.container=t;try{var r=document.createElementNS(this._svgns,"svg");r.setAttribute("version","1.1"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("overflow","hidden"),t.appendChild(r),this.canvas=r}catch(e){return!1}return this._id=(new Date).getTime(),this.clear(),!0}},{key:"getType",value:function(){return"SVG"}},{key:"refresh",value:function(){}},{key:"getRect",value:function(){return{x:0,y:0,width:Math.max(this._rup(this.host.offsetWidth)-1,0),height:Math.max(this._rup(this.host.offsetHeight)-1,0)}}},{key:"getContainer",value:function(){return this.container}},{key:"clear",value:function(){for(;this.canvas.childNodes.length>0;)this.removeElement(this.canvas.firstElementChild);this._defaultParent=void 0,this._defs=document.createElementNS(this._svgns,"defs"),this._gradients={},this.canvas.appendChild(this._defs)}},{key:"removeElement",value:function(e){if(void 0!==e)try{for(;e.firstChild;)this.removeElement(e.firstChild);e.parentNode?e.parentNode.removeChild(e):this.canvas.removeChild(e)}catch(e){}}},{key:"beginGroup",value:function(){var e=this._activeParent(),t=document.createElementNS(this._svgns,"g");return e.appendChild(t),this._openGroups.push(t),t}},{key:"endGroup",value:function(){0!==this._openGroups.length&&this._openGroups.pop()}},{key:"_activeParent",value:function(){return 0===this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]}},{key:"createClipRect",value:function(e){var t=document.createElementNS(this._svgns,"clipPath"),r=document.createElementNS(this._svgns,"rect");return this.attr(r,{x:e.x,y:e.y,width:e.width,height:e.height,fill:"none"}),this._clipId=this._clipId||0,t.id="cl"+this._id+"_"+(++this._clipId).toString(),t.appendChild(r),this._defs.appendChild(t),t}},{key:"getWindowHref",value:function(){var e=window.location.href;return e?e=(e=e.replace(/([\('\)])/g,"\\$1")).replace(/#.*$/,""):e}},{key:"setClip",value:function(e,t){var r="url("+this.getWindowHref()+"#"+t.id+")";return this.attr(e,{"clip-path":r})}},{key:"addHandler",value:function(e,t,r){e.addEventListener(t,r)}},{key:"removeHandler",value:function(){}},{key:"on",value:function(e,t,r){this.addHandler(e,t,r)}},{key:"off",value:function(e,t,r){this.removeHandler(e,t,r)}},{key:"shape",value:function(e,t){var r=document.createElementNS(this._svgns,e);if(r){for(var i in t)r.setAttribute(i,t[i]);return this._activeParent().appendChild(r),r}}},{key:"_getTextParts",value:function(e,t,r){var i={width:0,height:0,parts:[]};if(void 0===e)return i;var a=e.toString().split("<br>"),n=this._activeParent(),o=document.createElementNS(this._svgns,"text");this.attr(o,r);for(var s=0;s<a.length;s++){var l=a[s],u=o.ownerDocument.createTextNode(l),d=void 0;o.appendChild(u),n.appendChild(o);try{d=o.getBBox()}catch(e){}var c=this._rup(d.width),h=this._rup(.6*d.height);o.removeChild(u),i.width=Math.max(i.width,c),i.height+=h+(s>0?4:0),i.parts.push({width:c,height:h,text:l})}return n.removeChild(o),i}},{key:"_measureText",value:function(e,t,i,n){return r(s(a.prototype),"measureText",this).call(this,e,t,i,n)}},{key:"measureText",value:function(e,t,r){return this._measureText(e,t,r,!1)}},{key:"text",value:function(e,t,r,i,a,n,o,s,l,u,d){var c,h=this._measureText(e,n,o,!0,this).textPartsInfo,f=h.parts,p=this._getContrastColor(arguments[11]);if(l||(l="center"),u||(u="center"),(f.length>1||s)&&(c=this.beginGroup()),s){var v=this.createClipRect({x:this._rup(t)-1,y:this._rup(r)-1,width:this._rup(i)+2,height:this._rup(a)+2});this.setClip(c,v)}var m=this._activeParent(),y=0,g=0;y=h.width,g=h.height,(isNaN(i)||i<=0)&&(i=y),(isNaN(a)||a<=0)&&(a=g);var b=i||0,_=a||0,x=0;if(!n||0===n){var w;r+=g,"center"===u||"middle"===u?r+=(_-g)/2:"bottom"===u&&(r+=_-g),i||(i=y),a||(a=g),m=this._activeParent();for(var S=f.length-1;S>=0;S--){w=document.createElementNS(this._svgns,"text"),this.attr(w,o),this.attr(w,{cursor:"default"});var k=w.ownerDocument.createTextNode(f[S].text);w.appendChild(k);var C=t,A=f[S].width,N=f[S].height;"center"===l?C+=(b-A)/2:"right"===l&&(C+=b-A),this.attr(w,{x:this._rup(C),y:this._rup(r+x),width:this._rup(A),height:this._rup(N)}),void 0!==p&&(w.style.fill=p),m.appendChild(w),x-=f[S].height+4}return c?(this.endGroup(),c):w}var M=this.alignTextInRect(t,r,i,a,y,g,l,u,n,d);t=M.x,r=M.y;var T=this.shape("g",{transform:"translate("+t+","+r+")"}),D=this.shape("g",{transform:"rotate("+n+")"});T.appendChild(D),x=0;for(var O=f.length-1;O>=0;O--){var P=document.createElementNS(this._svgns,"text");this.attr(P,o),this.attr(P,{cursor:"default"});var F=P.ownerDocument.createTextNode(f[O].text);P.appendChild(F);var I=0,E=f[O].width,L=f[O].height;"center"===l?I+=(h.width-E)/2:"right"===l&&(I+=h.width-E),this.attr(P,{x:this._rup(I),y:this._rup(x),width:this._rup(E),height:this._rup(L)}),D.appendChild(P),x-=L+4}return m.appendChild(T),c&&this.endGroup(),T}},{key:"line",value:function(e,t,r,i,a){var n=this.shape("line",{x1:e,y1:t,x2:r,y2:i});return this.attr(n,a),n}},{key:"path",value:function(e,t){var r=this.shape("path");return r.setAttribute("d",e),t&&this.attr(r,t),r}},{key:"rect",value:function(e,t,r,i,a){e=this._ptrnd(e),t=this._ptrnd(t),r=Math.max(1,this._rnd(r,1,!1)),i=Math.max(1,this._rnd(i,1,!1));var n=this.shape("rect",{x:e,y:t,width:r,height:i});return a&&this.attr(n,a),n}},{key:"circle",value:function(e,t,r,i){var a=this.shape("circle",{cx:e,cy:t,r:r});return i&&this.attr(a,i),a}},{key:"pieslice",value:function(e,t,r,i,a,n,o,s){var l=this.pieSlicePath(e,t,r,i,a,n,o),u=this.shape("path");return u.setAttribute("d",l),s&&this.attr(u,s),u}},{key:"attr",value:function(e,t){if(e&&t)for(var r in t)"textContent"===r?e.textContent=t[r]:"width"===r||"height"===r?e.setAttribute(r,Math.max(0,t[r])):e.setAttribute(r,t[r])}},{key:"removeAttr",value:function(e,t){if(e&&t)for(var r in t)"textContent"===r?e.textContent="":e.removeAttribute(t[r])}},{key:"getAttr",value:function(e,t){return e.getAttribute(t)}},{key:"_toLinearGradient",value:function(e,t,r){var i="grd"+this._id+e.replace("#","")+(t?"v":"h"),a="url("+this.getWindowHref()+"#"+i+")";if(this._gradients[a])return a;var n=document.createElementNS(this._svgns,"linearGradient");this.attr(n,{x1:"0%",y1:"0%",x2:t?"0%":"100%",y2:t?"100%":"0%",id:i});for(var o=0;o<r.length;o++){var s=r[o],l=document.createElementNS(this._svgns,"stop"),u="stop-color:"+this.adjustColor(e,s[1]);this.attr(l,{offset:s[0]+"%",style:u}),n.appendChild(l)}return this._defs.appendChild(n),this._gradients[a]=!0,a}},{key:"_toRadialGradient",value:function(e,t,r){var i="grd"+this._id+e.replace("#","")+"r"+(void 0!==r?r.key:""),a="url("+this.getWindowHref()+"#"+i+")";if(this._gradients[a])return a;var n=document.createElementNS(this._svgns,"radialGradient");void 0===r?this.attr(n,{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:i}):this.attr(n,{cx:r.x,cy:r.y,r:r.outerRadius,id:i,gradientUnits:"userSpaceOnUse"});for(var o=0;o<t.length;o++){var s=t[o],l=document.createElementNS(this._svgns,"stop"),u="stop-color:"+this.adjustColor(e,s[1]);this.attr(l,{offset:s[0]+"%",style:u}),n.appendChild(l)}return this._defs.appendChild(n),this._gradients[a]=!0,a}}]),a}()),Smart.Utilities.Assign("HTML5Renderer",function(e){l(a,Smart.Utilities.Renderer);var t=i(a);function a(e){var r;return d(this,a),(r=t.call(this,e))._renderers=new Smart.Utilities.HTML5RenderHelpers(n(r)),r}return h(a,[{key:"init",value:function(e){try{this.host=e;var t=document.createElement("div"),r=document.createElement("canvas");t.className="chartContainer",t.style.position="relative",t.onselectstart=function(){return!1},r.id="__smartCanvasWrap",r.style.width="100%",r.style.height="100%",t.appendChild(r),e.appendChild(t),this.canvas=r,r.width=e.offsetWidth,r.height=e.offsetHeight,this.ctx=r.getContext("2d"),this._elements={},this._maxId=0,this._gradientId=0,this._gradients={},this._currentPoint={x:0,y:0},this._lastCmd="",this._pos=0}catch(e){return!1}return!0}},{key:"getType",value:function(){return"HTML5"}},{key:"getContainer",value:function(){return this.host.getElementsByClassName("chartContainer")[0]}},{key:"getRect",value:function(){return{x:0,y:0,width:this.canvas.width-1,height:this.canvas.height-1}}},{key:"beginGroup",value:function(){}},{key:"endGroup",value:function(){}},{key:"setClip",value:function(){}},{key:"createClipRect",value:function(){}},{key:"addHandler",value:function(){}},{key:"removeHandler",value:function(){}},{key:"on",value:function(e,t,r){this.addHandler(e,t,r)}},{key:"off",value:function(e,t,r){this.removeHandler(e,t,r)}},{key:"clear",value:function(){this._elements={},this._maxId=0,this._renderers._gradients={},this._gradientId=0}},{key:"removeElement",value:function(e){void 0!==e&&this._elements[e.id]&&delete this._elements[e.id]}},{key:"shape",value:function(e,t){var r={type:e,id:this._maxId++};for(var i in t)r[i]=t[i];return this._elements[r.id]=r,r}},{key:"attr",value:function(e,t){for(var r in t)e[r]=t[r]}},{key:"removeAttr",value:function(e,t){for(var r in t)delete e[t[r]]}},{key:"rect",value:function(e,t,r,i,a){if(isNaN(e))throw'Invalid value for "x"';if(isNaN(t))throw'Invalid value for "y"';if(isNaN(r))throw'Invalid value for "width"';if(isNaN(i))throw'Invalid value for "height"';var n=this.shape("rect",{x:e,y:t,width:r,height:i});return a&&this.attr(n,a),n}},{key:"path",value:function(e,t){var r=this.shape("path",t);return this.attr(r,{d:e}),r}},{key:"line",value:function(e,t,r,i,a){return this.path("M "+e+","+t+" L "+r+","+i,a)}},{key:"circle",value:function(e,t,r,i){var a=this.shape("circle",{x:e,y:t,r:r});return i&&this.attr(a,i),a}},{key:"pieslice",value:function(e,t,r,i,a,n,o,s){var l=this.path(this.pieSlicePath(e,t,r,i,a,n,o),s);return this.attr(l,{x:e,y:t,innerRadius:r,outerRadius:i,angleFrom:a,angleTo:n}),l}},{key:"_getCSSStyle",value:function(e){var t=document.createElement("div");t.className=e,t.style.position="absolute",t.style.visibility="hidden",this.host.appendChild(t);var r=window.getComputedStyle(t);return r={color:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontWeight:r.fontWeight},this.host.removeChild(t),r}},{key:"_getTextParts",value:function(e,t,r){var i="Arial",a="10pt",n="";if(r&&r.class){var o=this._getCSSStyle(r.class);o.fontSize&&(a=o.fontSize),o.fontFamily&&(i=o.fontFamily),o.fontWeight&&(n=o.fontWeight)}this.ctx.font=n+" "+a+" "+i;for(var s={width:0,height:0,parts:[]},l=e.toString().split("<br>"),u=0;u<l.length;u++){var d=l[u],c=this.ctx.measureText(d).width,h=document.createElement("span");h.className="chart",h.font=this.ctx.font,h.textContent=d,this.host.appendChild(h);var f=.6*h.offsetHeight;this.host.removeChild(h),s.width=Math.max(s.width,this._rup(c)),s.height+=f+(u>0?4:0),s.parts.push({width:c,height:f,text:d})}return s}},{key:"_measureText",value:function(e,t,i,n){return r(s(a.prototype),"measureText",this).call(this,e,t,i,n)}},{key:"measureText",value:function(e,t,r){return this._measureText(e,t,r,!1)}},{key:"text",value:function(e,t,r,i,a,n,o,s,l,u,d){var c=this.shape("text",{text:e,x:t,y:r,width:i,height:a,angle:n,clip:s,halign:l,valign:u,rotateAround:d});if(o&&this.attr(c,o),c.fontFamily="Arial",c.fontSize="10pt",c.fontWeight="",c.color=this._getContrastColor(arguments[11]),o&&o.class){var h=this._getCSSStyle(o.class);c.fontFamily=h.fontFamily||c.fontFamily,c.fontSize=h.fontSize||c.fontSize,c.fontWeight=h.fontWeight||c.fontWeight,c.color=c.color||h.color}c.color=c.color||"#000000";var f=this._measureText(e,0,o,!0);return this.attr(c,{textPartsInfo:f.textPartsInfo,textWidth:f.width,textHeight:f.height}),(i<=0||isNaN(i))&&this.attr(c,{width:f.width}),(a<=0||isNaN(a))&&this.attr(c,{height:f.height}),c}},{key:"_toLinearGradient",value:function(e,t,r){if(this._renderers._gradients[e])return e;for(var i=[],a=0;a<r.length;a++)i.push({percent:r[a][0]/100,color:this.adjustColor(e,r[a][1])});var n="gr"+this._gradientId++;return this.createGradient(n,t?"vertical":"horizontal",i),n}},{key:"_toRadialGradient",value:function(e,t){if(this._renderers._gradients[e])return e;for(var r=[],i=0;i<t.length;i++)r.push({percent:t[i][0]/100,color:this.adjustColor(e,t[i][1])});var a="gr"+this._gradientId++;return this.createGradient(a,"radial",r),a}},{key:"createGradient",value:function(e,t,r){this._renderers.createGradient(this,e,t,r)}},{key:"refresh",value:function(){for(var e in this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._elements){var t=this._elements[e];this._renderers.setFillStyle(this,t),this._renderers.setStroke(this,t),this._renderers[this._elements[e].type](this.ctx,t)}}}]),a}()),Smart.Utilities.Assign("HTML5RenderHelpers",function(){function e(t){d(this,e),this.HTML5Renderer=t,this._cmds="mlcazq"}return h(e,[{key:"ptrnd",value:function(e){if(.5===Math.abs(Math.round(e)-e))return e;var t=Math.round(e);return t<e&&(t-=1),t+.5}},{key:"createGradient",value:function(e,t,r,i){e._gradients[t]={orientation:r,colorStops:i}}},{key:"setStroke",value:function(e,t){var r=e.ctx,i=t["stroke-width"];r.strokeStyle=t.stroke||"transparent",r.lineWidth=0===i?.01:void 0!==i?i:1,void 0!==t["fill-opacity"]?r.globalAlpha=t["fill-opacity"]:void 0!==t.opacity?r.globalAlpha=t.opacity:r.globalAlpha=1,r.setLineDash&&(t["stroke-dasharray"]?r.setLineDash(t["stroke-dasharray"].split(",")):r.setLineDash([]))}},{key:"setFillStyle",value:function(e,t){var r=e.ctx;if(r.fillStyle="transparent",void 0!==t["fill-opacity"]?r.globalAlpha=t["fill-opacity"]:void 0!==t.opacity?r.globalAlpha=t.opacity:r.globalAlpha=1,t.fill&&-1===t.fill.indexOf("#")&&e._gradients[t.fill]){var i,a="horizontal"!==e._gradients[t.fill].orientation,n="radial"===e._gradients[t.fill].orientation,o=this.ptrnd(t.x),s=this.ptrnd(t.y),l=this.ptrnd(t.x+(a?0:t.width)),u=this.ptrnd(t.y+(a?t.height:0));if(("circle"===t.type||"path"===t.type||"rect"===t.type)&&n){var d=this.ptrnd(t.x),c=this.ptrnd(t.y),h=t.innerRadius||0,f=t.outerRadius||t.r||0;"rect"===t.type&&(d+=t.width/2,c+=t.height/2),i=r.createRadialGradient(d,c,h,d,c,f)}n||((isNaN(o)||isNaN(l)||isNaN(s)||isNaN(u))&&(o=0,s=0,l=a?0:r.canvas.width,u=a?r.canvas.height:0),i=r.createLinearGradient(o,s,l,u));for(var p=e._gradients[t.fill].colorStops,v=0;v<p.length;v++)i.addColorStop(p[v].percent,p[v].color);r.fillStyle=i}else t.fill&&(r.fillStyle=t.fill)}},{key:"rect",value:function(e,t){0!==t.width&&0!==t.height&&(e.fillRect(this.ptrnd(t.x),this.ptrnd(t.y),t.width,t.height),e.strokeRect(this.ptrnd(t.x),this.ptrnd(t.y),t.width,t.height))}},{key:"circle",value:function(e,t){0!==t.r&&(e.beginPath(),e.arc(this.ptrnd(t.x),this.ptrnd(t.y),t.r,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke())}},{key:"_parsePoint",value:function(e){return{x:this._parseNumber(e),y:this._parseNumber(e)}}},{key:"_parseNumber",value:function(e){var t,r=!1;for(t=this._pos;t<e.length;t++)if(e[t]>="0"&&e[t]<="9"||"."===e[t]||"e"===e[t]||"-"===e[t]&&!r||"-"===e[t]&&t>=1&&"e"===e[t-1])r=!0;else{if(r||" "!==e[t]&&","!==e[t])break;this._pos++}var i=parseFloat(e.substring(this._pos,t));if(!isNaN(i))return this._pos=t,i}},{key:"_isRelativeCmd",value:function(e){return-1!==this._cmds.indexOf(e)}},{key:"_parseCmd",value:function(e){for(var t=this._pos;t<e.length;t++){if(-1!==this._cmds.toLowerCase().indexOf(e[t].toLowerCase()))return this._pos=t+1,this._lastCmd=e[t],this._lastCmd;if(" "!==e[t]){if(e[t]>="0"&&e[t]<="9"){if(this._pos=t,""===this._lastCmd)break;return this._lastCmd}}else this._pos++}}},{key:"_toAbsolutePoint",value:function(e){return{x:this._currentPoint.x+e.x,y:this._currentPoint.y+e.y}}},{key:"path",value:function(e,t){var r=this,i=t.d;this._pos=0,this._lastCmd="";var a=void 0;for(this._currentPoint={x:0,y:0},e.beginPath();this._pos<i.length;){var n=this._parseCmd(i);if(void 0===n)break;if("M"!==n&&"m"!==n)if("L"!==n&&"l"!==n){if("A"!==n&&"a"!==n)if("Z"!==n&&"z"!==n||void 0===a)if("C"!==n&&"c"!==n)if("Q"!==n&&"q"!==n);else{var o=this._parsePoint(i),s=this._parsePoint(i);e.quadraticCurveTo(o.x,o.y,s.x,s.y),this._currentPoint=s}else{var l=this._parsePoint(i),u=this._parsePoint(i),d=this._parsePoint(i);e.bezierCurveTo(l.x,l.y,u.x,u.y,d.x,d.y),this._currentPoint=d}else e.lineTo(a.x,a.y),this._currentPoint=a;else if("continue"===function(){var t=r._parseNumber(i),a=r._parseNumber(i),o=r._parseNumber(i)*(Math.PI/180),s=r._parseNumber(i),l=r._parseNumber(i),u=r._parsePoint(i);if(r._isRelativeCmd(n)&&(u=r._toAbsolutePoint(u)),0===t||0===a)return"continue";var d=r._currentPoint,c={x:Math.cos(o)*(d.x-u.x)/2+Math.sin(o)*(d.y-u.y)/2,y:-Math.sin(o)*(d.x-u.x)/2+Math.cos(o)*(d.y-u.y)/2},h=Math.pow(c.x,2)/Math.pow(t,2)+Math.pow(c.y,2)/Math.pow(a,2);h>1&&(t*=Math.sqrt(h),a*=Math.sqrt(h));var f=(s===l?-1:1)*Math.sqrt((Math.pow(t,2)*Math.pow(a,2)-Math.pow(t,2)*Math.pow(c.y,2)-Math.pow(a,2)*Math.pow(c.x,2))/(Math.pow(t,2)*Math.pow(c.y,2)+Math.pow(a,2)*Math.pow(c.x,2)));isNaN(f)&&(f=0);var p=f*t*c.y/a,v=f*-a*c.x/t,m={x:(d.x+u.x)/2+Math.cos(o)*p-Math.sin(o)*v,y:(d.y+u.y)/2+Math.sin(o)*p+Math.cos(o)*v},y=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},g=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},b=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(g(e,t))},_=b([1,0],[(c.x-p)/t,(c.y-v)/a]),x=[(c.x-p)/t,(c.y-v)/a],w=[(-c.x-p)/t,(-c.y-v)/a],S=b(x,w);g(x,w)<=-1&&(S=Math.PI),g(x,w)>=1&&(S=0),0===l&&S>0&&(S-=2*Math.PI),1===l&&S<0&&(S+=2*Math.PI);var k=t>a?t:a,C=t>a?1:t/a,A=t>a?a/t:1;e.translate(m.x,m.y),e.rotate(o),e.scale(C,A),e.arc(0,0,k,_,_+S,1-l),e.scale(1/C,1/A),e.rotate(-o),e.translate(-m.x,-m.y)}())continue}else{var c=this._parsePoint(i);if(void 0===c)break;e.lineTo(c.x,c.y),this._currentPoint=c}else{var h=this._parsePoint(i);if(void 0===h)break;e.moveTo(h.x,h.y),this._currentPoint=h,void 0===a&&(a=h)}}e.fill(),e.stroke(),e.closePath()}},{key:"text",value:function(e,t){var r=this.ptrnd(t.x),i=this.ptrnd(t.y),a=this.ptrnd(t.width),n=this.ptrnd(t.height),o=t.halign,s=t.valign,l=t.angle,u=t.rotateAround,d=t.textPartsInfo,c=d.parts,h=t.clip;void 0===h&&(h=!0),e.save(),o||(o="center"),s||(s="center"),h&&(e.rect(r,i,a,n),e.clip());var f=t.textWidth,p=t.textHeight,v=a||0,m=n||0;if(e.fillStyle=t.color,e.font=t.fontWeight+" "+t.fontSize+" "+t.fontFamily,l&&0!==l){var y=this.HTML5Renderer.alignTextInRect(r,i,a,n,f,p,o,s,l,u);r=y.x,i=y.y;var g=l*Math.PI*2/360;e.translate(r,i),e.rotate(g);for(var b=0,_=d.width,x=c.length-1;x>=0;x--){var w=0;"center"===o?w+=(_-c[x].width)/2:"right"===o&&(w+=_-c[x].width),e.fillText(c[x].text,w,b),b-=c[x].height+4}e.restore()}else{i+=p,"center"===s||"middle"===s?i+=(m-p)/2:"bottom"===s&&(i+=m-p),a||(a=f),n||(n=p);for(var S=0,k=c.length-1;k>=0;k--){var C=c[k],A=r,N=c[k].width;"center"===o?A+=(v-N)/2:"right"===o&&(A+=v-N),e.fillText(C.text,A,i+S),S-=C.height+(k>0?4:0)}e.restore()}}}]),e}()),Smart.Utilities.Assign("Plot",function(){function e(t){d(this,e),this.renderer=t}return h(e,[{key:"get",value:function(e,t,r){return void 0!==r?e[t][r]:e[t]}},{key:"min",value:function(e,t){for(var r=NaN,i=0;i<e.length;i++){var a=this.get(e,i,t);(isNaN(r)||a<r)&&(r=a)}return r}},{key:"max",value:function(e,t){for(var r=NaN,i=0;i<e.length;i++){var a=this.get(e,i,t);(isNaN(r)||a>r)&&(r=a)}return r}},{key:"sum",value:function(e,t){for(var r=0,i=0;i<e.length;i++){var a=this.get(e,i,t);isNaN(a)||(r+=a)}return r}},{key:"count",value:function(e,t){for(var r=0,i=0;i<e.length;i++){var a=this.get(e,i,t);isNaN(a)||r++}return r}},{key:"avg",value:function(e,t){return this.sum(e,t)/Math.max(1,this.count(e,t))}},{key:"filter",value:function(e,t){if(!t)return e;for(var r=[],i=0;i<e.length;i++)t(e[i])&&r.push(e[i]);return r}},{key:"scale",value:function(e,t,r,i){if(isNaN(e))return NaN;if((e<Math.min(t.min,t.max)||e>Math.max(t.min,t.max))&&(!i||!0!==i.ignore_range))return NaN;var a=NaN,n=1;if(void 0===t.type||"logarithmic"!==t.type){var o=Math.abs(t.max-t.min);o||(o=1),n=Math.abs(e-Math.min(t.min,t.max))/o}else if("logarithmic"===t.type){var s=t.base;isNaN(s)&&(s=10);var l=Math.min(t.min,t.max);l<=0&&(l=1);var u=Math.max(t.min,t.max);u<=0&&(u=1);var d=Math.log(u)/Math.log(s);u=Math.pow(s,d);var c=Math.log(l)/Math.log(s);l=Math.pow(s,c);var h=Math.log(e)/Math.log(s);n=Math.abs(h-c)/(d-c)}if("logarithmic"===r.type){var f=r.base;isNaN(f)&&(f=10);var p=Math.log(r.max)/Math.log(f),v=Math.log(r.min)/Math.log(f);r.flip&&(n=1-n);var m=Math.min(v,p)+n*Math.abs(p-v);a=Math.pow(f,m)}else a=Math.min(r.min,r.max)+n*Math.abs(r.max-r.min),r.flip&&(a=Math.max(r.min,r.max)-a+r.min);return a}},{key:"axis",value:function(e,t,r){if(r<=1)return[t,e];(isNaN(r)||r<2)&&(r=2);for(var i=0;Math.round(e)!==e&&Math.round(t)!==t&&i<10;)e*=10,t*=10,i++;for(var a=(t-e)/r;i<10&&Math.round(a)!==a;)e*=10,t*=10,a*=10,i++;for(var n,o=[1,2,5],s=0;;){var l=s%o.length,u=Math.floor(s/o.length),d=Math.pow(10,u)*o[l];if(l=(s+1)%o.length,u=Math.floor((s+1)/o.length),n=Math.pow(10,u)*o[l],a>=d&&a<n)break;s++}for(var c=n,h=[],f=this.renderer._rnd(e,c,!1),p=i<=0?1:Math.pow(10,i);f<t+c;)h.push(f/p),f+=c;return h}}]),e}())}})},2:function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function n(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==u(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=89)}({89:function(e,t){Smart("smart-scroll-bar",function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(f,Smart.BaseElement);var t,u,d,c,h=(t=f,function(){var e,r=s(t);if(o()){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return n(this,e)});function f(){return r(this,f),h.apply(this,arguments)}return u=f,c=[{key:"properties",get:function(){return{clickRepeatDelay:{type:"integer",value:50},largeStep:{type:"integer",value:100},min:{type:"integer",value:0},max:{type:"integer",value:1e3},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},orientation:{type:"string",value:"horizontal",allowedValues:["horizontal","vertical"]},step:{type:"integer",value:10},showButtons:{type:"boolean",value:!0,defaultReflectToAttribute:!0},value:{type:"integer",value:0}}}},{key:"styleUrls",get:function(){return["smart.scrollbar.css"]}},{key:"listeners",get:function(){return{"nearButton.click":"_nearButtonClickHandler","nearButton.down":"_startRepeat","nearButton.up":"_stopRepeat","nearButton.pointerenter":"_updateInBoundsFlag","nearButton.pointerleave":"_updateInBoundsFlag","farButton.click":"_farButtonClickHandler","farButton.down":"_startRepeat","farButton.up":"_stopRepeat","farButton.pointerenter":"_updateInBoundsFlag","farButton.pointerleave":"_updateInBoundsFlag","track.down":"_trackDownHandler","track.click":"_trackClickHandler","track.move":"_trackMoveHandler","thumb.down":"_dragStartHandler","document.move":"_dragHandler","document.up":"_dragEndHandler",up:"_dragEndHandler","document.selectstart":"_selectStartHandler",resize:"_resizeHandler"}}}],(d=[{key:"template",value:function(){return'<div id="container" class="smart-container" role="presentation">\n                    <div id="nearButton" class="smart-scroll-button smart-arrow-left" role="presentation" aria-hidden="true"></div>\n                    <div  id="track" class="smart-track" role="presentation">\n                        <div id="thumb" class="smart-thumb" role="presentation"></div>\n                    </div>\n                    <div id="farButton" class="smart-scroll-button smart-arrow-right" role="presentation" aria-hidden="true"></div>\n            </div>'}},{key:"_updateInBoundsFlag",value:function(e){var t=e.target;t._isPointerInBounds=!0,-1!==e.type.indexOf("leave")&&(t._isPointerInBounds=!1),1!==("buttons"in e?e.buttons:e.which)&&this._stopRepeat(e)}},{key:"_startRepeat",value:function(e){var t=this;if(!t.disabled){var r=e.target;r._initialTimer||(r._initialTimer=setTimeout((function(){r._repeatTimer=setInterval((function(){if(r._isPointerInBounds){var t="buttons"in e?e.buttons:e.which;r.$.fireEvent("click",{buttons:t,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}),t.clickRepeatDelay)}),3*t.clickRepeatDelay))}}},{key:"_stopRepeat",value:function(e){if(!this.disabled){var t=e.target;t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null)}}},{key:"_calculateThumbSize",value:function(e){var t=this,r=t.max-t.min,i="horizontal"===t.orientation?t.$.track.offsetWidth>10:t.$.track.offsetHeight>10,a=0;return r>=1&&i?(a=e/(r+e)*e,t.$.thumb.className.indexOf("smart-hidden")>=0&&t.$thumb.removeClass("smart-hidden")):t.$thumb.addClass("smart-hidden"),Math.max(10,Math.min(a,e))}},{key:"_dragStartHandler",value:function(e){this.disabled||(this.thumbCapture=!0,this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartValue=this.value,e.stopPropagation(),e.preventDefault())}},{key:"_dragHandler",value:function(e){if(!0===this.thumbCapture){this._isThumbDragged=!0;var t=(this.max-this.min)/(this.scrollBarSize-this.thumbSize),r="horizontal"===this.orientation?(e.clientX-this.dragStartX)*t:(e.clientY-this.dragStartY)*t,i=r;this.rightToLeft&&"horizontal"===this.orientation&&(i=-r),this._updateValue(this.dragStartValue+i),e.stopPropagation(),e.preventDefault(),e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault())}}},{key:"_dragEndHandler",value:function(e){var t=this;t._trackDownTimer&&(clearInterval(t._trackDownTimer),t._trackDownTimer=null),t.thumbCapture&&(t.thumbCapture=!1,t._isThumbDragged=!1,"switchWhenReleased"===t.mechanicalAction?t._updateValue(t.dragStartValue,t.value):"switchUntilReleased"===this.mechanicalAction&&t._updateValue(t.dragStartValue),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation())}},{key:"_farButtonClickHandler",value:function(){var e=this;if(!e.disabled){var t=e.value;e._updateValue(e.value+("horizontal"===e.orientation&&e.rightToLeft?-1:1)*e.step),"switchUntilReleased"===e.mechanicalAction&&e._updateValue(t)}}},{key:"_nearButtonClickHandler",value:function(){var e=this;if(!e.disabled){var t=e.value;e._updateValue(e.value-("horizontal"===e.orientation&&e.rightToLeft?-1:1)*e.step),"switchUntilReleased"===e.mechanicalAction&&e._updateValue(t)}}},{key:"propertyChangedHandler",value:function(e,t,r){a(s(f.prototype),"propertyChangedHandler",this).call(this,e,t,r);var i=this;switch(e){case"min":case"max":case"orientation":case"showButtons":i._layout(),"min"===e?i.setAttribute("aria-valuemin",r):"max"===e?i.setAttribute("aria-valuemax",r):"orientation"===e&&i.setAttribute("aria-orientation",r);break;case"value":i._updateValue(t,r);break;default:i._layout()}}},{key:"render",value:function(){this.setAttribute("role","scrollbar"),this.setAttribute("aria-orientation",this.orientation),this.setAttribute("aria-valuemin",this.min),this.setAttribute("aria-valuemax",this.max),this.setAttribute("aria-valuenow",this.value),this._layout(),a(s(f.prototype),"render",this).call(this)}},{key:"_resizeHandler",value:function(){this._layout()}},{key:"refresh",value:function(){this._layout()}},{key:"_layout",value:function(){var e=this;e.scrollBarSize="horizontal"===e.orientation?e.$.track.offsetWidth:e.$.track.offsetHeight,e.thumbSize=e._calculateThumbSize(e.scrollBarSize),"horizontal"===e.orientation&&e.$.thumb.style.width!==e.thumbSize+"px"?e.$.thumb.style.width=e.thumbSize+"px":"vertical"===e.orientation&&e.$.thumb.style.height!==e.thumbSize+"px"&&(e.$.thumb.style.height=e.thumbSize+"px"),"horizontal"===e.orientation?(e.$.nearButton.classList.contains("smart-arrow-up")&&e.$.nearButton.classList.remove("smart-arrow-up"),e.$.farButton.classList.contains("smart-arrow-down")&&e.$.farButton.classList.remove("smart-arrow-down"),e.$.nearButton.classList.contains("smart-arrow-left")||e.$.nearButton.classList.add("smart-arrow-left"),e.$.farButton.classList.contains("smart-arrow-right")||e.$.farButton.classList.add("smart-arrow-right")):(e.$.nearButton.classList.contains("smart-arrow-left")&&e.$.nearButton.classList.remove("smart-arrow-left"),e.$.farButton.classList.contains("smart-arrow-right")&&e.$.farButton.classList.remove("smart-arrow-right"),e.$.nearButton.classList.contains("smart-arrow-up")||e.$.nearButton.classList.add("smart-arrow-up"),e.$.farButton.classList.contains("smart-arrow-down")||e.$.farButton.classList.add("smart-arrow-down")),e._updateThumbPosition(),(e.value>e.max||e.value<e.min)&&e._updateValue(e.value,e.value>e.max?e.max:e.min)}},{key:"_selectStartHandler",value:function(e){this.thumbCapture&&e.preventDefault()}},{key:"_trackDownHandler",value:function(e){var t=this;e.target===t.$.track&&(t._trackDownTimer&&clearInterval(t._trackDownTimer),t.thumbCapture||(t._trackDownTimer=setInterval((function(){t._trackClickHandler(e)}),t.clickRepeatDelay),e.stopPropagation(),e.preventDefault()))}},{key:"_trackClickHandler",value:function(e){var t=this;if(!t.disabled){if(t._isThumbDragged)return clearInterval(t._trackDownTimer),void(t._trackDownTimer=null);var r=t.$.thumb.getBoundingClientRect(),i=e.pageX-window.pageXOffset,a=e.pageY-window.pageYOffset,n=(t.rightToLeft?-1:1)*t.value;"horizontal"===t.orientation?i>(t._isThumbDragged?t.dragStartX:r.right)?t._updateValue(t.value+(t.rightToLeft?-1:1)*t.largeStep):i<(t._isThumbDragged?t.dragStartX:r.left)&&t._updateValue(t.value-(t.rightToLeft?-1:1)*t.largeStep):a>(t._isThumbDragged?t.dragStartY:r.bottom)?t._updateValue(t.value+t.largeStep):a<(t._isThumbDragged?t.dragStartY:r.top)&&t._updateValue(t.value-t.largeStep),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(n)}}},{key:"_trackMoveHandler",value:function(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}},{key:"_updateValue",value:function(e,t){var r=this;if(1===arguments.length&&(t=e,e=r.value),(void 0===t||isNaN(t))&&(t=r.min),t>r.max&&(t=r.max),t<r.min&&(t=r.min),r.value=t,e!==t){if(r.setAttribute("aria-valuenow",t),r._updateThumbPosition(),r.thumbCapture&&"switchWhenReleased"===r.mechanicalAction)return;if(r.onChange)return void r.onChange({value:r.value,oldValue:e,min:r.min,max:r.max});r.$.fireEvent("change",{value:r.value,oldValue:e,min:r.min,max:r.max})}}},{key:"_updateThumbPosition",value:function(){var e=this,t=e.$.track.offsetHeight,r=e.$.track.offsetWidth,i="horizontal"===e.orientation?r:t,a=e._calculateThumbSize(i),n="horizontal"===e.orientation?r-a:t-a,o=(i-a)/(e.max-e.min)*(e.value-e.min);e.rightToLeft&&"horizontal"===e.orientation&&(o=(i-a)/(e.max-e.min)*(e.max-e.value-e.min)),o=Math.min(n,Math.max(0,o)),"vertical"===e.orientation&&e.$.thumb.style.top!==o+"px"?e.$.thumb.style.top=o+"px":"horizontal"===e.orientation&&e.$.thumb.style.left!==o+"px"&&(e.$.thumb.style.left=o+"px")}}])&&i(u.prototype,d),c&&i(u,c),f}())}})},21:function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=26)}({26:function(e,t){Smart.DataAdapter=window.smartDataAdapter=function(){function e(t){r(this,e),t||(t={});var i=Object.assign(this,t);i.key=(65536*(1+Math.random())|0).toString(16).substring(1),i.$document=Smart.Utilities.Extend(document),i.boundSource=!1===i.observable?[]:new Smart.ObservableArray,i.dataItemById=[],void 0===i.allowAdd&&(i.allowAdd=!0),void 0===i.allowRemove&&(i.allowRemove=!0),void 0===i.allowUpdate&&(i.allowUpdate=!0),void 0===t.observable&&(i.observable=!0),t.dataSource||(i.dataSource=[]),t.dataFields||(i.dataFields=[]),t.dataSourceType||(i.dataSourceType="array"),t.id||(i.id=null),t.autoFetch||(i.autoFetch=!0),t.dataFields&&(i.dataFields=t.dataFields),Object.defineProperty(i,"groupBy",{configurable:!1,enumerable:!0,get:function(){return i._groupBy?i._groupBy:[]},set:function(e){var t=function(){i.boundHierarchy=null,i.refreshHierarchy(),i.onGroup&&i.onGroup()};i._groupBy=new Smart.ObservableArray(e),i._groupBy.notify((function(){t()})),i.isInitialized&&t()}}),t.groupBy?t.groupBy.toArray?i.groupBy=t.groupBy.toArray():i.groupBy=t.groupBy:i.groupBy=[],t&&!1!==t.autoBind&&i.dataBind(),i.isInitialized=!0}return a(e,[{key:"_getDataFieldObjects",value:function(e){var t=[];if("number"==typeof e)for(var r="A".charCodeAt(0),i="",a=0,n=0;n<e;n++){var o=String.fromCharCode(r+a);a++;var s=i+o;t.push({name:s,dataType:"string"}),a>=26&&(a=0,i+="A")}else if(e.length>0)for(var l=0;l<e.length;l++){var u=e[l];if("string"==typeof u){var d=u.split(":"),c=d[0].trim(),h=d.length>1?d[1].trim():"string";t.push({name:c,dataType:h})}else t.push(u)}return t}},{key:"_notify",value:function(e){var t=this;t.canNotify&&t.notifyFn&&t.notifyFn(e)}},{key:"notify",value:function(e){e&&(this.notifyFn=e)}},{key:"toArray",value:function(){return this.boundSource.toArray()}},{key:"dataBind",value:function(){var e=this;e.clear();var t=function(){e.observable&&e.boundSource.notify((function(t){if("update"===t.action&&t.path&&t.path.indexOf(".")>=0&&-1===t.path.indexOf("children")&&-1===t.path.indexOf("loaded")&&-1===t.path.indexOf("level")&&-1===t.path.indexOf("leaf")&&-1===t.path.indexOf("expanded")){for(var r=!1,i=0;i<e.dataFields.length;i++){var a=e.dataFields[i].name;t.path.indexOf(a)>=0&&(r=!0)}e._notify&&r&&e._notify({action:"update",data:t.target,index:t.index})}})),e._onBindingComplete()};"string"==typeof e.dataSource&&e.dataSource.indexOf(".json")>=0?(e.url=e.dataSource,e.dataSourceType="json",new i(e,(function(t){e.dataSource=t,e._bindToJSON()}))):"string"==typeof e.dataSource&&e.dataSource.indexOf(".xlsx")>=0?(e.url=e.dataSource,e.dataSourceType="xlsx",new i(e,(function(r){if(!r[0])return r=[],e._bindToArray(),void t();var i=Object.keys(r[0]),a={},n=[];if(!1!==e.exportHeader){var o=0;for(var s in i)a[i[s]]=e.dataFields[o++].name;for(var l=1;l<r.length;l++){var u=r[l],d={};for(var c in i){var h=i[c];d[a[h]]=u[h]}n.push(d)}e.dataSource=n}e._bindToArray(),t()}))):"string"==typeof e.dataSource&&e.dataSource.indexOf(".csv")>=0?(e.dataSourceType="csv",new i(e,(function(){e._bindToArray()}))):"string"==typeof e.dataSource&&e.dataSource.indexOf(".tsv")>=0?(e.dataSourceType="tsv",new i(e,(function(){}))):"array"===e.dataSourceType?(e._bindToArray(),t()):"json"===e.dataSourceType&&(e._bindToJSON(),t())}},{key:"_onBindingComplete",value:function(){var e=this;e._buildHierarchy(),e.onBindingComplete&&e.onBindingComplete({data:e.boundSource}),e._notify&&e._notify({action:"bindingComplete",data:e.boundSource}),e.bindingCompleted=!0}},{key:"refreshHierarchy",value:function(){this._buildHierarchy()}},{key:"find",value:function(){return this.boundSource.find.apply(this.boundSource,arguments)}},{key:"onVirtualDataSourceRequested",value:function(e,t){var r=this,i=t?t.first:1/0,a=t?t.last:1/0,n=t?t.row:null;if(void 0===i&&(i=1/0),void 0===a&&(a=1/0),r.virtualFirstIndex=i,r.virtualLastIndex=a,r.virtualDataSource){var o=function(o){void 0!==o.virtualDataSourceLength&&(r.virtualDataSourceLength=o.virtualDataSourceLength),new Smart.DataAdapter({dataSource:o.dataSource,dataFields:o.dataFields||r.dataFields,data:t,onBindingComplete:function(t){if(r.virtualDataSourceOnExpand&&n)return t.data&&t.data.length>0?r.add(t.data,n.$.id):n.leaf=!0,r.onFilter&&r.onFilter(),void e();if(i===1/0)r.add(t.data);else{for(var o=[],s=[],l=0;l<t.data.length;l++){var u=t.data[l];i+l<=a&&(o.push(u),s.push(i+l))}r.update(s,o)}r.onFilter&&r.onFilter(),e()}})},s=!1,l=function(e){return 0===Object.entries(e).length&&(e.constructor===Object||e.constructor===Array)},u=l(t.sorting)&&l(t.filtering)&&l(t.grouping)&&!t.row&&"filter"!==t.action&&"sort"!==t.action&&"group"!==t.action;if(r.virtualDataSourceCache&&i!==1/0&&u){for(var d=0,c=i;c<a;c++)r[c].$.isEmpty||d++;d===a-i&&(s=!0)}s?e():"expand"===t.action?r.virtualDataSourceOnExpand(o,{first:i,last:a,row:t.row,sorting:t.sorting,filtering:t.filtering,grouping:t.grouping,action:t.action}):r.virtualDataSource(o,{first:i,last:a,sorting:t.sorting,filtering:t.filtering,filterOperator:t.filterOperator||"and",grouping:t.grouping,action:t.action})}else e()}},{key:"add",value:function(e,t){var r=this;if(e){var i=!0,a=function(e){var a=r._getDataItem(e,r.boundSource.length);r[r.boundSource.length]=a,r.dataItemById[a.$.id]=a;var n=r.boundSource.push(a);return void 0!==t&&(a.$.parentId=t),n||(i=!1),a};if(e.length){for(var n=[],o=0;o<e.length;o++){var s=a(e[o]);n.push(s)}r._notify({action:"add",data:n})}else{var l=a(e);r._notify({action:"add",data:l})}return r.refreshHierarchy(),i}}},{key:"refreshIndexes",value:function(){for(var e=this,t=0;t<e.boundSource.length;t++)e[t]=e.boundSource[t],e[t].$.index=t,e.dataItemById[e[t].$.id]=e[t];for(var r=e.boundSource.length;e[r];)delete e[r],r++}},{key:"removeLast",value:function(){delete this[this.boundSource.length-1];var e=this.boundSource.pop();return delete this.dataItemById[e.$.id],this._notify({action:"removeLast",data:e}),this.refreshHierarchy(),e}},{key:"removeAt",value:function(e){var t=this.boundSource[e];if(!t)throw new Error("Invalid Item Index");this.boundSource.splice(e,1),delete this.dataItemById[t.$.id],this.refreshIndexes(),this._notify({action:"remove",index:e,data:t}),this.refreshHierarchy()}},{key:"update",value:function(e,t){var r=this;if(!Smart.Utilities.Types.isArray(e)||!Smart.Utilities.Types.isArray(t)||0!==e.length||0!==t.length){if(t.length&&e.length){for(var i=[],a=0;a<e.length;a++){var n=r._getDataItem(t[a],e[a]),o=e[a];i.push(n),r.boundSource[o]=n,r[o]=r.boundSource[o],r.dataItemById[n.$.id]=r[o]}return r._notify({action:"update",index:e,data:i}),void r.refreshHierarchy()}var s=r._getDataItem(t,e);return r.boundSource[e]=s,r[e]=r.boundSource[e],r.dataItemById[s.$.id]=r[e],r._notify({action:"update",index:e,data:s}),r.refreshHierarchy(),s}r.refreshHierarchy()}},{key:"insert",value:function(e,t){t=this._getDataItem(t,e);var r=this.boundSource.splice(e,0,t);return this.refreshIndexes(),this._notify({action:"insert",index:e,data:t}),this.refreshHierarchy(),r}},{key:"move",value:function(e,t){if(!(t>e&&t-e==1||e===t)){var r=this,i=r.boundSource.splice(e,1)[0];t>e?(t--,r.boundSource.splice(t,0,i)):r.boundSource.splice(t,0,i),r.refreshIndexes(),r._notify({action:"move",index:t,data:r.boundSource[t]}),r.refreshHierarchy()}}},{key:"indexOf",value:function(e){return this.boundSource.indexOf(e)}},{key:"clear",value:function(){var e=this;if(!e.isInitialized)return e._cachedValues=[],void(e.dataItemById=[]);for(var t=0;t<e.boundSource.length;t++)delete e[t];e._cachedValues=[],e.boundSource=e.observable?new Smart.ObservableArray:[],e.dataItemById=[],e.refreshHierarchy()}},{key:"_getId",value:function(e,t,r){if(null===e||void 0===e.name||!e.name||!t.getAttribute){if(e&&e.toString().length>0&&t.getAttribute){var i=t.getAttribute(e);if(null!==i&&i.toString().length>0)return i.trim().split(" ").join("").replace(/([ #;?%&,.+*~\':'!^$[\]()=>|\/@])/g,"");var a=e.split(this.mapChar);if(a.length>1){for(var n=t,o=0;o<a.length;o++)void 0!==n&&(n=n[a[o]]);if(void 0!==n)return n}else if(void 0!==t[e])return t[e]}return r}var s=t.getAttribute(e.name);if(null!==s&&s.toString().length>0)return s;if(e.map)try{var l=t.getAttribute(e.map);if(null!==l&&l.toString().length>0)return l}catch(e){return r}}},{key:"_buildHierarchy",value:function(){var e=this;if(e.reservedNames){var t=e.reservedNames;t.leaf||(t.leaf="leaf"),t.parent||(t.parent="parent"),t.expanded||(t.expanded="expanded"),t.checked||(t.checked="checked"),t.selected||(t.selected="selected"),t.level||(t.level="level"),t.data||(t.data="data")}else e.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};var r=e.reservedNames;if(e.childrenDataField){for(var i=[],a=function(t){var a=Object.assign({},e.boundSource[t]);if(!a)return"continue";i.push(a);var n=function(t){var i=e.childrenDataField.split(e.mapChar),a=null;if(i.length>1){for(var n=t,o=0;o<i.length;o++)void 0!==n&&(n=n[i[o]]);a=n}else a=t.children;t.children=a,(null===t.children||void 0===t.children||t.children&&0===t.children.length)&&(t[r.leaf]=!0)};n(a),a[r.level]=0,a.$||(a.$={}),a[r.parent]=null,a[r.data]=a,void 0===a[r.expanded]&&(a[r.expanded]=!1);!function t(i,a){if(a)for(var o=0;o<a.length;o++){var s=e._getDataItem(a[o],o);s&&(n(s),s[r.level]=i[r.level]+1,s[r.parent]=i,s[r.data]=s,i&&(i.children[o]=s),void 0===s[r.expanded]&&(s[r.expanded]=!1),t(s,s.children))}else i.children=new Array}(a,a.children)},n=0;n<e.boundSource.length;n++)a(n);if(e.boundHierarchy=i,!e._boundSourceUpdate){for(var o=0;o<e.boundHierarchy.length;o++){var s=e.boundHierarchy[o];s.children&&function t(r){if(e.dataItemById[r.$.id]||(e.boundSource.canNotify=!1,e.dataItemById[r.$.id]=r,e[e.boundSource.length]=r,e.boundSource.push(r),e.boundSource.canNotify=!0),r.children)for(var i=0;i<r.children.length;i++){var a=r.children[i];a.children&&t(a)}}(s)}e._boundSourceUpdate=!0}}e.xmlRoot&&"xml"===e.dataSourceType&&(e.boundHierarchy=this._getHierarchy("uid","_parentuid","children",null,e.boundSource)),e.keyDataField&&e.parentDataField&&(e.boundHierarchy=this._getHierarchy(e.keyDataField,e.parentDataField,"children",null,e.boundSource)),e.groupBy&&e.groupBy.length>0&&(e.boundHierarchy=this._getGroupHierarchy(e.groupBy,"children","label",null,"data",null,"parent",e.boundSource)),e.virtualDataSourceOnExpand&&(e.boundHierarchy=this._getHierarchy("id","parentId","children",null,e.boundSource))}},{key:"_getGroupHierarchy",value:function(e,t,r,i,a,n,o,s,l){l||(l=0);for(var u=this.reservedNames,d=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},c=new Array,h=0;h<e.length;h++)c[h]=d();t||(t="children"),r||(r="group"),a||(a="item"),o||(o="parent"),void 0===n&&(n="value");for(var f=new Array,p=new Array,v=0,m=function(e){var t=e;if(i)for(var r in i){var a=i[r];a.name&&a.map&&(t[a.map]=t[a.name])}return t},y=0;y<s.length;y++){var g=Object.assign({},m(s[y]));g[u.leaf]=!1;for(var b=new Array,_=0,x=0;x<e.length;x++){var w=e[x],S=g[w];null!==S&&(b[_++]={value:S,group:w,hash:c[x]})}if(b.length!==e.length)break;for(var k=null,C="",A=0;A<b.length;A++){var N=b[A].value,M=b[A].group;if(void 0===p[C=C+"_"+b[A].hash+"_"+N]||null===p[C]){if(null===k){(k={$:{}})[u.level]=0,k[u.leaf]=!1,k[o]=null,k[r]=N,k[a]=g,k.groupDataField=M,k[M]||(k[M]=k.data[M]),void 0!==g[u.expanded]?k[u.expanded]=g[u.expanded]:k[u.expanded]=!1,n&&(k[n]=g[n]),k[t]=new Array;var T=f.length+l;this.id&&"number"!=typeof g.$.id&&!isFinite(g.$.id)||(T="Item"+T),void 0===k.$.id&&(k.$.id=T),f[v++]=k}else{var D={$:{}};D[u.level]=k[u.level]+1,D[o]=k,D[r]=N,D[t]=new Array,D[a]=g,D.groupDataField=M,D[u.leaf]=!1,D[M]||(D[M]=D.data[M]),void 0!==g[u.expanded]?D[u.expanded]=g[u.expanded]:D[u.expanded]=!1,n&&(D[n]=g[n]),void 0===D.$.id&&(D.$.id=k.$.id+"_"+k[t].length),k[t][k[t].length]=D,k=D}p[C]=k}else k=p[C]}g&&(g[u.leaf]=!0),null!==k?(null===this.id?void 0===g.$.id&&(g.$.id=k.$.id+"_"+k[t].length):void 0===g.$.id&&-1===g.$.id.toString().indexOf(k.$.id)&&(g.$.id=k.$.id+"_"+g.$.id),g[o]=k,g[u.level]=k[u.level]+1,k[t][k[t].length]=g):void 0===g.$.id&&(g.$.id=d())}return f}},{key:"_getHierarchy",value:function(e,t,r,i,a){var n=this,o=new Array,s=this.boundSource;if(a&&(s=a),0===this.boundSource.length)return null;for(var l=null!==r?r:"children",u=new Array,d=s,c=d.length,h=n.reservedNames,f=function(e){var t=e;if(i)for(var r in i){var a=i[r];a.name&&a.map&&(t[a.map]=t[a.name])}return t},p=0;p<c;p++){var v=d[p],m=v[t],y=v[e];"parentId"===t&&(m=v.$.parentId),"id"===e&&(y=v.$.id),v[l]=new Array,u[y]={parentId:m,item:v}}for(var g=0;g<c;g++){var b=d[g],_=b[t],x=b[e];if("parentId"===t&&(_=b.$.parentId),"id"===e&&(x=b.$.id),void 0!==u[_]){var w={parentId:_,item:u[x].item},S=u[_].item;S[l]||(S[l]=new Array);var k=S[l].length;w=w.item,h?void 0===w[h.parent]&&(w[h.parent]=S):void 0===w.parent&&(w.parent=S);var C=f(w);S[l][k]=C,u[_].item=S,u[x].item=w}else{var A=u[x].item;h?void 0===A[h.parent]&&(A[h.parent]=null):void 0===A.parent&&(A.parent=null);var N=f(A);h?N[h.level]=0:N.level=0,o[o.length]=N}}if(0!==o.length){!function e(t,r){for(var i=0;i<r.length;i++){var a=r[i];h?a[h.level]=t:a.level=t;var o=a[l];o&&o.length>0?e(t+1,o):n.virtualDataSourceOnExpand?void 0===a.leaf&&(a.leaf=!1):h?a[h.leaf]=!0:a.leaf=!0}}(0,o)}return o}},{key:"summarize",value:function(e,t){Array.isArray(e)||(e=[e]);for(var r=[],i=0;i<e.length;i++){var a=e[i];for(var o in a){var s=a[o];r.push({dataField:o,functions:s})}}e=r;var l={},u=new Array;t||(t=this.boundSource);var d=t.length;if(0!==d&&void 0!==d){for(var c=function(r){for(var i=t[r],a=function(t){var a=e[t],o=i[a.dataField];if(a.functions){l[a.dataField]=l[a.dataField]||{},u[a.dataField]=u[a.dataField]||0,u[a.dataField]++;var s=function(e){for(var t in e){var r=l[a.dataField][t];null==r&&(l[a.dataField][t]=0,r=0),"function"==typeof e[t]&&(r=e[t](r,o,a.dataField,i)),l[a.dataField][t]=r}},d=parseFloat(o);(d=!isNaN(d))&&(o=parseFloat(o)),"number"==typeof o&&isFinite(o)?a.functions.forEach((function(e){var t=l[a.dataField][e];if(null==t&&(t=0,"min"===e&&(t=9999999999999),"max"===e&&(t=-9999999999999)),"sum"===e||"avg"===e||"stdev"===e||"stdevp"===e||"var"===e||"varp"===e)t+=parseFloat(o);else if("product"===e)0===r?t=parseFloat(o):t*=parseFloat(o);else if("min"===e)t=Math.min(t,parseFloat(o));else if("max"===e)t=Math.max(t,parseFloat(o));else if("count"===e)t++;else if("object"==n(e))return void s(e);l[a.dataField][e]=t})):a.functions.forEach((function(e){if("min"===e||"max"===e||"count"===e||"product"===e||"sum"===e||"avg"===e||"stdev"===e||"stdevp"===e||"var"===e||"varp"===e){if(null===o)return!0;var t=l[a.dataField][e];return null==t&&(t=0),l[a.dataField][e]=t,!0}"object"==n(e)&&s(e)}))}},o=0;o<e.length;o++)a(o)},h=0;h<d;h++)c(h);for(var f=function(r){var i=e[r];if(i.functions){if(l[i.dataField]||(l[i.dataField]={},i.functions.forEach((function(e){l[i.dataField][e]=0}))),void 0!==l[i.dataField].avg){var a=l[i.dataField].avg,n=u[i.dataField];l[i.dataField].avg=0===n||void 0===n?0:a/n}else void 0!==l[i.dataField].count&&(l[i.dataField].count=d);(l[i.dataField].stdev||l[i.dataField].stdevp||l[i.dataField].var||l[i.dataField].varp)&&i.functions.forEach((function(e){if("stdev"===e||"var"===e||"varp"===e||"stdevp"===e){for(var r=l[i.dataField][e],a=d,n=r/d,o=0,s=0;s<d;s++){var u=t[s][i.dataField];o+=(u-n)*(u-n)}var c="stdevp"===e||"varp"===e?a:a-1;0===c&&(c=1),"var"===e||"varp"===e?l[i.dataField][e]=o/c:"stdevp"!==e&&"stdev"!==e||(l[i.dataField][e]=Math.sqrt(o/c))}}))}},p=0;p<e.length;p++)f(p);return l}}},{key:"_getDataItem",value:function(e,t){var r=this,i={},a="number"==typeof r.dataSource||r.dataSourceLength;if(!e)return{$:{id:t,isEmpty:!0,index:t}};if("string"==typeof e&&(e={"":e}),a){for(var o=0;o<r.dataFields.length;o++)i[(r.dataFields?r.dataFields[o]:{}).name]="";return i.$={},i.$.id=t,i.$.index=t,i}var s=e;if(void 0!==s.expanded&&(i.expanded=s.expanded,"true"===s.expanded||!0===s.expanded||1===s.expanded?i.expanded=!0:i.expanded=!1),r.childrenDataField?void 0!==s[r.childrenDataField]&&(i.children=s[r.childrenDataField]):void 0!==s.children?i.children=s.children:void 0!==s.items&&(i.children=s.items),void 0!==s.leaf&&(i.leaf=s.leaf),void 0!==s.level&&(i.level=s.level),r.keyDataField&&void 0!==s[r.keyDataField]&&(i[r.keyDataField]=s[r.keyDataField]),r.parentDataField&&void 0!==s[r.parentDataField]&&(i[r.parentDataField]=s[r.parentDataField]),0===r.dataFields.length)for(var l=Object.getOwnPropertyNames(e),u=0;u<l.length;u++)"$"!==l[u]&&r.dataFields.push({name:l[u],dataType:"string"});for(var d=0;d<r.dataFields.length;d++){var c=r.dataFields?r.dataFields[d]:{},h="";if(null!=c){if(e.length&&(h=e[d]),c.map){var f=c.map.split(r.mapChar);if(f.length>0){for(var p=s,v=0;v<f.length;v++)s&&(p=p[f[v]]);h=p}else h=s[c.map]}null!=h?h=h.toString():void 0===h&&null!==h&&(h="");var m=!1;""===h&&(m=!0,null!=(h=e[c.name])?"array"!==c.dataType&&"date"!==c.dataType&&(h=h.toString()):h=""),"[object Object]"===h&&c.map&&m&&(h=""),r._cachedValues[h+"_"+c.dataType]?h=r._cachedValues[h+"_"+c.dataType]:("bool"===c.dataType||"boolean"===c.dataType?"true"===h||"1"===h?h=!0:"false"!==h&&"0"!==h||(h=!1):h=r.$document.deserialize(""+h,c.dataType,!0),r._cachedValues[h+"_"+c.dataType]=h),"string"!==c.dataType&&"boolean"!==c.dataType&&"bool"!==c.dataType&&(isNaN(h)||h===-1/0||h===1/0)&&(h=0),i[c.name]=h}}var y=t;return r.id?"object"==n(y=s[r.id])&&(y=t):!r.virtualDataSource&&r.dataItemById&&r.dataItemById[y]&&(y=r.length),i.$||(i.$={}),i.$.id=y,i.$.index=t,new Object(i)}},{key:"_bindToArray",value:function(){var e=this,t="number"==typeof e.dataSource||e.dataSourceLength,r=[];e.boundSource.canNotify=!1;for(var i=0;i<e.length;i++){var a=t?{}:e.dataSource[i],n=e._getDataItem(a,i);r.push(n)}if(t&&e.dataSourceLength&&e.dataSource.length>0)for(var o=0;o<e.dataSource.length;o++){var s=e.dataSource[o].cell,l=e.dataSource[o].value,u=s.replace(/[^0-9]/g,""),d=s.replace(/[0-9]/g,"");r[u-1][d]=l}e.boundSource=!1===e.observable?r:new Smart.ObservableArray(r);for(var c=0;c<e.length;c++)e[c]=e.boundSource[c],e.dataItemById[e[c].$.id]=e[c];e.boundSource.canNotify=!0}},{key:"_bindToJSON",value:function(){var e=this,t=[],r=Object.entries(e.dataSource);e.boundSource.canNotify=!1;for(var i=0;i<r.length;i++){var a=r[i],n=e._getDataItem(a,i);t.push(n)}e.boundSource=!1===e.observable?t:new Smart.ObservableArray(t);for(var o=0;o<e.length;o++)e[o]=e.boundSource[o],e.dataItemById[e[o].$.id]=e[o];e.boundSource.canNotify=!0}},{key:"sortBy",value:function(e,t,r){var i=this;if(!t)for(var a=0;a<i.dataFields.length;a++){var n=i.dataFields[a];if(n.name===e){t=n.dataType;break}}if(i.boundHierarchy){if((!e||0===e.length)&&i.groupBy.length>0)return void i.refreshHierarchy();!function a(n){i._sort(n,e,r,t);for(var o=0;o<n.length;o++){var s=n[o];s.children&&a(s.children)}}(i.boundHierarchy)}else i._sort(i.boundSource,e,r,t)}},{key:"_createFilter",value:function(e,t){for(var r={"=":"EQUAL","<>":"NOT_EQUAL","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",equal:"EQUAL","not equal":"NOT_EQUAL","less than":"LESS_THAN","greater than":"GREATER_THAN","greater than or equal":"GREATER_THAN_OR_EQUAL","less than or equal":"LESS_THAN_OR_EQUAL","starts with":"STARTS_WITH","ends with":"ENDS_WITH",null:"null","":"EMPTY",isblank:"EMPTY",isnotblank:"NOT_EMPTY",contains:"CONTAINS",notcontains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"},i=[],a=0;a<t.length;a++){for(var n=t[a],o=-1===n.indexOf('"')?n.split(" "):n.split('"'),s=[],l=0;l<o.length;l++){var u=o[l];""!==u&&s.push(u.trim())}i.push(s)}for(var d=new Smart.FilterGroup,c=[],h=[],f=0;f<i.length;f++){var p=i[f];if(p.length>1){for(var v=new Smart.FilterGroup,m="and",y=0,g=0;g<p.length;g++){var b=p[g];if("and"!==b&&"or"!==b){if(2===++y){var _=v.createFilter(e,b,r[p[g-1]]);y=0,m&&v.addFilter(m,_)}}else m=b}h.push(v)}else{var x=p[0];if("and"!==x&&"or"!==x)throw new Error('Filter Exprresion expects "AND" or "OR", but the token is: '+x);c.push(x)}}var w=0;if(1===h.length)return h[0];for(var S=0;S<h.length;S++){var k=c[w];(S+1)%2==0&&w++,k||(k="and"),d.addFilter(k,h[S])}return d}},{key:"filterBy",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var a=this,n=function(){for(var t=0;t<a.dataFields.length;t++){var r=a.dataFields[t];if(r.name===e)return r.dataType}}(),o=a._createFilter(n,r);return a.boundSource.filter((function(t){return o.evaluate(t[e])}))}},{key:"_filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",r=this,i=[],a=[];if(0!==e.length){var n,o,s=function(e){for(var t=0;t<r.dataFields.length;t++){var i=r.dataFields[t];if(i.name===e)return i.dataType}};"and"===t?(n=!0,o=function(e,t,r){return e&&t.evaluate(r[t.dataField])}):(n=!1,o=function(e,t,r){return e||t.evaluate(r[t.dataField])});for(var l=0;l<e.length;l++){var u=e[l],d=u[0],c=null;(c=u[1]instanceof Smart.FilterGroup?u[1]:r._createFilter(s(d),u.splice(1)))&&(a.push(d),c.dataField=d,i.push(c))}if(r.boundHierarchy){var h=function(e){for(var t=n,r=0;r<i.length;r++){var a=i[r];t=o(t,a,e)}return e.$.filtered=t,t},f=function e(t,i,a){for(var n=0,o=0;o<t.length;o++){var s=t[o];h(s),s.$.filtered&&n++,s.children&&e(s.children,s,i)}n>0&&r.groupBy.length>0&&i?(i.$.filtered=!0,a&&!a.$.filtered&&(a.$.filtered=!0)):n>0&&n!==t.length&&i&&(i.$.filtered=null,a&&!a.$.filtered&&(a.$.filtered=null))};f(r.boundHierarchy,null,null)}else for(var p=0;p<r.boundSource.length;p++){for(var v=r.boundSource[p],m=n,y=0;y<i.length;y++){var g=i[y];m=o(m,g,v)}v.$.filtered=m}r.onFilter&&r.onFilter()}else r.clearFilter()}},{key:"clearGroup",value:function(){var e=this;e.groupBy=[],e.boundHierarchy=null,e.refreshHierarchy(),e.onGroup&&e.onGroup()}},{key:"clearFilter",value:function(){for(var e=this,t=0;t<e.boundSource.length;t++)e.boundSource[t].$.filtered=!0;if(e.boundHierarchy){!function e(t,r,i){for(var a=0;a<t.length;a++){var n=t[a];n.$.filtered=!0,n.$.filtered,n.children&&e(n.children,n,r)}r&&(r.$.filtered=!0,i&&!i.$.filtered&&(i.$.filtered=!0))}(e.boundHierarchy,null,null)}e.onFilter&&e.onFilter()}},{key:"clearSort",value:function(){this._sort(this.boundSource,[],[],[])}},{key:"_sort",value:function(e,t,r,i,a){var o=!1;if(0!==e.length){if(e&&e.constructor&&e instanceof Smart.ObservableArray&&(o=!0),(!e||!Array.isArray(e)||0===e.length||!t||Array.isArray(t)&&0===t.length)&&!o&&!this.boundHierarchy)throw new Error("sort: Missing or Invalid arguments!");"string"==typeof t&&(t=[t]);var s=[],l=[];void 0===r&&(r=[]);for(var u=function(e,t){var r;switch(t||n(e)){case"string":r=(new Intl.Collator).compare;break;case"number":r=function(e,t){return e-t};break;case"boolean":case"bool":r=function(e,t){return e===t?0:!1===e?-1:1};break;case"date":case"time":case"dateTime":e instanceof Date?r=function(e,t){return e.getTime()-t.getTime()}:(e instanceof Smart.Utilities.DateTime||e instanceof Smart.Utilities.BigNumber)&&(r=function(e,t){return e.compare(t)});break;case"object":if(e instanceof Date)r=function(e,t){return e.getTime()-t.getTime()};else if(e instanceof Smart.Utilities.DateTime||e instanceof Smart.Utilities.BigNumber)r=function(e,t){return e.compare(t)};else if(e instanceof Smart.Utilities.Complex||window.NIComplex&&e instanceof window.NIComplex){var i=new Smart.Utilities.ComplexNumericProcessor;r=function(e,t){return i.compareComplexNumbers(e,t)}}}return r},d=0;d<t.length;d++){void 0===r[d]||"asc"===r[d]||"ascending"===r[d]?s[d]=1:s[d]=-1;var c=e[0][t[d]];l[d]=u(c,i[d])}if(a)a(e,t,r,l);else{e.sort((function(e,r){for(var i=0;i<t.length;i++){var a=l[i](e[t[i]],r[t[i]]);if(0===a){if(t[i+1])continue;return void 0!==e._index?(e._index-r._index)*s[i]:0}return a*s[i]}if(0===t.length)return e.$.index<r.$.index?-1:e.$.index>r.$.index?1:0}));for(var h=0;h<e.length;h++)this[h]=e[h]}}}},{key:"filter",value:function(e,t,r){Smart.DataAdapter.Filter(this.boundSource,e,t,r)}},{key:"sort",value:function(e,t,r){Smart.DataAdapter.Sort(this.boundSource,e,t,r)}},{key:"dataFields",get:function(){return this._dataFields},set:function(e){return this._dataFields=this._getDataFieldObjects(e),this._dataFields}},{key:"dataSource",get:function(){var e=this;return e._dataSource||(e._dataSource=[]),e._dataSource},set:function(e){var t=this;t._dataSource=e,t.isInitialized&&(t.boundSource=!1===t.observable?[]:new Smart.ObservableArray,t.dataItemById=[],t.bindingCompleted=!1,t.dataBind())}},{key:"canNotify",get:function(){var e=this;return void 0===e._canNotify&&(e._canNotify=!0),e._canNotify},set:function(e){this._canNotify=e}},{key:"length",get:function(){var e=this;return void 0!==e.virtualDataSourceLength?e.virtualDataSourceLength:e.dataSourceLength?e.dataSourceLength:"number"==typeof e.dataSource?e.dataSource:e.bindingCompleted?e.boundSource.length:e.dataSource&&"string"!=typeof e.dataSource&&e.dataSource.length?e.dataSource.length:e.boundSource.length}}],[{key:"Filter",value:function(e,t,r,i){var a,n,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"and";return"and"===o?(a=!0,n=function(e,t,r,a){return i?e&&i(t,r,a):e&&a.evaluate(t[r])}):(a=!1,n=function(e,t,r,a){return i?e||i(t,r,a):e||a.evaluate(t[r])}),e.filter((function(e){for(var i=a,o=0;o<r.length;o++){var s=r[o],l=t[o];i=n(i,e,l,s)}return i}))}},{key:"Sort",value:function(e,t,r,i){var a=function(e){var t;switch(n(e)){case"string":t=(new Intl.Collator).compare;break;case"number":t=function(e,t){return e-t};break;case"boolean":t=function(e,t){return e===t?0:!1===e?-1:1};break;case"object":if(e instanceof Date)t=function(e,t){return e.getTime()-t.getTime()};else if(e instanceof Smart.Utilities.DateTime||e instanceof BigNumberNG)t=function(e,t){return e.compare(t)};else if(e instanceof Smart.Utilities.Complex||window.NIComplex&&e instanceof window.NIComplex){var r=new Smart.Utilities.ComplexNumericProcessor;t=function(e,t){return r.compareComplexNumbers(e,t)}}}return t};if(e&&Array.isArray(e)&&0!==e.length&&t&&(!Array.isArray(t)||0!==t.length)){"string"==typeof t&&(t=[t]);var o=[],s=[];void 0===r&&(r=[]);for(var l=0;l<t.length;l++)void 0===r[l]||"asc"===r[l]||"ascending"===r[l]?o[l]=1:o[l]=-1,s[l]=a(e[0][t[l]]);if(!i){var u=e.slice(0);return u.sort((function(e,r){for(var i=0;i<t.length;i++){var a=s[i](e[t[i]],r[t[i]]);if(0===a){if(t[i+1])continue;return void 0!==e._index?(e._index-r._index)*o[i]:0}return a*o[i]}})),u}i(e,t,r,s)}}}]),e}();var i=function(){function e(t,i){r(this,e),this.config=t,this.callback=i,!1!==t.autoFetch&&this.call(t)}return a(e,[{key:"call",value:function(e){var t=this;e||(e=t.config);var r="GET",i=e.url,a=null,n=!0;if(e.type&&(r=e.type),e.data)if("GET"===r){for(var o in i+="?",e.data)e.data.hasOwnProperty(o)&&(i+=encodeURI(o+"="+e.data[o]+"&"));"&"===i.charAt(i.length-1)&&(i=i.slice(0,i.length-1))}else"POST"===r&&(a=JSON.stringify(e.data));e&&!1===e.async&&"xlsx"!==e.dataSourceType&&(n=!1),void 0!==window.fetch&&n?t.ajaxFetch(e,r,i,a):t.ajaxXMLHttpRequest(e,r,i,a,n)}},{key:"ajaxFetch",value:function(e,t,r,i){var a,n,o,s,l=this,u={method:t};switch(e.dataSourceType){case"json":a="json";break;case"xlsx":a="arrayBuffer";break;default:a="text"}e&&e.contentType&&(u.headers=new Headers({"Content-Type":e.contentType})),null!==i&&(u.body=i),e.timeout&&(o=setTimeout((function(){s=!0}),e.timeout)),e.beforeSend&&!1===e.beforeSend(u,e)||fetch(r,u).then((function(e){if(s)throw n=408,new Error("timeout");if(o&&clearTimeout(o),n=e.status,!e.ok)throw new Error(e.statusText);return e[a]()})).then((function(t){if("arrayBuffer"===a)return JSZip.loadAsync(t).then((function(t){return t.files["xl/worksheets/sheet1.xml"].async("text").then((function(r){return t.files["xl/sharedStrings.xml"].async("text").then((function(t){var i=l.parseXLSXData(r,t);l.ajaxComplete(e,i,n)}))}))}));l.ajaxComplete(e,t,n)})).catch((function(t){"JSZip is not defined"===t.message&&(t.message="JSZip is not defined. Please include a reference to JSZip to be able to load data from XLSX files."),e&&e.loadError&&e.loadError(n,t),l.callback&&l.callback(t,n)}))}},{key:"ajaxXMLHttpRequest",value:function(e,t,r,i,a){var n=new XMLHttpRequest,o=this;n.open(t,r,a),n.ontimeout=function(){e&&e.loadError&&e.loadError(408,"timeout")},n.onload=function(){if(4===n.readyState){var t=n.status,r=n.response;t>=200&&t<=299?("json"===e.dataSourceType&&(r=JSON.parse(r)),o.ajaxComplete(e,r,t)):e&&e.loadError&&e.loadError(t,r)}},n.onerror=function(){e&&e.loadError&&e.loadError(n.status,n.response)},e&&e.contentType&&n.setRequestHeader("Content-Type",e.contentType),a&&e.timeout&&(n.timeout=e.timeout),e.beforeSend&&!1===e.beforeSend(n,e)||n.send(i)}},{key:"ajaxComplete",value:function(e,t,r){if(e){if(e.beforeLoadComplete){var i=e.beforeLoadComplete(t);i&&(t=i)}e.loadComplete&&e.loadComplete(t,r),this.callback&&this.callback(t,r)}}},{key:"parseXLSXData",value:function(e,t){var r=new DOMParser,i=r.parseFromString(t,"text/xml"),a=Array.from(i.getElementsByTagName("si")),n=[],o=r.parseFromString(e,"text/xml"),s=Array.from(o.getElementsByTagName("row")),l=[];return a.forEach((function(e){var t=e.getElementsByTagName("t");if(1===t.length)n.push(t[0].innerHTML);else{var r="";(t=Array.from(t)).forEach((function(e){r+=e.innerHTML})),n.push(r)}})),s.forEach((function(e){var t={};Array.from(e.getElementsByTagName("c")).forEach((function(e){var r,i=e.getAttribute("r").match(/\D+/)[0],a=e.getAttribute("t"),o=e.getElementsByTagName("v")[0].innerHTML;switch(a){case"s":r=n[parseFloat(o)];break;case"b":r=1===parseFloat(o);break;default:r=parseFloat(o)}t[i]=r})),l.push(t)})),l}}]),e}()}})},25:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==i(e)&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=38)}({38:function(e,t){Smart.Utilities.Assign("DataExporter",function(){function e(t,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;t||(t={}),n.style=t.style,n.header=t.header,n.exportHeader=void 0===t.exportHeader||t.exportHeader,n.hierarchical=t.hierarchical,n.expandChar=t.expandChar||"+",n.collapseChar=t.collapseChar||"-",n.pageOrientation=t.pageOrientation,n.allowNull=t.allowNull||!1,!n.hierarchical&&r&&r.length>0?n.groupBy=r:n.mergedCells=t.mergedCells,!n.groupBy&&i&&Object.keys(i).length>0&&(n.filterBy=i),a&&(n.conditionalFormatting=a),n.timeBetween1900And1970=new Date(1970,0,1).getTime()-new Date(1900,0,1).getTime()}var t,a,n;return t=e,(a=[{key:"downloadFile",value:function(e,t,r){var i;if(!r)return e;if(i=e instanceof Blob?e:new Blob([e],{type:t}),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,r);else{var a=document.createElement("a"),n=URL.createObjectURL(i);a.href=n,a.download=r,a.style.position="absolute",a.style.visibility="hidden",document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(n)}),100)}}},{key:"exportData",value:function(e,t,r,i){var a=this;if(a.actualHierarchy=a.hierarchical,t=t.toLowerCase(),a.exportHeader&&(a.header?(0===(e=e.slice(0)).length&&(a.actualHierarchy=!1),a.processComplexHeader(a.header,e,t)):1===e.length&&(a.actualHierarchy=!1)),0!==e.length){"xlsx"===t&&(a.xlsxStartIndex=a.complexHeader?a.complexHeader.length:+a.exportHeader),a.actualHierarchy&&(e=a.processHierarchicalData(e,t)),a.getDatafields(e),r&&r.slice(r.length-t.length-1,r.length)!=="."+t&&(r+="."+t);var n=null;switch(t){case"csv":n=a.exportToCSVAndTSV(e,{delimiter:", ",MIME:"text/csv",toRemove:2},r);break;case"html":n=a.exportToHTML(e,r);break;case"jpeg":case"png":a.exportToImage(e,r,t,i);break;case"json":n=a.exportToJSON(e,r);break;case"pdf":n=a.exportToPDF(e,r);break;case"tsv":n=a.exportToCSVAndTSV(e,{delimiter:"\t",MIME:"text/tab-separated-values",toRemove:1},r);break;case"xlsx":n=a.exportToXLSX(e,r);break;case"xml":n=a.exportToXML(e,r)}return i&&n&&i(n),delete a.complexHeader,n}console.warn("No data to export.")}},{key:"exportToCSVAndTSV",value:function(e,t,r){for(var i=this,a=i.datafields,n="",o=0;o<e.length;o++){for(var s=e[o],l="",u=0;u<a.length;u++)i.actualHierarchy&&0===u?l+=('""'+t.delimiter).repeat(s._level-1)+'"'+s[a[u]]+'"'+t.delimiter+('""'+t.delimiter).repeat(i.maxLevel-s._level):l+='"'+s[a[u]]+'"'+t.delimiter;n+=l=l.slice(0,l.length-t.toRemove)+"\n"}return this.downloadFile(n,t.MIME,r)}},{key:"exportToHTML",value:function(e,t){var r=this,i=r.datafields,a=r.style,n="",o=0,s="";e=r.processGroupingInformation(e),r.data=e,r.exportHeader&&(n=r.getHTMLHeader(i,e),o=1),arguments[2]&&(s='<script type="text/javascript" src="'.concat(Array.from(document.getElementsByTagName("script")).find((function(e){return-1!==e.src.indexOf("html2canvas")})).src,'"><\/script>'));var l='<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="UTF-8">\n    <style type="text/css">\n'.concat(r.getRowStyle()).concat(r.getColumnStyle(),"\n    </style>").concat(s).concat(r.toggleableFunctionality(),"\n</head>\n<body>\n    <table").concat(r.getTableStyle(),">").concat(n,"\n        <tbody>\n"),u={},d={},c=[];r.getMergedCellsInfo(u,d);e:for(var h=o;h<e.length;h++){var f=e[h],p=h-o,v=r.getAlternationIndex(p," rowN"),m="",y="",g="",b=0;if(r.actualHierarchy)f._collapsed&&(m=" collapsed"),y=' level="'.concat(f._level,'"');else if(r.groupBy)for(var _=0;_<r.groupBy.length;_++){var x=r.groupBy[_],w=f[x],S=r.groups[x][w];if(g+=w,-1===c.indexOf(g)){l+='            <tr class="row">\n                <td class="column group" style="padding-left: '.concat(25*b,'px;" colspan="').concat(r.datafields.length,'">').concat(S,"</td>\n            </tr>"),c.push(g),h--;continue e}b++}var k='            <tr class="row row'.concat(p).concat(v).concat(m,'"').concat(y);t||(k+=' style="page-break-inside: avoid;"'),k+=">\n";for(var C=0;C<i.length;C++){var A=C+","+p,N=1,M=1;if(u[A])N=u[A].colspan,M=u[A].rowspan;else if(d[A])continue;var T=i[C],D=f[T],O="";if(r.actualHierarchy&&0===C){var P="";f._expanded?P=r.collapseChar:!1===f._expanded&&(P=r.expandChar),O='<div class="toggle-element" style="margin-left: '.concat(25*(f._level-1)+5,'px;" expanded>').concat(P,"</div>")}D=r.getFormattedValue(D,T);var F="";if(a&&a.columns&&a.columns[T]&&a.columns[T][p]){var I=a.columns[T][p];F+="border-color: ".concat(I.border,"; background-color: ").concat(I.background,"; color: ").concat(I.color,';"')}0===C&&b>1&&(F+="padding-left: ".concat(25*(b-1),'px;"')),F&&(F=' style="'.concat(F,'"')),k+='                <td class="column column'.concat(T,'"').concat(F,' colspan="').concat(N,'" rowspan="').concat(M,'">').concat(O+D,"</td>\n")}l+=k+"            </tr>\n"}return l+="        </tbody>\n    </table>\n</body>\n</html>",arguments[2]?l:this.downloadFile(l,"text/html",t)}},{key:"exportToImage",value:function(e,t,r,i){try{html2canvas}catch(e){throw new Error("smart-grid: Missing reference to 'html2canvas.min.js'.")}var a=null,n=this.exportToHTML(e,t,!0),o=document.createElement("iframe");return o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.border="none",o.style.width="100%",o.style.height="100%",o.style.opacity=0,o.style.pointerEvents="none",document.body.appendChild(o),o.contentDocument.write(n),function e(){o.contentDocument.body&&o.contentDocument.body.firstElementChild?o.contentWindow.html2canvas(o.contentDocument.body.firstElementChild).then((function(e){var n=new Smart.Utilities.Draw(document.createElement("div"));a=e.toDataURL("image/png"),i?i(a):(document.body.appendChild(e),n.exportImage(void 0,e,r,t)),o.remove(),e.remove()})):requestAnimationFrame(e)}(),a}},{key:"getMergedCellsInfo",value:function(e,t,r){var i=this;if(i.mergedCells){var a=r&&0!==r[i.datafields.length-1];i.mergedCellsPDF=i.mergedCells.slice(0);for(var n=0;n<i.mergedCellsPDF.length;n++){var o=i.mergedCellsPDF[n],s=o.colspan,l=o.rowspan;if(!(l<2&&s<2)){var u=o.cell[1],d=o.cell[0];if(a&&s>1){var c=r[d],h=r[d+s-1],f=[];if(h>c){var p=c,v=d,m=0;e:for(var y=c;y<=h;y++){for(var g=v,b=0;r[v]===p;)if(v++,b++,++m===s){f.push({start:g,span:b});break e}f.push({start:g,span:b}),p=r[v]}s=f[0].span;for(var _=1;_<f.length;_++)i.mergedCellsPDF.push({cell:[f[_].start,u],colspan:f[_].span,rowspan:l,originalCell:d})}}for(var x=d;x<d+s;x++)for(var w=u;w<u+l;w++){var S=x+","+w;x!==d||w!==u?t[S]=!0:e[S]={colspan:s,rowspan:l,originalCell:o.originalCell}}}}}}},{key:"getAlternationIndex",value:function(e,t){if(!this.style)return"";var r=this.style.rows;return r&&r.alternationCount&&((void 0===r.alternationStart||e>=r.alternationStart)&&(void 0===r.alternationEnd||e<=r.alternationEnd)||r.alternationStart===r.alternationEnd)?t+e%r.alternationCount:""}},{key:"getFormattedValue",value:function(e,t){var r=this,i=r.style;if(null===e)return r.allowNull?"null":"";if(t&&i&&i.columns&&i.columns[t]&&i.columns[t].format){if("number"==typeof e)return r.formatNumber(e,i.columns[t].format);if(e instanceof Date)return r.formatDate(e,i.columns[t].format)}else if(e instanceof Date)return r.formatDate(e,"d");return e}},{key:"exportToJSON",value:function(e,t){return this.downloadFile(JSON.stringify(e,this.datafields.concat("rows")),"application/json",t)}},{key:"exportToPDF",value:function(e,t){try{pdfMake}catch(e){throw new Error("Missing reference to 'pdfmake.min.js'.")}var r,i=this,a=i.datafields,n=+i.exportHeader,o=[],s={},l={},u={},d=n?i.complexHeader?i.complexHeader.length:1:0,c={pageOrientation:i.pageOrientation||"portrait"},h=[],f=[];function p(){for(var e=[],t=0;t<r.length;t++)e.push([]);return e}e=i.processGroupingInformation(e),i.data=e,i.headerRows=d,i.getPDFStyle();var v=i.styleInfo;r=v?i.wrapPDFColumns(c,u):[{body:h,datafields:a}],n&&(h=i.getPDFHeader(a,r,u)),i.getMergedCellsInfo(s,l,u);e:for(var m=n;m<e.length;m++){var y=e[m],g="",b=0;if(i.groupBy)for(var _=0;_<i.groupBy.length;_++){var x=i.groupBy[_],w=y[x],S=i.groups[x][w];if(g+=w,-1===o.indexOf(g)){i.createGroupHeaderRow(r,{text:S,style:["row","cell","group"],marginLeft:7.5*b}),o.push(g),m--;continue e}b++}for(var k=p(),C=m-n,A=i.getAlternationIndex(C,""),N=0;N<a.length;N++){var M=a[N],T={style:["row","row"+C,"cell","cell"+M]},D=u[N]||0;if(void 0!==A&&T.style.splice(1,0,"rowN"+A),i.mergedCellsPDF){var O=N+","+C,P=s[O];if(P){if(T.colSpan=P.colspan,T.rowSpan=P.rowspan,void 0!==P.originalCell){T.text="",T.style[T.style.length-1]="cell"+a[P.originalCell],k[D].push(T);continue}}else if(l[O]){k[D].push({});continue}}var F=i.getFormattedValue(y[M],M);T.text=F.toString(),i.getUniqueStylePDF(T,M,C),i.setIndentation(T,{j:N,currentRecord:y,value:F,outlineLevel:b}),k[D].push(T)}for(var I=0;I<r.length;I++)r[I].body.push(k[I])}if(v){for(var E=0;E<r.length;E++){for(var L=r[E].body,R=d-1;R>=0;R--)L.unshift(h[E][R]);f.push({table:{headerRows:d,widths:r[E].widths,heights:function(e){return v.heights[e]?v.heights[e]:v.defaultHeight?v.defaultHeight:void 0},body:L},pageBreak:"after"})}delete f[r.length-1].pageBreak,c.styles=v.styles}else{for(var B=r[0].body,H=d-1;H>=0;H--)B.unshift(h[0][H]);f=[{table:{headerRows:d,body:B}}],c.styles={header:{bold:!0},group:{bold:!0}}}c.content=f,pdfMake.createPdf(c).download(t),delete i.mergedCellsPDF,delete i.styleInfo}},{key:"getPDFStyle",value:function(){var e=this,t=e.style;if(!t)return"";var r=e.data[0],i=t.header,a=t.columns,n=t.rows,o={heights:[],widths:Array(e.datafields.length).fill("*"),styles:{header:{},row:{},cell:{},group:{fillColor:"#FFFFFF",color:"#000000",bold:!0}}};function s(t,i){if(t)for(var a in t)if(t.hasOwnProperty(a))if(void 0===r[a])if("height"===a&&"header"===i)for(var n=0;n<e.headerRows;n++)o.heights[n]=parseInt(t[a],10)/e.headerRows/1.4;else e.storePDFStyle({prop:a,value:t[a],toUpdate:i});else for(var s in t[a])if(isNaN(s)&&t[a].hasOwnProperty(s)){var l=t[a][s],u=e.datafields.indexOf(a);"width"===s&&"*"===o.widths[u]?o.widths[u]=l:e.storePDFStyle({prop:s,value:l,toUpdate:i+a})}}if(e.styleInfo=o,s(i,"header"),s(a,"cell"),n){for(var l in n)if(n.hasOwnProperty(l)&&-1===l.indexOf("alt")){var u=n[l];if(isNaN(l))"height"===l?o.defaultHeight=parseFloat(u)/1.4:e.storePDFStyle({prop:l,value:u,toUpdate:"row"});else for(var d in u)u.hasOwnProperty(d)&&("height"===d?o.heights[parseFloat(l)+e.headerRows]=parseFloat(u[d])/1.4:e.storePDFStyle({prop:d,value:u[d],toUpdate:"row"+l}))}if(n.alternationCount)for(var c=0;c<n.alternationCount;c++){var h={};n["alternationIndex".concat(c,"Color")]&&(h.color=n["alternationIndex".concat(c,"Color")]),n["alternationIndex".concat(c,"BackgroundColor")]&&(h.fillColor=n["alternationIndex".concat(c,"BackgroundColor")]),o.styles["rowN"+c]=h}}}},{key:"storePDFStyle",value:function(e){var t=this.styleInfo.styles[e.toUpdate];t||(t={},this.styleInfo.styles[e.toUpdate]=t);var r=e.value;switch(e.prop){case"backgroundColor":t.fillColor=r;break;case"color":t.color=r;break;case"fontSize":t.fontSize=parseFloat(r);break;case"fontStyle":"italic"===r&&(t.italics=!0);break;case"fontWeight":"bold"===r&&(t.bold=!0);break;case"textAlign":t.alignment=r}}},{key:"wrapPDFColumns",value:function(e,t){for(var r=this.styleInfo,i="portrait"===e.pageOrientation?775:1155,a=[],n=0,o=0;o<r.widths.length;o++){var s=void 0,l=r.widths[o];if("*"===l?s=150:"string"==typeof l&&-1!==l.indexOf("%")?(s=Math.min(i,Math.floor(parseFloat(l)/100*i)))===i&&(l="*"):(l=parseFloat(l))>=i?(s=i,l="*"):(s=l,l/=1.4),void 0!==a[n]){var u=a[n];u.width+s>i?(n++,o--):(t[o]=n,u.width+=s,u.widths.push(l),u.datafields.push(this.datafields[o]))}else a[n]={body:[],width:s,widths:[l],datafields:[this.datafields[o]]},t[o]=n}return a}},{key:"getPDFHeader",value:function(e,t,r){for(var i=[],a=this.headerRows,n=this.complexHeader?this.complexHeader:[Object.values(this.data[0])],o=[],s=[],l=0;l<a;l++)for(var u=n[l],d=0;d<u.length;d++){var c=r[d]||0;o[c]||(o[c]=[]),o[c][l]||(o[c][l]=[]),o[c][l].push(u[d])}function h(e,t,r){for(var i=0;i<a;i++){for(var n=e[i],o=[],s=0;s<n.length;s++){var l=n[s],u=1,d=1;if(n[s-1]&&n[s-1]===l||e[i-1]&&e[i-1][s]===l)o.push({});else{for(var c=s+1;n[c]&&n[c]===n[c-1];)u++,c++;for(c=i+1;e[c]&&e[c][s]===l;)d++,c++;var h=i===a-1||d+i===a?r.datafields[s]:null,f={text:l,colSpan:u,rowSpan:d};h?f.style=["header","header"+h]:(f.alignment="center",f.style="header"),o.push(f)}}t.push(o)}}for(var f=0;f<t.length;f++)s=[],h(o[f],s,t[f]),i.push(s);return i}},{key:"createGroupHeaderRow",value:function(e,t){for(var r=0;r<e.length;r++){var i=Object.assign({},t),a=e[r].datafields.length,n=[i];i.colSpan=a,n.length=a,n.fill({},1,a-1),e[r].body.push(n)}}},{key:"getUniqueStylePDF",value:function(e,t,r){var i=this.style;if(i&&i.columns&&i.columns[t]){var a=i.columns[t][r];a&&(e.fillColor=function(e){var t=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(e.replace(/\s/g,""));if(null===t)return e;var r=parseFloat(t[1]).toString(16).toUpperCase(),i=parseFloat(t[2]).toString(16).toUpperCase(),a=parseFloat(t[3]).toString(16).toUpperCase();return"#"+"0".repeat(2-r.length)+r+"0".repeat(2-i.length)+i+"0".repeat(2-a.length)+a}(a.background),e.color=a.color.toLowerCase())}}},{key:"setIndentation",value:function(e,t){if(0===t.j)if(this.actualHierarchy){var r=t.currentRecord;void 0!==r._expanded?(e.marginLeft=25*(r._level-1),e.text=this.collapseChar+" "+t.value):e.marginLeft=25*(r._level-1)+6}else t.outlineLevel>1&&(e.marginLeft=7.5*(t.outlineLevel-1))}},{key:"exportToXLSX",value:function(e,t){try{JSZip}catch(e){throw new Error("Missing reference to 'jszip.min.js'.")}var r=this,i=r.style;if(e=r.processGroupingInformation(e,!0),r.data=e,r.getColumnsArray(),r.complexHeaderMergedCells=[],r.complexHeaderMergeInfo)for(var a in r.complexHeaderMergeInfo)if(r.complexHeaderMergeInfo.hasOwnProperty(a)){var n=r.complexHeaderMergeInfo[a];if(n.from[0]===n.to[0]&&n.from[1]===n.to[1])continue;r.complexHeaderMergedCells.push({from:r.columnsArray[n.from[1]]+(n.from[0]+1),to:r.columnsArray[n.to[1]]+(n.to[0]+1)})}r.getConditionalFormatting(),i||(i=r.generateDefaultStyle(e));var o=r.generateSharedStrings(e),s=o.collection,l=o.xml,u=r.generateStyles(i),d=r.groupBy?r.generateSheet1WithGrouping(e,s):r.generateSheet1(e,s),c=r.generateAuxiliaryFiles(),h=new JSZip,f=h.folder("_rels"),p=h.folder("docProps"),v=h.folder("xl"),m=v.folder("_rels"),y=v.folder("theme"),g=v.folder("worksheets");f.file(".rels",c._relsRels),p.file("app.xml",c.docPropsAppXml),p.file("core.xml",c.docPropsCoreXml),m.file("workbook.xml.rels",c.xl_relsWorkbookXmlRels),y.file("theme1.xml",c.xlThemeTheme1Xml),g.file("sheet1.xml",d),v.file("sharedStrings.xml",l),v.file("styles.xml",u),v.file("workbook.xml",c.xlWorkbookXml),h.file("[Content_Types].xml",c.Content_TypesXml),h.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}).then((function(e){return r.downloadFile(e,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t)})),delete r.conditionalFormattingXLSX,delete r.complexHeaderMergeInfo,delete r.defaultRowHeight,delete r.rowHeight}},{key:"processGroupingInformation",value:function(e,t){var r,a=this;if(!a.groupBy)return e;if(e=e.slice(0),a.exportHeader&&(t&&a.complexHeader?(r=e.slice(0,a.complexHeader.length),e.splice(0,a.complexHeader.length)):(r=[e[0]],e.splice(0,1))),e.length>1){var n=function(e,t){var r;switch(t||i(e)){case"string":r=(new Intl.Collator).compare;break;case"number":r=function(e,t){return e-t};break;case"boolean":case"bool":r=function(e,t){return e===t?0:!1===e?-1:1};break;case"date":case"time":case"dateTime":e instanceof Date?r=function(e,t){return e.getTime()-t.getTime()}:(e instanceof Smart.Utilities.DateTime||e instanceof Smart.Utilities.BigNumber)&&(r=function(e,t){return e.compare(t)});break;case"object":if(e instanceof Date)r=function(e,t){return e.getTime()-t.getTime()};else if(e instanceof Smart.Utilities.DateTime||e instanceof Smart.Utilities.BigNumber)r=function(e,t){return e.compare(t)};else if(e instanceof Smart.Utilities.Complex||window.NIComplex&&e instanceof window.NIComplex){var a=new Smart.Utilities.ComplexNumericProcessor;r=function(e,t){return a.compareComplexNumbers(e,t)}}}return r};!function(e,t,r,i){if(e&&Array.isArray(e)&&0!==e.length&&t&&(!Array.isArray(t)||0!==t.length)){"string"==typeof t&&(t=[t]);var a=[],o=[];void 0===r&&(r=[]);for(var s=0;s<t.length;s++)void 0===r[s]||"asc"===r[s]||"ascending"===r[s]?a[s]=1:a[s]=-1,o[s]=n(e[0][t[s]]);e.sort((function(e,r){for(var i=0;i<t.length;i++){var n=o[i](e[t[i]],r[t[i]]);if(0===n){if(t[i+1])continue;return void 0!==e._index?(e._index-r._index)*a[i]:0}return n*a[i]}}))}}(e,a.groupBy)}return r&&(e=r.concat(e)),a.getGroupLabels(e),e}},{key:"exportToXML",value:function(e,t){var r=this.datafields.slice(0),i='<?xml version="1.0" encoding="UTF-8" ?>\n<table>\n';return-1===r.indexOf("rows")&&r.push("rows"),i+=function e(t,i){for(var a="",n=0;n<t.length;n++){var o=t[n];a+=i+"<row>\n";for(var s=0;s<r.length;s++){var l=r[s];if("rows"!==l)a+=i+"    <".concat(l,">").concat(o[l],"</").concat(l,">\n");else{if(!o.rows)continue;a+="".concat(i,"    <rows>\n").concat(e(o.rows,i+"        ")).concat(i,"    </rows>\n")}}a+=i+"</row>\n"}return a}(e,"    ")+"</table>",this.downloadFile(i,"application/xml",t)}},{key:"formatDate",value:function(e,t){if(!Smart.Utilities.DateTime)return e;try{return new Smart.Utilities.DateTime(e).toString(t)}catch(t){return e}}},{key:"formatNumber",value:function(e,t){if(!Smart.Utilities.NumberRenderer)return e;var r=(new Smart.Utilities.NumberRenderer).formatNumber(e,t);return void 0===r?e:r}},{key:"generateAuxiliaryFiles",value:function(){var e=(new Date).toISOString();return{_relsRels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',docPropsAppXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="1" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr></vt:vector></TitlesOfParts><Company></Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>',docPropsCoreXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>Smart HTML Elements</dc:creator><cp:lastModifiedBy>Smart HTML Elements</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">'.concat(e,'</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">').concat(e,"</dcterms:modified></cp:coreProperties>"),xl_relsWorkbookXmlRels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId4" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/></Relationships>',xlThemeTheme1Xml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="44546A"/></a:dk2><a:lt2><a:srgbClr val="E7E6E6"/></a:lt2><a:accent1><a:srgbClr val="4472C4"/></a:accent1><a:accent2><a:srgbClr val="ED7D31"/></a:accent2><a:accent3><a:srgbClr val="A5A5A5"/></a:accent3><a:accent4><a:srgbClr val="FFC000"/></a:accent4><a:accent5><a:srgbClr val="5B9BD5"/></a:accent5><a:accent6><a:srgbClr val="70AD47"/></a:accent6><a:hlink><a:srgbClr val="0563C1"/></a:hlink><a:folHlink><a:srgbClr val="954F72"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Calibri Light" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="游ゴシック Light"/><a:font script="Hang" typeface="맑은 고딕"/><a:font script="Hans" typeface="等线 Light"/><a:font script="Hant" typeface="新細明體"/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="游ゴシック"/><a:font script="Hang" typeface="맑은 고딕"/><a:font script="Hans" typeface="等线"/><a:font script="Hant" typeface="新細明體"/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:lumMod val="110000"/><a:satMod val="105000"/><a:tint val="67000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="103000"/><a:tint val="73000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="109000"/><a:tint val="81000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:satMod val="103000"/><a:lumMod val="102000"/><a:tint val="94000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:satMod val="110000"/><a:lumMod val="100000"/><a:shade val="100000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="99000"/><a:satMod val="120000"/><a:shade val="78000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="6350" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="12700" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="19050" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="57150" dist="19050" dir="5400000" algn="ctr" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="63000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:solidFill><a:schemeClr val="phClr"><a:tint val="95000"/><a:satMod val="170000"/></a:schemeClr></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="93000"/><a:satMod val="150000"/><a:shade val="98000"/><a:lumMod val="102000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:tint val="98000"/><a:satMod val="130000"/><a:shade val="90000"/><a:lumMod val="103000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="63000"/><a:satMod val="120000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri="{05A4C25C-085E-4340-85A3-A5531E510DB2}"><thm15:themeFamily xmlns:thm15="http://schemas.microsoft.com/office/thememl/2012/main" name="Office Theme" id="{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}" vid="{4A3C46E8-61CC-4603-A589-7422A47A8E4A}"/></a:ext></a:extLst></a:theme>',xlWorkbookXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15 xr xr6 xr10 xr2" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr6="http://schemas.microsoft.com/office/spreadsheetml/2016/revision6" xmlns:xr10="http://schemas.microsoft.com/office/spreadsheetml/2016/revision10" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2"><fileVersion appName="xl" lastEdited="7" lowestEdited="7" rupBuild="20325"/><workbookPr defaultThemeVersion="166925"/><mc:AlternateContent xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"><mc:Choice Requires="x15"><x15ac:absPath url="C:UsersjqwidgetsDesktop" xmlns:x15ac="http://schemas.microsoft.com/office/spreadsheetml/2010/11/ac"/></mc:Choice></mc:AlternateContent><xr:revisionPtr revIDLastSave="0" documentId="13_ncr:1_{0DEDCB6D-5403-4CD8-AAA5-59B6D238A8B6}" xr6:coauthVersionLast="34" xr6:coauthVersionMax="34" xr10:uidLastSave="{00000000-0000-0000-0000-000000000000}"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="19200" windowHeight="6950" xr2:uid="{0CB664E6-3800-4A88-B158-B46A682E7484}"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets><calcPr calcId="179021"/><extLst><ext uri="{140A7094-0E35-4892-8432-C4D2E57EDEB5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:workbookPr chartTrackingRefBase="1"/></ext></extLst></workbook>',Content_TypesXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="bin" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings"/><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/></Types>'}}},{key:"generateDefaultStyle",value:function(e){var t={},r=this.datafields,i=this.complexHeader?e[this.complexHeader.length]:e[+this.exportHeader];if(!i)return t;for(var a=0;a<r.length;a++)i[r[a]]instanceof Date&&(t.columns||(t.columns=[]),t.columns[r[a]]={format:"d"});return t}},{key:"generateGroupRow",value:function(e){var t=e.rowNumber,r="A"+t,i='        <row r="'.concat(t,'" outlineLevel="').concat(e.outlineLevel,'" spans="1:').concat(e.numberOfColumns,'"').concat(this.getCustomRowHeight(t-1),' x14ac:dyDescent="0.45">\n            <c r="').concat(r,'" t="s" s="0">\n                <v>').concat(e.sharedStringIndex,"</v>\n            </c>\n        </row>\n");return e.mergedCells.push({from:r,to:this.columnsArray[e.numberOfColumns-1]+t}),i}},{key:"generateSharedStrings",value:function(e){var t=this,r=t.datafields,i=[],a="",n=0,o=0;function s(e){n++,-1===i.indexOf(e)&&(o++,i.push(e),e=(e=(e=(e=(e=e.replace(/&(?!amp;)/g,"&amp;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;"),a+="<si><t>".concat(e,"</t></si>"))}for(var l=0;l<e.length;l++)for(var u=e[l],d=0;d<r.length;d++){var c=u[r[d]];null!==c||t.allowNull||(c=""),"string"==typeof c&&s(c)}if(t.groupLabels)for(var h=0;h<t.groupLabels.length;h++)s(t.groupLabels[h]);return a='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="'.concat(n,'" uniqueCount="').concat(o,'">').concat(a,"</sst>"),{collection:i,xml:a}}},{key:"generateSheet1",value:function(e,t){var r=this,i=r.columnsArray.length,a=e.length,n=r.columnsArray[i-1]+a,o=r.datafields,s=r.getFilters(),l=[].concat(r.complexHeaderMergedCells),u='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">\n    <sheetPr filterMode="'.concat(""!==s,'" />\n    <dimension ref="A1:').concat(n,'" />\n    <sheetViews>\n        <sheetView tabSelected="1" workbookViewId="0" />\n    </sheetViews>\n    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />').concat(r.getCustomColumnWidths(),"\n    <sheetData>\n");function d(e,t){return r.columnsArray[e]+t}for(var c=0;c<=e.length;c++){var h=e[c],f=c+1,p="";if(r.actualHierarchy){var v=e[c-1];v&&v._collapsed&&(!h||v._level>h._level)&&(p=' collapsed="true"')}if(c===e.length){p&&(u+='        <row r="'.concat(f,'" outlineLevel="').concat(Math.max(e[c-1]._level-2,0),'" hidden="false" collapsed="true" />\n'));break}for(var m='        <row r="'.concat(f,'"').concat(r.getOutlineLevel(h),' hidden="').concat(h._hidden||h._collapsed||!1,'"').concat(p,' spans="1:').concat(i,'"').concat(r.getCustomRowHeight(f-1),' x14ac:dyDescent="0.45">\n'),y=0;y<o.length;y++){var g=r.getXLSXCellStyle(d(y,f));m+=r.getActualCellData(h[o[y]],{r:d(y,f),s:g},t)}u+=m+="        </row>\n"}return u+="    </sheetData>".concat(r.conditionalFormattingXLSX.conditions).concat(s).concat(r.getMergedCells(l),'\n    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />\n</worksheet>')}},{key:"generateSheet1WithGrouping",value:function(e,t){var r=this,i=r.columnsArray.length,a=e.length,n=r.columnsArray[i-1]+a,o=r.datafields,s=[].concat(r.complexHeaderMergedCells),l='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">\n    <dimension ref="A1:'.concat(n,'" />\n    <sheetViews>\n        <sheetView tabSelected="1" workbookViewId="0" />\n    </sheetViews>\n    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />').concat(r.getCustomColumnWidths(),"\n    <sheetData>\n"),u=0,d=[];function c(e,t){return r.columnsArray[e]+t}e:for(var h=0;h<e.length;h++){var f=e[h],p=h+1+u,v=0,m="";if(!r.exportHeader||!r.complexHeader&&0!==h||r.complexHeader&&h>=r.complexHeader.length){for(var y="",g=0;g<r.groupBy.length;g++){var b=r.groupBy[g],_=f[b],x=r.groups[b][_];if(y+=_,-1===d.indexOf(y)){var w=t.indexOf(x);l+=r.generateGroupRow({rowNumber:p,outlineLevel:v,numberOfColumns:i,sharedStringIndex:w,mergedCells:s}),d.push(y),h--,u++;continue e}v++}m=' outlineLevel="'.concat(v,'"')}for(var S='        <row r="'.concat(p,'"').concat(m,' spans="1:').concat(i,'"').concat(r.getCustomRowHeight(p-1),' x14ac:dyDescent="0.45">\n'),k=0;k<o.length;k++){var C=r.getXLSXCellStyle(c(k,h+1));S+=r.getActualCellData(f[o[k]],{r:c(k,p),s:C},t)}l+=S+="        </row>\n"}return l+="    </sheetData>".concat(r.getMergedCells(s),'\n    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />\n</worksheet>')}},{key:"getActualCellData",value:function(e,t,r){var i=t.r,a=t.s||' s="0"';return null!==e||this.allowNull||(e=""),"string"==typeof e?'            <c r="'.concat(i,'" t="s"').concat(a,">\n                <v>").concat(r.indexOf(e),"</v>\n            </c>\n"):"boolean"==typeof e?'            <c r="'.concat(i,'" t="b"').concat(a,">\n                <v>").concat(+e,"</v>\n            </c>\n"):e instanceof Date?'            <c r="'.concat(i,'"').concat(a,">\n                <v>").concat((e.getTime()+this.timeBetween1900And1970)/864e5+2,"</v>\n            </c>\n"):'            <c r="'.concat(i,'"').concat(a,">\n                <v>").concat(e,"</v>\n            </c>\n")}},{key:"getColumnsArray",value:function(){var e=this.datafields.length,t=[];function r(e){return e<26?"":String.fromCharCode(64+Math.floor(e/26))}for(var i=0;i<e;i++)t.push(r(i)+String.fromCharCode(65+(i<26?i:i%26)));this.columnsArray=t}},{key:"getColumnStyle",value:function(){var e=this,t=e.style;if(!t)return"        .header { border: 1px solid black; padding: 5px; }\n        .column { border: 1px solid black; padding: 5px; }\n        .group { background-color: #FFFFFF; color: #000000; font-weight: bold; }";var r={header:"border: 1px solid black; padding: 5px; ",column:"white-space: nowrap; overflow: hidden; border: 1px solid black; padding: 5px; ",group:"background-color: #FFFFFF; color: #000000; font-weight: bold; "},i=e.data[0],a="",n=t.header||{};for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];if(i[o]){for(var l in r["header"+o]||(r["header"+o]=""),s)if(s.hasOwnProperty(l)){var u=Smart.Utilities.Core.toDash(l)+": "+s[l]+"; ";r["header"+o]+=u,"width"===l&&(r["column"+o]||(r["column"+o]=""),r["column"+o]+=u)}}else"height"===o&&e.complexHeader?r.header+="height: "+parseInt(n[o],10)/e.complexHeader.length+"px; ":r.header+=Smart.Utilities.Core.toDash(o)+": "+n[o]+"; "}var d=t.columns||{};for(var c in d)if(d.hasOwnProperty(c)){var h=d[c];if(i[c])for(var f in r["column"+c]||(r["column"+c]=""),h)isNaN(f)&&h.hasOwnProperty(f)&&"format"!==f&&(r["column"+c]+=Smart.Utilities.Core.toDash(f)+": "+h[f]+"; ");else r.column+=Smart.Utilities.Core.toDash(c)+": "+h+"; "}for(var p in r)r.hasOwnProperty(p)&&(a+="        .".concat(p," { ").concat(r[p],"}\n"));return a}},{key:"getCustomColumnWidths",value:function(){var e=this;if(!e.style||!e.columnWidth||0===e.columnWidth.length)return"";for(var t="\n    <cols>\n",r=0;r<e.columnWidth.length;r++){var i=e.columnWidth[r];void 0!==i&&(i=Math.round(parseFloat(i))/7,t+='        <col min="'.concat(r+1,'" max="').concat(r+1,'" width="').concat(i,'" customWidth="1" />\n'))}return t+="    </cols>"}},{key:"getCustomFilter",value:function(e,t){var r,i="equal";switch(e instanceof Date&&(e=(e.getTime()+this.timeBetween1900And1970)/864e5+2),t=t.toUpperCase()){case"EMPTY":r="";break;case"NOT_EMPTY":r="",i="notEqual";break;case"CONTAINS":case"CONTAINS_CASE_SENSITIVE":r="*".concat(e,"*");break;case"DOES_NOT_CONTAIN":case"DOES_NOT_CONTAIN_CASE_SENSITIVE":r="*".concat(e,"*"),i="notEqual";break;case"STARTS_WITH":case"STARTS_WITH_CASE_SENSITIVE":r="".concat(e,"*");break;case"ENDS_WITH":case"ENDS_WITH_CASE_SENSITIVE":r="*".concat(e);break;case"EQUAL":case"EQUAL_CASE_SENSITIVE":r=e;break;case"NULL":r=null;break;case"NOT_NULL":r=null,i="notEqual";break;case"NOT_EQUAL":r=e,i="notEqual";break;case"LESS_THAN":r=e,i="lessThan";break;case"LESS_THAN_OR_EQUAL":r=e,i="lessThanOrEqual";break;case"GREATER_THAN":r=e,i="greaterThan";break;case"GREATER_THAN_OR_EQUAL":r=e,i="greaterThanOrEqual"}return'                <customFilter val="'.concat(r,'" operator="').concat(i,'"/>\n')}},{key:"getCustomRowHeight",value:function(e){var t=this;return t.style&&(t.rowHeight[e]||t.defaultRowHeight)||""}},{key:"getDatafields",value:function(e){var t=e[0],r=[];for(var i in t)t.hasOwnProperty(i)&&"_"!==i.charAt(0)&&r.push(i);this.datafields=r}},{key:"getFilters",value:function(){var e=this,t=e.filterBy;if(!t)return"";var r="";for(var i in t)if(t.hasOwnProperty(i)){var a=e.datafields.indexOf(i);if(-1===a)continue;var n=t[i],o=n.filters;r+='        <filterColumn colId="'.concat(a,'">\n            <customFilters and="').concat(!n.operator,'">\n');for(var s=0;s<o.length;s++)r+=e.getCustomFilter(o[s].value,o[s].condition);r+="            </customFilters>\n        </filterColumn>"}return r?r='\n    <autoFilter ref="A1:'.concat(e.columnsArray[e.columnsArray.length-1]+e.data.length,'">\n').concat(r,"\n    </autoFilter>"):""}},{key:"getGroupLabels",value:function(e){for(var t=this,r=void 0!==t.xlsxStartIndex?t.xlsxStartIndex:+t.exportHeader,i={},a=[],n=r;n<e.length;n++)for(var o=e[n],s=0;s<t.groupBy.length;s++){var l=t.groupBy[s],u=o[l],d=i[l];void 0===d&&(i[l]={},d=i[l]),void 0===d[u]&&(d[u]=(t.exportHeader?e[r-1][l]:l)+": "+u,a.push(d[u]))}t.groups=i,t.groupLabels=a}},{key:"getHTMLHeader",value:function(e,t){var r=this,i="\n        <thead>\n";if(!r.complexHeader){i+="            <tr>\n";for(var a=0;a<e.length;a++){var n=e[a];i+='                <th class="header header'.concat(n,'">').concat(t[0][n],"</th>\n")}return i+="            </tr>\n        </thead>"}for(var o=0;o<r.complexHeader.length;o++){var s=r.complexHeader[o];i+="            <tr>\n";for(var l=0;l<s.length;l++){var u=s[l],d=1,c=1;if(!(s[l-1]&&s[l-1]===u||r.complexHeader[o-1]&&r.complexHeader[o-1][l]===u)){for(var h=l+1;s[h]&&s[h]===s[h-1];)d++,h++;for(h=o+1;r.complexHeader[h]&&r.complexHeader[h][l]===u;)c++,h++;i+='                <th class="header'.concat(o===r.complexHeader.length-1||c+o===r.complexHeader.length?" header"+e[l]:"",'" colspan="').concat(d,'" rowspan="').concat(c,'">').concat(u,"</th>\n")}}i+="            </tr>\n"}return i+="        </thead>"}},{key:"getConditionalFormatting",value:function(){var e=this,t=e.conditionalFormatting;if(t){for(var r=[],i="",a="",n=t.length-1;n>=0;n--){var o=t[n],s=e.columnsArray[e.datafields.indexOf(o.column)],l=s+(e.xlsxStartIndex+1),u=l+":"+s+e.data.length,d=o.background+o.color,c=e.getConditionalAttributes(o,l),h=r.indexOf(d);-1===h&&(a+='        <dxf>\n            <font>\n                <b val="0"/>\n                <i val="0"/>\n                <color rgb="'.concat("White"===o.color?"FFFFFFFF":"FF000000",'"/>\n                <sz val="10"/>\n            </font>\n            <fill>\n                <patternFill>\n                    <bgColor rgb="').concat(e.toARGB(o.background),'"/>\n                </patternFill>\n            </fill>\n        </dxf>\n'),h=r.length,r.push(d)),i+='    <conditionalFormatting sqref="'.concat(u,'">\n        <cfRule dxfId="').concat(h,'" text="').concat(c.text,'" rank="').concat(c.rank,'" percent="').concat(c.percent,'" bottom="').concat(c.bottom,'" equalAverage="').concat(c.equalAverage,'" aboveAverage="').concat(c.aboveAverage,'"').concat(c.operator).concat(c.timePeriod,' priority="').concat(n+2,'" type="').concat(c.type,'">\n').concat(c.formula,"        </cfRule>\n    </conditionalFormatting>\n")}a='    <dxfs count="'.concat(r.length,'">\n').concat(a,"    </dxfs>"),e.conditionalFormattingXLSX={conditions:i,styles:a}}else e.conditionalFormattingXLSX={conditions:"",styles:""}}},{key:"getConditionalAttributes",value:function(e,t){var r=e.condition,i=e.comparator,a="",n=0,o=0,s=0,l=0,u="",d="",c="",h="";switch(r){case"equal":u="equal",c="cellIs",h="            <formula>".concat(i,"</formula>\n");break;case"lessThan":u="lessThan",c="cellIs",h="            <formula>".concat(i,"</formula>\n");break;case"greaterThan":u="greaterThan",c="cellIs",h="            <formula>".concat(i,"</formula>\n");break;case"notEqual":u="notEqual",c="cellIs",h="            <formula>".concat(i,"</formula>\n");break;case"between":u="between",c="cellIs",h="            <formula>".concat(e.min,"</formula>\n            <formula>").concat(e.max,"</formula>\n");break;case"duplicate":c="duplicateValues",h="            <formula>0</formula>\n";break;case"topNItems":n=i,c="top10";break;case"bottomNItems":n=i,s=1,c="top10";break;case"topNPercent":n=i,o=1,c="top10";break;case"bottomNPercent":n=i,o=1,s=1,c="top10";break;case"aboveAverage":l=1,c="aboveAverage",h="            <formula>0</formula>\n";break;case"belowAverage":c="aboveAverage",h="            <formula>0</formula>\n";break;case"contains":a=i,u="containsText",c="containsText",h='            <formula>NOT(ISERROR(SEARCH("'.concat(i,'",').concat(t,")))</formula>\n");break;case"doesNotContain":a=i,u="notContains",c="notContainsText",h='            <formula>ISERROR(SEARCH("'.concat(i,'",').concat(t,"))</formula>\n");break;case"dateOccur":d=' timePeriod="'.concat(i,'"'),c="timePeriod"}return u&&(u=' operator="'.concat(u,'" ')),{text:a,rank:n,percent:o,bottom:s,equalAverage:0,aboveAverage:l,operator:u,timePeriod:d,type:c,formula:h}}},{key:"getMergedCells",value:function(e){for(var t=this,r="",i=0;i<e.length;i++)e[i].from!==e[i].to&&(r+='\n        <mergeCell ref="'.concat(e[i].from,":").concat(e[i].to,'" />\n'));if(t.mergedCells)for(var a=0;a<t.mergedCells.length;a++){var n=t.mergedCells[a];n.rowspan<2&&n.colspan<2||(r+='\n        <mergeCell ref="'.concat(t.columnsArray[n.cell[0]]+(n.cell[1]+t.xlsxStartIndex+1),":").concat(t.columnsArray[n.cell[0]+n.colspan-1]+(n.cell[1]+t.xlsxStartIndex+n.rowspan),'" />\n'))}return r&&(r='\n    <mergeCells count="'.concat(e.length,'">').concat(r,"    </mergeCells>")),r}},{key:"getNumFmtIndex",value:function(e,t){var r=t.collection.indexOf(e);return-1===r?(r=t.collection.length+100,t.collection.push(e),t.xml+='<numFmt numFmtId="'.concat(r,'" formatCode="').concat(e,'"/>')):r+=100,r}},{key:"getOutlineLevel",value:function(e){return this.actualHierarchy&&1!==e._level?' outlineLevel="'.concat(e._level-1,'"'):""}},{key:"getRowStyle",value:function(){var e=this.style;if(!e)return"";var t=e.rows;if(!t)return"";var r={row:""},i="";for(var a in t)if(t.hasOwnProperty(a)&&"alternationCount"!==a&&"alternationStart"!==a&&"alternationEnd"!==a){var n=t[a];if(-1===a.indexOf("alt"))if(isNaN(a))r.row+=Smart.Utilities.Core.toDash(a)+": "+t[a]+"; ";else for(var o in r["row"+a]||(r["row"+a]=""),n)n.hasOwnProperty(o)&&(r["row"+a]+=Smart.Utilities.Core.toDash(o)+": "+n[o]+"; ");else{var s=a.slice(16,17),l=a.slice(17);r["rowN"+s]||(r["rowN"+s]=""),r["rowN"+s]+="Color"===l?"color : "+n+"; ":"BorderColor"===l?"border-color : "+n+"; ":"background-color : "+n+"; "}}var u=Object.keys(r);u.sort((function(e,t){if("row"===e)return-1;if("row"===t)return 1;var r=!isNaN(e.slice(3)),i=!isNaN(t.slice(3));return r&&!i?1:!r&&i?-1:+(e<t)}));for(var d=0;d<u.length;d++)i+="        .".concat(u[d]," { ").concat(r[u[d]],"}\n");return i}},{key:"getTableStyle",value:function(){var e=this.style;if(!e)return' style="table-layout: fixed; border: 1px solid black; border-collapse: collapse;"';var t="table-layout: fixed; ";for(var r in e)e.hasOwnProperty(r)&&-1===["header","columns","rows"].indexOf(r)&&(t+=Smart.Utilities.Core.toDash(r)+": "+e[r]+"; ");return t&&(t=' style="'+t+'"'),t}},{key:"getXLSXCellStyle",value:function(e){return void 0!==this.cellStyleMapping[e]?' s="'.concat(this.cellStyleMapping[e],'"'):""}},{key:"getXLSXFormat",value:function(e,t){if("number"==typeof t){if(!/^([a-zA-Z]\d*)$/g.test(e))return e;var r=parseFloat(e.slice(1))||0,i=r>0?"."+"0".repeat(r):"";switch(e=e.slice(0,1)){case"C":case"c":return"$#,0"+i;case"D":case"d":return r?"0".repeat(r):"0";case"E":case"e":return"0"+i+e+"000";case"F":case"f":return"0"+i;case"N":case"n":return"#,0"+i;case"P":case"p":return"#,0"+i+" %";default:return}}else if(t instanceof Date){switch(e){case"d":return"m/d/yyyy";case"D":return"nnnnmmmm dd, yyyy";case"t":return"h:m AM/PM";case"T":return"h:mm:ss AM/PM";case"f":return"nnnnmmmm dd, yyyy h:m AM/PM";case"F":return"nnnnmmmm dd, yyyy h:mm:ss AM/PM";case"M":return"mmmm d";case"Y":return"yyyy mmmm";case"FP":case"PP":return"yyyy-mm-dd hh:mm:ss";case"FT":case"PT":return"hh:mm:ss"}return(e=(e=(e=e.replace(/f|u|n|p|e|a|x|o/gi,"")).replace(/tt/gi,"AM/PM")).replace(/:{2,}|:\s|:$|\.$/g,"")).trim()}}},{key:"processColumnStyle",value:function(e){var t=this,r=e.header,i=e.columns,a=t.data[0],n=t.xlsxStartIndex;if(t.columnWidth=[],n&&r)for(var o=0;o<t.columnsArray.length;o++){var s=t.columnsArray[o],l=s+n,u=r[t.datafields[o]];for(var d in r)if(r.hasOwnProperty(d)&&void 0===a[d])if(t.complexHeader)for(var c=0;c<t.complexHeader.length;c++)"height"!==d?t.storeCellStyle(s+(c+1),d,r[d]):t.rowHeight[c]=' ht="'.concat(parseFloat(r.height)/t.complexHeader.length/2,'"');else{if("height"===d){t.rowHeight[0]=' ht="'.concat(parseFloat(r.height)/2,'"');continue}t.storeCellStyle(l,d,r[d])}if(u)for(var h in u)if(u.hasOwnProperty(h)){if("width"===h){t.columnWidth[o]=u.width;continue}t.storeCellStyle(l,h,u[h])}}else if(r)for(var f=0;f<t.columnsArray.length;f++){var p=r[t.datafields[f]];p&&void 0!==p.width&&(t.columnWidth[f]=p.width)}if(!i)return"";for(var v=n;v<t.data.length;v++)for(var m=0;m<t.columnsArray.length;m++){var y=t.columnsArray[m]+(v+1),g=t.datafields[m],b=i[g];for(var _ in i)i.hasOwnProperty(_)&&void 0===a[_]&&t.storeCellStyle(y,_,i[_]);if(b)for(var x in b)isNaN(x)&&b.hasOwnProperty(x)&&t.storeCellStyle(y,x,b[x],t.data[v][g])}}},{key:"processComplexHeader",value:function(e,t,r){var i={},a=-1!==["html","jpeg","pdf","png","xlsx"].indexOf(r)&&e.columngroups,n=[],o={},s=[],l=0;function u(t){for(var r=0;r<e.columngroups.length;r++){var i=e.columngroups[r];if(i.name===t)return i}}function d(e){for(var t=[];e;){if(t.unshift(e.label),!e.parentGroup)return t;e=u(e.parentGroup)}}if(a){for(var c=0;c<e.columngroups.length;c++){var h=e.columngroups[c],f=d(h);o[h.name]=f,l=Math.max(l,f.length)}l++;for(var p=0;p<l;p++)s[p]=[]}for(var v=0;v<e.columns.length;v++){var m=e.columns[v];if(i[m.dataField]=m.label,a&&(n[v]=m.dataField,s[l-1][v]=m.label,m.columnGroup))for(var y=o[m.columnGroup],g=0;g<y.length;g++)s[g][v]=y[g]}if(s.length>1){for(var b=Object.keys(i).length,_=0;_<l-1;_++){for(var x={},w=0;w<b;w++){if(void 0===s[_][w]){for(var S=_+1;void 0===s[S][w];)S++;s[_][w]=s[S][w]}x[n[w]]=s[_][w]}"xlsx"===r&&t.splice(_,0,x)}if(this.complexHeader=s,"xlsx"!==r)t.unshift(i);else{t.splice(l-1,0,i);for(var k={},C=0;C<l;C++)for(var A=0;A<b;A++){var N=s[C][A];k[N]?k[N].to=[C,A]:(k[N]={from:[C,A]},k[N].to=k[N].from)}this.complexHeaderMergeInfo=k}}else t.unshift(i)}},{key:"processHierarchicalData",value:function(e,t){var r=this,i="xlsx"!==t?+r.exportHeader:r.xlsxStartIndex,a={},n=[],o=0,s=!1;if(void 0===e[i]._keyDataField)return r.processNestedData(e,t,i);for(var l=i;l<e.length;l++){var u=Object.assign({},e[l]),d=u._parentDataField;void 0===d&&(d=null),void 0===a[d]?a[d]=[u]:a[d].push(u)}if(i)for(var c=0;c<i;c++)n.push(Object.assign({},e[c])),-1===["json","pdf","xml"].indexOf(t)&&(n[c]._level=1);return"json"!==t&&"xml"!==t?function e(t,r,i){var l=a[t];if(o=Math.max(o,r),void 0!==l)for(var u=0;u<l.length;u++){var d=l[u],c=d._keyDataField;d._collapsed=i,d._level=r,n.push(d),a[c]&&(s=!0,d._expanded=void 0===d._expanded||d._expanded,e(c,r+1,i||!d._expanded))}}(null,1,!1):function e(r,i,n){var l=a[r];if(o=Math.max(o,i),void 0!==l)for(var u=0;u<l.length;u++){var d=l[u],c=d._keyDataField,h=void 0;if("json"===t)for(var f in h={},d)d.hasOwnProperty(f)&&"_"!==f.charAt(0)&&(h[f]=d[f]);else h=Object.assign({},d);n.push(h),a[c]&&(s=!0,h.rows=[],e(c,i+1,h.rows))}}(null,1,n),s||(r.actualHierarchy=!1),r.maxLevel=o,n}},{key:"processNestedData",value:function(e,t,r){var i=[],a=0,n=!1;if(r)for(var o=0;o<r;o++)i.push(Object.assign({},e[o])),-1===["json","pdf","xml"].indexOf(t)&&(i[o]._level=1);return"json"!==t&&"xml"!==t?function e(t,r,o,s){a=Math.max(a,o);for(var l=t;l<r.length;l++){var u=Object.assign({},r[l]);u._collapsed=s,u._level=o,i.push(u),u.children&&u.children.length>0&&(n=!0,u._expanded=void 0===u._expanded||u._expanded,e(0,u.children,o+1,s||!u._expanded)),delete u.children}}(r,e,1,!1):function e(t,r,o,s){a=Math.max(a,s);for(var l=t;l<r.length;l++){var u=Object.assign({},r[l]);1===s?i[l]=u:o[l]=u,u.children&&u.children.length>0&&(n=!0,u.rows=[],e(0,u.children,u.rows,s+1)),delete u.children}}(r,e,void 0,1),n||(this.actualHierarchy=!1),this.maxLevel=a,i}},{key:"processRowStyle",value:function(e){var t=this,r=e.rows;if(t.rowHeight=[],r){var i=t.xlsxStartIndex;r.height&&(t.defaultRowHeight=' ht="'.concat(parseFloat(r.height)/2,'"'));for(var a=i;a<t.data.length;a++){var n=a-i;for(var o in r)r.hasOwnProperty(o)&&-1===o.indexOf("alt")&&isNaN(o)&&"height"!==o&&u(n,o,r[o]);if(r.alternationCount&&((void 0===r.alternationStart||n>=r.alternationStart)&&(void 0===r.alternationEnd||n<=r.alternationEnd)||r.alternationStart===r.alternationEnd)){var s=(n-(r.alternationStart||0))%r.alternationCount;r["alternationIndex".concat(s,"Color")]&&u(n,"color",r["alternationIndex".concat(s,"Color")]),r["alternationIndex".concat(s,"BorderColor")]&&u(n,"borderColor",r["alternationIndex".concat(s,"BorderColor")]),r["alternationIndex".concat(s,"BackgroundColor")]&&u(n,"backgroundColor",r["alternationIndex".concat(s,"BackgroundColor")])}if(r[n])for(var l in r[n])if(r[n].hasOwnProperty(l)){if("height"===l){t.rowHeight[a]=' ht="'.concat(parseFloat(r[n].height)/2,'"');continue}u(n,l,r[n][l])}}}function u(e,r,a){for(var n=0;n<t.columnsArray.length;n++){var o=t.columnsArray[n]+(e+1+i);t.storeCellStyle(o,r,a)}}}},{key:"storeCellStyle",value:function(e,t,r){var i=this.styleMap[e];switch(t){case"backgroundColor":i.fills.fgColor=r;break;case"color":i.fonts.color=r;break;case"fontFamily":i.fonts.name=r.replace(/"/g,"'");break;case"fontSize":i.fonts.sz=parseFloat(r);break;case"fontStyle":"italic"===r?i.fonts.i=!0:delete i.fonts.i;break;case"fontWeight":"bold"===r?i.fonts.b=!0:delete i.fonts.b;break;case"numFmt":i.numFmt=r;break;case"textAlign":i.alignment.horizontal=r;break;case"textDecoration":"underline"===r?i.fonts.u=!0:delete i.fonts.u;break;case"verticalAlign":"middle"===r&&(r="center"),i.alignment.vertical=r}}},{key:"toARGB",value:function(e){e=e.replace(/\s/g,"");var t=/rgb\((\d+),(\d+),(\d+)\)/gi.exec(e);if(null!==t){var r=parseFloat(t[1]).toString(16).toUpperCase(),i=parseFloat(t[2]).toString(16).toUpperCase(),a=parseFloat(t[3]).toString(16).toUpperCase();return"FF"+"0".repeat(2-r.length)+r+"0".repeat(2-i.length)+i+"0".repeat(2-a.length)+a}var n=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(e);if(null!==n){var o=Math.round(255*parseFloat(n[4])).toString(16).toUpperCase(),s=parseFloat(n[1]).toString(16).toUpperCase(),l=parseFloat(n[2]).toString(16).toUpperCase(),u=parseFloat(n[3]).toString(16).toUpperCase();return"0".repeat(2-o.length)+o+"0".repeat(2-s.length)+s+"0".repeat(2-l.length)+l+"0".repeat(2-u.length)+u}var d=/^#(.)(.)(.)$/gi.exec(e);if(null!==d){var c=d[1].toUpperCase(),h=d[2].toUpperCase(),f=d[3].toUpperCase();return"FF"+c+c+h+h+f+f}return"FF"+e.toUpperCase().slice(1)}},{key:"toggleableFunctionality",value:function(){return this.actualHierarchy?'\n    <style type="text/css">\n        .toggle-element {\n            width: 5px;\n            height: 1px;\n            padding-right: 5px;\n            float: left;\n            text-align: right;\n            cursor: pointer;\n            user-select: none;\n        }\n\n        .collapsed {\n            display: none;\n        }\n    </style>\n    <script type="text/javascript">\n        window.onload = function () {\n            var expandChar = \''.concat(this.expandChar,"',\n                collapseChar = '").concat(this.collapseChar,"',\n                toggleElements = document.getElementsByClassName('toggle-element');\n\n            function getParent(child) {\n                var prevSibling = child.previousElementSibling;\n\n                while (prevSibling) {\n                    if (child.getAttribute('level') > prevSibling.getAttribute('level')) {\n                        return prevSibling;\n                    }\n\n                    prevSibling = prevSibling.previousElementSibling;\n                }\n\n            }\n\n            function getFirstCollapsedAncestor(child) {\n                var parent = getParent(child);\n\n                while (parent) {\n                    if (parent.firstElementChild.firstElementChild.innerHTML === expandChar) {\n                        return parent;\n                    }\n\n                    parent = getParent(parent);\n                }\n            }\n\n            for (var i = 0; i < toggleElements.length; i++) {\n                toggleElements[i].addEventListener('click', function (event) {\n                    var expanded = this.innerHTML === collapseChar,\n                        row = this.parentElement.parentElement,\n                        sibling = row.nextElementSibling;\n\n                    if (expanded) {\n                        this.innerHTML = expandChar;\n                    }\n                    else {\n                        this.innerHTML = collapseChar;\n                    }\n\n                    while (sibling && row.getAttribute('level') < sibling.getAttribute('level')) {\n                        if (expanded) {\n                            sibling.style.display = 'none';\n                        }\n                        else {\n                            var firstCollapsedAncestor = getFirstCollapsedAncestor(sibling);\n\n                            if (!firstCollapsedAncestor || firstCollapsedAncestor === row) {\n                                sibling.classList.remove('collapsed');\n                                sibling.style.display = null;\n                            }\n\n                        }\n\n                        sibling = sibling.nextElementSibling;\n                    }\n                });\n            }\n        }\n    <\/script>"):""}},{key:"generateStyles",value:function(e){var t=this;if(t.cellStyleMapping={},0===Object.keys(e).length&&!t.complexHeader)return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision"><fonts count="1" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><charset val="204"/><scheme val="minor"/></font></fonts><fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>'.concat(t.conditionalFormattingXLSX.styles||'<dxfs count="0"/>','<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>');t.styleMap={};for(var r=0;r<t.data.length;r++)for(var i=0;i<t.columnsArray.length;i++)t.styleMap[t.columnsArray[i]+(r+1)]={numFmts:{},fonts:{},fills:{},borders:{},alignment:{}};if(e&&e.columns)for(var a=0;a<t.columnsArray.length;a++){var n=t.datafields[a];if(e.columns[n]&&e.columns[n].format){var o=t.getXLSXFormat(e.columns[n].format,t.data[t.data.length-1][n]);o&&(e.columns[n].numFmt=o)}}t.processRowStyle(e),t.processColumnStyle(e);for(var s={},l=0;l<t.complexHeaderMergedCells.length;l++){var u=t.complexHeaderMergedCells[l];parseFloat(u.to[1])!==t.complexHeader.length?(t.styleMap[u.from].alignment.horizontal="center",t.styleMap[u.from].alignment.vertical="center"):s[u.to]=u.from}for(var d={xml:'<font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><charset val="204" /><scheme val="minor" /></font>',collection:["default"]},c={xml:'<fill><patternFill patternType="none" /></fill><fill><patternFill patternType="gray125" /></fill>',collection:["default","gray125"]},h={xml:"",collection:[]},f={xml:'<xf fontId="0" fillId="0" borderId="1"/>',collection:["default"]},p=0;p<t.data.length;p++)for(var v=0;v<t.columnsArray.length;v++){var m=t.columnsArray[v]+(p+1),y=t.styleMap[m],g="",b="",_="",x=[],w=[],S=[],k=[];for(var C in y.fonts)if(y.fonts.hasOwnProperty(C)){var A=y.fonts[C];switch(C){case"color":x[0]=A,g+='<color rgb="'.concat(t.toARGB(A),'" />');break;case"name":x[1]=A,g+='<name val="'.concat(A,'" />');break;case"sz":x[2]=A,g+='<sz val="'.concat(A,'" />');break;case"i":x[3]=A,g+="<i />";break;case"b":x[4]=A,g+="<b />";break;case"u":x[5]=A,g+="<u />"}}for(var N in y.fills)if(y.fills.hasOwnProperty(N)){var M=y.fills[N];switch(N){case"fgColor":w[0]=M,b+='<fgColor rgb="'.concat(t.toARGB(M),'" />')}}for(var T in y.alignment)if(y.alignment.hasOwnProperty(T)){var D=y.alignment[T];switch(T){case"horizontal":S[0]=D,_+='horizontal="'.concat(D,'" ');break;case"vertical":S[1]=D,_+='vertical="'.concat(D,'" ')}}if(x=x.toString(),w=w.toString(),""!==g){var O=d.collection.indexOf(x);-1===O&&(O=d.collection.length,d.xml+="<font>"+g+"</font>",d.collection.push(x)),k[0]=O}if(""!==b){var P=c.collection.indexOf(w);-1===P&&(P=c.collection.length,c.xml+='<fill><patternFill patternType="solid">'+b+"</patternFill></fill>",c.collection.push(w)),k[1]=P}S.length>0&&(k[2]=_),void 0!==y.numFmt&&(k[3]=t.getNumFmtIndex(y.numFmt,h));var F=k.toString();if(""!==F){var I=f.collection.indexOf(F);if(-1===I){var E="<xf ";I=f.collection.length,void 0!==k[0]&&(E+='fontId="'.concat(k[0],'" ')),void 0!==k[1]&&(E+='fillId="'.concat(k[1],'" ')),void 0!==k[3]&&(E+='numFmtId="'.concat(k[3],'" ')),void 0!==k[2]?E+='applyAlignment="1" borderId="1"><alignment '.concat(_,"/></xf>"):E+=' borderId="1"/>',f.xml+=E,f.collection.push(F)}t.cellStyleMapping[s[m]||m]=I}}return h.collection.length&&(h.xml='<numFmts count="'.concat(h.collection.length,'">').concat(h.xml,"</numFmts>")),'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision">'.concat(h.xml,'<fonts count="').concat(d.collection.length,'" x14ac:knownFonts="1">').concat(d.xml,'</fonts><fills count="').concat(c.collection.length,'">').concat(c.xml,'</fills><borders count="2"><border><left/><right/><top/><bottom/></border><border><left style="hair"/><right style="hair"/><top style="hair"/><bottom style="hair"/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="').concat(f.collection.length,'">').concat(f.xml,'</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>').concat(t.conditionalFormattingXLSX.styles,'<dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>')}}])&&r(t.prototype,a),n&&r(t,n),e}())}})},51:function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function n(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==u(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=12)}({12:function(e,t,d){Smart("smart-chart",function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,Smart.BaseElement);var t,d,c,h,f=(t=p,function(){var e,r=s(t);if(o()){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return n(this,e)});function p(){return r(this,p),f.apply(this,arguments)}return d=p,h=[{key:"properties",get:function(){return{animationDuration:{value:300,type:"number"},backgroundColor:{value:null,type:"string?"},backgroundImage:{value:"",type:"string"},borderLineColor:{value:null,type:"string?"},borderLineWidth:{value:1,type:"number"},caption:{value:"Caption",type:"string"},clip:{value:!0,type:"boolean"},colorScheme:{value:"scheme01",type:"string"},columnSeriesOverlap:{value:!1,type:"boolean"},crosshairsColor:{value:null,type:"string?"},crosshairsDashStyle:{value:"2,2",type:"string"},crosshairsLineWidth:{value:1,type:"number"},dataSource:{value:[],type:"object",reflectToAttribute:!1},description:{value:"Description",type:"string"},draw:{value:null,type:"function?"},drawBefore:{value:null,type:"function?"},enableAxisTextAnimation:{value:!1,type:"boolean"},enableCrosshairs:{value:!1,type:"boolean"},greyScale:{value:!1,type:"boolean"},legendLayout:{value:{flow:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},height:{value:null,type:"number?"},left:{value:null,type:"number?"},top:{value:null,type:"number?"},width:{value:null,type:"number?"}},type:"object?"},localization:{value:{decimalSeparator:{value:".",type:"string"},patterns:{value:null,type:"object?"},thousandsSeparator:{value:"",type:"string"}},type:"object"},messages:{value:{en:{invalidRadiusDataField:"smart-chart: Invalid radiusDataField value at [{{index}}]",invalidSeries:"smart-chart: Invalid property: each series group must have a 'series' property which must be a valid array.",invalidSeriesGroups:"smart-chart: Invalid property: 'seriesGroups' property is required and must be a valid array.",invalidType:'smart-chart: Invalid serie type "{{type}}".',missingAxis:"smart-chart: seriesGroup[{{index}}] is missing {{axis}} definition.",missingReference:"smart-chart: Missing reference to {{files}}.",missingType:"smart-chart: Invalid property: each series group must have a valid 'type' property."}},type:"object",extend:!0},padding:{value:{bottom:{value:5,type:"number"},left:{value:5,type:"number"},right:{value:5,type:"number"},top:{value:5,type:"number"}},type:"object"},renderEngine:{value:"",allowedValues:["","SVG","HTML5"],type:"string"},rightToLeft:{value:!1,type:"boolean"},seriesGroups:{value:[],type:"any",reflectToAttribute:!1},showBorderLine:{value:!0,type:"boolean"},showLegend:{value:!0,type:"boolean"},showToolTips:{value:!0,type:"boolean"},showToolTipsOnAllSeries:{value:!1,type:"boolean"},theme:{value:"light",allowedValues:["light","dark"],type:"string"},titlePadding:{value:{bottom:{value:10,type:"number"},left:{value:5,type:"number"},right:{value:5,type:"number"},top:{value:5,type:"number"}},type:"object"},toolTipBackground:{value:null,type:"string?"},toolTipFormatFunction:{value:null,type:"function?"},toolTipHideDelay:{value:4e3,type:"number"},toolTipLineColor:{value:null,type:"string?"},toolTipShowDelay:{value:300,type:"number"},valueAxis:{value:{alternatingBackgroundColor:{value:"",type:"string"},alternatingBackgroundColor2:{value:"",type:"string"},alternatingBackgroundOpacity:{value:1,type:"number"},axisSize:{value:null,type:"any"},bands:{value:null,type:"array?"},baselineValue:{value:0,type:"any"},customDraw:{value:!1,type:"boolean"},flip:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},gridLines:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},labels:{value:{angle:{value:0,type:"number"},autoRotate:{value:!1,type:"boolean"},class:{value:null,type:"string?"},custom:{value:null,type:"array?"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},offset:{value:{x:{value:0,type:"number"},y:{value:0,type:"number"}},type:"object"},rotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"any"}},type:"object"},line:{value:{color:{value:"",type:"string"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},visible:{value:!0,type:"any"}},type:"object"},logarithmicScale:{value:!1,type:"boolean"},logarithmicScaleBase:{value:10,type:"number"},maxValue:{value:NaN,type:"any"},minValue:{value:NaN,type:"any"},padding:{value:{bottom:{value:0,type:"number"},left:{value:0,type:"number"},right:{value:0,type:"number"},top:{value:0,type:"number"}},type:"object"},position:{value:"left",allowedValues:["left","right","top","bottom"],type:"string"},textRotationAngle:{value:null,type:"number?"},textRotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},tickMarks:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},size:{value:4,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},title:{value:{class:{value:null,type:"string?"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},text:{value:"",type:"string"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"boolean"}},type:"object"},unitInterval:{value:null,type:"number?"},valuesOnTicks:{value:!0,type:"boolean"},visible:{value:!0,type:"boolean"}},type:"object"},xAxis:{value:{alternatingBackgroundColor:{value:"",type:"string"},alternatingBackgroundColor2:{value:"",type:"string"},alternatingBackgroundOpacity:{value:1,type:"number"},axisSize:{value:null,type:"any"},bands:{value:null,type:"array?"},baseUnit:{value:null,allowedValues:["year","month","day","hour","minute","second","millisecond",null],type:"string?"},customDraw:{value:!1,type:"boolean"},dataField:{value:"",type:"string"},dateFormat:{value:null,type:"string?"},displayText:{value:null,type:"string?"},flip:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},gridLines:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},labels:{value:{angle:{value:0,type:"number"},autoRotate:{value:!1,type:"boolean"},class:{value:null,type:"string?"},custom:{value:null,type:"array?"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},offset:{value:{x:{value:0,type:"number"},y:{value:0,type:"number"}},type:"object"},rotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"any"}},type:"object"},line:{value:{color:{value:"",type:"string"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},visible:{value:!0,type:"any"}},type:"object"},logarithmicScale:{value:!1,type:"boolean"},logarithmicScaleBase:{value:10,type:"number"},maxValue:{value:NaN,type:"any"},minValue:{value:NaN,type:"any"},padding:{value:{bottom:{value:0,type:"number"},left:{value:0,type:"number"},right:{value:0,type:"number"},top:{value:0,type:"number"}},type:"object"},position:{value:"bottom",allowedValues:["bottom","top","left","right"],type:"string"},rangeSelector:{value:{backgroundColor:{value:null,type:"string?"},backgroundImage:{value:"",type:"string"},baseUnit:{value:null,allowedValues:["year","month","day","hour","minute","second","millisecond",null],type:"string?"},borderLineColor:{value:null,type:"string?"},borderLineWidth:{value:null,type:"number?"},caption:{value:"",type:"string"},colorScheme:{value:null,type:"string?"},columnSeriesOverlap:{value:!1,type:"boolean"},columnsGapPercent:{value:25,type:"number"},dataField:{value:null,type:"string?"},description:{value:"",type:"string"},greyScale:{value:null,type:"boolean?"},gridLines:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},labels:{value:{angle:{value:0,type:"number"},autoRotate:{value:!1,type:"boolean"},class:{value:null,type:"string?"},custom:{value:null,type:"array?"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},offset:{value:{x:{value:0,type:"number"},y:{value:0,type:"number"}},type:"object"},rotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"any"}},type:"object"},maxValue:{value:NaN,type:"any"},minValue:{value:NaN,type:"any"},padding:{value:{bottom:{value:0,type:"number"},left:{value:0,type:"number"},right:{value:0,type:"number"},top:{value:0,type:"number"}},type:"object"},position:{value:null,allowedValues:["bottom","top","left","right"],type:"string?"},renderTo:{value:null,type:"any"},rightToLeft:{value:null,type:"boolean?"},seriesGapPercent:{value:10,type:"number"},seriesGroups:{value:null,type:"array?"},serieType:{value:"area",type:"string"},showBorderLine:{value:null,type:"boolean?"},size:{value:null,type:"number?"},skipOverlappingPoints:{value:!0,type:"boolean"},titlePadding:{value:{bottom:{value:10,type:"number"},left:{value:5,type:"number"},right:{value:5,type:"number"},top:{value:5,type:"number"}},type:"object"},unitInterval:{value:null,type:"number?"},valueAxis:{value:{alternatingBackgroundColor:{value:"",type:"string"},alternatingBackgroundColor2:{value:"",type:"string"},alternatingBackgroundOpacity:{value:1,type:"number"},axisSize:{value:null,type:"any"},bands:{value:null,type:"array?"},baselineValue:{value:0,type:"any"},customDraw:{value:!1,type:"boolean"},flip:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},gridLines:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},labels:{value:{angle:{value:0,type:"number"},autoRotate:{value:!1,type:"boolean"},class:{value:null,type:"string?"},custom:{value:null,type:"array?"},formatFunction:{value:null,type:"function?"},formatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},offset:{value:{x:{value:0,type:"number"},y:{value:0,type:"number"}},type:"object"},rotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"any"}},type:"object"},line:{value:{color:{value:"",type:"string"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},visible:{value:!0,type:"any"}},type:"object"},logarithmicScale:{value:!1,type:"boolean"},logarithmicScaleBase:{value:10,type:"number"},maxValue:{value:NaN,type:"any"},minValue:{value:NaN,type:"any"},padding:{value:{bottom:{value:0,type:"number"},left:{value:0,type:"number"},right:{value:0,type:"number"},top:{value:0,type:"number"}},type:"object"},position:{value:"left",allowedValues:["left","right","top","bottom"],type:"string"},textRotationAngle:{value:null,type:"number?"},textRotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},tickMarks:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},size:{value:4,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},title:{value:{class:{value:null,type:"string?"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},text:{value:"",type:"string"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"boolean"}},type:"object"},unitInterval:{value:null,type:"number?"},valuesOnTicks:{value:!0,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"},visible:{value:!1,type:"boolean"}},type:"object"},textRotationAngle:{value:null,type:"number?"},textRotationPoint:{value:"auto",allowedValues:["auto","left","center","right","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","centermiddle"],type:"string"},tickMarks:{value:{color:{value:"",type:"string"},custom:{value:null,type:"array?"},dashStyle:{value:"",type:"string"},lineWidth:{value:1,type:"number"},size:{value:4,type:"number"},step:{value:null,type:"number?"},unitInterval:{value:null,type:"number?"},visible:{value:!0,type:"any"}},type:"object"},title:{value:{class:{value:null,type:"string?"},horizontalAlignment:{value:"center",allowedValues:["left","center","right"],type:"string"},text:{value:"",type:"string"},verticalAlignment:{value:"center",allowedValues:["top","center","bottom"],type:"string"},visible:{value:!0,type:"boolean"}},type:"object"},toolTipFormatFunction:{value:null,type:"function?"},toolTipFormatSettings:{value:{dateFormat:{value:null,type:"string?"},decimalPlaces:{value:null,type:"number?"},decimalSeparator:{value:null,type:"string?"},negativeWithBrackets:{value:!1,type:"boolean"},prefix:{value:"",type:"string"},sufix:{value:"",type:"string"},thousandsSeparator:{value:null,type:"string?"}},type:"object"},type:{value:"auto",allowedValues:["auto","date","basic","linear"],type:"string"},unitInterval:{value:null,type:"number?"},valuesOnTicks:{value:!0,type:"boolean"},visible:{value:!0,type:"boolean"}},type:"object",reflectToAttribute:!1}}}},{key:"listeners",get:function(){return{click:"_clickHandler",down:"_downMoveHandler",mouseleave:"_mouseleaveHandler",move:"_moveHandler",resize:"_resizeHandler","document.move":"_downMoveHandler","document.up":"_documentUpHandler"}}},{key:"requires",get:function(){return{"Smart.Utilities.Draw":"smart.draw.js"}}},{key:"styleUrls",get:function(){return["smart.chart.css"]}}],(c=[{key:"_getFormatSettings",value:function(e,t){if(!e)return null;var r=e[t||"formatSettings"];return r&&(r.dateFormat||null!==r.decimalPlaces||r.decimalSeparator||r.negativeWithBrackets||r.prefix||r.sufix||r.thousandsSeparator)?r:null}},{key:"template",value:function(){return'<div role="presentation"></div>'}},{key:"ready",value:function(){a(s(p.prototype),"ready",this).call(this),this.checkLicense()}},{key:"render",value:function(){this._observeSeriesGroups(),this._isTouchDevice=Smart.Utilities.Core.isMobile,this._setDefaults(),this._createColorsCache(),this.refresh(),this._setAriaProperties(),a(s(p.prototype),"render",this).call(this)}},{key:"attached",value:function(){a(s(p.prototype),"attached",this).call(this),this.isCompleted&&!this._isRangeSelectorInstance&&Object.values(this._rangeSelectorInstances).forEach((function(e){e.parentDiv.parentDiv.appendChild(e.parentDiv)}))}},{key:"detached",value:function(){var e=this;a(s(p.prototype),"detached",this).call(this),e._isRangeSelectorInstance||(e._ttEl&&e._ttEl.box&&e._ttEl.box.remove(),delete e._ttEl,Object.values(e._rangeSelectorInstances).forEach((function(e){e.parentDiv.remove()})))}},{key:"_setAriaProperties",value:function(){var e=this;if(!e._isRangeSelectorInstance){var t=e.xAxis,r=e.valueAxis,i=e.seriesGroups,a=e.$.content.children[1],n="",o=!0;e.setAttribute("role","figure"),a||((a=document.createElement("div")).id=e.id+"DescriptionContainer",a.className="smart-hidden",e.$.content.appendChild(a)),e.setAttribute("aria-labelledby",e.id+"TitleText"),e.setAttribute("aria-describedby",e.id+"TitleDescription "+a.id),n+="This chart displays:",c(t,"x-axis"),c(r,"y-axis");for(var s=0;s<i.length;s++){var l=i[s];if(c(l.valueAxis,"y-axis"),l.series){o=o&&"horizontal"===l.orientation;for(var u=0;u<l.series.length;u++){var d=l.series[u];0===u&&(n+=0===s?" for ":"; "),n+='"'+(d.displayText||d.dataField)+'"',u!==l.series.length-1&&(n+=", ")}}}n=(n=n.replace(":;",":")).replace(/<.+?>/g,""),o&&(n=(n=(n=n.replace(/x-axis/g,"@@@")).replace(/y-axis/g,"x-axis")).replace(/@@@/g,"y-axis")),e.description&&(n="; "+n),a.innerHTML=n}function c(e,t){e&&(e.title&&e.title.text||e.description||e.dataField)&&(n+='; "',e.title&&e.title.text?n+=e.title.text:n+=e.description||e.dataField,n+='" on the '+t,isNaN(e.minValue)||(n+=" from "+e.minValue),isNaN(e.maxValue)||(n+=" up to "+e.maxValue))}}},{key:"_observeSeriesGroups",value:function(){var e=this;function t(t){e.context!==e&&t.newValue!==t.oldValue&&e.update()}e._validateSeriesGroups(),e.seriesGroups=new Smart.ObservableArray(e.seriesGroups),e.seriesGroups.canNotify=!0;for(var r=0;r<e.seriesGroups.length;r++)e.seriesGroups[r].series=new Smart.ObservableArray(e.seriesGroups[r].series),e.seriesGroups[r].series.canNotify=!0,e.seriesGroups[r].series.notify(t);e.seriesGroups.notify(t)}},{key:"_downMoveHandler",value:function(e){var t=e.originalEvent.target;this.shadowRoot&&t===this&&(t=e.originalEvent.composedPath()[0]);var r=t.closest(".smart-chart-range-selector");if(r){var i=r.firstElementChild,a=i.parentChart;this!==i&&this!==a||a["_onSliderMouse"+e.type.slice(0,1).toUpperCase()+e.type.slice(1)](e)}}},{key:"_documentUpHandler",value:function(e){this._draggingRangeSelector&&this._onSliderMouseUp(e)}},{key:"_setDefaults",value:function(){this.axisPadding=5,this.enableEvents=!0,this.enableSampling=!0,this._itemsToggleState=[],this._isToggleRefresh=!1,this._isSelectorRefresh=!1,this._sliders=[],this._selectorRange=[],this._rangeSelectorInstances={},this._resizeState={},this._isRangeSelectorInstance=this._isRangeSelectorInstance||!1,this._renderData={},this._smartPlot=null,this._animTickInt=50,this._seriesTypes=["line","stackedline","stackedline100","spline","stackedspline","stackedspline100","stepline","stackedstepline","stackedstepline100","area","stackedarea","stackedarea100","splinearea","stackedsplinearea","stackedsplinearea100","steparea","stackedsteparea","stackedsteparea100","rangearea","splinerangearea","steprangearea","column","stackedcolumn","stackedcolumn100","rangecolumn","scatter","stackedscatter","stackedscatter100","bubble","stackedbubble","stackedbubble100","pie","donut","candlestick","ohlc","waterfall","stackedwaterfall"],this.colorSchemes=[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]},{name:"scheme28",colors:["#3A43BA","#281E5D","#48AAAD","#0492C2","#1E456E","#59788D","#52B2C0","#82EDFD"]},{name:"scheme29",colors:["#003F5C","#BC5090","#58508D","#FF6361","#FFA600"]},{name:"scheme30",colors:["#16736F","#A2D56A","#1C515C","#62B773","#EEEF63","#1F313F","#309577"]},{name:"scheme31",colors:["#74CC66","#191A4D","#2D867A","#EEE3CD","#224D19","#0D261B","#5771C7","#B6D7E7","#206052","#6B5724","#C3AF4B","#603620","#536722","#B6E7B9","#34819D","#94ACDB"]},{name:"scheme32",colors:["#87C5FF","#5B5B60","#9BE076","#F7A384","#7479D3","#F13A80","#E4D388","#2BC6B2","#F45B14"]}]}},{key:"_clickHandler",value:function(e){var t=this;if(!t.disabled&&!t._isRangeSelectorInstance){var r=e.pageX||e.clientX||e.screenX,i=e.pageY||e.clientY||e.screenY,a=t.getBoundingClientRect();t._isTouchDevice&&(r=e.pageX,i=e.pageY),r-=a.left,i-=a.top,t._mouseX=r,t._mouseY=i,!isNaN(t._lastClickTs)&&(new Date).valueOf()-t._lastClickTs<100||(this._hostClickTimer=setTimeout((function(){if(t._isTouchDevice||(t._cancelTooltipTimer(),t._hideToolTip(),t._unselect()),t._pointMarker&&t._pointMarker.element){var r=t.seriesGroups[t._pointMarker.gidx],i=r.series[t._pointMarker.sidx];e.stopImmediatePropagation(),t._raiseItemEvent("click",r,i,t._pointMarker.iidx)}}),100),"HTML5"===t.renderEngine&&t._canvasClickHandler(r,i))}}},{key:"_canvasClickHandler",value:function(e,t){var r,i=this.renderer._elements;for(var a in i)if(i.hasOwnProperty(a)&&"0"!==a){var n=i[a];if(t>n.y&&t<n.y+n.height&&e>n.x&&e<n.x+n.width){r=n;break}}if(r&&r.purpose&&"legend-toggle"===r.purpose){var o=r.data;this._toggleSerie(o.groupIndex,o.seriesIndex,o.itemIndex)}}},{key:"_mouseleaveHandler",value:function(){if(!this.disabled&&!this._isRangeSelectorInstance){var e=this._mouseX,t=this._mouseY,r=this._plotRect;r&&e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height||(this._cancelTooltipTimer(),this._hideToolTip(0),this._unselect())}}},{key:"_moveHandler",value:function(e){var t=this;if(!t.disabled){if(t._isRangeSelectorInstance){var r=t.parentChart;null===r.xAxis.rangeSelector.renderTo&&(r._unselect(),r._hideToolTip()),"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}else t.style.cursor="default";var i=e.pageX||e.clientX||e.screenX,a=e.pageY||e.clientY||e.screenY,n=t.getBoundingClientRect();t._isTouchDevice&&(i=e.pageX,a=e.pageY),i-=n.left,a-=n.top,t.onmousemove(i,a)}}},{key:"_resizeHandler",value:function(){var e=this.animation;this._isRangeSelectorInstance||(this.animation="none",this.refresh(),this.animation=e)}},{key:"propertyChangedHandler",value:function(e,t,r){var i=this;switch(e){case"animation":case"theme":i._ttEl&&i._ttEl.box.setAttribute(e,r);break;case"rightToLeft":if(!i._ttEl||!i._ttEl.box)break;r?i._ttEl.box.setAttribute("right-to-left",r):i._ttEl.box.removeAttribute("right-to-left");break;case"seriesGroups":i._observeSeriesGroups();break;case"xAxis_rangeSelector_renderTo":if(null===r){var a=t.getElementsByClassName("smart-chart-range-selector")[0];a.parentElement.removeChild(a)}}this.refresh()}},{key:"_initRenderer",value:function(){this._draw=new Smart.Utilities.Draw(this.$.content,this.renderEngine),this.renderer=this._draw.renderer,this._smartPlot||(this._smartPlot=new Smart.Utilities.Plot(this.renderer)),this.$.content.firstElementChild.setAttribute("role","presentation")}},{key:"_internalRefresh",value:function(){var e=this;if(e.offsetWidth||e.offsetHeight||e.getClientRects().length){e._stopAnimations(),e.renderer&&(e._isToggleRefresh||e._isUpdate)||(e._hideToolTip(0),e.$.content.innerHTML="",e._initRenderer());var t=e.renderer;if(t){var r=t.getRect();e._render({x:1,y:1,width:r.width,height:r.height}),this.$.fireEvent("refreshBegin",{instance:this}),t instanceof Smart.Utilities.HTML5Renderer&&t.refresh(),e._isUpdate=!1,this.$.fireEvent("refreshEnd",{instance:this})}}}},{key:"saveAsPNG",value:function(e){return this._saveAsImage("png",e)}},{key:"saveAsJPEG",value:function(e){return this._saveAsImage("jpeg",e)}},{key:"saveAsPDF",value:function(e,t){return this._saveAsImage("pdf",e,t)}},{key:"print",value:function(){return this._saveAsImage("print")}},{key:"_saveAsImage",value:function(e,t,r){return this._draw._widgetToImage(this,e,t,this._hasRangeSelector?this._selectorSaveAsImageCallback:void 0,r)}},{key:"_selectorSaveAsImageCallback",value:function(e,t){for(var r=e,i=0;i<r.seriesGroups.length;i++){var a=r._getXAxis(i);if(a&&a.rangeSelector&&a.rangeSelector.visible&&!a.rangeSelector.renderTo){var n=r._rangeSelectorInstances[i];if(n){var o=n.renderer.getRect(),s=n.renderer.getContainer().getElementsByTagName("canvas")[0].getContext("2d"),l=r._sliders[i],u="horizontal"===r.seriesGroups[i].orientation,d=u?"height":"width",c=u?"width":"height",h=u?"y":"x",f=u?"x":"y",p={};p[h]=l.startOffset+l.rect[h],p[f]=l.rect[f],p[d]=l.endOffset-l.startOffset,p[c]=l.rect[c];var v=a.rangeSelector.colorSelectedRange||"blue",m=a.rangeSelector.colorRangeLine||"grey",y=[];y.push(n.renderer.rect(p.x,p.y,p.width,p.height,{fill:v,opacity:.1}));var g=r.renderer;u?(y.push(n.renderer.line(g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(l.rect.y),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(p.y),{stroke:m,opacity:.5})),y.push(n.renderer.line(g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(p.y+p.height),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(l.rect.y+l.rect.height),{stroke:m,opacity:.5})),y.push(n.renderer.line(g._ptrnd(l.rect.x),g._ptrnd(p.y),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(p.y),{stroke:m,opacity:.5})),y.push(n.renderer.line(g._ptrnd(l.rect.x),g._ptrnd(p.y+p.height),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(p.y+p.height),{stroke:m,opacity:.5}))):(y.push(n.renderer.line(g._ptrnd(l.rect.x),g._ptrnd(l.rect.y),g._ptrnd(p.x),g._ptrnd(l.rect.y),{stroke:m,opacity:.5})),y.push(n.renderer.line(g._ptrnd(p.x+p.width),g._ptrnd(l.rect.y),g._ptrnd(l.rect.x+l.rect.width),g._ptrnd(l.rect.y),{stroke:m,opacity:.5})),y.push(n.renderer.line(g._ptrnd(p.x),g._ptrnd(l.rect.y),g._ptrnd(p.x),g._ptrnd(l.rect.y+l.rect.height),{stroke:m,opacity:.5})),y.push(n.renderer.line(g._ptrnd(p.x+p.width),g._ptrnd(l.rect.y),g._ptrnd(p.x+p.width),g._ptrnd(l.rect.y+l.rect.height),{stroke:m,opacity:.5}))),n.renderer.refresh();var b=s.getImageData(o.x,o.y,o.width,o.height),_=t.getContext("2d"),x=r.getBoundingClientRect(),w=n.getBoundingClientRect();_.putImageData(b,w.left-x.left,w.top-x.top,1,1,o.width,o.height);for(var S=0;S<y.length;S++)n.renderer.removeElement(y[S]);n.renderer.refresh()}}}return!0}},{key:"refresh",value:function(){this._internalRefresh(),this._setAriaProperties()}},{key:"update",value:function(){this._isUpdate=!0,this._internalRefresh()}},{key:"clear",value:function(){this.caption="",this.description="",this.refresh()}},{key:"_validateSeriesGroups",value:function(){var e=this;Array.isArray(this.seriesGroups)||e.seriesGroups instanceof Smart.ObservableArray||e.error(e.localize("invalidSeriesGroups"));for(var t=0;t<this.seriesGroups.length;t++){var r=this.seriesGroups[t];r.type||e.error(e.localize("missingType")),Array.isArray(r.series)||r.series instanceof Smart.ObservableArray||e.error(e.localize("invalidSeries"))}}},{key:"_render",value:function(e){var t=this.renderer;this._colorsCache.clear(),!this._isToggleRefresh&&this._isUpdate&&this._renderData&&this._renderDataClone(),this._renderData=[],t.clear(),this._unselect(),this._hideToolTip(0);var r=this.backgroundImage;this.style.backgroundImage=null==r||""===r?"":-1!==r.indexOf("(")?r:'url("'+r+'")',this._rect=e;var i=this.padding||{left:5,top:5,right:5,bottom:5},a=t.createClipRect(e),n=t.beginGroup();t.setClip(n,a);var o=t.rect(e.x,e.y,e.width-2,e.height-2);if(null==r||""===r?t.attr(o,{fill:this.backgroundColor||this._getThemeColor("background")}):t.attr(o,{fill:"transparent"}),!1!==this.showBorderLine){var s=this.borderLineWidth;(isNaN(s)||s<0||s>10)&&(s=1),t.attr(o,{"stroke-width":s,stroke:this.borderLineColor||this._getThemeColor("line")})}"function"==typeof this.drawBefore&&this.drawBefore(t,e);var l={x:i.left,y:i.top,width:e.width-i.left-i.right,height:e.height-i.top-i.bottom};this._paddedRect=l;var u,d=this.titlePadding||{left:2,top:2,right:2,bottom:2};this.caption&&this.caption.length>0&&(u=t.measureText(this.caption,0,{class:"smart-chart-title-text"}),t.text(this.caption,l.x+d.left,l.y+d.top,l.width-(d.left+d.right),u.height,0,{class:"smart-chart-title-text"},!0,"center","center").id=this.id+"TitleText",l.y+=u.height,l.height-=u.height),this.description&&this.description.length>0&&(u=t.measureText(this.description,0,{class:"smart-chart-title-description"}),t.text(this.description,l.x+d.left,l.y+d.top,l.width-(d.left+d.right),u.height,0,{class:"smart-chart-title-description"},!0,"center","center").id=this.id+"TitleDescription",l.y+=u.height,l.height-=u.height),(this.caption||this.description)&&(l.y+=d.bottom+d.top,l.height-=d.bottom+d.top);var c={x:l.x,y:l.y,width:l.width,height:l.height};this._plotRect=c,this._buildStats(c);for(var h,f=this._isPieOnlySeries(),p=this.seriesGroups,v={xAxis:{},valueAxis:{}},m=0;m<p.length&&!f;m++)if("pie"!==p[m].type&&"donut"!==p[m].type){(ve=this._getXAxis(m))||this.error(this.localize("missingAxis",{index:m,axis:"xAxis"}));var y=ve===this._getXAxis()?-1:m;v.xAxis[y]=0}var g=this.axisPadding;isNaN(g)&&(g=5);for(var b={left:0,right:0,leftCount:0,rightCount:0},_=[],x=0;x<p.length;x++){var w=p[x];if("pie"!==w.type&&"donut"!==w.type&&!0!==w.spider&&!0!==w.polar){h="horizontal"===w.orientation;var S=(ve=this._getXAxis(x))===this._getXAxis()?-1:x,k=(F=this._getValueAxis(x))===this._getValueAxis()?-1:x,C=h?ve.axisSize:F.axisSize,A={x:0,y:c.y,width:c.width,height:c.height},N=h?this._getXAxis(x).position:F.position;C&&"auto"!==C||(h?(C=this._renderXAxis(x,A,!0,c).width,1==(1&v.xAxis[S])?C=0:C>0&&(v.xAxis[S]|=1)):(C=this._renderValueAxis(x,A,!0,c).width,1==(1&v.valueAxis[k])?C=0:C>0&&(v.valueAxis[k]|=1))),"left"!==N&&!0===this.rightToLeft&&(N="right"),"right"!==N&&(N="left"),b[N+"Count"]>0&&b[N]>0&&C>0&&(b[N]+=g),_.push({width:C,position:N,xRel:b[N]}),b[N]+=C,b[N+"Count"]++}else _.push({width:0,position:0,xRel:0})}for(var M=Math.max(1,Math.max(e.width,e.height)),T={top:0,bottom:0,topCount:0,bottomCount:0},D=[],O=0;O<p.length;O++){var P=p[O];if("pie"!==P.type&&"donut"!==P.type&&!0!==P.spider&&!0!==P.polar){var F;h="horizontal"===P.orientation,k=(F=this._getValueAxis(O))===this._getValueAxis()?-1:O;var I=(ve=this._getXAxis(O))===this._getXAxis()?-1:O,E=h?F.axisSize:ve.axisSize;N=h?F.position:ve.position,E&&"auto"!==E||(h?(E=this._renderValueAxis(O,{x:0,y:0,width:M,height:0},!0,c).height,2==(2&v.valueAxis[k])?E=0:E>0&&(v.valueAxis[k]|=2)):(E=this._renderXAxis(O,{x:0,y:0,width:M,height:0},!0).height,2==(2&v.xAxis[I])?E=0:E>0&&(v.xAxis[I]|=2))),"top"!==N&&(N="bottom"),T[N+"Count"]>0&&T[N]>0&&E>0&&(T[N]+=g),D.push({height:E,position:N,yRel:T[N]}),T[N]+=E,T[N+"Count"]++}else D.push({height:0,position:0,yRel:0})}this._createAnimationGroup("series");var L=!1!==this.showLegend,R=this._legendLayout,B=L?this._renderLegend(R?this._rect:l,!0):{width:0,height:0};if(!R||isNaN(this.legendLayout.left)&&isNaN(this.legendLayout.top)||(B={width:0,height:0}),l.height<T.top+T.bottom+B.height||l.width<b.left+b.right)t.endGroup();else{c.height-=T.top+T.bottom+B.height,c.x+=b.left,c.width-=b.left+b.right,c.y+=T.top;var H=[];if(!f)for(var V=0;V<p.length;V++){var j=p[V];if(!0!==j.polar&&!0!==j.spider&&"pie"!==j.type&&"donut"!==j.type){h="horizontal"===j.orientation;var G=this._getXAxis(V)===this._getXAxis()?-1:V;k=this._getValueAxis(V)===this._getValueAxis()?-1:V;var z={x:c.x,y:0,width:c.width,height:D[V].height};if("top"!==D[V].position?z.y=c.y+c.height+D[V].yRel:z.y=c.y-D[V].yRel-D[V].height,h){if(4==(4&v.valueAxis[k]))continue;if(!this._isGroupVisible(V))continue;this._renderValueAxis(V,z,!1,c),v.valueAxis[k]|=4}else{if(H.push(z),4==(4&v.xAxis[G]))continue;if(!this._isGroupVisible(V))continue;this._renderXAxis(V,z,!1,c),v.xAxis[G]|=4}}}if(L){var $=this._legendLayout,U=$?this._rect:l,W=l.x+this.renderer._ptrnd((l.width-B.width)/2),X=c.y+c.height+T.bottom;C=l.width;var Y=B.height;$&&(isNaN(this.legendLayout.left)||(W=this.legendLayout.left),isNaN(this.legendLayout.top)||(X=this.legendLayout.top),isNaN(this.legendLayout.width)||(C=this.legendLayout.width),isNaN(this.legendLayout.height)||(Y=this.legendLayout.height)),W+C>U.x+U.width&&(C=U.x+U.width-W),X+Y>U.y+U.height&&(Y=U.y+U.height-X),this._renderLegend({x:W,y:X,width:C,height:Y})}if(this._hasHorizontalLines=!1,!f)for(var q=0;q<p.length;q++){var J=p[q];if(!0!==J.polar&&!0!==J.spider&&"pie"!==J.type&&"donut"!==J.type){h="horizontal"===p[q].orientation;var Q={x:c.x-_[q].xRel-_[q].width,y:c.y,width:_[q].width,height:c.height};if("left"!==_[q].position&&(Q.x=c.x+c.width+_[q].xRel),G=this._getXAxis(q)===this._getXAxis()?-1:q,k=this._getValueAxis(q)===this._getValueAxis()?-1:q,h){if(H.push(Q),8==(8&v.xAxis[G]))continue;if(!this._isGroupVisible(q))continue;this._renderXAxis(q,Q,!1,c),v.xAxis[G]|=8}else{if(8==(8&v.valueAxis[k]))continue;if(!this._isGroupVisible(q))continue;this._renderValueAxis(q,Q,!1,c),v.valueAxis[k]|=8}}}if(!(c.width<=0||c.height<=0)){this._plotRect={x:c.x,y:c.y,width:c.width,height:c.height};for(var Z=0;Z<p.length;Z++)this._drawPlotAreaLines(Z,!0,{gridLines:!1,tickMarks:!1,alternatingBackground:!0}),this._drawPlotAreaLines(Z,!1,{gridLines:!1,tickMarks:!1,alternatingBackground:!0});for(var K=0;K<p.length;K++)this._drawPlotAreaLines(K,!0,{gridLines:!0,tickMarks:!0,alternatingBackground:!1}),this._drawPlotAreaLines(K,!1,{gridLines:!0,tickMarks:!0,alternatingBackground:!1});for(var ee=!1,te=0;te<p.length&&!ee;te++){var re=p[te];if(void 0!==re.annotations||"function"==typeof re.draw||"function"==typeof re.drawBefore){ee=!0;break}}var ie=t.beginGroup();if(this.clip&&!ee){var ae=t.createClipRect({x:c.x-2,y:c.y,width:c.width+4,height:c.height});t.setClip(ie,ae)}for(var ne=0;ne<p.length;ne++){var oe=p[ne],se=!1;for(var le in this._seriesTypes)if(this._seriesTypes[le]===oe.type){se=!0;break}se||this.error(this.localize("invalidType",{type:oe.type})),"function"==typeof oe.drawBefore&&oe.drawBefore(t,e,ne,this),!0!==oe.polar&&!0!==oe.spider||-1===oe.type.indexOf("pie")&&-1===oe.type.indexOf("donut")&&this._renderSpiderAxis(ne,c),this._renderAxisBands(ne,c,!0),this._renderAxisBands(ne,c,!1)}for(var ue=0;ue<p.length;ue++){var de=p[ue];if(this._isColumnType(de.type)?this._renderColumnSeries(ue,c):-1!==de.type.indexOf("pie")||-1!==de.type.indexOf("donut")?this._renderPieSeries(ue,c):-1!==de.type.indexOf("line")||-1!==de.type.indexOf("area")?this._renderLineSeries(ue,c):-1!==de.type.indexOf("scatter")||-1!==de.type.indexOf("bubble")?this._renderScatterSeries(ue,c):-1===de.type.indexOf("candlestick")&&-1===de.type.indexOf("ohlc")||this._renderCandleStickSeries(ue,c,-1!==de.type.indexOf("ohlc")),de.annotations){this._moduleAnnotations||this.error(this.localize("missingReference",{files:"smart.chart.annotations.js"}));for(var ce=0;ce<de.annotations.length;ce++)this._renderAnnotation(ue,de.annotations[ce],c)}"function"==typeof de.draw&&de.draw(t,e,ue,this)}if(t.endGroup(),this.disabled){var he=t.rect(e.x,e.y,e.width,e.height);t.attr(he,{fill:"#777777",opacity:.5,stroke:"#00FFFFFF"})}"function"==typeof this.draw&&this.draw(t,e),t.endGroup(),this._startAnimation("series"),this._credits&&this._credits();for(var fe=!1,pe=0;pe<this.seriesGroups.length&&!fe;pe++){var ve;(ve=this._getXAxis(pe))&&ve.rangeSelector&&ve.rangeSelector.visible&&(fe=!0,this._hasRangeSelector=!0)}if(fe){this._moduleRangeSelector||this.error(this.localize("missingReference",{files:"smart.chart.rangeselector.js"}));var me=[];this._isSelectorRefresh||(this._rangeSelectorInstances={});for(var ye=0;ye<this.seriesGroups.length;ye++){var ge=this._getXAxis(ye);-1===me.indexOf(ge)&&this._renderXAxisRangeSelector(ye,H[ye])&&me.push(ge)}}}}}},{key:"_credits",value:function(){}},{key:"_isPieOnlySeries",value:function(){var e=this.seriesGroups;if(0===e.length)return!1;for(var t=0;t<e.length;t++)if("pie"!==e[t].type&&"donut"!==e[t].type)return!1;return!0}},{key:"_renderChartLegend",value:function(e,t,r,i){var a=this.renderer,n={x:t.x,y:t.y,width:t.width,height:t.height};n.width>=6&&(n.x+=3,n.width-=6),n.height>=6&&(n.y+=3,n.height-=6);for(var o={width:n.width,height:0},s=0,l=0,u=20,d=0,c=0,h=0;h<e.length;h++){var f=e[h].css;f||(f="smart-chart-legend-text"),u=20;var p=e[h].text,v=a.measureText(p,0,{class:f});v.height>u&&(u=v.height),v.width>c&&(c=v.width),i?(0!==h&&(l+=u),l>n.height&&(l=0,s+=c+20+10,c=v.width,o.width=s+c)):(0!==s&&(s+=10),s+20+v.width>n.width&&v.width<n.width&&(s=0,l+=u,u=20,d=n.width,o.height=l+u));var m=!1;if(v.width>n.width){m=!0;for(var y=n.width,g=(L=p).split(/\s+/),b=[],_="",x=0;x<g.length;x++){var w=_+(_.length>0?" ":"")+g[x];(A=this.renderer.measureText(w,0,{class:f})).width>y&&w.length>0&&_.length>0?(b.push({text:_}),_=g[x]):_=w,x+1===g.length&&b.push({text:_})}v.width=0;for(var S=0,k=0;k<b.length;k++){var C=b[k].text,A=this.renderer.measureText(C,0,{class:f});v.width=Math.max(v.width,A.width),S+=v.height}v.height=S}var N=s+v.width<n.width&&l+v.height<t.height;if(this._legendLayout&&(N=n.x+s+v.width<this._rect.x+this._rect.width&&n.y+l+v.height<this._rect.y+this._rect.height),!r&&N){var M=e[h].seriesIndex,T=e[h].groupIndex,D=e[h].itemIndex,O=e[h].fillColor,P=e[h].lineColor,F=this._isSerieVisible(T,M,D),I=a.beginGroup(),E=F?e[h].opacity:.1;if(m){for(var L=p,R=(y=n.width,g=L.split(/\s+/),0),B=[],H="",V=0;V<g.length;V++)w=H+(H.length>0?" ":"")+g[V],(A=this.renderer.measureText(w,0,{class:f})).width>y&&w.length>0&&H.length>0?(B.push({text:H,dy:R}),R+=A.height,H=g[V]):H=w,V+1===g.length&&B.push({text:H,dy:R});for(var j=0;j<B.length;j++)C=B[j].text,R=B[j].dy,A=this.renderer.measureText(C,0,{class:f}),i?this.renderer.text(C,n.x+s+15,n.y+l+R,v.width,u,0,{class:f},!1,"left","center"):this.renderer.text(C,n.x+s+15,n.y+l+R,v.width,u,0,{class:f},!1,"center","center");var G=a.rect(n.x+s,n.y+l+5+R/2,10,10);i&&(l+=R),this.renderer.attr(G,{fill:O,"fill-opacity":E,stroke:P,"stroke-width":1,"stroke-opacity":e[h].opacity})}else{var z,$=a.rect(n.x+s,n.y+l+5,10,10);this.renderer.attr($,{fill:O,"fill-opacity":E,stroke:P,"stroke-width":1,"stroke-opacity":e[h].opacity,purpose:"legend-toggle",data:e[h]}),z=i?this.renderer.text(p,n.x+s+15,n.y+l,v.width,v.height+5,0,{class:f},!1,"left","center"):this.renderer.text(p,n.x+s+15,n.y+l,v.width,u,0,{class:f},!1,"center","center"),a.attr(z,{purpose:"legend-toggle",data:e[h]})}this.renderer.endGroup(),this._setLegendToggleHandler(T,M,D,I)}i||d<(s+=v.width+20)&&(d=s)}if(r)return o.height=this.renderer._ptrnd(l+u+5),o.width=this.renderer._ptrnd(d),o}},{key:"isSerieVisible",value:function(e,t,r){return this._isSerieVisible(e,t,r)}},{key:"_isSerieVisible",value:function(e,t,r){for(;this._itemsToggleState.length<e+1;)this._itemsToggleState.push([]);for(var i=this._itemsToggleState[e];i.length<t+1;)i.push(!!isNaN(r)||[]);var a=i[t];if(isNaN(r))return a;for(Array.isArray(a)||(i[t]=a=[]);a.length<r+1;)a.push(!0);return a[r]}},{key:"isGroupVisible",value:function(e){return this._isGroupVisible(e)}},{key:"_isGroupVisible",value:function(e){var t=!1,r=this.seriesGroups[e].series;if(!r)return t;for(var i=0;i<r.length;i++)if(this._isSerieVisible(e,i)){t=!0;break}return t}},{key:"_toggleSerie",value:function(e,t,r,i){var a=!this._isSerieVisible(e,t,r);void 0!==i&&(a=i);var n=this.seriesGroups[e],o=n.series[t];if(this.$.fireEvent("toggle",{state:a,seriesGroup:n,serie:o,elementIndex:r}),isNaN(r))this._itemsToggleState[e][t]=a;else{var s=this._itemsToggleState[e][t];for(Array.isArray(s)||(s=[]);s.length<r;)s.push(!0);s[r]=a}this._isToggleRefresh=!0,this.update(),this._isToggleRefresh=!1}},{key:"showSerie",value:function(e,t,r){this._toggleSerie(e,t,r,!0)}},{key:"hideSerie",value:function(e,t,r){this._toggleSerie(e,t,r,!1)}},{key:"_setLegendToggleHandler",value:function(e,t,r,i){var a=this.seriesGroups[e],n=a.series[t].enableSeriesToggle;if(null==n&&(n=!1!==a.enableSeriesToggle),n){var o=this;this.renderer.addHandler(i,"click",(function(){o._toggleSerie(e,t,r)}))}}},{key:"_renderLegend",value:function(e,t){for(var r=this,i=[],a=0;a<r.seriesGroups.length;a++){var n=r.seriesGroups[a];if(!1!==n.showLegend)for(var o=0;o<n.series.length;o++){var s=n.series[o];if(!1!==s.showLegend){var l=void 0,u=r._getSerieSettings(a,o);if("pie"!==n.type&&"donut"!==n.type){var d=s.legendFormatSettings||n.legendFormatSettings,c=s.legendFormatFunction||n.legendFormatFunction;l=r._formatValue(s.displayText||s.dataField||"",d,c,a,o,NaN);var h=r._getSeriesColors(a,o),f=this._get([s.legendFillColor,s.legendColor,h.fillColor]),p=this._get([s.legendLineColor,s.legendColor,h.lineColor]);i.push({groupIndex:a,seriesIndex:o,text:l,css:s.displayTextClass,fillColor:f,lineColor:p,opacity:u.opacity})}else for(var v=r._getXAxis(a),m=s.legendFormatSettings||n.legendFormatSettings||r._getFormatSettings(v)||r._getFormatSettings(s)||r._getFormatSettings(n),y=s.legendFormatFunction||n.legendFormatFunction||v.formatFunction||s.formatFunction||n.formatFunction,g=r._getDataLen(a),b=0;b<g;b++){l=r._getDataValue(b,s.displayText,a),l=r._formatValue(l,m,y,a,o,b);var _=r._getColors(a,o,b);i.push({groupIndex:a,seriesIndex:o,itemIndex:b,text:l,css:s.displayTextClass,fillColor:_.fillColor,lineColor:_.lineColor,opacity:u.opacity})}}}}return r._renderChartLegend(i,e,t,r._legendLayout&&"vertical"===r.legendLayout.flow)}},{key:"_getInterval",value:function(e,t){if(!e)return t;var r=this._get([e.unitInterval,t]);return isNaN(e.step)||null===e.step||(r=e.step*t),r}},{key:"_getOffsets",value:function(e,t,r,i,a,n,o,s,l){var u,d=this._getInterval(a[e],s),c=[];if((""===e||a[e].visible&&"custom"!==a[e].visible)&&(c=this._generateIntervalValues(i,d,s,o,l)),"labels"!==e){var h=o?n.left:0;if(!o&&s>1&&(h=n.left*(s+1)),1===c.length&&(h*=2),u=this._valuesToOffsets(c,t,i,r,n,!1,h),!o){var f=(n.left+n.right)*d/s;t.flip?u.unshift(u[0]+f):u.push(u[u.length-1]+f)}}else{var p=n.left;1===c.length&&(p*=2),u=this._valuesToOffsets(c,t,i,r,n,o,p)}var v=this._arraysToObjectsArray([c,u],["value","offset"]);if(t[e]&&t[e].custom)for(var m=this._objectsArraysToArray(t[e].custom,"value"),y=this._objectsArraysToArray(t[e].custom,"offset"),g=this._valuesToOffsets(m,t,i,r,n,o,n.left),b=0;b<t[e].custom.length;b++)v.push({value:m[b],offset:isNaN(y[b])?g[b]:y[b]});return v}},{key:"_renderXAxis",value:function(e,t,r,i){var a=this,n=a._getXAxis(e),o=a.seriesGroups[e],s="horizontal"===o.orientation,l={width:0,height:0},u=a._getAxisSettings(n);if(!n||!u.visible||"spider"===o.type)return l;if(!a._isGroupVisible(e)||this._isPieGroup(e))return l;for(var d=a._alignValuesWithTicks(e);a._renderData.length<e+1;)a._renderData.push({});a.rightToLeft&&(n.flip=!0);var c=s?t.height:t.width,h=a._calculateXOffsets(e,c),f=h.axisStats,p=n.rangeSelector&&n.rangeSelector.visible,v=0;p&&(this._moduleRangeSelector||a.error(a.localize("missingReference",{files:"smart.chart.rangeselector.js"})),v=this._selectorGetSize(n));var m=s&&"right"===n.position||!s&&"top"===n.position;!r&&p&&(s?(t.width-=v,"right"!==n.position&&(t.x+=v)):(t.height-=v,"top"===n.position&&(t.y+=v)));var y={rangeLength:h.rangeLength,itemWidth:h.itemWidth,intervalWidth:h.intervalWidth,data:h,settings:u,isMirror:m,rect:t};a._renderData[e].xAxis=y;var g=f.interval;if(isNaN(g))return l;s&&(u.title.angle-=90,u.labels.angle-=90);var b,_,x=this._getInterval(u.gridLines,g),w=this._getInterval(u.tickMarks,g),S=this._getInterval(u.labels,g),k=f.min,C=f.max,A=h.padding,N=!0===n.flip||a.rightToLeft,M={min:k,max:C};f.logAxis.enabled&&(M.min=f.logAxis.minPow,M.max=f.logAxis.maxPow),"date"===n.type?(u.gridLines.offsets=this._generateDTOffsets(k,C,c,A,x,g,f.dateTimeUnit,d,NaN,!1,N),u.tickMarks.offsets=this._generateDTOffsets(k,C,c,A,w,g,f.dateTimeUnit,d,NaN,!1,N),b=this._generateDTOffsets(k,C,c,A,S,g,f.dateTimeUnit,d,NaN,!0,N)):(u.gridLines.offsets=this._getOffsets("gridLines",n,c,f,u,A,d,g),u.tickMarks.offsets=this._getOffsets("tickMarks",n,c,f,u,A,d,g),b=this._getOffsets("labels",n,c,f,u,A,d,g)),a._elementRenderInfo&&a._elementRenderInfo.length>e&&(_=a._elementRenderInfo[e].xAxis);var T,D=[];u.labels.formatFunction&&(T=u.labels.formatFunction);var O,P=a._getFormatSettings(u.labels);P&&(O=Object.assign({},P)),"date"===n.type&&(n.dateFormat&&!T?O?O.dateFormat=O.dateFormat||n.dateFormat:O={dateFormat:n.dateFormat}:T||O&&(!O||O.dateFormat)||(T=this._getDefaultDTFormatFn(n.baseUnit||"day")));for(var F=0;F<b.length;F++){var I=b[F].value,E=b[F].offset;if(!isNaN(E)){var L=void 0;"date"!==n.type&&f.useIndeces&&n.dataField&&(L=Math.round(I),null==(I=a._getDataValue(L,n.dataField,e))&&(I=""));var R=a._formatValue(I,O,T,e,void 0,L);null!=R&&""!==R.toString()||(isNaN(L)&&(L=F),L>=f.filterRange.min&&L<=f.filterRange.max&&(R=f.useIndeces?(f.min+L).toString():void 0===I?"":I.toString()));var B={key:I,text:R,targetX:E,x:E};_&&_.itemOffsets[I]&&(B.x=_.itemOffsets[I].x,B.y=_.itemOffsets[I].y),D.push(B)}}var H=a._getAnimProps(e),V=H.enabled&&D.length<500?H.duration:0;!1===a.enableAxisTextAnimation&&(V=0);var j={items:D,renderData:y},G=a._renderAxis(s,m,u,{x:t.x,y:t.y,width:t.width,height:t.height},i,g,!1,!0,j,r,V);return s?G.width+=v:G.height+=v,G}},{key:"_animateAxisText",value:function(e,t){for(var r=e.items,i=e.textSettings,a=0;a<r.length;a++){var n=r[a];if(n&&n.visible){var o=n.targetX,s=n.targetY;isNaN(n.x)||isNaN(n.y)||(o=n.x+(o-n.x)*t,s=n.y+(s-n.y)*t),n.element&&(this.renderer.removeElement(n.element),n.element=void 0),n.element=this.renderer.text(n.text,o,s,n.width,n.height,i.angle,{class:i.style},!1,i.halign,i.valign,i.textRotationPoint)}}}},{key:"_getPolarAxisCoords",value:function(e,t){var r=this.seriesGroups[e],i=t.x+this._draw.getNum([r.offsetX,t.width/2]),a=t.y+this._draw.getNum([r.offsetY,t.height/2]),n=Math.min(t.width,t.height),o=r.radius;this._isPercent(o)&&(o=parseFloat(o)/100*n/2),isNaN(o)&&(o=n/2*.6);var s=this._alignValuesWithTicks(e),l=this._get([r.startAngle,r.minAngle,0])-90;l=isNaN(l)?0:2*Math.PI*l/360;var u=this._get([r.endAngle,r.maxAngle,360])-90;if(l>(u=isNaN(u)?2*Math.PI:2*Math.PI*u/360)){var d=l;l=u,u=d}var c=this.renderer._rnd(Math.abs(l-u)/(2*Math.PI),.001,!0),h=2*Math.PI*o*c,f=this._calcGroupOffsets(e,t).xoffsets;if(f){var p,v=!(Math.abs(Math.abs(u-l)-2*Math.PI)>1e-5);if(r.spider){var m=this._getXAxisStats(e,this._getXAxis(e),h),y=m.interval;(isNaN(y)||0===y)&&(y=1);var g=(m.max-m.min)/y+(v?1:0);if((g=Math.round(g))>2){var b=Math.cos(Math.abs(u-l)/2/g);0===(b=this.renderer._rnd(b,.01))&&(b=1),(p=o/b)>o&&s&&(o=p)}}return{x:i,y:a,r:o=this.renderer._ptrnd(o),adjR:this._get([p,o]),itemWidth:f.itemWidth,rangeLength:f.rangeLength,valuesOnTicks:s,startAngle:l,endAngle:u,isClosedCircle:v,axisSize:h}}}},{key:"_toPolarCoord",value:function(e,t,r,i){var a=Math.abs(e.startAngle-e.endAngle)/(2*Math.PI),n=2*(r-t.x)*Math.PI*a/Math.max(1,t.width)+e.startAngle,o=(t.height+t.y-i)*e.r/Math.max(1,t.height),s=e.x+o*Math.cos(n),l=e.y+o*Math.sin(n);return{x:this.renderer._ptrnd(s),y:this.renderer._ptrnd(l)}}},{key:"_renderSpiderAxis",value:function(e,t){var r=this,i=r._getXAxis(e),a=this._getAxisSettings(i);if(i&&a.visible){var n=r.seriesGroups[e],o=r._getPolarAxisCoords(e,t);if(o){var s=this.renderer._ptrnd(o.x),l=this.renderer._ptrnd(o.y),u=o.adjR,d=o.startAngle,c=o.endAngle;if(!(u<1)){var h=this.renderer._rnd(Math.abs(d-c)/(2*Math.PI),.001,!0),f=2*Math.PI*u*h,p=o.isClosedCircle,v=this._renderData[e].xoffsets;if(v.rangeLength){var m=v.axisStats.interval;for((isNaN(m)||m<1)&&(m=1);r._renderData.length<e+1;)r._renderData.push({});var y={rangeLength:v.rangeLength,itemWidth:v.itemWidth,data:v,rect:t,settings:a};r._renderData[e].xAxis=y,r._renderData[e].polarCoords=o;for(var g=!0,b=0;b<e;b++){var _=r._renderData[b].polarCoords,x=r._getXAxis(b),w=!1;for(var S in o)if(o[S]!==_[S]){w=!0;break}w&&x===i||(g=!1)}var k,C,A=a.gridLines,N=a.tickMarks,M=a.labels,T=this._getInterval(A,m),D=this._getInterval(N,m),O=this._getInterval(M,m),P=r._alignValuesWithTicks(e),F=r.renderer,I=v.axisStats,E=I.min,L=I.max,R=this._getPaddingSize(v.axisStats,i,P,f,!0,p,!1),B=!0===i.flip||r.rightToLeft;"date"===i.type?(A.offsets=this._generateDTOffsets(E,L,f,R,T,m,i.baseUnit,!0,0,!1,B),N.offsets=this._generateDTOffsets(E,L,f,R,D,m,i.baseUnit,!0,0,!1,B),k=this._generateDTOffsets(E,L,f,R,O,m,i.baseUnit,!0,0,!0,B)):(a.gridLines.offsets=this._getOffsets("gridLines",i,f,I,a,R,!0,m),a.tickMarks.offsets=this._getOffsets("tickMarks",i,f,I,a,R,!0,m),k=this._getOffsets("labels",i,f,I,a,R,!0,m)),r._elementRenderInfo&&r._elementRenderInfo.length>e&&(C=r._elementRenderInfo[e].xAxis);for(var H=[],V=this._getDataLen(e),j=0;j<k.length;j++){var G=void 0,z=k[j].offset,$=k[j].value;if("date"!==i.type&&I.useIndeces&&i.dataField){if((G=Math.round($))>=V)continue;null==($=r._getDataValue(G,i.dataField))&&($="")}var U=r._formatValue($,r._getFormatSettings(M.formatSettings),M.formatFunction,e,void 0,G);null!=U&&""!==U.toString()||(U=I.useIndeces?(I.min+j).toString():null==$?"":$.toString());var W={key:$,text:U,targetX:z,x:z};C&&C.itemOffsets[$]&&(W.x=C.itemOffsets[$].x,W.y=C.itemOffsets[$].y),H.push(W)}var X={stroke:A.color||r._getThemeColor("line"),fill:"none","stroke-width":A.width,"stroke-dasharray":A.dashStyle||""};if(!n.spider)if(1===h)F.circle(s,l,u,X);else{var Y=-d/Math.PI*180,q=-c/Math.PI*180;this.renderer.pieslice(s,l,0,u,Math.min(Y,q),Math.max(Y,q),void 0,X)}var J=d;if(A.visible&&g){P||p||A.offsets.unshift({offset:-R.right});for(var Q=0;Q<A.offsets.length;Q++){var Z=A.offsets[Q].offset;P||(Z+=p?R.right/2:R.right);var K=J+2*Z*Math.PI*h/Math.max(1,f);if(!(K-c>.01)){var ee=this.renderer._ptrnd(s+u*Math.cos(K)),te=this.renderer._ptrnd(l+u*Math.sin(K));F.line(s,l,ee,te,X)}}}if(N.visible&&g){var re={stroke:N.color||r._getThemeColor("line"),fill:"none","stroke-width":N.width,"stroke-dasharray":N.dashStyle||""};P||p||N.offsets.unshift({offset:-R.right});for(var ie=0;ie<N.offsets.length;ie++){var ae=N.offsets[ie].offset;P||(ae+=p?R.right/2:R.right);var ne=J+2*ae*Math.PI*h/Math.max(1,f);if(!(ne-c>.01)){var oe={x:s+u*Math.cos(ne),y:l+u*Math.sin(ne)},se={x:s+(u+5)*Math.cos(ne),y:l+(u+5)*Math.sin(ne)};F.line(this.renderer._ptrnd(oe.x),this.renderer._ptrnd(oe.y),this.renderer._ptrnd(se.x),this.renderer._ptrnd(se.y),re)}}}var le=[];if(n.spider){var ue=[];ue="date"===i.type?this._generateDTOffsets(E,L,f,R,m,m,i.baseUnit,!0,0,!1,B):this._getOffsets("",i,f,I,a,R,!0,m),P||p||ue.unshift({offset:-R.right});for(var de=0;de<ue.length;de++){var ce=ue[de].offset;P||(ce+=p?R.right/2:R.right);var he=J+2*ce*Math.PI*h/Math.max(1,f);he-c>.01||le.push(he)}y.offsetAngles=le}var fe=r._renderSpiderValueAxis(e,t,P?o.adjR:o.r,le);if(fe||(fe=[]),n.spider){if(!P)for(var pe=0;pe<fe.length;pe++)fe[pe]=fe[pe]*o.adjR/o.r;fe.push(u),this._renderSpiderLines(s,l,fe,o,le,X)}if(g&&M.visible){y.polarLabels=[];for(var ve=0;ve<H.length;ve++){var me=J+2*H[ve].x*Math.PI*h/Math.max(1,f);(me=(360-me/(2*Math.PI)*360)%360)<0&&(me=360+me);var ye=void 0,ge=F.measureText(H[ve].text,0,{class:a.labels.style}),be=(P?o.adjR:o.r)+(N.visible?7:2),_e=a.labels;if(_e.autoRotate){var xe=this._draw._ptRotate(s-ge.width/2,l-be-ge.height,s,l,-me/180*Math.PI),we=this._draw._ptRotate(s+ge.width/2,l-be,s,l,-me/180*Math.PI);ge.width=Math.abs(xe.x-we.x),ge.height=Math.abs(xe.y-we.y),ye={x:Math.min(xe.x,we.x),y:Math.min(xe.y,we.y)}}else ye=this._adjustTextBoxPosition(s,l,ge,be,me,!1,!1,!1);y.polarLabels.push({x:ye.x,y:ye.y,value:H[ve].text}),F.text(H[ve].text,ye.x,ye.y,ge.width,ge.height,_e.autoRotate?90-me:_e.angle,{class:_e.style},!1,_e.halign,_e.valign)}}}}}}}},{key:"_renderSpiderLines",value:function(e,t,r,i,a,n){for(var o=this.renderer,s=i.isClosedCircle,l=0;l<r.length;l++){for(var u=r[l],d=void 0,c=void 0,h=0;h<a.length;h++){var f=a[h],p=this.renderer._ptrnd(e+u*Math.cos(f)),v=this.renderer._ptrnd(t+u*Math.sin(f));d&&o.line(d.x,d.y,p,v,n),d={x:p,y:v},c||(c={x:p,y:v})}c&&s&&o.line(d.x,d.y,c.x,c.y,n)}}},{key:"_renderSpiderValueAxis",value:function(e,t,r,i){var a=this.seriesGroups[e],n=this._getPolarAxisCoords(e,t);if(n){var o=this.renderer._ptrnd(n.x),s=this.renderer._ptrnd(n.y);r=r||n.r;var l=n.startAngle,u=n.endAngle,d=this.renderer._rnd(Math.abs(l-u)/(2*Math.PI),.001,!0);if(!(r<1)){r=this.renderer._ptrnd(r);var c=this._getValueAxis(e),h=this._getAxisSettings(c);if(c&&!1!==h.visible){var f=this._stats.seriesGroups[e].mu,p=h.labels,v=this._getFormatSettings(p);-1!==a.type.indexOf("stacked")&&-1!==a.type.indexOf("100")&&!v&&(v={sufix:"%"});var m=this._get([p.step,p.unitInterval/f]);isNaN(m)&&(m=1),m=Math.max(1,Math.round(m)),this._calcValueAxisItems(e,r,m);var y=h.gridLines,g=h.tickMarks,b=h.labels,_={stroke:y.color||this._getThemeColor("line"),fill:"none","stroke-width":1,"stroke-dasharray":y.dashStyle||""},x=this._renderData[e].valueAxis,w=x.items,S=l;if(w.length&&h.line.visible){isNaN(h.line.angle)||(S=2*Math.PI*h.line.angle/360);var k=o+Math.cos(S)*r,C=s+Math.sin(S)*r;if(-1===i.indexOf(S)){var A=Object.assign({},_);A["stroke-width"]=h.line.lineWidth,A.stroke=h.line.color||this._getThemeColor("line"),A["stroke-dasharray"]=h.line.dashStyle,this.renderer.line(o,s,k,C,A)}}w=w.reverse();var N=this.renderer;x.polarLabels=[];for(var M=0;M<w.length-1;M++){var T=w[M];if(!isNaN(T)){var D=b.formatFunction?b.formatFunction(T):this._formatNumber(T,v),O=N.measureText(D,0,{class:b.style}),P=o+(!1!==c.showTickMarks?3:2),F=s-x.itemWidth*M-O.height/2,I=this._draw._ptRotate(P,F,o,s,S),E=this._draw._ptRotate(P+O.width,F+O.height,o,s,S);P=Math.min(I.x,E.x),F=Math.min(I.y,E.y),O.width=Math.abs(I.x-E.x),O.height=Math.abs(I.y-E.y),P+=h.labels.textOffset.x,F+=h.labels.textOffset.y,x.polarLabels.push({x:P,y:F,value:D}),N.text(D,P,F,O.width,O.height,b.autoRotate?90+180*l/Math.PI:b.angle,{class:b.style},!1,b.halign,b.valign)}}var L=!1!==c.valuesOnTicks,R=this._stats.seriesGroups[e],B=R.mu,H=!0===c.logarithmicScale;H&&(B=1);var V={min:R.min,max:R.max,logAxis:{enabled:!0===H,base:c.logarithmicScaleBase,minPow:R.minPow,maxPow:R.maxPow}};(y.visible||a.spider||c.alternatingBackgroundColor||c.alternatingBackgroundColor2)&&(y.offsets=this._getOffsets("gridLines",c,r,V,h,{left:0,right:0},L,B));var j=[];if(y.visible||a.spider)for(var G={stroke:y.color||this._getThemeColor("line"),fill:"none","stroke-width":1,"stroke-dasharray":y.dashStyle||""},z=0;z<y.offsets.length;z++){var $=this.renderer._ptrnd(y.offsets[z].offset);if($!==r)if(a.spider)j.push($);else if(1!==d){var U=-l/Math.PI*180,W=-u/Math.PI*180;this.renderer.pieslice(o,s,0,$,Math.min(U,W),Math.max(U,W),void 0,G)}else N.circle(o,s,$,G)}if(c.tickMarks&&(c.tickMarks.visible||c.showTickMarks)||(g.visible=!1),g.visible){g.offsets=this._getOffsets("tickMarks",c,r,V,h,{left:0,right:0},L,B);for(var X=2*g.size,Y={stroke:g.color||this._getThemeColor("line"),fill:"none","stroke-width":1,"stroke-dasharray":g.dashStyle||""},q=0;q<g.offsets.length;q++){var J=g.offsets[q].offset;I={x:o+J*Math.cos(S)-X/2*Math.sin(S+Math.PI/2),y:s+J*Math.sin(S)-X/2*Math.cos(S+Math.PI/2)},E={x:o+J*Math.cos(S)+X/2*Math.sin(S+Math.PI/2),y:s+J*Math.sin(S)+X/2*Math.cos(S+Math.PI/2)},N.line(this.renderer._ptrnd(I.x),this.renderer._ptrnd(I.y),this.renderer._ptrnd(E.x),this.renderer._ptrnd(E.y),Y)}}return j}}}}},{key:"_renderAxis",value:function(e,t,r,i,a,n,o,s,l,u,d){if(r.customDraw&&!u)return{width:NaN,height:NaN};var c=r.title,h=r.labels,f=r.tickMarks,p=r.padding,v=f.visible?f.size:0,m={width:0,height:0},y={width:0,height:0};e?m.height=y.height=i.height:m.width=y.width=i.width,!u&&t&&e&&(i.x-=i.width);var g=l.renderData,b=g.itemWidth;if(c.visible&&void 0!==c.text&&null!==c.text&&""!==c){var _=c.angle,x=this.renderer.measureText(c.text,_,{class:c.style});y.width=x.width,y.height=x.height,u||this.renderer.text(c.text,i.x+c.offset.x+(e?t?-p.right-2+2*i.width-y.width:2+p.left:0),i.y+c.offset.y+(e?0:t?p.top+2:i.height-2-y.height-p.bottom),e?y.width:i.width,e?i.height:y.height,_,{class:c.style},!0,c.halign,c.valign,c.rotationPoint)}var w=0,S=s?-b/2:0;s&&!e&&(h.halign="center");var k=i.x,C=i.y,A=h.textOffset;A&&(isNaN(A.x)||(k+=A.x),isNaN(A.y)||(C+=A.y)),e?(k+=p.left+2+(y.width>0?y.width+2:0)+(t?i.width-y.width:0),C+=S):(k+=S,t?(C+=y.height>0?y.height+6:4,C+=v-(s?v:v/4)):C+=s?v:v/4,C+=p.top);var N=0,M=0,T=l.items;g.itemOffsets={},!this._isToggleRefresh&&this._isUpdate||(d=0);for(var D=!1,O=0,P=0;P<T.length&&h.visible;P++,w+=b)if(T[P]&&!isNaN(b)){var F=T[P].text;isNaN(T[P].targetX)||(w=T[P].targetX);var I=this.renderer.measureText(F,h.angle,{class:h.style});if(I.width>M&&(M=I.width),I.height>N&&(N=I.height),O+=e?N:M,!u){if(e&&w>i.height+2||!e&&w>i.width+2)continue;var E=e?k+(t?0===y.width?v:v-2:0):k+w,L=e?C+w:C;g.itemOffsets[T[P].key]={x:E,y:L},D||(!isNaN(T[P].x)||!isNaN(T[P].y)&&d)&&(D=!0),T[P].targetX=E,T[P].targetY=L,T[P].width=e?i.width-p.left-p.right-4-v-(y.width>0?y.width+2:0):b,T[P].height=e?b:i.height-p.top-p.bottom-4-v-(y.height>0?y.height+2:0),T[P].visible=!0}}if(g.avgWidth=0===T.length?0:O/T.length,!u){var R={items:T,textSettings:h};if(!isNaN(d)&&D||(d=0),this._animateAxisText(R,0===d?1:0),0!==d){var B=this;this._enqueueAnimation("series",void 0,void 0,d,(function(e,t,r){B._animateAxisText(t,r)}),R)}}if(m.width+=4+v+y.width+M+(e&&y.width>0?2:0),m.height+=4+v+y.height+N+(!e&&y.height>0?2:0),e?m.width+=p.left+p.right:m.height+=p.top+p.bottom,!u&&r.line.visible){var H={stroke:r.line.color||self._getThemeColor("line"),"stroke-width":r.line.width,"stroke-dasharray":r.line.dashStyle||""};if(e){var V=i.x+i.width+(t?p.left:-p.right);V=this.renderer._ptrnd(V),this.renderer.line(V,i.y,V,i.y+i.height,H)}else{var j=this.renderer._ptrnd(i.y+(t?i.height-p.bottom:p.top));this.renderer.line(this.renderer._ptrnd(i.x),j,this.renderer._ptrnd(i.x+i.width+1),j,H)}}return m.width=this.renderer._rup(m.width),m.height=this.renderer._rup(m.height),m}},{key:"_drawPlotAreaLines",value:function(e,t,r){var i=this.seriesGroups[e],a="horizontal"!==i.orientation;if(this._renderData&&!(this._renderData.length<=e)){var n=t?"valueAxis":"xAxis",o=this._renderData[e][n];if(o){var s=this._renderData.axisDrawState;s||(s=this._renderData.axisDrawState={});var l,u="";t?(u="valueAxis_"+(i.valueAxis?e:"")+(a?"swap":""),l=this._getValueAxis(e)):(u="xAxis_"+(i.xAxis?e:"")+(a?"swap":""),l=this._getXAxis(e)),s=s[u]?s[u]:s[u]={},t||(a=!a);var d=o.settings;if(d&&!d.customDraw){var c=d.gridLines,h=d.tickMarks,f=d.padding,p=o.rect,v=this._plotRect;if(c&&h){var m,y={},g={stroke:c.color||self._getThemeColor("line"),"stroke-width":c.width,"stroke-dasharray":c.dashStyle||""},b=t?p.y+p.height:p.x,_=c.offsets;if(t&&!l.flip&&(_=(_=_.slice(0)).reverse()),_&&_.length>0)for(var x=NaN,w=0;w<_.length;w++)if(a?((m=this.renderer._ptrnd(p.y+_[w].offset))<p.y-.5&&(m=this.renderer._ptrnd(p.y)),m>p.y+p.height&&(m=p.y+p.height)):(m=this.renderer._ptrnd(p.x+_[w].offset))>p.x+p.width+.5&&(m=this.renderer._ptrnd(p.x+p.width)),!isNaN(m)&&(isNaN(x)||!(Math.abs(m-x)<2))){if(x=m,r.gridLines&&!1!==c.visible&&!0!==s.gridLines&&(a?this.renderer.line(this.renderer._ptrnd(v.x),m,this.renderer._ptrnd(v.x+v.width),m,g):this.renderer.line(m,this.renderer._ptrnd(v.y),m,this.renderer._ptrnd(v.y+v.height),g)),y[m]=!0,r.alternatingBackground&&(c.alternatingBackgroundColor||c.alternatingBackgroundColor2)&&!0!==s.alternatingBackground){var S,k=w%2==0?c.alternatingBackgroundColor2:c.alternatingBackgroundColor;w>0&&k&&(S=a?this.renderer.rect(this.renderer._ptrnd(v.x),b,this.renderer._ptrnd(v.width-1),m-b,g):this.renderer.rect(b,this.renderer._ptrnd(v.y),m-b,this.renderer._ptrnd(v.height),g),this.renderer.attr(S,{"stroke-width":0,fill:k,opacity:c.alternatingBackgroundOpacity||1}))}b=m}if(g={stroke:h.color||self._getThemeColor("line"),"stroke-width":h.width,"stroke-dasharray":h.dashStyle||""},r.tickMarks&&h.visible&&!0!==s.tickMarks){var C=h.size,A=h.offsets;x=NaN;for(var N=0;N<A.length;N++)if(a?((m=this.renderer._ptrnd(p.y+A[N].offset))<p.y-.5&&(m=this.renderer._ptrnd(p.y)),m>p.y+p.height&&(m=p.y+p.height)):(m=this.renderer._ptrnd(p.x+A[N].offset))>p.x+p.width+.5&&(m=this.renderer._ptrnd(p.x+p.width)),!isNaN(m)&&(isNaN(x)||!(Math.abs(m-x)<2))){if(y[m-1]?m--:y[m+1]&&m++,a){if(m>p.y+p.height+.5)break}else if(m>p.x+p.width+.5)break;x=m;var M=o.isMirror?C:-C;if(a){var T=p.x+p.width+("right"===l.position?f.left:-f.right);t||(T=p.x+(o.isMirror?f.left:-f.right+p.width)),this.renderer.line(T,m,T+M,m,g)}else{var D=p.y+(o.isMirror?p.height:0);D+=o.isMirror?-f.bottom:f.top,D=this.renderer._ptrnd(D),this.renderer.line(m,D,m,D-M,g)}}}s.tickMarks=s.tickMarks||r.tickMarks,s.gridLines=s.gridLines||r.gridLines,s.alternatingBackground=s.alternatingBackground||r.alternatingBackground}}}}}},{key:"_calcValueAxisItems",value:function(e,t,r){var i=this._stats.seriesGroups[e];if(!i||!i.isValid)return!1;var a=this.seriesGroups[e],n=this._getValueAxis(e),o=!1!==n.valuesOnTicks,s=i.intervals,l=t/s,u=i.min,d=i.mu,c=!0===n.logarithmicScale,h=n.logarithmicScaleBase||10,f=-1!==a.type.indexOf("stacked")&&-1!==a.type.indexOf("100");for(c&&(d=isNaN(n.unitInterval)?1:n.unitInterval),o||(s=Math.max(s-1,1));this._renderData.length<e+1;)this._renderData.push({});this._renderData[e].valueAxis={};var p=this._renderData[e].valueAxis;p.itemWidth=p.intervalWidth=l,p.items=[];for(var v=p.items,m=0;m<=s;m++){var y;y=c?f?i.max/Math.pow(h,s-m):u*Math.pow(h,m):o?u+m*d:u+(m+.5)*d,m%r==0?v.push(y):v.push(NaN)}return p.rangeLength=c&&!f?i.intervals:i.intervals*d,!0!==n.flip&&(v=v.reverse()),!0}},{key:"_getDecimalPlaces",value:function(e,t,r){var i=0;isNaN(r)&&(r=10);for(var a=0;a<e.length;a++){var n=void 0===t?e[a]:e[a][t];if(!isNaN(n)){for(var o=n.toString(),s=0;s<o.length;s++)if((o[s]<"0"||o[s]>"9")&&(i=o.length-(s+1))>=0)return Math.min(i,r);for(i>0&&(n*=Math.pow(10,i));Math.round(n)!==n&&i<r;)i++,n*=10}}return i}},{key:"_renderValueAxis",value:function(e,t,r,i){var a=this.seriesGroups[e],n="horizontal"===a.orientation,o=this._getValueAxis(e);o||this.error(this.localize("missingAxis",{index:e,axis:"valueAxis"}));var s={width:0,height:0};if(!this._isGroupVisible(e)||this._isPieOnlySeries()||"spider"===a.type)return s;var l=!1!==o.valuesOnTicks,u=this._stats.seriesGroups[e],d=u.mu,c=!0===o.logarithmicScale,h=o.logarithmicScaleBase||10;if(c&&(d=isNaN(o.unitInterval)?1:o.unitInterval),0===d&&(d=1),isNaN(d))return s;var f=this._getAxisSettings(o),p=f.title,v=f.labels,m=o.labels||{};this._get([o.horizontalTextAlignment,m.horizontalAlignment])||0!==v.angle||(v.halign=n?"center":"right"===o.position?"left":"right");var y=this._get([v.step,v.unitInterval/d]);if(isNaN(y)&&(y=1),y=Math.max(1,Math.round(y)),!this._calcValueAxisItems(e,n?t.width:t.height,y)||!f.visible)return s;n||(p.angle=this.rightToLeft?90:-90,"centercenter"===p.rotationPoint&&("top"===p.valign?p.rotationPoint="rightcenter":"bottom"===p.valign&&(p.rotationPoint="leftcenter")));var g=this._renderData[e].valueAxis,b=this._getFormatSettings(v);-1!==a.type.indexOf("stacked")&&-1!==a.type.indexOf("100")&&!b&&(b={sufix:"%"}),v.formatFunction||b&&null!==b.decimalPlaces&&void 0!==b.decimalPlaces||((b=b||{}).decimalPlaces=this._getDecimalPlaces([u.min,u.max,d],void 0,3));var _=f.gridLines,x=n?t.width:t.height,w=!0===o.flip;o.flip=!w;var S={min:u.min,max:u.max,logAxis:{enabled:!0===c,base:h,minPow:u.minPow,maxPow:u.maxPow}};(_.visible||o.alternatingBackgroundColor||o.alternatingBackgroundColor2)&&(_.offsets=this._getOffsets("gridLines",o,x,S,f,{left:0,right:0},l,d));var k=f.tickMarks;k.visible&&(k.offsets=this._getOffsets("tickMarks",o,x,S,f,{left:0,right:0},l,d));var C=this._getOffsets("labels",o,x,S,f,{left:0,right:0},l,d,!l);o.flip=w;var A,N=[];this._elementRenderInfo&&this._elementRenderInfo.length>e&&(A=this._elementRenderInfo[e].valueAxis);for(var M=0;M<C.length;M++){var T=C[M].value;if(isNaN(C[M].offset))N.push(void 0);else{var D={key:T,text:v.formatFunction?v.formatFunction(T):isNaN(T)?T:this._formatNumber(T,b)};A&&A.itemOffsets[T]&&(D.x=A.itemOffsets[T].x,D.y=A.itemOffsets[T].y),D.targetX=C[M].offset,isNaN(D.targetX)||N.push(D)}}var O=n&&"top"===o.position||!n&&"right"===o.position||!n&&this.rightToLeft&&"left"!==o.position,P={items:N,renderData:g},F=this._getAnimProps(e),I=F.enabled&&N.length<500?F.duration:0;return!1===this.enableAxisTextAnimation&&(I=0),g.settings=f,g.isMirror=O,g.rect=t,this._renderAxis(!n,O,f,t,i,d,c,!0,P,r,I)}},{key:"_objectsArraysToArray",value:function(e,t){var r=[];if(!Array.isArray(e))return r;for(var i=0;i<e.length;i++)r.push(e[i][t]);return r}},{key:"_arraysToObjectsArray",value:function(e,t){var r=[];if(e.length!==t.length)return r;for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++)r.length<=a&&r.push({}),r[a][t[i]]=e[i][a];return r}},{key:"_valuesToOffsets",value:function(e,t,r,i,a,n,o){var s=[];if(!t||!Array.isArray(e))return s;var l,u=r.logAxis.base,d=r.logAxis.enabled?"logarithmic":"linear",c=t.flip,h=0,f=0;a&&!isNaN(a.left)&&(h=a.left),a&&!isNaN(a.right)&&(f=a.right),i=l=i-h-f;for(var p=0;p<e.length;p++){var v=this._smartPlot.scale(e[p],{min:r.min.valueOf(),max:r.max.valueOf(),type:d,base:u},{min:0,max:n?i:l,flip:c},{});isNaN(v)?s.push(NaN):(isNaN(o)||(v+=o),v<=i+h+f+1?s.push(this.renderer._ptrnd(v)):s.push(NaN))}return s}},{key:"_generateIntervalValues",value:function(e,t,r,i,a){var n=[],o=e.min,s=e.max;if(e.logAxis&&e.logAxis.enabled&&(o=e.logAxis.minPow,s=e.logAxis.maxPow),null==o||null==s)return n;if(o===s)return e.logAxis&&e.logAxis.enabled?[Math.pow(e.logAxis.base,o)]:[o];var l=1;r<1&&(o*=l=1e6,s*=l,r*=l);for(var u=o;u<=s;u+=r)n.push(u/l+(a?r/2:0));if(t>r){for(var d=[],c=Math.round(t/r),h=0;h<n.length;h++)h%c==0&&d.push(n[h]);n=d}if(e.logAxis&&e.logAxis.enabled)for(var f=0;f<n.length;f++)n[f]=Math.pow(e.logAxis.base,n[f]);return n}},{key:"_generateDTOffsets",value:function(e,t,r,i,a,n,o,s,l,u,d){o||(o="day");var c=[];if(e>t)return c;if(e===t)return u?c.push({offset:s?r/2:i.left,value:e}):s&&c.push({offset:r/2,value:e}),c;var h=r-i.left-i.right,f=e,p=i.left,v=p,m=n=Math.max(n,1),y=Math.min(1,n);for(n>1&&"millisecond"!==o&&(n=1);this.renderer._ptrnd(v)<=this.renderer._ptrnd(i.left+h+(s?0:i.right));){c.push({offset:v,value:f});var g=new Date(f.valueOf());if("millisecond"===o)g.setMilliseconds(f.getMilliseconds()+n);else if("second"===o)g.setSeconds(f.getSeconds()+n);else if("minute"===o)g.setMinutes(f.getMinutes()+n);else if("hour"===o){var b=g.valueOf();g.setHours(f.getHours()+n),b===g.valueOf()&&g.setHours(f.getHours()+n+1)}else"day"===o?g.setDate(f.getDate()+n):"month"===o?g.setMonth(f.getMonth()+n):"year"===o&&g.setFullYear(f.getFullYear()+n);v=p+((f=g).valueOf()-e.valueOf())*y/(t.valueOf()-e.valueOf())*h}if(d)for(var _=0;_<c.length;_++)c[_].offset=r-c[_].offset;if(m>1&&"millisecond"!==o){for(var x=[],w=0;w<c.length;w+=m)x.push({offset:c[w].offset,value:c[w].value});c=x}if(!s&&!u&&c.length>1){(x=[]).push({offset:0,value:void 0});for(var S=1;S<c.length;S++)x.push({offset:c[S-1].offset+(c[S].offset-c[S-1].offset)/2,value:void 0});var k=x.length;k>1?x.push({offset:x[k-1].offset+(x[k-1].offset-x[k-2].offset)}):x.push({offset:r,value:void 0}),c=x}if(a>n){x=[];for(var C=Math.round(a/m),A=0;A<c.length;A++)A%C==0&&x.push({offset:c[A].offset,value:c[A].value});c=x}return c}},{key:"_hasStackValueReversal",value:function(e,t){var r=this.seriesGroups[e];if(-1===r.type.indexOf("stacked"))return!1;for(var i=-1!==r.type.indexOf("waterfall"),a=this._getDataLen(e),n=!1,o=[],s=0;s<r.series.length;s++)o[s]=this._isSerieVisible(e,s);for(var l=0;l<a;l++){var u=void 0;i||(n=!1);for(var d=0;d<r.series.length;d++)if(o[d]){var c=this._getDataValueAsNumber(l,r.series[d].dataField,e);if(!(isNaN(c)||r.series[d].summary&&void 0!==this._getDataValue(l,r.series[d].summary,e))){var h=n?c<0:c<t;if(n=!0,void 0===u&&(u=h),h!==u)return!0;u=h}}}return!1}},{key:"_getValueAxis",value:function(e){var t=null==e?this.valueAxis:this.seriesGroups[e].valueAxis||this.valueAxis;return t||(t=this.valueAxis={}),t}},{key:"_buildStats",value:function(e){var t={seriesGroups:[]};this._stats=t;for(var r=0;r<this.seriesGroups.length;r++){var i=this.seriesGroups[r];t.seriesGroups[r]={};var a=this._getXAxis(r),n=this._getValueAxis(r),o=this._getXAxisStats(r,a,"horizontal"!==i.orientation?e.width:e.height),s=t.seriesGroups[r];s.isValid=!0;var l="horizontal"===i.orientation?e.width:e.height,u=!0===n.logarithmicScale,d=n.logarithmicScaleBase;isNaN(d)&&(d=10);var c=-1!==i.type.indexOf("stacked"),h=c&&-1!==i.type.indexOf("100"),f=-1!==i.type.indexOf("range"),p=-1!==i.type.indexOf("waterfall");p&&!this._moduleWaterfall&&self.error(self.localize("missingReference",{files:"smart.chart.waterfall.js"})),h&&(s.psums=[],s.nsums=[]);var v=NaN,m=NaN,y=NaN,g=NaN,b=n?n.baselineValue:NaN;isNaN(b)&&(b=u&&!h?1:0);var _=!1;0!==b&&c&&(_=this._hasStackValueReversal(r,b))&&(b=0),c&&p&&(_=this._hasStackValueReversal(r,b));var x=this._getDataLen(r),w=0,S=NaN,k=[];if(p)for(var C=0;C<i.series.length;C++)k.push(NaN);for(var A=NaN,N=0;N<x&&s.isValid;N++){if(a.rangeSelector&&a.rangeSelector.visible){var M=a.dataField?this._getDataValue(N,a.dataField,r):N;if(M&&o.isDateTime&&(M=this._castAsDate(M,a.dateFormat)),o.useIndeces&&(M=N),M&&(M.valueOf()<o.min.valueOf()||M.valueOf()>o.max.valueOf()))continue}var T=n.minValue,D=n.maxValue;n.baselineValue&&(T=isNaN(T)?b:Math.min(b,T),D=isNaN(D)?b:Math.max(b,D));for(var O=0,P=0,F=0;i.series&&F<i.series.length;F++)if(this._isSerieVisible(r,F)){var I=NaN,E=NaN,L=NaN;if(-1!==i.type.indexOf("candle")||-1!==i.type.indexOf("ohlc")){var R=["Open","Low","Close","High"];for(var B in R){var H=this._getDataValueAsNumber(N,i.series[F]["dataField"+R[B]],r);isNaN(H)||(L=isNaN(E)?H:Math.min(L,H),E=isNaN(E)?H:Math.max(E,H))}}else if(f){var V=this._getDataValueAsNumber(N,i.series[F].dataFieldFrom,r),j=this._getDataValueAsNumber(N,i.series[F].dataFieldTo,r);E=Math.max(V,j),L=Math.min(V,j)}else{if(I=this._getDataValueAsNumber(N,i.series[F].dataField,r),p){if(this._isSummary(r,N)&&void 0!==this._getDataValue(N,i.series[F].summary,r))continue;c?(isNaN(A)||(I+=A),A=I):(isNaN(k[F])?k[F]=I:I+=k[F],k[F]=I)}if(isNaN(I)||u&&I<=0)continue;L=E=I}(isNaN(D)||E>D)&&(isNaN(n.maxValue)||E<=n.maxValue)&&(D=E),(isNaN(T)||L<T)&&(isNaN(n.minValue)||L>=n.minValue)&&(T=L),isNaN(I)||!c||p||(I>b?O+=I:I<b&&(P+=I))}if(h||(isNaN(n.maxValue)||(O=Math.min(n.maxValue,O)),isNaN(n.minValue)||(P=Math.max(n.minValue,P))),u&&h)for(var G=0;G<i.series.length;G++)if(this._isSerieVisible(r,G))if(I=this._getDataValueAsNumber(N,i.series[G].dataField,r),isNaN(I)||I<=0)S=.01;else{var z=0===O?0:I/O;(isNaN(S)||z<S)&&(S=z)}else S=.01;var $=O-P;w<$&&(w=$),h&&(s.psums[N]=O,s.nsums[N]=P),(D>m||isNaN(m))&&(m=D),(T<v||isNaN(v))&&(v=T),(O>y||isNaN(y))&&(y=O),(P<g||isNaN(g))&&(g=P)}h&&(y=0===y?0:Math.max(y,-g),g=0===g?0:Math.min(g,-y)),v===m&&(!isNaN(n.minValue)&&isNaN(n.maxValue)?(v=n.minValue,m=u?v*d:v+1):isNaN(n.minValue)&&!isNaN(n.maxValue)&&(m=n.maxValue,v=u?m/d:m-1)),v===m&&(0===v?(v=-1,m=1):v<0?m=0:u?1===v&&(v/=d,m*=d):v=0);var U={gmin:v,gmax:m,gsumP:y,gsumN:g,gbase:b,isLogAxis:u,logBase:d,minPercent:S,gMaxRange:w,isStacked:c,isStacked100:h,isWaterfall:p,hasStackValueReversal:_,valueAxis:n,valueAxisSize:l};U.isStacked&&(U.gsumN<0&&(U.gmin=Math.min(U.gmin,U.gbase+U.gsumN)),U.gsumP>0&&(U.gmax=Math.max(U.gmax,U.gbase+U.gsumP))),s.context=U}this._mergeCommonValueAxisStats();for(var W=0;W<t.seriesGroups.length;W++){var X=t.seriesGroups[W];if(X.isValid){var Y=this._calcOutputGroupStats(X.context);for(var q in Y)X[q]=Y[q];delete X.context}}}},{key:"_mergeCommonValueAxisStats",value:function(){for(var e={},t=0;t<this.seriesGroups.length;t++)if(this._isGroupVisible(t)&&!this.seriesGroups[t].valueAxis){var r=this._stats.seriesGroups[t].context;e.gbase=r.gbase,(isNaN(e.gmin)||r.gmin<e.gmin)&&(e.gmin=r.gmin),(isNaN(e.gmax)||r.gmax>e.gmax)&&(e.gmax=r.gmax),(isNaN(e.gsumP)||r.gsumP>e.gsumP)&&(e.gsumP=r.gsumP),(isNaN(e.gsumN)||r.gsumN<e.gsumN)&&(e.gsumN=r.gsumN),(isNaN(e.logBase)||r.logBase<e.logBase)&&(e.logBase=r.logBase),(isNaN(e.minPercent)||r.minPercent<e.minPercent)&&(e.minPercent=r.minPercent),e.gsumN>0&&(e.gmin=Math.min(e.gmin,e.gbase+e.gsumN)),e.gsumP>0&&(e.gmax=Math.max(e.gmax,e.gbase+e.gsumP))}for(var i=0;i<this.seriesGroups.length;i++)if(!this.seriesGroups[i].valueAxis){var a=this._stats.seriesGroups[i].context;for(var n in e)a[n]=e[n]}}},{key:"_calcOutputGroupStats",value:function(e){var t=e.gmin,r=e.gmax,i=e.gsumP,a=e.gsumN,n=e.gbase,o=e.isLogAxis,s=e.logBase,l=e.minPercent,u=e.gMaxRange,d=e.isStacked,c=e.isStacked100,h=e.isWaterfall,f=e.hasStackValueReversal,p=e.valueAxis,v=e.valueAxisSize,m=e.valueAxis.unitInterval;m||(m=this._calcInterval(t,r,Math.max(v/80,2))),t===r&&(t=n,r*=2);var y=NaN,g=0,b=0;if(o){if(c){y=0;var _=1;for(g=b=this._draw.log(100,s);_>l;)_/=s,g--,y++;t=Math.pow(s,g)}else d&&!h&&(r=Math.max(r,i)),b=this.renderer._rnd(this._draw.log(r,s),1,!0),r=Math.pow(s,b),g=this.renderer._rnd(this._draw.log(t,s),1,!1),t=Math.pow(s,g);m=s}t<a&&(a=t),r>i&&(i=r);var x=t,w=r;if(o||0!=Math.abs(w-x)%m&&(x=this.renderer._rnd(t,m,!1),w=this.renderer._rnd(r,m,!0)),c&&w>100&&(w=100),c&&!o&&(w=w>0?100:0,x=x<0?-100:0,m=p.unitInterval,(isNaN(m)||m<=0||m>=100)&&(m=10),100%m!=0))for(;m>=1&&100%m!=0;m--);return isNaN(w)||isNaN(x)||isNaN(m)?{}:(isNaN(y)&&(y=parseInt(((w-x)/(0===m?1:m)).toFixed())),o&&!c&&(y=b-g,u=Math.pow(s,y)),y<1?{}:{min:x,max:w,logarithmic:o,logBase:s,base:o?x:n,minPow:g,maxPow:b,sumP:i,sumN:a,mu:m,maxRange:u,intervals:y,hasStackValueReversal:f})}},{key:"_getDataLen",value:function(e){var t=this.dataSource;return null!=e&&-1!==e&&this.seriesGroups[e].dataSource&&(t=this.seriesGroups[e].dataSource),t?t.length:0}},{key:"_getDataValue",value:function(e,t,r){var i=this.dataSource;if(null!=r&&-1!==r&&(i=this.seriesGroups[r].dataSource||i),!(!i||e<0||e>i.length-1))return"function"==typeof t?t(e,i):t&&""!==t?i[e][t]:i[e]}},{key:"_getDataValueAsNumber",value:function(e,t,r){var i=this._getDataValue(e,t,r);return this._isDate(i)?i.valueOf():("number"!=typeof i&&(i=parseFloat(i)),"number"!=typeof i&&(i=void 0),i)}},{key:"_isPieGroup",value:function(e){var t=this.seriesGroups[e];return!(!t||!t.type||-1===t.type.indexOf("pie")&&-1===t.type.indexOf("donut"))}},{key:"_renderPieSeries",value:function(e,t){for(var r=this,i=this._getDataLen(e),a=this.seriesGroups[e],n=this._calcGroupOffsets(e,t).offsets,o=function(o){var s=a.series[o];if(s.customDraw)return"continue";var l=r._getSerieSettings(e,o),u=r._getAnimProps(e,o),d=u.enabled&&i<5e3&&!r._isToggleRefresh&&u.duration;r._isTouchDevice&&r.renderer instanceof Smart.Utilities.HTML5Renderer&&(d=0);var c=r._get([s.minAngle,s.startAngle]);(isNaN(c)||c<0||c>360)&&(c=0);var h=r._get([s.maxAngle,s.endAngle]);(isNaN(h)||h<0||h>360)&&(h=360);for(var f={rect:t,minAngle:c,maxAngle:h,groupIndex:e,serieIndex:o,settings:l,items:[]},p=0;p<i;p++){var v=n[o][p];if(v.visible){var m=v.fromAngle,y=v.toAngle,g=r.renderer.pieslice(v.x,v.y,v.innerRadius,v.outerRadius,m,0===d?y:m,v.centerOffset);r._setRenderInfo(e,o,p,{element:g});var b={displayValue:v.displayValue,itemIndex:p,visible:v.visible,x:v.x,y:v.y,innerRadius:v.innerRadius,outerRadius:v.outerRadius,fromAngle:m,toAngle:y,centerOffset:v.centerOffset};f.items.push(b)}}r._animatePieSlices(f,0);var _=r;r._enqueueAnimation("series",void 0,void 0,d,(function(e,t,r){_._animatePieSlices(t,r)}),f)},s=0;s<a.series.length;s++)o(s)}},{key:"_sliceSortFunction",value:function(e,t){return e.fromAngle-t.fromAngle}},{key:"_animatePieSlices",value:function(e,t){var r;this._elementRenderInfo&&this._elementRenderInfo.length>e.groupIndex&&this._elementRenderInfo[e.groupIndex].series&&this._elementRenderInfo[e.groupIndex].series.length>e.serieIndex&&(r=this._elementRenderInfo[e.groupIndex].series[e.serieIndex]);for(var i=this._getLabelsSettings(e.groupIndex,e.serieIndex,NaN),a=i.visible,n=[],o=0;o<e.items.length;o++){var s=e.items[o];if(s.visible){var l=s.fromAngle,u=s.fromAngle+t*(s.toAngle-s.fromAngle);if(r&&r[s.displayValue]){var d=r[s.displayValue].fromAngle,c=r[s.displayValue].toAngle;l=d+(l-d)*t,u=c+(u-c)*t}n.push({index:o,from:l,to:u})}}r&&n.sort(this._sliceSortFunction);for(var h=NaN,f=0;f<n.length;f++){var p=e.items[n[f].index],v=this._getRenderInfo(e.groupIndex,e.serieIndex,p.itemIndex),m=n[f].from;u=n[f].to,r&&(!isNaN(h)&&m>h&&(m=h),h=u,f===n.length-1&&u!==n[0].from&&(u=e.maxAngle+n[0].from));var y=this.renderer.pieSlicePath(p.x,p.y,p.innerRadius,p.outerRadius,m,u,p.centerOffset);this.renderer.attr(v.element,{d:y});var g=this._getColors(e.groupIndex,e.serieIndex,p.itemIndex,"radialGradient",p.outerRadius),b=e.settings;v.colors=g,v.settings=b,this.renderer.attr(v.element,{fill:g.fillColor,stroke:g.lineColor,"stroke-width":b.stroke,"fill-opacity":b.opacity,"stroke-opacity":b.opacity,"stroke-dasharray":"none"}),a&&this._showPieLabel(e.groupIndex,e.serieIndex,p.itemIndex,i,void 0,v.colors.lineColor),1===t&&this._installHandlers(v.element,"pieslice",e.groupIndex,e.serieIndex,p.itemIndex)}}},{key:"_showPieLabel",value:function(e,t,r,i,a){var n=this._renderData[e].offsets[t][r];if(n.elementInfo.labelElement&&this.renderer.removeElement(n.elementInfo.labelElement),i||(i=this._getLabelsSettings(e,t,NaN)),i.visible){var o=n.fromAngle,s=n.toAngle,l=Math.abs(o-s);l>360&&(o=0,s=360);var u,d=l/2+o,c=(d%=360)*Math.PI*2/360;!0===i.autoRotate&&(u=d<90||d>270?360-d:180-d);var h=i.linesEnabled,f=this._showLabel(e,t,r,{x:0,y:0,width:0,height:0},"center","center",!0,!1,!1,u),p=i.radius||n.outerRadius+Math.max(f.width,f.height);this._isPercent(p)&&(p=parseFloat(p)/100*Math.min(this._plotRect.width,this._plotRect.height)/2),p+=n.centerOffset,isNaN(a)&&(a=0),p+=a;var v=this.seriesGroups[e],m=v.series[t],y=this._draw.getNum([m.offsetX,v.offsetX,this._plotRect.width/2]),g=this._draw.getNum([m.offsetY,v.offsetY,this._plotRect.height/2]),b=this._plotRect.x+y,_=this._plotRect.y+g,x=this._adjustTextBoxPosition(b,_,f,p,d,n.outerRadius>p,!1!==i.linesAngles,!0===i.autoRotate),w={},S=x.x<b?0:f.width/2,k=Math.sqrt(Math.pow(x.x-b,2)+Math.pow(x.y-_,2))+S<n.outerRadius?arguments[5]:void 0;if(n.elementInfo.labelElement=this._showLabel(e,t,r,{x:x.x,y:x.y,width:f.width,height:f.height},"left","top",!1,!1,!1,u,w,k),p>n.outerRadius+a+5&&!1!==h){var C={lineColor:n.elementInfo.colors.lineColor,stroke:n.elementInfo.settings.stroke,opacity:n.elementInfo.settings.opacity,dashStyle:n.elementInfo.settings.dashStyle};n.elementInfo.labelArrowPath=this._updateLebelArrowPath(n.elementInfo.labelArrowPath,b,_,p,n.outerRadius+a,c,!1!==i.linesAngles,C,w)}}}},{key:"_updateLebelArrowPath",value:function(e,t,r,i,a,n,o,s,l){var u=this.renderer,d=u._ptrnd(t+(i-0)*Math.cos(n)),c=u._ptrnd(r-(i-0)*Math.sin(n)),h=u._ptrnd(t+(a+2)*Math.cos(n)),f=u._ptrnd(r-(a+2)*Math.sin(n)),p=[];p.push({x:l.x+l.width/2,y:l.y}),p.push({x:l.x+l.width/2,y:l.y+l.height}),p.push({x:l.x,y:l.y+l.height/2}),p.push({x:l.x+l.width,y:l.y+l.height/2}),o||(p.push({x:l.x,y:l.y}),p.push({x:l.x+l.width,y:l.y}),p.push({x:l.x+l.width,y:l.y+l.height}),p.push({x:l.x,y:l.y+l.height})),p=(p=p.sort((function(e,i){return u._ptdist(e.x,e.y,t,r)-u._ptdist(i.x,i.y,t,r)}))).sort((function(e,i){return Math.abs(e.x-t)+Math.abs(e.y-r)-(Math.abs(i.x-t)+Math.abs(i.y-r))}));for(var v=0;v<p.length;v++)p[v].x=u._ptrnd(p[v].x),p[v].y=u._ptrnd(p[v].y);var m="M "+(d=p[0].x)+","+(c=p[0].y)+" L"+h+","+f;return o&&(m="M "+d+","+c+" L"+h+","+c+" L"+h+","+f),e?u.attr(e,{d:m}):e=u.path(m,{}),u.attr(e,{fill:"none",stroke:s.lineColor,"stroke-width":s.stroke,"stroke-opacity":s.opacity,"stroke-dasharray":"none"}),e}},{key:"_adjustTextBoxPosition",value:function(e,t,r,i,a,n,o,s){var l=a*Math.PI*2/360,u=this.renderer._ptrnd(e+i*Math.cos(l)),d=this.renderer._ptrnd(t-i*Math.sin(l));if(s){var c=r.width,h=r.height,f=Math.atan(h/c)%(2*Math.PI),p=l%(2*Math.PI),v=0;p<=f?v=c/2*Math.cos(l):p>=f&&p<Math.PI-f?v=h/2*Math.sin(l):p>=Math.PI-f&&p<Math.PI+f?v=c/2*Math.cos(l):p>=Math.PI+f&&p<2*Math.PI-f?v=h/2*Math.sin(l):p>=2*Math.PI-f&&p<2*Math.PI&&(v=c/2*Math.cos(l)),i+=Math.abs(v)+3;var m=this.renderer._ptrnd(e+i*Math.cos(l)),y=this.renderer._ptrnd(t-i*Math.sin(l));return{x:m-=r.width/2,y:y-=r.height/2}}return n?(u-=r.width/2,d-=r.height/2):o?a>=90&&a<270?(d-=r.height/2,u-=r.width):d-=r.height/2:a>=0&&a<45||a>=315&&a<360?d-=r.height/2:a>=45&&a<135?(d-=r.height,u-=r.width/2):a>=135&&a<225?(d-=r.height/2,u-=r.width):a>=225&&a<315&&(u-=r.width/2),{x:u,y:d}}},{key:"_isColumnType",value:function(e){return-1!==e.indexOf("column")||-1!==e.indexOf("waterfall")}},{key:"_getColumnGroupsCount",value:function(e){var t=0;e=e||"vertical";for(var r=this.seriesGroups,i=0;i<r.length;i++){var a=r[i].orientation||"vertical";this._isColumnType(r[i].type)&&a===e&&t++}return this.columnSeriesOverlap&&(t=1),t}},{key:"_getColumnGroupIndex",value:function(e){for(var t=0,r=this.seriesGroups[e].orientation||"vertical",i=0;i<e;i++){var a=this.seriesGroups[i],n=a.orientation||"vertical";this._isColumnType(a.type)&&n===r&&t++}return t}},{key:"_renderAxisBands",value:function(e,t,r){var i=r?this._getXAxis(e):this._getValueAxis(e),a=this.seriesGroups[e],n=r?void 0:a.bands;if(!n){for(var o=0;o<e;o++)if((r?this._getXAxis(o):this._getValueAxis(o))===i)return;n=i.bands}if(Array.isArray(n)){var s=t,l="horizontal"===a.orientation;l&&(s={x:t.y,y:t.x,width:t.height,height:t.width}),this._calcGroupOffsets(e,s);for(var u=0;u<n.length;u++){var d=n[u],c=d.minValue,h=d.maxValue,f=r?this.getXAxisDataPointOffset(c,e):this.getValueAxisDataPointOffset(c,e),p=r?this.getXAxisDataPointOffset(h,e):this.getValueAxisDataPointOffset(h,e);if(!isNaN(f)&&!isNaN(p)){var v,m=Math.abs(f-p);if(a.polar||a.spider){var y=this._renderData[e],g=y.polarCoords;if(r)if(a.spider){var b=this.getPolarDataPointOffset(c,this._stats.seriesGroups[e].max,e),_=this.getPolarDataPointOffset(h,this._stats.seriesGroups[e].max,e),x="M "+g.x+","+g.y;x+=" L "+b.x+","+b.y,x+=" L "+_.x+","+_.y,v=this.renderer.path(x)}else{var w={},S={x:Math.min(f,p),y:t.y,width:m,height:t.height};this._columnAsPieSlice(w,t,g,S),v=w.element}else{var k=this._toPolarCoord(g,t,t.x,y.baseOffset),C=this._toPolarCoord(g,t,t.x,f),A=this._toPolarCoord(g,t,t.x,p),N=this.renderer._ptdist(k.x,k.y,C.x,C.y),M=this.renderer._ptdist(k.x,k.y,A.x,A.y),T=Math.round(360*-g.startAngle/(2*Math.PI)),D=Math.round(360*-g.endAngle/(2*Math.PI));if(T>D){var O=T;T=D,D=O}if(a.spider){var P=y.xAxis.offsetAngles,F="",I=[M,N],E=P;for(var L in g.isClosedCircle&&(E=P.slice(0)).push(E[0]),I){for(var R=0;R<E.length;R++){var B=0===L?R:P.length-R-1,H=g.x+I[L]*Math.cos(E[B]),V=g.y+I[L]*Math.sin(E[B]);F+=""===F?"M ":" L",F+=this.renderer._ptrnd(H)+","+this.renderer._ptrnd(V)}0===L&&(H=g.x+I[1]*Math.cos(E[B]),V=g.y+I[1]*Math.sin(E[B]),F+=" L"+this.renderer._ptrnd(H)+","+this.renderer._ptrnd(V))}F+=" Z",v=this.renderer.path(F)}else v=this.renderer.pieslice(g.x,g.y,N,M,T,D)}}else{var j={x:Math.min(f,p),y:s.y,width:m,height:s.height};if(r||(j={x:s.x,y:Math.min(f,p),width:s.width,height:m}),l){var G=j.x;j.x=j.y,j.y=G,G=j.width,j.width=j.height,j.height=G}v=0===m||1===m?this.renderer.line(this.renderer._ptrnd(j.x),this.renderer._ptrnd(j.y),this.renderer._ptrnd(j.x+(l?0:j.width)),this.renderer._ptrnd(j.y+(l?j.height:0))):this.renderer.rect(j.x,j.y,j.width,j.height)}var z=d.color||this._getThemeColor("band"),$=d.lineColor||z,U=d.lineWidth;isNaN(U)&&(U=1);var W=d.opacity;(isNaN(W)||W<0||W>1)&&(W=1),this.renderer.attr(v,{fill:z,"fill-opacity":W,stroke:$,"stroke-opacity":W,"stroke-width":U,"stroke-dasharray":d.dashStyle})}}}}},{key:"_getColumnGroupWidth",value:function(e,t,r){var i=this.seriesGroups[e],a=-1!==i.type.indexOf("stacked"),n=this._getColumnGroupsCount(i.orientation);(isNaN(n)||0===n)&&(n=1);var o=t.rangeLength>=1?t.itemWidth:.9*r,s=i.columnsMinWidth;isNaN(s)&&(s=1),isNaN(i.columnsMaxWidth)||(s=Math.min(i.columnsMaxWidth,s)),s>o&&t.length>0&&(o=Math.max(o,.9*r/t.length));var l=s;if(!a){var u=i.seriesGapPercent;(isNaN(u)||u<0)&&(u=10);var d=s;d*=1+(u/=100),l+=i.series.length*d}return{requiredWidth:l,availableWidth:o,targetWidth:Math.max(o/n,l)}}},{key:"_getColumnSerieWidthAndOffset",value:function(e,t){var r=this.seriesGroups[e],i="horizontal"===r.orientation,a=this._plotRect;i&&(a={x:a.y,y:a.x,width:a.height,height:a.width});var n=this._calcGroupOffsets(e,a);if(n&&0!==n.xoffsets.length){var o=this._getColumnGroupsCount(r.orientation);"candlestick"!==r.type&&"ohlc"!==r.type||(o=1);var s=this._getColumnGroupIndex(e),l=this._getColumnGroupWidth(e,n.xoffsets,i?a.height:a.width),u=0,d=l.targetWidth;(!0===this.columnSeriesOverlap||Math.round(d)>Math.round(l.availableWidth/o))&&(o=1,s=0),u-=d*o/2,u+=d*s;var c=r.columnsGapPercent;c<=0&&(c=0),(isNaN(c)||c>=100)&&(c=25);var h=d*(c/=100);h+l.requiredWidth>l.targetWidth&&(h=Math.max(0,l.targetWidth-l.requiredWidth)),Math.round(d)>Math.round(l.availableWidth)&&(h=0),d-=h,u+=h/2;var f=r.seriesGapPercent;(isNaN(f)||f<0)&&(f=10);var p=-1!==r.type.indexOf("stacked"),v=d;p||(v/=r.series.length);var m=this._get([r.seriesGap,d*f/100/(r.series.length-1)]);(!0===r.polar||!0===r.spider||p||r.series.length<=1)&&(m=0);var y=m*(r.series.length-1);r.series.length>1&&y>d-1*r.series.length&&(m=(y=d-1*r.series.length)/Math.max(1,r.series.length-1));var g=v-y/r.series.length,b=0,_=r.columnsMaxWidth;return isNaN(_)||g>_&&(b=g-_,g=_),{width:g,offset:u+(p?b/2:(d-g*r.series.length-y)/2+g*t+Math.max(0,t)*m)}}}},{key:"_renderColumnSeries",value:function(e,t){var r=this.seriesGroups[e];if(r.series&&0!==r.series.length){var i="horizontal"===r.orientation,a=t;i&&(a={x:t.y,y:t.x,width:t.height,height:t.width});var n,o=this._calcGroupOffsets(e,a);if(o&&0!==o.xoffsets.length){!0!==r.polar&&!0!==r.spider||(n=this._getPolarAxisCoords(e,a));var s={groupIndex:e,rect:t,vertical:!i,seriesCtx:[],renderData:o,polarAxisCoords:n};s.columnGroupWidth=this._getColumnGroupWidth(e,o.xoffsets,i?a.height:a.width);for(var l,u=this._getGroupGradientType(e),d=0;d<r.series.length;d++){var c=r.series[d];if(!c.customDraw){var h=this._getAnimProps(e,d);l=h.enabled&&!this._isToggleRefresh&&o.xoffsets.length<100?h.duration:0;var f=this._getColumnSerieWidthAndOffset(e,d),p=this._isSerieVisible(e,d),v=this._getSerieSettings(e,d),m=this._getColors(e,d,NaN,this._getGroupGradientType(e),4),y=[];if("function"==typeof c.colorFunction&&!n)for(var g=o.xoffsets.first;g<=o.xoffsets.last;g++)y.push(this._getColors(e,d,g,u,4));var b={seriesIndex:d,serieColors:m,itemsColors:y,settings:v,columnWidth:f.width,xAdjust:f.offset,isVisible:p};s.seriesCtx.push(b)}}this._animColumns(s,0===l?1:0);var _=this;this._enqueueAnimation("series",void 0,void 0,l,(function(e,t,r){_._animColumns(t,r)}),s)}}}},{key:"_getPercent",value:function(e,t,r,i){return isNaN(e)&&(e=t),!isNaN(r)&&!isNaN(e)&&e<r&&(e=r),!isNaN(i)&&!isNaN(e)&&e>i&&(e=i),isNaN(e)?NaN:e}},{key:"_getColumnVOffsets",value:function(e,t,r,i,a,n){var o=this.seriesGroups[t],s=this._getPercent(o.columnsTopWidthPercent,100,0,100),l=this._getPercent(o.columnsBottomWidthPercent,100,0,100);0===s&&0===l&&(l=100);for(var u=this._getPercent(o.columnsNeckHeightPercent,NaN,0,100)/100,d=this._getPercent(o.columnsNeckWidthPercent,100,0,100)/100,c=[],h=NaN,f=0;f<r.length;f++){var p,v=(D=r[f]).seriesIndex,m=e.offsets[v][i].from,y=e.offsets[v][i].to,g=e.xoffsets.data[i],b=D.isVisible;b||(y=m);var _=this._elementRenderInfo;if(b&&_&&_.length>t&&_[t].series.length>v){var x=e.xoffsets.xvalues[i];!(p=_[t].series[v][x])||isNaN(p.from)||isNaN(p.to)||(m=p.from+(m-p.from)*n,y=p.to+(y-p.to)*n,g=p.xoffset+(g-p.xoffset)*n)}p||(y=m+(y-m)*(a?1:n)),isNaN(m)&&(m=isNaN(h)?e.baseOffset:h),h=!isNaN(y)&&a?y:m,isNaN(y)&&(y=m);var w={from:m,to:y,xOffset:g};100===s&&100===l||(w.funnel=!0,w.toWidthPercent=s,w.fromWidthPercent=l),c.push(w)}if(a&&c.length>1&&!(this._elementRenderInfo&&this._elementRenderInfo.length>t)){for(var S=0,k=0,C=-1/0,A=1/0,N=1/0,M=-1/0,T=0;T<c.length;T++){var D;(D=r[T]).isVisible&&(c[T].to>=c[T].from?(k+=c[T].to-c[T].from,N=Math.min(N,c[T].from),M=Math.max(M,c[T].to)):(S+=c[T].from-c[T].to,C=Math.max(C,c[T].from),A=Math.min(A,c[T].to)))}var O=S,P=k;S*=n,k*=n;for(var F=0,I=0,E=0;E<c.length;E++)if(c[E].to>=c[E].from){var L=c[E].to-c[E].from;L+I>k&&(L=Math.max(0,k-I),c[E].to=c[E].from+L),100===s&&100===l||(c[E].funnel=!0,!isNaN(u)&&P*u>=I?c[E].fromWidthPercent=100*d:c[E].fromWidthPercent=Math.abs(c[E].from-N)/P*(s-l)+l,!isNaN(u)&&P*u>=0+(I+L)?c[E].toWidthPercent=100*d:c[E].toWidthPercent=Math.abs(c[E].to-N)/P*(s-l)+l),I+=L}else{var R=c[E].from-c[E].to;R+F>S&&(R=Math.max(0,S-F),c[E].to=c[E].from-R),100===s&&100===l||(c[E].funnel=!0,!isNaN(u)&&O*u>=F?c[E].fromWidthPercent=100*d:c[E].fromWidthPercent=Math.abs(c[E].from-C)/O*(s-l)+l,!isNaN(u)&&O*u>=0+(F+R)?c[E].toWidthPercent=100*d:c[E].toWidthPercent=Math.abs(c[E].to-C)/O*(s-l)+l),F+=R}}return c}},{key:"_columnAsPieSlice",value:function(e,t,r,i){var a=this._toPolarCoord(r,t,i.x,i.y),n=this._toPolarCoord(r,t,i.x,i.y+i.height),o=this.renderer._ptdist(r.x,r.y,n.x,n.y),s=this.renderer._ptdist(r.x,r.y,a.x,a.y),l=t.width,u=180*Math.abs(r.startAngle-r.endAngle)/Math.PI,d=-(i.x-t.x)*u/l,c=-(i.x+i.width-t.x)*u/l,h=r.startAngle;if(d-=h=360*h/(2*Math.PI),c-=h,e)if(void 0!==e.element&&null!==e.element){var f=this.renderer.pieSlicePath(r.x,r.y,o,s,c,d,0);f+=" Z",this.renderer.attr(e.element,{d:f})}else e.element=this.renderer.pieslice(r.x,r.y,o,s,c,d,0);return{fromAngle:c,toAngle:d,innerRadius:o,outerRadius:s}}},{key:"_setRenderInfo",value:function(e,t,r,i){this._renderData[e].offsets[t][r].elementInfo=i}},{key:"_getRenderInfo",value:function(e,t,r){return this._renderData[e].offsets[t][r].elementInfo||{}}},{key:"_animColumns",value:function(e,t){for(var r=e.groupIndex,i=this.seriesGroups[r],a=e.renderData,n=-1!==i.type.indexOf("waterfall"),o=this._getXAxis(r),s=-1!==i.type.indexOf("stacked"),l=e.polarAxisCoords,u=-1,d=0;d<i.series.length;d++)if(this._isSerieVisible(r,d)){u=d;break}for(var c=NaN,h=NaN,f=0;f<e.seriesCtx.length;f++){var p=e.seriesCtx[f];(isNaN(c)||c>p.xAdjust)&&(c=p.xAdjust),(isNaN(h)||h<p.xAdjust+p.columnWidth)&&(h=p.xAdjust+p.columnWidth)}var v=Math.abs(h-c),m=this._get([i.columnsGapPercent,25])/100;(isNaN(m)<0||m>=1)&&(m=.25);for(var y=m*v,g=e.renderData.xoffsets,b=-1,_={},x=!0===i.skipOverlappingPoints,w=g.first;w<=g.last;w++){var S=g.data[w];if(!(isNaN(S)||-1!==b&&Math.abs(S-b)<v-1+y&&x)){b=S;var k=this._getColumnVOffsets(a,r,e.seriesCtx,w,s,t),C=!1;if(n)for(var A=0;A<i.series.length;A++)i.series[A].summary&&g.xvalues[w][i.series[A].summary]&&(C=!0);for(var N=0;N<e.seriesCtx.length;N++){var M=(p=e.seriesCtx[N]).seriesIndex,T=i.series[M],D=k[N].from,O=k[N].to,P=k[N].xOffset,F=(e.vertical?e.rect.x:e.rect.y)+p.xAdjust,I=p.settings,E=0!==p.itemsColors.length?p.itemsColors[w-a.xoffsets.first]:p.serieColors,L=this._isSerieVisible(r,M);if(L){var R={x:S=this.renderer._ptrnd(F+P),width:p.columnWidth};k[N].funnel&&(R.fromWidthPercent=k[N].fromWidthPercent,R.toWidthPercent=k[N].toWidthPercent);var B=!0;e.vertical?(R.y=D,R.height=O-D,R.height<0&&(R.y+=R.height,R.height=-R.height,B=!1)):(R.x=D<O?D:O,R.width=Math.abs(D-O),B=D-O<0,R.y=S,R.height=p.columnWidth);var H=D-O;if(!isNaN(H)){H=Math.abs(H);var V=void 0,j=this._getRenderInfo(r,M,w),G=j.element,z=j.labelElement,$=null==G;if(z&&(this.renderer.removeElement(z),z=void 0),l){var U={element:G};V=this._columnAsPieSlice(U,e.rect,l,R),G=U.element,E=this._getColors(r,M,void 0,"radialGradient",V.outerRadius)}else if(k[N].funnel){var W=this._getTrapezoidPath(Object.assign({},R),e.vertical,B);$?G=this.renderer.path(W,{}):this.renderer.attr(G,{d:W})}else $?G=this.renderer.rect(R.x,R.y,e.vertical?R.width:0,e.vertical?0:R.height):!0===e.vertical?this.renderer.attr(G,{x:R.x,y:R.y,height:H}):this.renderer.attr(G,{x:R.x,y:R.y,width:H});if(H<1&&(1!==t||l)?this.renderer.attr(G,{display:"none"}):this.renderer.attr(G,{display:"block"}),$&&this.renderer.attr(G,{fill:E.fillColor,"fill-opacity":I.opacity,"stroke-opacity":I.opacity,stroke:E.lineColor,"stroke-width":I.stroke,"stroke-dasharray":I.dashStyle}),z&&this.renderer.removeElement(z),!L||0===H&&t<1)j={element:G,labelElement:z},this._setRenderInfo(r,M,w,j);else{if(n&&!1!==this._get([T.showWaterfallLines,i.showWaterfallLines])){if(!s||s&&N===u){var X=s?-1:N;if(1===t&&!isNaN(a.offsets[N][w].from)&&!isNaN(a.offsets[N][w].to)){var Y=_[X];if(null!=Y){var q={x:Y.x,y:this.renderer._ptrnd(Y.y)},J={x:S,y:q.y},Q=i.columnsTopWidthPercent/100;(isNaN(Q)||Q>1||Q<0)&&(Q=1);var Z=i.columnsBottomWidthPercent/100;(isNaN(Z)||Z>1||Z<0)&&(Z=1);var K=e.vertical?R.width:R.height;if(q.x=q.x-K/2+K/2*Q,C){var ee=K*Q/2;J.x=J.x+K/2-(o.flip?-ee:ee)}else{var te=K*Z/2;J.x=J.x+K/2-(o.flip?-te:te)}e.vertical||(this._swapXY([q]),this._swapXY([J])),this.renderer.line(q.x,q.y,J.x,J.y,{stroke:Y.color,"stroke-width":I.stroke,"stroke-opacity":I.opacity,"fill-opacity":I.opacity,"stroke-dasharray":I.dashStyle})}}}1===t&&0!==H&&(_[s?-1:N]={y:O,x:e.vertical?R.x+R.width:R.y+R.height,color:E.lineColor})}if(l){K=this._showLabel(r,M,w,R,void 0,void 0,!0);var re=V.outerRadius+10,ie=this._adjustTextBoxPosition(l.x,l.y,K,re,(V.fromAngle+V.toAngle)/2,!0,!1,!1);z=this._showLabel(r,M,w,{x:ie.x,y:ie.y},void 0,void 0,!1,!1,!1)}else z=this._showLabel(r,M,w,R,void 0,void 0,!1,!1,B);j={element:G,labelElement:z},this._setRenderInfo(r,M,w,j),1===t&&this._installHandlers(G,"column",r,M,w)}}}}}}}},{key:"_getTrapezoidPath",value:function(e,t,r){var i="",a=e.fromWidthPercent/100,n=e.toWidthPercent/100;if(!t){var o=e.width;e.width=e.height,e.height=o,o=e.x,e.x=e.y,e.y=o}var s=e.x+e.width/2,l=[{x:s-e.width*(r?n:a)/2,y:e.y+e.height},{x:s-e.width*(r?a:n)/2,y:e.y},{x:s+e.width*(r?a:n)/2,y:e.y},{x:s+e.width*(r?n:a)/2,y:e.y+e.height}];t||this._swapXY(l),i+="M "+this.renderer._ptrnd(l[0].x)+","+this.renderer._ptrnd(l[0].y);for(var u=1;u<l.length;u++)i+=" L "+this.renderer._ptrnd(l[u].x)+","+this.renderer._ptrnd(l[u].y);return i+=" Z"}},{key:"_swapXY",value:function(e){for(var t=0;t<e.length;t++){var r=e[t].x;e[t].x=e[t].y,e[t].y=r}}},{key:"_renderCandleStickSeries",value:function(e,t,r){var i=this,a=i.seriesGroups[e];if(a.series&&0!==a.series.length){var n="horizontal"===a.orientation,o=t;n&&(o={x:t.y,y:t.x,width:t.height,height:t.width});var s,l=i._calcGroupOffsets(e,o);if(l&&0!==l.xoffsets.length){(a.polar||a.spider)&&(s=i._getPolarAxisCoords(e,o));for(var u=i._getGroupGradientType(e),d=[],c=0;c<a.series.length;c++)d[c]=i._getColumnSerieWidthAndOffset(e,c);for(var h=0;h<a.series.length;h++)if(this._isSerieVisible(e,h)){var f=i._getSerieSettings(e,h),p=a.series[h];if(!p.customDraw){var v="function"==typeof p.colorFunction?void 0:i._getColors(e,h,NaN,u),m={rect:t,inverse:n,groupIndex:e,seriesIndex:h,symbolType:p.symbolType,symbolSize:p.symbolSize,"fill-opacity":f.opacity,"stroke-opacity":f.opacity,"stroke-width":f.stroke,"stroke-dasharray":f.dashStyle,gradientType:u,colors:v,renderData:l,polarAxisCoords:s,columnsInfo:d,isOHLC:r,items:[],self:i},y=i._getAnimProps(e,h),g=y.enabled&&!i._isToggleRefresh&&l.xoffsets.length<5e3?y.duration:0;i._animCandleStick(m,0),i._enqueueAnimation("series",void 0,void 0,g,(function(e,t,r){i._animCandleStick(t,r)}),m)}}}}}},{key:"_animCandleStick",value:function(e,t){var r=["Open","Low","Close","High"],i=e.columnsInfo[e.seriesIndex].width,a=e.self.seriesGroups[e.groupIndex],n=e.renderData.xoffsets,o=-1,s=Math.abs(n.data[n.last]-n.data[n.first]);s*=t;for(var l=NaN,u=NaN,d=0;d<e.columnsInfo.length;d++){var c=e.columnsInfo[d];(isNaN(l)||l>c.offset)&&(l=c.offset),(isNaN(u)||u<c.offset+c.width)&&(u=c.offset+c.width)}for(var h=Math.abs(u-l),f=!1!==a.skipOverlappingPoints,p=n.first;p<=n.last;p++){var v=n.data[p];if(!(isNaN(v)||-1!==o&&Math.abs(v-o)<h&&f)){if(Math.abs(n.data[p]-n.data[n.first])>s)break;o=v;var m=e.items[p]=e.items[p]||{};for(var y in r){var g=e.self._getDataValueAsNumber(p,a.series[e.seriesIndex]["dataField"+r[y]],e.groupIndex);if(isNaN(g))break;var b=e.renderData.offsets[e.seriesIndex][p][r[y]];if(isNaN(b))break;m[r[y]]=b}if(v+=e.inverse?e.rect.y:e.rect.x,e.polarAxisCoords){var _=this._toPolarCoord(e.polarAxisCoords,this._plotRect,v,b);v=_.x,b=_.y}for(var x in v=this.renderer._ptrnd(v),r)m[x]=this.renderer._ptrnd(m[x]);var w=e.colors;if(w||(w=e.self._getColors(e.groupIndex,e.seriesIndex,p,e.gradientType)),e.isOHLC){var S="M"+v+","+m.Low+" L"+v+","+m.High+" M"+(v-i/2)+","+m.Open+" L"+v+","+m.Open+" M"+(v+i/2)+","+m.Close+" L"+v+","+m.Close;e.inverse&&(S="M"+m.Low+","+v+" L"+m.High+","+v+" M"+m.Open+","+(v-i/2)+" L"+m.Open+","+v+" M"+m.Close+","+v+" L"+m.Close+","+(v+i/2)),(k=m.lineElement)||(k=this.renderer.path(S,{}),this.renderer.attr(k,{fill:w.fillColor,"fill-opacity":e["fill-opacity"],"stroke-opacity":e["fill-opacity"],stroke:w.lineColor,"stroke-width":e["stroke-width"],"stroke-dasharray":e["stroke-dasharray"]}),m.lineElement=k),1===t&&this._installHandlers(k,"column",e.groupIndex,e.seriesIndex,p)}else{var k;(k=m.lineElement)||(k=e.inverse?this.renderer.line(m.Low,v,m.High,v):this.renderer.line(v,m.Low,v,m.High),this.renderer.attr(k,{fill:w.fillColor,"fill-opacity":e["fill-opacity"],"stroke-opacity":e["fill-opacity"],stroke:w.lineColor,"stroke-width":e["stroke-width"],"stroke-dasharray":e["stroke-dasharray"]}),m.lineElement=k);var C=m.stickElement;if(v-=i/2,!C){var A=w.fillColor;m.Close<=m.Open&&w.fillColorAlt&&(A=w.fillColorAlt),C=e.inverse?this.renderer.rect(Math.min(m.Open,m.Close),v,Math.abs(m.Close-m.Open),i):this.renderer.rect(v,Math.min(m.Open,m.Close),i,Math.abs(m.Close-m.Open)),this.renderer.attr(C,{fill:A,"fill-opacity":e["fill-opacity"],"stroke-opacity":e["fill-opacity"],stroke:w.lineColor,"stroke-width":e["stroke-width"],"stroke-dasharray":e["stroke-dasharray"]}),m.stickElement=C}1===t&&this._installHandlers(C,"column",e.groupIndex,e.seriesIndex,p)}}}}},{key:"_renderScatterSeries",value:function(e,t,r){var i=this.seriesGroups[e];if(i.series&&0!==i.series.length){var a=-1!==i.type.indexOf("bubble"),n="horizontal"===i.orientation,o=t;n&&(o={x:t.y,y:t.x,width:t.height,height:t.width});var s=this._calcGroupOffsets(e,o);if(s&&0!==s.xoffsets.length){var l,u=o.width;(i.polar||i.spider)&&(u=2*(l=this._getPolarAxisCoords(e,o)).r);var d=this._getGroupGradientType(e);r||(r="to");for(var c=0;c<i.series.length;c++){var h=this._getSerieSettings(e,c),f=i.series[c];if(!f.customDraw){var p=f.dataField,v="function"==typeof f.colorFunction,m=this._getColors(e,c,NaN,d),y=NaN,g=NaN;if(a)for(var b=s.xoffsets.first;b<=s.xoffsets.last;b++)"number"!=typeof(M=this._getDataValueAsNumber(b,f.radiusDataField||f.sizeDataField,e))&&this.error(this.localize("invalidRadiusDataField",{index:b})),isNaN(M)||((isNaN(y)||M<y)&&(y=M),(isNaN(g)||M>g)&&(g=M));var _=f.minRadius||f.minSymbolSize;isNaN(_)&&(_=u/50);var x=f.maxRadius||f.maxSymbolSize;isNaN(x)&&(x=u/25),_>x&&(x=_);var w=f.radius;w=isNaN(w)&&!isNaN(f.symbolSize)?"circle"===f.symbolType?f.symbolSize/2:f.symbolSize:5;for(var S=this._getAnimProps(e,c),k=S.enabled&&!this._isToggleRefresh&&s.xoffsets.length<5e3?S.duration:0,C={groupIndex:e,seriesIndex:c,symbolType:f.symbolType,symbolSize:f.symbolSize,"fill-opacity":h.opacity,"stroke-opacity":h.opacity,"stroke-width":h.stroke,"stroke-width-symbol":h.strokeSymbol,"stroke-dasharray":h.dashStyle,items:[],polarAxisCoords:l},A=void 0,N=s.xoffsets.first;N<=s.xoffsets.last;N++){var M;if("number"==typeof(M=this._getDataValueAsNumber(N,p,e))){var T=s.xoffsets.data[N],D=s.xoffsets.xvalues[N],O=s.offsets[c][N][r];if(!(O<o.y||O>o.y+o.height||isNaN(T)||isNaN(O))){if(n){var P=T;T=O,O=P+t.y}else T+=t.x;if(!(!v&&A&&this.enableSampling&&this.renderer._ptdist(A.x,A.y,T,O)<1)){A={x:T,y:O};var F=w;if(a){var I=this._getDataValueAsNumber(N,f.radiusDataField||f.sizeDataField,e);if("number"!=typeof I)continue;F=_+(x-_)*(I-y)/Math.max(1,g-y),isNaN(F)&&(F=_)}s.offsets[c][N].radius=F;var E=NaN,L=NaN,R=0,B=this._elementRenderInfo;if(null!=D&&B&&B.length>e&&B[e].series.length>c){var H=B[e].series[c][D];H&&!isNaN(H.to)&&(E=H.to,L=H.xoffset,R=w,n?(P=L,L=E,E=P+t.y):L+=t.x,a&&(R=_+(x-_)*(H.valueRadius-y)/Math.max(1,g-y),isNaN(R)&&(R=_)))}v&&(m=this._getColors(e,c,N,d)),C.items.push({from:R,to:F,itemIndex:N,fill:m.fillColor,stroke:m.lineColor,x:T,y:O,xFrom:L,yFrom:E})}}}}this._animR(C,0);var V=this;this._enqueueAnimation("series",void 0,void 0,k,(function(e,t,r){V._animR(t,r)}),C)}}}}}},{key:"_animR",value:function(e,t){for(var r=e.items,i=e.symbolType||"circle",a=e.symbolSize,n=0;n<r.length;n++){var o=r[n],s=o.x,l=o.y,u=Math.round((o.to-o.from)*t+o.from);if(isNaN(o.yFrom)||(l=o.yFrom+(l-o.yFrom)*t),isNaN(o.xFrom)||(s=o.xFrom+(s-o.xFrom)*t),e.polarAxisCoords){var d=this._toPolarCoord(e.polarAxisCoords,this._plotRect,s,l);s=d.x,l=d.y}s=this.renderer._ptrnd(s),l=this.renderer._ptrnd(l),u=this.renderer._ptrnd(u);var c=this._getRenderInfo(e.groupIndex,e.seriesIndex,r[n].itemIndex),h=c.element,f=c.labelElement;"circle"===i?(h||(h=this.renderer.circle(s,l,u),this.renderer.attr(h,{fill:o.fill,"fill-opacity":e["fill-opacity"],"stroke-opacity":e["fill-opacity"],stroke:o.stroke,"stroke-width":e["stroke-width"],"stroke-dasharray":e["stroke-dasharray"]})),this.renderer.attr(h,{r:u,cy:l,cx:s})):(h&&this.renderer.removeElement(h),h=this._drawSymbol(i,s,l,o.fill,e["fill-opacity"],o.stroke,e["stroke-opacity"]||e["fill-opacity"],e["stroke-width-symbol"],e["stroke-dasharray"],a||u)),f&&this.renderer.removeElement(f),f=this._showLabel(e.groupIndex,e.seriesIndex,o.itemIndex,{x:s-u,y:l-u,width:2*u,height:2*u}),t>=1&&this._installHandlers(h,"circle",e.groupIndex,e.seriesIndex,o.itemIndex),this._setRenderInfo(e.groupIndex,e.seriesIndex,r[n].itemIndex,{element:h,labelElement:f})}}},{key:"_showMultiSeriesToolTip",value:function(e){for(var t=this,r="<div style='text-align:left'>",i="",a=0;a<t.seriesGroups.length;a++)if(!t._isPieGroup(a)){var n=t._getXAxis(a),o=t._getValueAxis(a),s=t.seriesGroups[a],l=this._getAxisSettings(n),u=this._getFormatSettings(l,"toolTipFormatSettings"),d=l.toolTipFormatFunction,c=t._getDataValue(e,n.dataField,a);void 0!==n.dataField&&null!==n.dataField&&""!==n.dataField||(c=e),"date"===n.type&&(c=t._castAsDate(c,(u?u.dateFormat:void 0)||n.dateFormat)),d||u||"date"!==n.type||(d=this._getDefaultDTFormatFn(n.baseUnit||"day"));var h=n.displayText||n.dataField||"";""!==h&&(h+=": ");var f=h+t._formatValue(c,u,d,a,void 0,e);i!==f&&(""!==i&&(r+="<br />"),r+=f+"<br /><br />",i=f);for(var p=0;p<s.series.length;p++){var v=s.series[p];if(!1!==s.showToolTips&&!1!==v.showToolTips&&t._isSerieVisible(a,p)){var m=t._get([t._getFormatSettings(v,"toolTipFormatSettings"),t._getFormatSettings(s,"toolTipFormatSettings"),t._getFormatSettings(o,"toolTipFormatSettings"),t._getFormatSettings(t,"toolTipFormatSettings")]),y=t._get([v.toolTipFormatFunction,s.toolTipFormatFunction,o.toolTipFormatFunction,t.toolTipFormatFunction]),g=t._getFormattedValue(a,p,e,m,y);r+='<span style="color:'+t._getColors(a,p,e).lineColor+';">'+g+"</span><br />\n"}}}var b=this._get([t.toolTipClass,"smart-chart-tooltip-text"]),_=this._get([t.toolTipBackground,t._getThemeColor("background")]),x=this._get([t.toolTipLineColor,t._getThemeColor("line")]),w=this._get([t.toolTipOpacity,1]);r+="</div>";var S=this.getItemCoord(t._ttEl.gidx,t._ttEl.sidx,t._ttEl.iidx);S.x+=window.pageXOffset,S.y+=window.pageYOffset,t._createTooltip(S,t.seriesGroups[t._ttEl.gidx],r,{css:b,fill:_,stroke:x,fillOpacity:w,symbolSize:3})}},{key:"_showToolTip",value:function(e,t,r,i,a){var n=this,o=n._getXAxis(r),s=n._getValueAxis(r);if(!n._ttEl||r!==n._ttEl.gidx||i!==n._ttEl.sidx||a!==n._ttEl.iidx){var l=n.seriesGroups[r],u=l.series[i],d=n.enableCrosshairs;n._pointMarker?(e=parseInt(n._pointMarker.x+5),t=parseInt(n._pointMarker.y-5)):d=!1;var c=d&&!1===n.showToolTips;if(e=this.renderer._ptrnd(e),t=this.renderer._ptrnd(t),!1!==l.showToolTips&&!1!==u.showToolTips){n._ttEl||(n._ttEl={}),n._ttEl.sidx=i,n._ttEl.gidx=r,n._ttEl.iidx=a;for(var h=0,f=0;f<n.seriesGroups.length;f++)for(var p=0;p<n.seriesGroups[f].series.length;p++)h++;if(d){var v=this.renderer._ptrnd(n._pointMarker.x),m=this.renderer._ptrnd(n._pointMarker.y),y=n.crosshairsColor||n._getThemeColor("line");if(l.polar||l.spider){var g=this._getPolarAxisCoords(r,this._plotRect);if(this.renderer._ptdist(v,m,g.x,g.y)>g.r)return;var b=Math.atan2(m-g.y,v-g.x),_=Math.cos(b)*g.r+g.x,x=Math.sin(b)*g.r+g.y;n._ttEl.vLine?n.renderer.attr(n._ttEl.vLine,{x1:g.x,y1:g.y,x2:_,y2:x}):n._ttEl.vLine=n.renderer.line(g.x,g.y,_,x,{stroke:y,"stroke-width":n.crosshairsLineWidth||1,"stroke-dasharray":n.crosshairsDashStyle||""})}else n._ttEl.vLine&&n._ttEl.hLine?(n.renderer.attr(n._ttEl.vLine,{x1:v,x2:v}),n.renderer.attr(n._ttEl.hLine,{y1:m,y2:m})):(n._ttEl.vLine=n.renderer.line(v,n._plotRect.y,v,n._plotRect.y+n._plotRect.height,{stroke:y,"stroke-width":n.crosshairsLineWidth||1,"stroke-dasharray":n.crosshairsDashStyle||""}),n._ttEl.hLine=n.renderer.line(n._plotRect.x,m,n._plotRect.x+n._plotRect.width,m,{stroke:y,"stroke-width":n.crosshairsLineWidth||1,"stroke-dasharray":n.crosshairsDashStyle||""}))}if(n.showToolTipsOnAllSeries&&!n._isPieGroup(r)&&h>1)n._showMultiSeriesToolTip(a);else{var w=n._get([n._getFormatSettings(u,"toolTipFormatSettings"),n._getFormatSettings(l,"toolTipFormatSettings"),n._getFormatSettings(s,"toolTipFormatSettings"),n._getFormatSettings(n,"toolTipFormatSettings")]),S=n._get([u.toolTipFormatFunction,l.toolTipFormatFunction,s.toolTipFormatFunction,n.toolTipFormatFunction]),k=n._getColors(r,i,a),C=n._getDataValue(a,o.dataField,r);void 0!==o.dataField&&null!==o.dataField&&""!==o.dataField||(C=a),"date"===o.type&&(C=n._castAsDate(C,(w?w.dateFormat:void 0)||o.dateFormat));var A="";if("function"==typeof S){var N={},M=0;for(var T in u)0===T.indexOf("dataField")&&(N[T.substring(9,T.length).toLowerCase()]=n._getDataValue(a,u[T],r),M++);0===M?N=n._getDataValue(a,void 0,r):1===M&&(N=N[""]),A=S(N,a,u,l,C,o)}else{A=n._getFormattedValue(r,i,a,w,S);var D=this._getAxisSettings(o),O=n._getFormatSettings(D,"toolTipFormatSettings"),P=D.toolTipFormatFunction;P||O||"date"!==o.type||(P=this._getDefaultDTFormatFn(o.baseUnit||"day"));var F=n._formatValue(C,O,P,r,i,a);if(n._isPieGroup(r))C=n._getDataValue(a,u.displayText||u.dataField,r),A=(F=n._formatValue(C,O,P,r,i,a))+": "+A;else{var I=o.displayText||o.dataField||"";A=I.length>0?I+": "+F+"<br>"+A:F+"<br>"+A}}if(!c&&!1!==n.showToolTips){var E=this._get([u.toolTipClass,l.toolTipClass,n.toolTipClass,"smart-chart-tooltip-text"]),L=this._get([u.toolTipBackground,l.toolTipBackground,n.toolTipBackground,n._getThemeColor("background")]),R=this._get([u.toolTipLineColor,l.toolTipLineColor,n.toolTipLineColor,k.lineColor,n._getThemeColor("line")]),B=this._get([u.toolTipOpacity,l.toolTipOpacity,n.toolTipOpacity,1]),H=this.getItemCoord(r,i,a);H.y=Math.min(Math.max(H.y,this._plotRect.y),this._plotRect.y+this._plotRect.y+this._plotRect.height);var V=0;n._pointMarker&&n._pointMarker.element&&(V=u.symbolSizeSelected,isNaN(V)&&(V=u.symbolSize),(isNaN(V)||V>50||V<0)&&(V=l.symbolSize),(isNaN(V)||V>50||V<0)&&(V=8)),n._createTooltip(H,l,A,{css:E,fill:L,stroke:R,fillOpacity:B,symbolSize:V})}}}}}},{key:"_fitTooltip",value:function(e,t,r,i,a){var n={},o=2+a/2;if(t.x-r.width-7-o>e.x&&t.y+t.height/2-r.height/2>e.y&&t.y+t.height/2+r.height/2<e.y+e.height&&(n.left={arrowLocation:"right",x:t.x-r.width-7-o,y:t.y+t.height/2-r.height/2,width:r.width+7,height:r.height}),t.x+t.width+r.width+7+o<e.x+e.width&&t.y+t.height/2-r.height/2>e.y&&t.y+t.height/2+r.height/2<e.y+e.height&&(n.right={arrowLocation:"left",x:t.x+t.width+o,y:t.y+t.height/2-r.height/2,width:r.width+7,height:r.height}),t.y-r.height-o-7>e.y&&t.x+t.width/2-r.width/2>e.x&&t.x+t.width/2+r.width/2<e.x+e.width&&(n.top={arrowLocation:"bottom",x:t.x+t.width/2-r.width/2,y:t.y-r.height-o-7,width:r.width,height:r.height+7}),t.y+t.height+r.height+7+o<e.y+e.height&&t.x+t.width/2-r.width/2>e.x&&t.x+t.width/2+r.width/2<e.x+e.width&&(n.bottom={arrowLocation:"top",x:t.x+t.width/2-r.width/2,y:t.y+t.height+o,width:r.width,height:r.height+7}),t.width>t.height||(-1!==i.type.indexOf("stackedcolumn")||-1!==i.type.indexOf("stackedwaterfall"))&&"horizontal"!==i.orientation){if(n.left)return n.left;if(n.right)return n.right}else{if(n.top)return n.top;if(n.bottom)return n.bottom}for(var s in n)if(n[s])return n[s];return{arrowLocation:""}}},{key:"_createTooltip",value:function(e,t,r,i){var a=this,n=t.type,o=a._ttEl.box;if(!o){(o=a._ttEl.box=document.createElement("div")).id=a.id+"Tooltip",o.className="smart-chart-tooltip",o.setAttribute("animation",a.animation),o.setAttribute("theme",a.theme),o.setAttribute("role","tooltip");var s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div");if(s.className="smart-chart-tooltip-arrow-outer",s.setAttribute("role","presentation"),l.className="smart-chart-tooltip-arrow-inner",l.setAttribute("role","presentation"),u.className="smart-chart-tooltip-content",u.setAttribute("role","presentation"),o.appendChild(u),o.appendChild(s),o.appendChild(l),document.body.appendChild(o),a.hasAttribute("aria-owns")){var d=a.getAttribute("aria-owns");a.setAttribute("aria-owns",d+" "+o.id)}else a.setAttribute("aria-owns",o.id)}if(r&&0!==r.length){a.rightToLeft?o.setAttribute("right-to-left",""):o.removeAttribute("right-to-left"),o.classList.add("smart-visibility-hidden");var c=o.firstElementChild,h=o.children[1],f=o.children[2];f.style.opacity=h.style.opacity=i.fillOpacity,c.style.backgroundColor=i.fill,c.style.borderColor=i.stroke,c.style.opacity=i.fillOpacity;var p='<span class="'+i.css+'" role="presentation">'+r+"</span>";c.innerHTML=p;var v=a._measureHtml(p),m=a._plotRect;if(!(v.width>m.width||v.height>m.height)){var y={width:v.width,height:v.height},g="",b=a._isColumnType(n),_=Math.max(e.x,m.x),x=Math.max(e.y,m.y);if(-1!==n.indexOf("pie")||-1!==n.indexOf("donut")){var w=(e.fromAngle+e.toAngle)/2;w*=Math.PI/180;var S=!isNaN(e.innerRadius)&&e.innerRadius>0?(e.innerRadius+e.outerRadius)/2:.75*e.outerRadius;_=e.x=e.center.x+Math.cos(w)*S,x=e.y=e.center.y-Math.sin(w)*S,e.width=e.height=1}else b&&(t.polar||t.spider)&&(e.width=e.height=1);var k=this._fitTooltip(this._plotRect,e,y,t,i.symbolSize);""!==k.arrowLocation&&(g=k.arrowLocation,_=k.x,x=k.y,y.width=k.width,y.height=k.height),"top"===g||"bottom"===g?(y.height+=7,_-=3.5,"bottom"===g&&(x-=7)):"left"!==g&&"right"!==g||(y.width+=7,x-=3.5,"right"===g&&(_-=7)),_+y.width>m.x+m.width&&(g="",_=m.x+m.width-y.width),x+y.height>m.y+m.height&&(g="",x=m.y+m.height-y.height);var C={x:0,y:0},A={x:0,y:0};switch(c.style.width=v.width+"px",c.style.height=v.height+"px",h.style["margin-top"]=h.style["margin-left"]=0,f.style["margin-top"]=f.style["margin-left"]=0,c.style["margin-top"]=c.style["margin-left"]=0,g){case"left":C={x:0,y:(v.height-7)/2},A={x:7,y:0},c.style["margin-left"]="7px",h.style["margin-left"]="0px",h.style["margin-top"]=C.y+"px",h.style["border-left"]="",h.style["border-right"]="7px solid "+i.stroke,h.style["border-top"]="7px solid transparent",h.style["border-bottom"]="7px solid transparent",f.style["margin-left"]="1px",f.style["margin-top"]=C.y+"px",f.style["border-left"]="",f.style["border-right"]="7px solid "+i.fill,f.style["border-top"]="7px solid transparent",f.style["border-bottom"]="7px solid transparent";break;case"right":C={x:y.width-7,y:(v.height-7)/2},A={x:0,y:0},h.style["margin-left"]=C.x+"px",h.style["margin-top"]=C.y+"px",h.style["border-left"]="7px solid "+i.stroke,h.style["border-right"]="",h.style["border-top"]="7px solid transparent",h.style["border-bottom"]="7px solid transparent",f.style["margin-left"]=C.x-1+"px",f.style["margin-top"]=C.y+"px",f.style["border-left"]="7px solid "+i.fill,f.style["border-right"]="",f.style["border-top"]="7px solid transparent",f.style["border-bottom"]="7px solid transparent";break;case"top":C={x:y.width/2-3.5,y:0},A={x:0,y:7},c.style["margin-top"]=A.y+"px",h.style["margin-left"]=C.x+"px",h.style["border-top"]="",h.style["border-bottom"]="7px solid "+i.stroke,h.style["border-left"]="7px solid transparent",h.style["border-right"]="7px solid transparent",f.style["margin-left"]=C.x+"px",f.style["margin-top"]="1px",f.style["border-top"]="",f.style["border-bottom"]="7px solid "+i.fill,f.style["border-left"]="7px solid transparent",f.style["border-right"]="7px solid transparent";break;case"bottom":C={x:y.width/2-3.5,y:y.height-7},A={x:0,y:0},h.style["margin-left"]=C.x+"px",h.style["margin-top"]=C.y+"px",h.style["border-top"]="7px solid "+i.stroke,h.style["border-bottom"]="",h.style["border-left"]="7px solid transparent",h.style["border-right"]="7px solid transparent",f.style["margin-left"]=C.x+"px",f.style["margin-top"]=C.y-1+"px",f.style["border-top"]="7px solid "+i.fill,f.style["border-bottom"]="",f.style["border-left"]="7px solid transparent",f.style["border-right"]="7px solid transparent"}""===g?(h.classList.add("smart-hidden"),f.classList.add("smart-hidden")):(h.classList.remove("smart-hidden"),f.classList.remove("smart-hidden")),o.style.width=y.width+"px",o.style.height=y.height+"px";var N=a.getBoundingClientRect();o.style.left=_+N.left+window.pageXOffset+"px",o.style.top=x+N.top+window.pageYOffset+"px",o.classList.remove("smart-visibility-hidden")}}else o.classList.add("smart-visibility-hidden")}},{key:"_measureHtml",value:function(e){var t=this,r=t._measureDiv;r||(t._measureDiv=r=document.createElement("div"),r.className="smart-chart-tooltip",r.style.position="absolute",r.style.visibility="hidden",r.style.left=0,r.style.top=0,(t.shadowRoot||t).appendChild(r)),r.innerHTML=e;var i={width:r.offsetWidth+2,height:r.offsetHeight+2};return Smart.Utilities.Core.Browser.Firefox&&(i.height+=3),i}},{key:"_hideToolTip",value:function(){this._ttEl&&(this._ttEl.box&&this._ttEl.box.classList.add("smart-visibility-hidden"),this._hideCrosshairs(),this._ttEl.gidx=void 0)}},{key:"_hideCrosshairs",value:function(){this._ttEl&&(this._ttEl.vLine&&(this.renderer.removeElement(this._ttEl.vLine),this._ttEl.vLine=void 0),this._ttEl.hLine&&(this.renderer.removeElement(this._ttEl.hLine),this._ttEl.hLine=void 0))}},{key:"_get",value:function(e){return this._draw.getByPriority(e)}},{key:"_getAxisSettings",value:function(e){if(!e)return{};var t=e.gridLines||{},r={visible:this._get([t.visible,!0]),color:this._get([t.color,this._getThemeColor("line")]),unitInterval:t.unitInterval,step:t.step,dashStyle:t.dashStyle,width:this._get([t.lineWidth,1]),offsets:[],alternatingBackgroundColor:e.alternatingBackgroundColor,alternatingBackgroundColor2:e.alternatingBackgroundColor2,alternatingBackgroundOpacity:e.alternatingBackgroundOpacity},i=e.tickMarks||{},a={visible:this._get([i.visible,e.showTickMarks,!0]),color:this._get([i.color,e.tickMarksColor,this._getThemeColor("line")]),unitInterval:this._get([i.unitInterval,i.interval,e.tickMarksInterval]),step:this._get([i.step,e.tickMarksStep]),dashStyle:this._get([i.dashStyle,e.tickMarksDashStyle]),width:this._get([i.lineWidth,1]),size:this._get([i.size,4]),offsets:[]},n=e.title||{},o={visible:this._get([n.visible,!0]),text:this._get([e.description,n.text]),style:this._get([e.descriptionClass,n.class,"smart-chart-axis-description"]),halign:this._get([e.horizontalDescriptionAlignment,n.horizontalAlignment,"center"]),valign:this._get([e.verticalDescriptionAlignment,n.verticalAlignment,"center"]),angle:0,rotationPoint:this._get([n.rotationPoint,"centercenter"]),offset:this._get([n.offset,{x:0,y:0}])},s=e.line||{},l={visible:this._get([s.visible,!0]),color:this._get([s.color,r.color,this._getThemeColor("line")]),dashStyle:this._get([s.dashStyle,r.dashStyle,""]),width:this._get([s.lineWidth,1]),angle:this._get([s.angle,NaN])},u=e.padding||{};u={left:u.left||0,right:u.right||0,top:u.top||0,bottom:u.bottom||0};var d=this._getAxisLabelsSettings(e);return{visible:this._get([e.visible,!0]),customDraw:this._get([e.customDraw,!1]),gridLines:r,tickMarks:a,line:l,title:o,labels:d,padding:u,toolTipFormatFunction:this._get([e.toolTipFormatFunction,e.formatFunction,d.formatFunction]),toolTipFormatSettings:this._get([this._getFormatSettings(e,"toolTipFormatSettings"),this._getFormatSettings(e),this._getFormatSettings(d)])}}},{key:"_getAxisLabelsSettings",value:function(e){var t=e.labels||{};return{visible:this._get([e.showLabels,t.visible,!0]),unitInterval:this._get([t.unitInterval,t.interval,e.labelsInterval]),step:this._get([t.step,e.labelsStep]),angle:this._get([e.textRotationAngle,t.angle,0]),style:this._get([e.class,t.class,"smart-chart-axis-text"]),halign:this._get([e.horizontalTextAlignment,t.horizontalAlignment,"center"]),valign:this._get([e.verticalTextAlignment,t.verticalAlignment,"center"]),textRotationPoint:this._get([e.textRotationPoint,t.rotationPoint,"auto"]),textOffset:this._get([e.textOffset,t.offset,{x:0,y:0}]),autoRotate:this._get([e.labelsAutoRotate,t.autoRotate,!1]),formatSettings:this._get([this._getFormatSettings(e),this._getFormatSettings(t),void 0]),formatFunction:this._get([e.formatFunction,t.formatFunction,void 0])}}},{key:"_getLabelsSettings",value:function(e,t,r,i){for(var a=this.seriesGroups[e],n=a.series[t],o=isNaN(r)?void 0:this._getDataValue(r,n.dataField,e),s=i||["Visible","Offset","Angle","HorizontalAlignment","VerticalAlignment","Class","BackgroundColor","BorderColor","BorderOpacity","Padding","Opacity","BackgroundOpacity","LinesAngles","LinesEnabled","AutoRotate","Radius"],l={},d=0;d<s.length;d++){var c=s[d],h="labels"+c,f="label"+c,p=c.substring(0,1).toLowerCase()+c.substring(1),v=void 0;a.labels&&"object"==u(a.labels)&&(v=a.labels[p]),n.labels&&"object"==u(n.labels)&&void 0!==n.labels[p]&&null!==n.labels[p]&&(v=n.labels[p]),v=this._get([n[h],n[f],v,a[h],a[f]]),l[p]="function"==typeof v?v(o,r,n,a):v}l.class=l.class||"smart-chart-label-text",l.visible=this._get([l.visible,n.showLabels,a.showLabels,void 0!==n.labels&&null!==n.labels||void 0,void 0!==a.labels&&null!==a.labels||void 0]);var m=l.padding||1;return l.padding={left:this._get([m.left,isNaN(m)?1:m]),right:this._get([m.right,isNaN(m)?1:m]),top:this._get([m.top,isNaN(m)?1:m]),bottom:this._get([m.bottom,isNaN(m)?1:m])},l}},{key:"_showLabel",value:function(e,t,r,i,a,n,o,s,l,u,d){var c={width:0,height:0};if(!isNaN(r)){var h=this._getLabelsSettings(e,t,r);if(!h.visible)return o?c:void 0;if(i.width<0||i.height<0)return o?c:void 0;var f=h.angle;isNaN(u)||(f=u);var p=h.offset||{},v={x:p.x,y:p.y};isNaN(v.x)&&(v.x=0),isNaN(v.y)&&(v.y=0),a=a||h.horizontalAlignment||"center",n=n||h.verticalAlignment||"center";var m=this._getFormattedValue(e,t,r,void 0,void 0,!0),y=i.width,g=i.height;if(!0===s&&"center"!==a&&(a="right"===a?"left":"right"),!0===l&&"center"!==n&&"middle"!==n&&(n="top"===n?"bottom":"top",v.y*=-1),c=this.renderer.measureText(m,f,{class:h.class}),o)return c;var b=0,_=0;y>0&&(""===a||"center"===a?b+=(y-c.width)/2:"right"===a&&(b+=y-c.width)),g>0&&(""===n||"center"===n?_+=(g-c.height)/2:"bottom"===n&&(_+=g-c.height)),b+=i.x+v.x,_+=i.y+v.y;var x=this._plotRect;b<=x.x&&(b=x.x+2),_<=x.y&&(_=x.y+2);var w,S=Math.max(c.width,1),k=Math.max(c.height,1);_+k>=x.y+x.height&&(_=x.y+x.height-k-2),b+S>=x.x+x.width&&(b=x.x+x.width-S-2);var C=h.backgroundColor,A=h.borderColor,N=h.padding;(C||A)&&(w=this.renderer.beginGroup(),this.renderer.rect(b-N.left,_-N.top,c.width+N.left+N.right,c.height+N.bottom+N.bottom,{fill:C||"transparent","fill-opacity":h.backgroundOpacity||1,stroke:A||"transparent","stroke-opacity":h.borderOpacity,"stroke-width":1}));var M=this.renderer.text(m,b,_,c.width,c.height,f,{class:h.class,opacity:h.opacity||1},!1,"center","center",void 0,arguments[11]);return d&&(d.x=b-N.left,d.y=_-N.top,d.width=c.width+N.left+N.right,d.height=c.height+N.bottom+N.bottom),w&&this.renderer.endGroup(),w||M}}},{key:"_getAnimProps",value:function(e,t){var r=this.seriesGroups[e],i=isNaN(t)?void 0:r.series[t],a=this.hasAnimation;r.animation&&(a="none"!==r.animation),i&&i.animation&&(a="none"!==i.animation);var n=this.animationDuration;isNaN(n)&&(n=1e3);var o=r.animationDuration;if(isNaN(o)||(n=o),i){var s=i.animationDuration;isNaN(s)||(n=s)}return n>5e3&&(n=1e3),{enabled:a,duration:n}}},{key:"_isColorTransition",value:function(e,t,r,i){if(i-1<r.xoffsets.first)return!1;var a=this._getColors(e,t,i,this._getGroupGradientType(e)),n=this._getColors(e,t,i-1,this._getGroupGradientType(e));return a.fillColor!==n.fillColor}},{key:"_renderLineSeries",value:function(e,t){var r=this.seriesGroups[e];if(r.series&&0!==r.series.length){var i=-1!==r.type.indexOf("area"),a=-1!==r.type.indexOf("stacked"),n=a&&-1!==r.type.indexOf("100"),o=-1!==r.type.indexOf("spline"),s=-1!==r.type.indexOf("step"),l=-1!==r.type.indexOf("range"),u=!0===r.polar||!0===r.spider;if(u&&(s=!1),!s||!o){var d="horizontal"===r.orientation,c=!0===this._getXAxis(e).flip,h=t;d&&(h={x:t.y,y:t.x,width:t.height,height:t.width});var f=this._calcGroupOffsets(e,h);if(f&&0!==f.xoffsets.length){this._linesRenderInfo||(this._linesRenderInfo={}),this._linesRenderInfo[e]={};for(var p=r.series.length-1;p>=0;p--){var v=this._getSerieSettings(e,p),m={groupIndex:e,rect:h,serieIndex:p,swapXY:d,isArea:i,isSpline:o,isRange:l,isPolar:u,settings:v,segments:[],pointsLength:0};if(this._isSerieVisible(e,p)){var y=r.series[p];if(!y.customDraw){var g,b="function"==typeof y.colorFunction,_=f.xoffsets.first,x=_,w=this._getColors(e,p,NaN,this._getGroupGradientType(e));do{var S=[],k=[],C=[],A=0,N=0,M=NaN,T=NaN,D=NaN;if(!(f.xoffsets.length<1)){var O=this._getAnimProps(e,p),P=O.enabled&&!this._isToggleRefresh&&f.xoffsets.length<1e4&&O.duration,F=_;g=!1;for(var I=void 0,E=_;E<=f.xoffsets.last;E++){_=E;var L=f.xoffsets.data[E],R=f.xoffsets.xvalues[E];if(!(isNaN(L)||(A=L=Math.max(L,1),N=f.offsets[p][E].to,!b&&I&&this.enableSampling&&this.renderer._ptdist(I.x,I.y,A,N)<1))){I={x:A,y:N};var B=f.offsets[p][E].from;if(isNaN(N)||isNaN(B)){if("connect"===y.emptyPointsDisplay)continue;if("zero"!==y.emptyPointsDisplay){g=!0;break}isNaN(N)&&(N=f.baseOffset),isNaN(B)&&(B=f.baseOffset)}if(b&&this._isColorTransition(e,p,f,_)&&S.length>1){_--;break}var H=this._elementRenderInfo;if(H&&H.length>e&&H[e].series.length>p){var V=H[e].series[p][R],j=(D=this.renderer._ptrnd(V?V.to:void 0),this.renderer._ptrnd(h.x+(V?V.xoffset:void 0)));C.push(d?{y:j,x:D,index:E}:{x:j,y:D,index:E})}x=E,v.stroke<2&&(N-h.y<=1&&(N=h.y+1),B-h.y<=1&&(B=h.y+1),h.y+h.height-N<=1&&(N=h.y+h.height-1),h.y+h.height-B<=1&&(B=h.y+h.height-1)),!i&&n&&(N<=h.y&&(N=h.y+1),N>=h.y+h.height&&(N=h.y+h.height-1),B<=h.y&&(B=h.y+1),B>=h.y+h.height&&(B=h.y+h.height-1)),A=(L=Math.max(L,1))+h.x,!0===r.skipOverlappingPoints&&!isNaN(M)&&Math.abs(M-A)<=1||(!s||isNaN(M)||isNaN(T)||T!==N&&S.push(d?{y:A,x:this.renderer._ptrnd(T)}:{x:A,y:this.renderer._ptrnd(T)}),S.push(d?{y:A,x:this.renderer._ptrnd(N),index:E}:{x:A,y:this.renderer._ptrnd(N),index:E}),k.push(d?{y:A,x:this.renderer._ptrnd(B),index:E}:{x:A,y:this.renderer._ptrnd(B),index:E}),M=A,T=N,isNaN(D)&&(D=N))}}if(0!==S.length){var G=S[S.length-1].index;b&&(w=this._getColors(e,p,G,this._getGroupGradientType(e)));var z=h.x+f.xoffsets.data[F],$=h.x+f.xoffsets.data[x];if(i&&!0===r.alignEndPointsWithIntervals&&(z>h.x&&(z=h.x),$<h.x+h.width&&($=h.x+h.width),c)){var U=z;z=$,$=U}$=this.renderer._ptrnd($),z=this.renderer._ptrnd(z);var W=f.baseOffset;D=this.renderer._ptrnd(D);var X=this.renderer._ptrnd(N)||W;l&&(S=S.concat(k.reverse())),m.pointsLength+=S.length;var Y={lastItemIndex:G,colorSettings:w,pointsArray:S,pointsStart:C,left:z,right:$,pyStart:D,pyEnd:X,yBase:W,labelElements:[],symbolElements:[]};m.segments.push(Y)}else _++}}while(_<f.xoffsets.first+f.xoffsets.length-1||g);this._linesRenderInfo[e][p]=m}}else this._linesRenderInfo[e][p]=m}var q=this._linesRenderInfo[e],J=[];for(var Q in q)J.push(q[Q]);J=J.sort((function(e,t){return e.serieIndex-t.serieIndex})),i&&a&&J.reverse();for(var Z=0;Z<J.length;Z++){m=J[Z],this._animateLine(m,0===P?1:0);var K=this;this._enqueueAnimation("series",void 0,void 0,P,(function(e,t,r){K._animateLine(t,r)}),m)}}}}}},{key:"_animateLine",value:function(e,t){var r=e.settings,i=e.groupIndex,a=e.serieIndex,n=this.seriesGroups[i],o=n.series[a],s=this._getSymbol(i,a),l=this._getLabelsSettings(i,a,NaN,["Visible"]).visible,u=!0;e.isPolar&&(isNaN(n.endAngle)||360===Math.round(Math.abs((isNaN(n.startAngle)?0:n.startAngle)-n.endAngle))||(u=!1)),!1===o.endPointsConnect&&(u=!1);for(var d=0,c=0;c<e.segments.length;c++){var h=e.segments[c],f=this._calculateLine(i,e.pointsLength,d,h.pointsArray,h.pointsStart,h.yBase,t,e.isArea,e.swapXY);if(d+=h.pointsArray.length,""!==f){var p=f.split(" "),v=f;v=""!==v?this._buildLineCmd(f,e.isRange,h.left,h.right,h.pyStart,h.pyEnd,h.yBase,e.isArea,e.isPolar,u,e.isSpline,e.swapXY):"M 0 0";var m=h.colorSettings;if(h.pathElement?this.renderer.attr(h.pathElement,{d:v}):(h.pathElement=this.renderer.path(v,{"stroke-width":r.stroke,stroke:m.lineColor,"stroke-opacity":r.opacity,"fill-opacity":r.opacity,"stroke-dasharray":r.dashStyle,fill:e.isArea?m.fillColor:"none"}),this._installHandlers(h.pathElement,"path",i,a,h.lastItemIndex)),h.labelElements){for(var y=0;y<h.labelElements.length;y++)this.renderer.removeElement(h.labelElements[y]);h.labelElements=[]}if(h.symbolElements){for(var g=0;g<h.symbolElements.length;g++)this.renderer.removeElement(h.symbolElements[g]);h.symbolElements=[]}if(h.pointsArray.length===p.length&&("none"!==s||l))for(var b=o.symbolSize,_=this._plotRect,x=0;x<p.length;x++){var w=p[x].split(",");if(!((w={x:parseFloat(w[0]),y:parseFloat(w[1])}).x<_.x||w.x>_.x+_.width||w.y<_.y||w.y>_.y+_.height)){if("none"!==s){var S=this._getColors(i,a,h.pointsArray[x].index,this._getGroupGradientType(i)),k=this._drawSymbol(s,w.x,w.y,S.fillColorSymbol,r.opacity,S.lineColorSymbol,r.opacity,r.strokeSymbol,void 0,b);h.symbolElements.push(k)}if(l&&(w=this._adjustLineLabelPosition(i,a,h.pointsArray[x].index,w))){var C=this._showLabel(i,a,h.pointsArray[x].index,{x:w.x,y:w.y,width:0,height:0});h.labelElements.push(C)}}}if(1===t&&"none"!==s)for(var A=0;A<h.symbolElements.length;A++)isNaN(h.pointsArray[A].index)||this._installHandlers(h.symbolElements[A],"symbol",i,a,h.pointsArray[A].index)}}}},{key:"_adjustLineLabelPosition",value:function(e,t,r,i){var a=this._showLabel(e,t,r,{width:0,height:0},"","",!0);if(a){var n={x:i.x-a.width/2,y:0};return n.y=i.y-1.5*a.height,n}}},{key:"_calculateLine",value:function(e,t,r,i,a,n,o,s,l){var u,d=this.seriesGroups[e];!0!==d.polar&&!0!==d.spider||(u=this._getPolarAxisCoords(e,this._plotRect));var c="",h=i.length;s||0!==a.length||(h=t*o-r);for(var f=0;f<h+1&&f<i.length;f++){f>0&&(c+=" ");var p=i[f].y,v=i[f].x,m=s?n:p,y=v;if(a&&a.length>f&&(m=a[f].y,y=a[f].x,(isNaN(m)||isNaN(y))&&(m=p,y=v)),h<=i.length&&f>0&&f===h&&(y=i[f-1].x,m=i[f-1].y),l?(v=this.renderer._ptrnd((v-m)*(s?o:1)+m),p=this.renderer._ptrnd(p)):(v=this.renderer._ptrnd((v-y)*o+y),p=this.renderer._ptrnd((p-m)*o+m)),u){var g=this._toPolarCoord(u,this._plotRect,v,p);v=g.x,p=g.y}c+=v+","+p}return c}},{key:"_buildLineCmd",value:function(e,t,r,i,a,n,o,s,l,u,d,c){var h=e,f=c?o+","+r:r+","+o;!s||l||t||(h=f+" "+e+" "+(c?o+","+i:i+","+o)),d&&(h=this._getBezierPoints(h));var p=h.split(" ");if(0===p.length)return"";if(1===p.length){var v=p[0].split(",");return"M "+p[0]+" L"+(parseFloat(v[0])+1)+","+(parseFloat(v[1])+1)}var m=p[0].replace("M","");return s&&!l?h=t?"M "+m+" L "+m+(d?"":" L "+m+" ")+h:"M "+f+" L "+m+" "+h:d||(h="M "+m+" L "+m+" "+h),(l&&u||t)&&(h+=" Z"),h}},{key:"_getSerieSettings",value:function(e,t){var r=this.seriesGroups[e],i=-1!==r.type.indexOf("area"),a=-1!==r.type.indexOf("line"),n=r.series[t],o=n.dashStyle||r.dashStyle||"",s=n.opacity||r.opacity;(isNaN(s)||s<0||s>1)&&(s=1);var l=n.lineWidth;isNaN(l)&&"auto"!==l&&(l=r.lineWidth),("auto"===l||isNaN(l)||l<0||l>15)&&(l=i?2:a?3:1);var u=n.lineWidthSymbol;return isNaN(u)&&(u=1),{stroke:l,strokeSymbol:u,opacity:s,dashStyle:o}}},{key:"_getColors",value:function(e,t,r,i,a){var n=this.seriesGroups[e],o=n.series[t],s=this._get([o.useGradientColors,n.useGradientColors,!1]),l=this._getSeriesColors(e,t,r),u=[[0,1.4],[100,1]],d=[[0,1],[25,1.1],[50,1.4],[100,1]],c=NaN;if(isNaN(a)||(c=2===a?u:d),s){var h={};for(var f in l)h[f]=l[f];if(l=h,"verticalLinearGradient"===i||"horizontalLinearGradient"===i){var p="verticalLinearGradient"===i?c||u:c||d,v=["fillColor","fillColorSelected","fillColorAlt","fillColorAltSelected"];for(var m in v){var y=l[v[m]];y&&(l[v[m]]=this.renderer._toLinearGradient(y,"verticalLinearGradient"===i,p))}}else if("radialGradient"===i){var g,b=u;("pie"===n.type||"donut"===n.type||n.polar)&&null!=r&&this._renderData[e]&&this._renderData[e].offsets[t]&&(g=this._renderData[e].offsets[t][r],b=[[0,1.3],[90,1.2],[100,1]]),l.fillColor=this.renderer._toRadialGradient(l.fillColor,b,g),l.fillColorSelected=this.renderer._toRadialGradient(l.fillColorSelected,b,g)}}return l}},{key:"_installHandlers",value:function(e,t,r,i,a){if(!this.enableEvents)return!1;var n=this,o=this.seriesGroups[r],s=this.seriesGroups[r].series[i],l=-1!==o.type.indexOf("line")||-1!==o.type.indexOf("area");l||!1===o.enableSelection||!1===s.enableSelection||this.renderer.addHandler(e,"mousemove",(function(e){var t=n._selected;t&&t.isLineType&&"click"===t.linesUnselectMode&&(t.group!==r||t.series!==i)||n._ttEl&&n._ttEl.gidx===r&&n._ttEl.sidx===i&&n._ttEl.iidx===a||n._startTooltipTimer(r,i,a)})),!1!==o.enableSelection&&!1!==s.enableSelection&&this.renderer.addHandler(e,"mouseover",(function(){var o=n._selected;o&&o.isLineType&&"click"===o.linesUnselectMode&&(o.group!==r||o.series!==i)||n._select(e,t,r,i,a,a)})),this.renderer.addHandler(e,"click",(function(e){clearTimeout(n._hostClickTimer),n._lastClickTs=(new Date).valueOf(),l&&"symbol"!==t&&"pointMarker"!==t||(n._isColumnType(o.type)&&n._unselect(),isNaN(a)||(e.stopImmediatePropagation(),n._raiseItemEvent("click",o,s,a)))}))}},{key:"_getHorizontalOffset",value:function(e,t,r,i){var a=this._plotRect;if(0===this._getDataLen(e))return{index:void 0,value:r};var n=this._calcGroupOffsets(e,this._plotRect);if(0===n.xoffsets.length)return{index:void 0,value:void 0};var o,s,l,u,d,c=r,h=i,f=this.seriesGroups[e];(f.polar||f.spider)&&(o=this._getPolarAxisCoords(e,a));for(var p=n.xoffsets.first;p<=n.xoffsets.last;p++){var v=n.xoffsets.data[p],m=n.offsets[t][p].to,y=0;if(o){var g=this._toPolarCoord(o,a,v+a.x,m);v=g.x,m=g.y,y=this.renderer._ptdist(c,h,v,m)}else if("horizontal"===f.orientation){var b=m;m=v+=a.y,v=b,y=this.renderer._ptdist(c,h,v,m)}else v+=a.x,y=Math.abs(c-v);(isNaN(s)||s>y)&&(s=y,l=p,u=v,d=m)}return{index:l,value:n.xoffsets.data[l],polarAxisCoords:o,x:u,y:d}}},{key:"onmousemove",value:function(e,t){if((this._mouseX!==e||this._mouseY!==t)&&(this._mouseX=e,this._mouseY=t,this._selected)){var r=this._selected.group,i=this._selected.series,a=this.seriesGroups[r],n=a.series[i],o=this._plotRect;if(this.renderer&&((o=this.renderer.getRect()).x+=5,o.y+=5,o.width-=10,o.height-=10),e<o.x+window.scrollX||e>o.x+o.width+window.scrollX||t<o.y+window.scrollY||t>o.y+o.height+window.scrollY)return this._hideToolTip(),void this._unselect();var s="horizontal"===a.orientation;if(o=this._plotRect,-1!==a.type.indexOf("line")||-1!==a.type.indexOf("area")){var l=this._getHorizontalOffset(r,this._selected.series,e,t),u=l.index;if(null==u)return;if(this._selected.item!==u){for(var d=this._linesRenderInfo[r][i].segments,c=0;u>d[c].lastItemIndex;)if(++c>=d.length)return;var h=d[c].pathElement,f=d[c].lastItemIndex;this._unselect(!1),this._select(h,"path",r,i,u,f)}var p=this._getSymbol(this._selected.group,this._selected.series);"none"===p&&(p="circle");var v=this._calcGroupOffsets(r,o),m=v.offsets[this._selected.series][u].to,y=m;-1!==a.type.indexOf("range")&&(y=v.offsets[this._selected.series][u].from);var g=s?e:t;if(t=!isNaN(y)&&Math.abs(g-y)<Math.abs(g-m)?y:m,isNaN(t))return;if(e=l.value,s){var b=e;e=t,t=b+o.y}else e+=o.x;if(l.polarAxisCoords&&(e=l.x,t=l.y),t=this.renderer._ptrnd(t),e=this.renderer._ptrnd(e),this._pointMarker&&this._pointMarker.element&&(this.renderer.removeElement(this._pointMarker.element),this._pointMarker.element=void 0),isNaN(e)||isNaN(t))return;var _=this._getSeriesColors(r,i,u),x=this._getSerieSettings(r,i),w=n.symbolSizeSelected;isNaN(w)&&(w=n.symbolSize),(isNaN(w)||w>50||w<0)&&(w=a.symbolSize),(isNaN(w)||w>50||w<0)&&(w=8),(this.showToolTips||this.enableCrosshairs)&&(this._pointMarker={type:p,x:e,y:t,gidx:r,sidx:i,iidx:u},this._pointMarker.element=this._drawSymbol(p,e,t,_.fillColorSymbolSelected,x.opacity,_.lineColorSymbolSelected,x.opacity,x.strokeSymbol,x.dashStyle,w),this._installHandlers(this._pointMarker.element,"pointMarker",r,i,u)),this._startTooltipTimer(r,this._selected.series,u)}}}},{key:"_drawSymbol",value:function(e,t,r,i,a,n,o,s,l,u){var d,c,h=u||6,f=h/2;switch(e){case"none":return;case"circle":d=this.renderer.circle(t,r,h/2);break;case"square":f=(h-=1)/2,d=this.renderer.rect(t-f,r-f,h,h);break;case"diamond":c="M "+(t-f)+","+r+" L"+t+","+(r-f)+" L"+(t+f)+","+r+" L"+t+","+(r+f)+" Z",d=this.renderer.path(c);break;case"triangle_up":case"triangle":c="M "+(t-f)+","+(r+f)+" L "+(t+f)+","+(r+f)+" L "+t+","+(r-f)+" Z",d=this.renderer.path(c);break;case"triangle_down":c="M "+(t-f)+","+(r-f)+" L "+t+","+(r+f)+" L "+(t+f)+","+(r-f)+" Z",d=this.renderer.path(c);break;case"triangle_left":c="M "+(t-f)+","+r+" L "+(t+f)+","+(r+f)+" L "+(t+f)+","+(r-f)+" Z",d=this.renderer.path(c);break;case"triangle_right":c="M "+(t-f)+","+(r-f)+" L "+(t-f)+","+(r+f)+" L "+(t+f)+","+r+" Z",d=this.renderer.path(c);break;default:d=this.renderer.circle(t,r,h)}return this.renderer.attr(d,{fill:i,"fill-opacity":a,stroke:n,"stroke-width":s,"stroke-opacity":o,"stroke-dasharray":l||""}),"circle"!==e&&(this.renderer.attr(d,{r:h/2}),"square"!==e&&this.renderer.attr(d,{x:t,y:r})),d}},{key:"_getSymbol",value:function(e,t){var r,i=["circle","square","diamond","triangle_up","triangle_down","triangle_left","triangle_right"],a=this.seriesGroups[e],n=a.series[t];return void 0!==n.symbolType&&null!==n.symbolType&&(r=n.symbolType),null==r&&(r=a.symbolType),"default"===r?i[t%i.length]:null!=r?r:"none"}},{key:"_startTooltipTimer",value:function(e,t,r,i,a,n,o){this._cancelTooltipTimer();var s=this,l=this.toolTipShowDelay;(isNaN(l)||l>1e4||l<0)&&(l=500),(this._ttEl||!0===this.enableCrosshairs&&!1===this.showToolTips)&&(l=0),isNaN(n)||(l=n),clearTimeout(this._tttimerHide),isNaN(i)&&(i=s._mouseX),isNaN(a)&&(a=s._mouseY-3),0===l&&s._showToolTip(i,a,e,t,r),this._tttimer=setTimeout((function(){0!==l&&s._showToolTip(i,a,e,t,r);var n=s.toolTipHideDelay;isNaN(o)||(n=o),isNaN(n)&&(n=4e3),s._tttimerHide=setTimeout((function(){s._hideToolTip(),s._unselect()}),n)}),l)}},{key:"_cancelTooltipTimer",value:function(){clearTimeout(this._tttimer)}},{key:"_getGroupGradientType",value:function(e){var t=this.seriesGroups[e];return-1!==t.type.indexOf("area")?"horizontal"===t.orientation?"horizontalLinearGradient":"verticalLinearGradient":this._isColumnType(t.type)||-1!==t.type.indexOf("candle")?t.polar?"radialGradient":"horizontal"===t.orientation?"verticalLinearGradient":"horizontalLinearGradient":-1!==t.type.indexOf("scatter")||-1!==t.type.indexOf("bubble")||this._isPieGroup(e)?"radialGradient":void 0}},{key:"_select",value:function(e,t,r,i,a,n){if(this._selected){if(this._selected.item===a&&this._selected.series===i&&this._selected.group===r)return;this._unselect()}var o=this.seriesGroups[r],s=o.series[i];if(!1!==o.enableSelection&&!1!==s.enableSelection){var l=-1!==o.type.indexOf("line")&&-1===o.type.indexOf("area");this._selected={element:e,type:t,group:r,series:i,item:a,iidxBase:n,isLineType:l,linesUnselectMode:s.linesUnselectMode||o.linesUnselectMode};var u=this._getColors(r,i,n||a,this._getGroupGradientType(r)),d=u.fillColorSelected;l&&(d="none");var c=this._getSerieSettings(r,i),h="symbol"===t?u.lineColorSymbolSelected:u.lineColorSelected;d="symbol"===t?u.fillColorSymbolSelected:d;var f="symbol"===t?1:c.stroke;"symbol"!==t&&this.renderer.getAttr(e,"fill")===u.fillColorAlt&&(d=u.fillColorAltSelected),this.renderer.attr(e,{stroke:h,fill:d,"stroke-width":f}),-1===o.type.indexOf("pie")&&-1===o.type.indexOf("donut")||this._applyPieSelect(),this._raiseItemEvent("mouseover",o,s,a),this._isTouchDevice&&this._startTooltipTimer(r,i,a)}}},{key:"_applyPieSelect",value:function(){var e=this;e._createAnimationGroup("animPieSlice");var t=this._selected;if(t){var r=this.getItemCoord(t.group,t.series,t.item);if(r){var i={element:this._getRenderInfo(t.group,t.series,t.item),coord:r};this._enqueueAnimation("animPieSlice",void 0,void 0,300,(function(r,i,a){var n=i.coord,o=n.selectedRadiusChange*a,s=e.renderer.pieSlicePath(n.center.x,n.center.y,0===n.innerRadius?0:n.innerRadius+o,n.outerRadius+o,n.fromAngle,n.toAngle,n.centerOffset);e.renderer.attr(i.element.element,{d:s}),e._showPieLabel(t.group,t.series,t.item,void 0,o,i.element.colors.lineColor)}),i),e._startAnimation("animPieSlice")}}}},{key:"_applyPieUnselect",value:function(){this._stopAnimations();var e=this._selected;if(e){var t=this.getItemCoord(e.group,e.series,e.item);if(t&&t.center){var r=this.renderer.pieSlicePath(t.center.x,t.center.y,t.innerRadius,t.outerRadius,t.fromAngle,t.toAngle,t.centerOffset);this.renderer.attr(e.element,{d:r}),this._showPieLabel(e.group,e.series,e.item,void 0,0,this._getRenderInfo(e.group,e.series,e.item).colors.lineColor)}}}},{key:"_unselect",value:function(){var e=this;if(e._selected){var t=e._selected.group,r=e._selected.series,i=e._selected.item,a=e._selected.iidxBase,n=e._selected.type,o=e.seriesGroups[t],s=o.series[r],l=-1!==o.type.indexOf("line")&&-1===o.type.indexOf("area"),u=e._getColors(t,r,a||i,e._getGroupGradientType(t)),d=u.fillColor;l&&(d="none");var c=e._getSerieSettings(t,r),h="symbol"===n?u.lineColorSymbol:u.lineColor;d="symbol"===n?u.fillColorSymbol:d,"symbol"!==n&&this.renderer.getAttr(e._selected.element,"fill")===u.fillColorAltSelected&&(d=u.fillColorAlt);var f="symbol"===n?1:c.stroke;e.renderer.attr(e._selected.element,{stroke:h,fill:d,"stroke-width":f}),-1===o.type.indexOf("pie")&&-1===o.type.indexOf("donut")||this._applyPieUnselect(),e._selected=void 0,isNaN(i)||e._raiseItemEvent("mouseout",o,s,i)}e._pointMarker&&(e._pointMarker.element&&(e.renderer.removeElement(e._pointMarker.element),e._pointMarker.element=void 0),e._pointMarker=void 0,e._hideCrosshairs())}},{key:"_raiseItemEvent",value:function(e,t,r,i){for(var a=r[e]||t[e],n=0;n<this.seriesGroups.length&&this.seriesGroups[n]!==t;n++);if(n!==this.seriesGroups.length){var o={event:e,seriesGroup:t,serie:r,elementIndex:i,elementValue:this._getDataValue(i,r.dataField,n)};a&&"function"==typeof a&&a(o),this.$.fireEvent(e,o)}}},{key:"_calcInterval",value:function(e,t,r){var i=Math.abs(t-e)/r,a=.1,n=[1,2,3,4,5,10,15,20,25,50,100];i<1&&(n=[.5,.25,.125,.1],a=10);var o=0;do{o=0,i>=1?a*=10:a/=10;for(var s=1;s<n.length&&Math.abs(n[o]*a-i)>Math.abs(n[s]*a-i);s++)o=s}while(o===n.length-1);return n[o]*a}},{key:"_renderDataClone",value:function(){if(this._renderData&&!this._isToggleRefresh){var e=this._elementRenderInfo=[];if(!this._isSelectorRefresh)for(var t=0;t<this._renderData.length;t++){for(;e.length<=t;)e.push({});var r=e[t],i=this._renderData[t];if(i.offsets){if(i.valueAxis)for(var a in r.valueAxis={itemOffsets:{}},i.valueAxis.itemOffsets)r.valueAxis.itemOffsets[a]=i.valueAxis.itemOffsets[a];if(i.xAxis)for(var n in r.xAxis={itemOffsets:{}},i.xAxis.itemOffsets)r.xAxis.itemOffsets[n]=i.xAxis.itemOffsets[n];r.series=[];for(var o=r.series,s=this._isPieGroup(t),l=0;l<i.offsets.length;l++){o.push({});for(var u=0;u<i.offsets[l].length;u++)if(s){var d=i.offsets[l][u];o[l][d.displayValue]={value:d.value,x:d.x,y:d.y,fromAngle:d.fromAngle,toAngle:d.toAngle}}else o[l][i.xoffsets.xvalues[u]]={value:i.offsets[l][u].value,valueRadius:i.offsets[l][u].valueRadius,xoffset:i.xoffsets.data[u],from:i.offsets[l][u].from,to:i.offsets[l][u].to}}}}}}},{key:"getPolarDataPointOffset",value:function(e,t,r){var i=this._renderData[r];if(!i)return{x:NaN,y:NaN};var a=this.getValueAxisDataPointOffset(t,r),n=this.getXAxisDataPointOffset(e,r),o=this._toPolarCoord(i.polarCoords,i.xAxis.rect,n,a);return{x:o.x,y:o.y}}},{key:"_getDataPointOffsetDiff",value:function(e,t,r,i,a,n,o){var s=this._getDataPointOffset(e,r,i,a,n,o),l=this._getDataPointOffset(t,r,i,a,n,o);return Math.abs(s-l)}},{key:"_getXAxisRenderData",value:function(e){if(!(e>=this._renderData.length)){var t=this.seriesGroups[e],r=this._renderData[e].xAxis;if(r){if(void 0===t.xAxis||null===t.xAxis)for(var i=0;i<=e;i++)if(void 0===this.seriesGroups[i].xAxis||null===this.seriesGroups[i].xAxis){r=this._renderData[i].xAxis;break}return r}}}},{key:"getXAxisDataPointOffset",value:function(e,t){var r=this.seriesGroups[t];if(isNaN(e))return NaN;var i=this._getXAxisRenderData(t);if(!i)return NaN;var a=i.data.axisStats,n=a.min.valueOf(),o=a.max.valueOf(),s=o-n;if(0===s&&(s=1),e.valueOf()>o||e.valueOf()<n)return NaN;var l=this._getXAxis(t),u="horizontal"===r.orientation?"height":"width",d="horizontal"===r.orientation?"y":"x",c=(e.valueOf()-n)/s,h=i.rect[u]-i.data.padding.left-i.data.padding.right;return(r.polar||r.spider)&&this._renderData[t].polarCoords.isClosedCircle&&(h=i.data.axisSize),this._plotRect[d]+i.data.padding.left+h*(l.flip?1-c:c)}},{key:"getValueAxisDataPointOffset",value:function(e,t){var r=this._getValueAxis(t);if(!r)return NaN;var i=this._renderData[t];if(!i)return NaN;var a=!0===r.flip,n=i.logBase,o=i.scale,s=i.gbase,l=i.baseOffset;return this._getDataPointOffset(e,s,n,o,l,a)}},{key:"_getDataPointOffset",value:function(e,t,r,i,a,n){var o;return isNaN(e)&&(e=t),o=isNaN(r)?(e-t)*i:(this._draw.log(e,r)-this._draw.log(t,r))*i,o=n?a+o:a-o}},{key:"_calcGroupOffsets",value:function(e,t){for(var r=this.seriesGroups[e];this._renderData.length<e+1;)this._renderData.push({});if(null!==this._renderData[e]&&void 0!==this._renderData[e].offsets)return this._renderData[e];if(this._isPieGroup(e))return this._calcPieSeriesGroupOffsets(e,t);var i=this._getValueAxis(e);if(!i||!r.series||0===r.series.length)return this._renderData[e];var a=!0===i.flip,n=!0===i.logarithmicScale,o=i.logarithmicScaleBase||10,s=[],l=-1!==r.type.indexOf("stacked"),u=l&&-1!==r.type.indexOf("100"),d=-1!==r.type.indexOf("range"),c=this._isColumnType(r.type),h=-1!==r.type.indexOf("waterfall"),f=this._getDataLen(e),p=r.baselineValue||i.baselineValue||0;u&&(p=0);var v=this._stats.seriesGroups[e];if(v&&v.isValid){var m=v.hasStackValueReversal;if(m&&(p=0),h&&l){if(m)return;p=v.base}p>v.max&&(p=v.max),p<v.min&&(p=v.min);var y=u||n?v.maxRange:v.max-v.min,g=v.min,b=v.max,_=t.height/(n?v.intervals:y),x=0;x=u?g*b<0?-((y/=2)+p)*_:-p*_:-(p-g)*_,a?x=t.y-x:x+=t.y+t.height;var w,S=[],k=[],C=[];n&&(w=this._draw.log(b,o)-this._draw.log(p,o),l&&(w=v.intervals,p=u?0:g),a||(x=t.y+w/v.intervals*t.height)),x=this.renderer._ptrnd(x);var A=g*b<0?t.height/2:t.height,N=[],M=[],T=l&&(c||n),D=[];s=new Array(r.series.length);for(var O=0;O<r.series.length;O++)s[O]=new Array(f);for(var P=0;P<f;P++){!h&&l&&(M=[]);for(var F=0;F<r.series.length;F++){!l&&n&&(N=[]);var I=r.series[F],E=I.dataField,L=I.dataFieldFrom,R=I.dataFieldTo,B=I.radiusDataField||I.sizeDataField;s[F][P]={};var H=this._isSerieVisible(e,F);if(-1===r.type.indexOf("candle")&&-1===r.type.indexOf("ohlc")){if(l)for(;M.length<=P;)M.push(0);var V=NaN;d&&(V=this._getDataValueAsNumber(P,L,e),isNaN(V)&&(V=p));var j=NaN;j=d?this._getDataValueAsNumber(P,R,e):this._getDataValueAsNumber(P,E,e);var G=void 0,z=this._getDataValueAsNumber(P,B,e);if(l&&(M[P]+=H?j:0),H||(j=NaN),isNaN(j)||n&&j<=0)s[F][P]={from:void 0,to:void 0};else{l&&(T?G=j>=p?S:k:j=M[P]);var $=_*(j-p);if(d&&($=_*(j-V)),l&&T&&(D[P]?$=_*j:(D[P]=!0,$=_*(j-p))),n){for(;N.length<=P;)N.push({p:{value:0,height:0},n:{value:0,height:0}});var U=d||d?V:p,W=j>U?N[P].p:N[P].n;W.value+=j,u?(j=W.value/(v.psums[P]+v.nsums[P])*100,$=(this._draw.log(j,o)-v.minPow)*_):($=this._draw.log(W.value,o)-this._draw.log(U,o),$*=_),$-=W.height,W.height+=$}var X,Y=x;if(d)X=n?(this._draw.log(V,o)-this._draw.log(p,o))*_:(V-p)*_,Y+=a?X:-X;if(l){if(u&&!n){var q=v.psums[P]-v.nsums[P];j>p?($=v.psums[P]/q*A,0!==v.psums[P]&&($*=j/v.psums[P])):($=v.nsums[P]/q*A,0!==v.nsums[P]&&($*=j/v.nsums[P]))}T&&(isNaN(G[P])&&(G[P]=Y),Y=G[P])}isNaN(C[P])&&(C[P]=0);var J=C[P],Q=$=Math.abs($);if($>=1){var Z=this.renderer._ptrnd($)-1;$=Math.abs($-Z)>.5?Math.round($):Z}if(J+=$-Q,l||(J=0),Math.abs(J)>.5&&(J>0?($-=1,J-=1):($+=1,J+=1)),C[P]=J,F===r.series.length-1&&u){for(var K=0,ee=0;ee<F;ee++)K+=Math.abs(s[ee][P].to-s[ee][P].from);if((K+=$)<A)if($>.5)$=this.renderer._ptrnd($+A-K);else for(var te=F-1;te>=0;){if(Math.abs(s[te][P].to-s[te][P].from)>1){s[te][P].from>s[te][P].to&&(s[te][P].from+=A-K);break}te--}}a&&($*=-1);var re=j<p;d&&(re=V>j);var ie=isNaN(V)?j:{from:V,to:j};re?(T&&(G[P]+=$),s[F][P]={from:Y,to:Y+$,value:ie,valueRadius:z}):(T&&(G[P]-=$),s[F][P]={from:Y,to:Y-$,value:ie,valueRadius:z})}}else{var ae=["Open","Close","High","Low"];for(var ne in ae){var oe="dataField"+ae[ne];I[oe]&&(s[F][P][ae[ne]]=this._getDataPointOffset(this._getDataValueAsNumber(P,I[oe],e),p,n?o:NaN,_,x,a))}}}}var se=this._renderData[e];return se.baseOffset=x,se.gbase=p,se.logBase=n?o:NaN,se.scale=_,se.offsets=h?this._applyWaterfall(s,f,e,x,p,n?o:NaN,_,a,l):s,se.xoffsets=this._calculateXOffsets(e,t.width),this._renderData[e]}}},{key:"_isPercent",value:function(e){return"string"==typeof e&&e.length>0&&e.indexOf("%")===e.length-1}},{key:"_calcPieSeriesGroupOffsets",value:function(e,t){for(var r=this._getDataLen(e),i=this.seriesGroups[e],a=this._renderData[e]={},n=a.offsets=[],o=0;o<i.series.length;o++){var s=i.series[o],l=this._get([s.minAngle,s.startAngle]);(isNaN(l)||l<0||l>360)&&(l=0);var u=this._get([s.maxAngle,s.endAngle]);(isNaN(u)||u<0||u>360)&&(u=360);var d=u-l,c=s.initialAngle||0;c<l&&(c=l),c>u&&(c=u);var h=s.centerOffset||0,f=this._draw.getNum([s.offsetX,i.offsetX,t.width/2]),p=this._draw.getNum([s.offsetY,i.offsetY,t.height/2]),v=Math.min(t.width,t.height)/2,m=c,y=s.radius;this._isPercent(y)&&(y=parseFloat(y)/100*v),isNaN(y)&&(y=.4*v);var g=s.innerRadius;this._isPercent(g)&&(g=parseFloat(g)/100*v),(isNaN(g)||g>=y)&&(g=0);var b=s.selectedRadiusChange;this._isPercent(b)&&(b=parseFloat(b)/100*(y-g)),isNaN(b)&&(b=.1*(y-g)),n.push([]);for(var _=0,x=0,w=0;w<r;w++){var S=this._getDataValueAsNumber(w,s.dataField,e);isNaN(S)||(this._isSerieVisible(e,o,w)||!0===s.hiddenPointsDisplay)&&(S>0?_+=S:x+=S)}var k=_-x;0===k&&(k=1);for(var C=0;C<r;C++)if(S=this._getDataValueAsNumber(C,s.dataField,e),isNaN(S))n[o].push({});else{var A=s.displayText||s.displayField,N=this._getDataValue(C,A,e);null==N&&(N=C);var M=0,T=this._isSerieVisible(e,o,C);(T||!0===s.hiddenPointsDisplay)&&(M=Math.abs(S)/k*d);var D=t.x+f,O=t.y+p,P=h;"function"==typeof h&&(P=h({seriesIndex:o,seriesGroupIndex:e,itemIndex:C})),isNaN(P)&&(P=0);var F={key:e+"_"+o+"_"+C,value:S,displayValue:N,x:D,y:O,fromAngle:m,toAngle:m+M,centerOffset:P,innerRadius:g,outerRadius:y,selectedRadiusChange:b,visible:T};n[o].push(F),m+=M}}return a}},{key:"_isPointSeriesOnly",value:function(){for(var e=0;e<this.seriesGroups.length;e++){var t=this.seriesGroups[e];if(-1===t.type.indexOf("line")&&-1===t.type.indexOf("area")&&-1===t.type.indexOf("scatter")&&-1===t.type.indexOf("bubble"))return!1}return!0}},{key:"_hasColumnSeries",value:function(){for(var e=["column","ohlc","candlestick","waterfall"],t=0;t<this.seriesGroups.length;t++){var r=this.seriesGroups[t];for(var i in e)if(-1!==r.type.indexOf(e[i]))return!0}return!1}},{key:"_alignValuesWithTicks",value:function(e){var t=this._isPointSeriesOnly(),r=this.seriesGroups[e],i=this._getXAxis(e),a=void 0===i.valuesOnTicks||null===i.valuesOnTicks?t:!1!==i.valuesOnTicks;return i.logarithmicScale&&(a=!0),null==e||void 0===r.valuesOnTicks||null===r.valuesOnTicks?a:r.valuesOnTicks}},{key:"_getYearsDiff",value:function(e,t){return t.getFullYear()-e.getFullYear()}},{key:"_getMonthsDiff",value:function(e,t){return 12*(t.getFullYear()-e.getFullYear())+t.getMonth()-e.getMonth()}},{key:"_getDateDiff",value:function(e,t,r,i){var a=0;switch("year"!==r&&"month"!==r&&(a=t.valueOf()-e.valueOf()),r){case"year":a=this._getYearsDiff(e,t);break;case"month":a=this._getMonthsDiff(e,t);break;case"day":a/=864e5;break;case"hour":a/=36e5;break;case"minute":a/=6e4;break;case"second":a/=1e3}return"year"!==r&&"month"!==r&&!1!==i&&(a=this.renderer._rnd(a,1,!0)),a}},{key:"_getBestDTUnit",value:function(e,t,r,i,a){var n="day",o=t.valueOf()-e.valueOf();n=o<1e3?"second":o<36e5?"minute":o<864e5?"hour":o<2592e6?"day":o<31104e6?"month":"year";for(var s=[{key:"year",cnt:o/31536e6},{key:"month",cnt:o/2592e6},{key:"day",cnt:o/864e5},{key:"hour",cnt:o/36e5},{key:"minute",cnt:o/6e4},{key:"second",cnt:o/1e3},{key:"millisecond",cnt:o}],l=-1,u=0;u<s.length;u++)if(s[u].key===n){l=u;break}for(var d=-1,c=-1;l<s.length&&!(s[l].cnt/100>i);l++){var h=this._estAxisInterval(e,t,r,i,s[l].key,a),f=this._getDTIntCnt(e,t,h,s[l].key);(-1===d||d<f)&&(d=f,c=l)}return n=s[c].key}},{key:"_getXAxisStats",value:function(e,t,r){var i=this._getDataLen(e),a="date"===t.type||"time"===t.type;if(a&&!this._autoDateFormats){this._autoDateFormats||(this._autoDateFormats=[]);var n=this._testXAxisDateFormat();n&&this._autoDateFormats.push(n)}var o=a?this._castAsDate(t.minValue,t.dateFormat):this._castAsNumber(t.minValue),s=a?this._castAsDate(t.maxValue,t.dateFormat):this._castAsNumber(t.maxValue);if(this._selectorRange&&this._selectorRange[e]){var l=this._selectorRange[e].min;isNaN(l)||(o=a?this._castAsDate(l,t.dateFormat):this._castAsNumber(l));var u=this._selectorRange[e].max;isNaN(u)||(s=a?this._castAsDate(u,t.dateFormat):this._castAsNumber(u))}for(var d,c,h=o,f=s,p=void 0===t.type||null===t.type||"auto"===t.type,v=p||"basic"===t.type,m=0,y=0,g=0;g<i&&t.dataField;g++){var b=this._getDataValue(g,t.dataField,e);b=a?this._castAsDate(b,t.dateFormat):this._castAsNumber(b),isNaN(b)||(a?m++:y++,(isNaN(d)||b<d)&&(d=b),(isNaN(c)||b>=c)&&(c=b))}p&&(!a&&y===i||a&&m===i)&&(v=!1),v&&(d=0,c=Math.max(0,i-1)),isNaN(h)&&(h=d),isNaN(f)&&(f=c),a?(this._isDate(h)||(h=this._isDate(f)?f:new Date),this._isDate(f)||(f=this._isDate(h)?h:new Date)):(isNaN(h)&&(h=0),isNaN(f)&&(f=v?Math.max(0,i-1):h)),null==d&&(d=h),null==c&&(c=f);var _,x,w=t.rangeSelector&&t.rangeSelector.visible;if(w){var S=w.minValue||h;S&&a&&(S=this._castAsDate(S,w.dateFormat||t.dateFormat));var k=w.maxValue||f;k&&a&&(k=this._castAsDate(k,w.dateFormat||t.rangeSelector)),h<S&&(h=S),f<S&&(f=k),h>k&&(h=S),f>k&&(f=k)}a&&((_=t.baseUnit)||(_=this._getBestDTUnit(h,f,e,r)),x="hour"===_||"minute"===_||"second"===_||"millisecond"===_);var C=!0===t.logarithmicScale,A=t.logarithmicScaleBase;(isNaN(A)||A<=1)&&(A=10);var N=t.unitInterval;C?N=1:(isNaN(N)||N<=0)&&(N=this._estAxisInterval(h,f,e,r,_));var M,T,D={min:h,max:f},O=this.seriesGroups[e];return C?(h||(h=1,f&&h>f&&(h=f)),f||(f=h),D={min:h,max:f},M=this.renderer._rnd(this._draw.log(h,A),1,!1),T=this.renderer._rnd(this._draw.log(f,A),1,!0),f=Math.pow(A,T),h=Math.pow(A,M)):a||!O.polar&&!O.spider||(h=this.renderer._rnd(h,N,!1),f=this.renderer._rnd(f,N,!0)),{min:h,max:f,logAxis:{enabled:C,base:A,minPow:M,maxPow:T},dsRange:{min:d,max:c},filterRange:D,useIndeces:v,isDateTime:a,isTimeUnit:x,dateTimeUnit:_,interval:N}}},{key:"_getDefaultDTFormatFn",value:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return"year"===e||"month"===e||"day"===e?function(e){return e.getDate()+"-"+t[e.getMonth()]+"-"+e.getFullYear()}:function(e){return e.getDate()+"-"+t[e.getMonth()]+"-"+e.getFullYear()+"<br>"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}},{key:"_getDTIntCnt",value:function(e,t,r,i){var a=0,n=new Date(e),o=new Date(t);if(o=o.valueOf(),r<=0)return 1;for(;n.valueOf()<o;)"millisecond"===i?n=new Date(n.valueOf()+r):"second"===i?n=new Date(n.valueOf()+1e3*r):"minute"===i?n=new Date(n.valueOf()+6e4*r):"hour"===i?n=new Date(n.valueOf()+6e4*r*24):"day"===i?n.setDate(n.getDate()+r):"month"===i?n.setMonth(n.getMonth()+r):"year"===i&&n.setFullYear(n.getFullYear()+r),a++;return a}},{key:"_estAxisInterval",value:function(e,t,r,i,a,n){if(isNaN(e)||isNaN(t))return NaN;var o,s=[1,2,5,10,15,20,50,100,200,500],l=0,u=i/(!isNaN(n)&&n>0?n:50);if(this._renderData&&this._renderData.length>r&&this._renderData[r].xAxis&&!isNaN(this._renderData[r].xAxis.avgWidth)){var d=Math.max(1,this._renderData[r].xAxis.avgWidth);0!==d&&isNaN(n)&&(u=.9*i/d)}if(u<=1)return Math.abs(t-e);for(;o=l>=s.length?Math.pow(10,3+l-s.length):s[l],!((this._isDate(e)&&this._isDate(t)?this._getDTIntCnt(e,t,o,a):(t-e)/o)<=u);)l++;var c=this.seriesGroups[r];return(c.spider||c.polar)&&2*o>t-e&&(o=t-e),o}},{key:"_getPaddingSize",value:function(e,t,r,i,a,n,o){var s=e.min,l=e.max;e.logAxis.enabled&&(s=e.logAxis.minPow,l=e.logAxis.maxPow);var u=e.interval,d=e.dateTimeUnit;if(a){var c=i/Math.max(1,l-s+u)*u;return n?{left:0,right:c}:r?{left:0,right:0}:{left:c/2,right:c/2}}if(r&&!o)return{left:0,right:0};if(this._isDate(s)&&this._isDate(l)){var h,f=this._getDTIntCnt(s,l,Math.min(u,l-s),d);return{left:(h=i/Math.max(2,f))/2,right:h/2}}if(1===(f=Math.max(1,l-s))){var p=i/4;return{left:p,right:p}}return{left:(h=i/(f+1))/2,right:h/2}}},{key:"_calculateXOffsets",value:function(e,t){var r=this.seriesGroups[e],i=this._getXAxis(e),a=[],n=[],o=this._getDataLen(e),s=this._getXAxisStats(e,i,t),l=s.min,u=s.max,d=s.isDateTime,c=s.isTimeUnit,h=this._hasColumnSeries(),f=r.polar||r.spider,p=this._get([r.startAngle,r.minAngle,0]),v=this._get([r.endAngle,r.maxAngle,360]),m=f&&!(Math.abs(Math.abs(v-p)-360)>1e-4),y=this._alignValuesWithTicks(e),g=this._getPaddingSize(s,i,y,t,f,m,h),b=u-l,_=s.filterRange;0===b&&(b=1);var x=t-g.left-g.right;f&&y&&!m&&(g.left=g.right=0);for(var w=-1,S=-1,k=0;k<o;k++){var C=void 0===i.dataField?k:this._getDataValue(k,i.dataField,e);if(s.useIndeces){if(k<_.min||k>_.max){a.push(NaN),n.push(void 0);continue}if(N=g.left+(k-l)/b*x,!0===s.logAxis.enabled){var A=s.logAxis.base;N=this._smartPlot.scale(C,{min:l.valueOf(),max:u.valueOf(),type:"logarithmic",base:A},{min:0,max:x,flip:!1})}a.push(this.renderer._ptrnd(N)),n.push(C),-1===w&&(w=k),(-1===S||S<k)&&(S=k)}else if(C=d?this._castAsDate(C,i.dateFormat):this._castAsNumber(C),isNaN(C)||C<_.min||C>_.max)a.push(NaN),n.push(void 0);else{var N=0;!0===s.logAxis.enabled?(A=s.logAxis.base,N=this._smartPlot.scale(C,{min:l.valueOf(),max:u.valueOf(),type:"logarithmic",base:A},{min:0,max:x,flip:!1})):N=!d||d&&c?(C-l)*x/b:(C.valueOf()-l.valueOf())/(u.valueOf()-l.valueOf())*x,N=this.renderer._ptrnd(g.left+N),a.push(N),n.push(C),-1===w&&(w=k),(-1===S||S<k)&&(S=k)}}if(!0===i.flip)for(var M=0;M<a.length;M++)isNaN(a[M])||(a[M]=t-a[M]);(c||d)&&(b=this._getDateDiff(l,u,i.baseUnit),b=this.renderer._rnd(b,1,!1));var T=Math.max(1,b),D=x/T;return w===S&&1===T&&(a[w]=g.left+x/2),{axisStats:s,data:a,xvalues:n,first:w,last:S,length:-1===S?0:S-w+1,itemWidth:D,intervalWidth:D*s.interval,rangeLength:b,useIndeces:s.useIndeces,padding:g,axisSize:x}}},{key:"_getXAxis",value:function(e){return null==e||this.seriesGroups.length<=e?this.xAxis:this.seriesGroups[e].xAxis||this.xAxis}},{key:"_isGreyScale",value:function(e,t){var r=this.seriesGroups[e],i=r.series[t];return!0===i.greyScale||!1!==i.greyScale&&(!0===r.greyScale||!1!==r.greyScale&&!0===this.greyScale)}},{key:"_getSeriesColors",value:function(e,t,r){var i=this._getSeriesColorsInternal(e,t,r);if(this._isGreyScale(e,t))for(var a in i)i[a]=this._draw.toGreyScale(i[a]);return i}},{key:"_getColorFromScheme",value:function(e,t,r){var i="#000000",a=this.seriesGroups[e],n=a.series[t];if(this._isPieGroup(e)){var o=this._getDataLen(e);i=this._getItemColorFromScheme(n.colorScheme||a.colorScheme||this.colorScheme,t*o+r,e,t)}else{for(var s=0,l=0;l<=e;l++)for(var u=0;u<this.seriesGroups[l].series.length&&(l!==e||parseInt(u)!==t);u++)s++;var d=this.colorScheme;if(a.colorScheme&&(d=a.colorScheme),null!=d&&""!==d||(d=this.colorSchemes[0].name),!d)return i;for(var c=0;c<this.colorSchemes.length;c++){var h=this.colorSchemes[c];if(h.name===d){for(;s>h.colors.length;)s-=h.colors.length,++c>=this.colorSchemes.length&&(c=0),h=this.colorSchemes[c];i=h.colors[s%h.colors.length]}}}return i}},{key:"_createColorsCache",value:function(){this._colorsCache={get:function(e){if(this._store[e])return this._store[e]},set:function(e,t){this._size<1e4&&(this._store[e]=t,this._size++)},clear:function(){this._store={},this._size=0},_size:0,_store:{}}}},{key:"_getSeriesColorsInternal",value:function(e,t,r){var i=this.seriesGroups[e],a=i.series[t];"function"===(a.colorFunction,!1)&&"pie"!==i.type&&"donut"!==i.type&&(r=NaN);var n=e+"_"+t+"_"+(isNaN(r)?"NaN":r);if(this._colorsCache.get(n))return this._colorsCache.get(n);var o,s={lineColor:"#222222",lineColorSelected:"#151515",lineColorSymbol:"#222222",lineColorSymbolSelected:"#151515",fillColor:"#222222",fillColorSelected:"#333333",fillColorSymbol:"#222222",fillColorSymbolSelected:"#333333",fillColorAlt:"#222222",fillColorAltSelected:"#333333"};if("function"==typeof a.colorFunction){var l=isNaN(r)?NaN:this._getDataValue(r,a.dataField,e);if(-1===i.type.indexOf("range")||isNaN(r)||(l={from:this._getDataValue(r,a.dataFieldFrom,e),to:this._getDataValue(r,a.dataFieldTo,e)}),"object"==u(o=a.colorFunction(l,r,a,i)))for(var d in o)s[d]=o[d];else s.fillColor=o}else{for(var c in s)a[c]&&(s[c]=a[c]);a.fillColor||a.color?a.fillColor=a.fillColor||a.color:s.fillColor=this._getColorFromScheme(e,t,r)}var h={fillColor:{baseColor:"fillColor",adjust:1},fillColorSelected:{baseColor:"fillColor",adjust:1.1},fillColorSymbol:{baseColor:"fillColor",adjust:1},fillColorSymbolSelected:{baseColor:"fillColorSymbol",adjust:2},fillColorAlt:{baseColor:"fillColor",adjust:4},fillColorAltSelected:{baseColor:"fillColor",adjust:3},lineColor:{baseColor:"fillColor",adjust:.95},lineColorSelected:{baseColor:"lineColor",adjust:.95},lineColorSymbol:{baseColor:"lineColor",adjust:1},lineColorSymbolSelected:{baseColor:"lineColorSelected",adjust:1}};for(var f in s)"object"==u(o)&&o[f]||a[f]&&(s[f]=a[f]);for(var p in s)"object"==u(o)&&o[p]||a[p]||(s[p]=this.renderer.adjustColor(s[h[p].baseColor],h[p].adjust));return this._colorsCache.set(n,s),s}},{key:"_getItemColorFromScheme",value:function(e,t,r,i){var a;for(void 0!==e&&""!==e||(e=this.colorSchemes[0].name),a=0;a<this.colorSchemes.length&&e!==this.colorSchemes[a].name;a++);for(var n=0;n<=t;){a===this.colorSchemes.length&&(a=0);var o=this.colorSchemes[a].colors.length;if(!(n+o<=t)){var s=this.colorSchemes[a].colors[t-n];return this._isGreyScale(r,i)&&0===s.indexOf("#")&&(s=this._draw.toGreyScale(s)),s}n+=o,a++}}},{key:"getColorScheme",value:function(e){for(var t=0;t<this.colorSchemes.length;t++)if(this.colorSchemes[t].name===e)return this.colorSchemes[t].colors}},{key:"addColorScheme",value:function(e,t){for(var r=0;r<this.colorSchemes.length;r++)if(this.colorSchemes[r].name===e)return void(this.colorSchemes[r].colors=t);this.colorSchemes.push({name:e,colors:t})}},{key:"removeColorScheme",value:function(e){for(var t=0;t<this.colorSchemes.length;t++)if(this.colorSchemes[t].name===e){this.colorSchemes.splice(t,1);break}}},{key:"_formatValue",value:function(e,t,r,i,a,n){if(null==e)return"";if(this._isObject(e)&&!this._isDate(e)&&!r)return"";if(r){if("function"!=typeof r)return e.toString();try{return r(e,n,a,i)}catch(e){return e.message}}return this._isNumber(e)?this._formatNumber(e,t):this._isDate(e)?this._formatDate(e,t):t?(t.prefix||"")+e.toString()+(t.sufix||""):e.toString()}},{key:"_getFormattedValue",value:function(e,t,r,i,a,n){var o=this.seriesGroups[e],s=o.series[t],l="",u=i,d=a;s.labels&&(u=u||this._getFormatSettings(s.labels),d=d||s.labels.formatFunction),u||d||(u=this._getFormatSettings(s),d=s.formatFunction,u||d||(u=this._getFormatSettings(o),d=o.formatFunction));var c={},h=0;for(var f in s)0===f.indexOf("dataField")&&(c[f.substring(9).toLowerCase()]=this._getDataValue(r,s[f],e),h++);if(0===h&&(c=this._getDataValue(r,void 0,e)),-1!==o.type.indexOf("waterfall")&&this._isSummary(e,r)&&(c=this._renderData[e].offsets[t][r].value,h=0),d&&"function"==typeof d)try{return d(1===h?c[""]:c,r,s,o)}catch(e){return e.message}if(1===h&&this._isPieGroup(e))return this._formatValue(c[""],u,d,e,t,r);if(h>0){var p=0;for(var v in c){p>0&&""!==l&&(l+="<br>");var m="dataField"+(v.length>0?v.substring(0,1).toUpperCase()+v.substring(1):""),y=s["displayText"+(v.length>0?v.substring(0,1).toUpperCase()+v.substring(1):"")]||s[m],g=c[v];void 0!==g&&(g=this._formatValue(g,u,d,e,t,r),l+=!0===n?g:y+": "+g,p++)}}else null!=c&&(l=this._formatValue(c,u,d,e,t,r));return l||""}},{key:"_isNumberAsString",value:function(e){if("string"!=typeof e)return!1;e=e.trim();for(var t=0;t<e.length;t++){var r=e.charAt(t);if(!(r>="0"&&r<="9"||","===r||"."===r||"-"===r&&0===t||"("===r&&0===t||")"===r&&t===e.length-1))return!1}return!0}},{key:"_castAsDate",value:function(e,t){if(e instanceof Date&&!isNaN(e))return e;if("string"==typeof e){var r=new Date(e);if(this._isDate(r))return-1===e.indexOf(":")&&r.setHours(0,0,0,0),r;try{if(t&&(r=Smart.Utilities.DateTime.parseDateString(e,void 0,t).toDate(),this._isDate(r)))return r;if(this._autoDateFormats)for(var i=0;i<this._autoDateFormats.length;i++)if(r=Smart.Utilities.DateTime.parseDateString(e,void 0,this._autoDateFormats[i]).toDate(),this._isDate(r))return r;var a=this._detectDateFormat(e);if(a&&(r=Smart.Utilities.DateTime.parseDateString(e,void 0,a).toDate(),this._isDate(r)))return this._autoDateFormats.push(a),r}catch(e){}}}},{key:"_castAsNumber",value:function(e){if(e instanceof Date&&!isNaN(e))return e.valueOf();if("string"==typeof e)if(this._isNumber(e))e=parseFloat(e);else if(!/[a-zA-Z]/.test(e)){var t=new Date(e);null!=t&&(e=t.valueOf())}return isNaN(e)?void 0:e}},{key:"_isNumber",value:function(e){return"string"==typeof e&&this._isNumberAsString(e)&&(e=parseFloat(e)),"number"==typeof e&&isFinite(e)}},{key:"_isDate",value:function(e){return e instanceof Date&&!isNaN(e.getDate())}},{key:"_isBoolean",value:function(e){return"boolean"==typeof e}},{key:"_isObject",value:function(e){return e&&("object"==u(e)||"function"==typeof e)||!1}},{key:"_formatDate",value:function(e,t){var r=e.toString();return t&&(t.dateFormat&&(r=new Smart.Utilities.DateTime(e).toString(t.dateFormat)),r=(t.prefix||"")+r+(t.sufix||"")),r}},{key:"_formatNumber",value:function(e,t){if(!this._isNumber(e))return e;t=t||{};var r=this.localization.decimalSeparator,i=this.localization.thousandsSeparator;t.decimalSeparator&&(r=t.decimalSeparator),t.thousandsSeparator&&(i=t.thousandsSeparator);var a=t.prefix||"",n=t.sufix||"",o=t.decimalPlaces;isNaN(o)&&(o=this._getDecimalPlaces([e],void 0,3));var s=t.negativeWithBrackets||!1,l=e<0;l&&s&&(e*=-1);var u,d=e.toString(),c=Math.pow(10,o);if(d=(Math.round(e*c)/c).toString(),isNaN(d)&&(d=""),u=d.lastIndexOf("."),o>0)for(u<0?u=(d+=r).length-1:"."!==r&&(d=d.replace(".",r));d.length-1-u<o;)d+="0";u=(u=d.lastIndexOf(r))>-1?u:d.length;for(var h=d.substring(u),f=0,p=u;p>0;p--,f++)f%3==0&&p!==u&&(!l||p>1||l&&s)&&(h=i+h),h=d.charAt(p-1)+h;return d=h,l&&s&&(d="("+d+")"),a+d+n}},{key:"_calculateControlPoints",value:function(e,t){var r=e[t],i=e[t+1],a=e[t+2],n=e[t+3],o=e[t+4],s=e[t+5],l=Math.sqrt(Math.pow(a-r,2)+Math.pow(n-i,2)),u=l+Math.sqrt(Math.pow(o-a,2)+Math.pow(s-n,2));0===u&&(u=1);var d=.4*l/u,c=.4-d;return[a+d*(r-o),n+d*(i-s),a-c*(r-o),n-c*(i-s)]}},{key:"_getBezierPoints",value:function(e){for(var t="",r=[],i=[],a=e.split(" "),n=0;n<a.length;n++){var o=a[n].split(",");r.push(parseFloat(o[0])),r.push(parseFloat(o[1])),!isNaN(r[r.length-1])&&isNaN(r[r.length-2])}var s=r.length;if(s<=1)return"";if(2===s)return t="M"+this.renderer._ptrnd(r[0])+","+this.renderer._ptrnd(r[1])+" L"+this.renderer._ptrnd(r[0]+1)+","+this.renderer._ptrnd(r[1]+1)+" ";for(var l=0;l<s-4;l+=2)i=i.concat(this._calculateControlPoints(r,l));for(var u=2;u<s-5;u+=2)t+=" C"+this.renderer._ptrnd(i[2*u-2])+","+this.renderer._ptrnd(i[2*u-1])+" "+this.renderer._ptrnd(i[2*u])+","+this.renderer._ptrnd(i[2*u+1])+" "+this.renderer._ptrnd(r[u+2])+","+this.renderer._ptrnd(r[u+3])+" ";return t=s<=4||Math.abs(r[0]-r[2])<3||Math.abs(r[1]-r[3])<3?"M"+this.renderer._ptrnd(r[0])+","+this.renderer._ptrnd(r[1])+" L"+this.renderer._ptrnd(r[2])+","+this.renderer._ptrnd(r[3])+" "+t:"M"+this.renderer._ptrnd(r[0])+","+this.renderer._ptrnd(r[1])+" Q"+this.renderer._ptrnd(i[0])+","+this.renderer._ptrnd(i[1])+" "+this.renderer._ptrnd(r[2])+","+this.renderer._ptrnd(r[3])+" "+t,s>=4&&(Math.abs(r[s-2]-r[s-4])<3||Math.abs(r[s-1]-r[s-3])<3)?t+=" L"+this.renderer._ptrnd(r[s-2])+","+this.renderer._ptrnd(r[s-1])+" ":s>=5&&(t+=" Q"+this.renderer._ptrnd(i[2*s-10])+","+this.renderer._ptrnd(i[2*s-9])+" "+this.renderer._ptrnd(r[s-2])+","+this.renderer._ptrnd(r[s-1])+" "),t}},{key:"_createAnimationGroup",value:function(e){this._animGroups||(this._animGroups={}),this._animGroups[e]={animations:[],startTick:NaN}}},{key:"_startAnimation",value:function(e){var t=(new Date).getTime();this._animGroups[e].startTick=t,this._runAnimation(),this._enableAnimTimer()}},{key:"_enqueueAnimation",value:function(e,t,r,i,a,n,o){i<0&&(i=0),void 0===o&&(o="easeInOutSine"),this._animGroups[e].animations.push({key:t,properties:r,duration:i,fn:a,context:n,easing:o})}},{key:"_stopAnimations",value:function(){clearTimeout(this._animtimer),this._animtimer=void 0,this._animGroups=void 0}},{key:"_enableAnimTimer",value:function(){if(!this._animtimer){var e=this;this._animtimer=setTimeout((function(){e._runAnimation()}),this._animTickInt)}}},{key:"_runAnimation",value:function(){if(this._animGroups){var e=(new Date).getTime(),t={};for(var r in this._animGroups){for(var i=this._animGroups[r].animations,a=this._animGroups[r].startTick,n=0,o=0;o<i.length;o++){var s=i[o],l=e-a;s.duration>n&&(n=s.duration);var u=s.duration>0?l/s.duration:1,d=u;if(s.easing&&0!==s.duration&&!1!==s.duration&&(d=Smart.Utilities.Animation.Easings[s.easing](l,0,1,s.duration)),u>1&&(u=1,d=1),s.fn)s.fn(s.key,s.context,d);else{for(var c={},h=0;h<s.properties.length;h++){var f,p=s.properties[h];f=1===u?p.to:d*(p.to-p.from)+p.from,c[p.key]=f}this.renderer.attr(s.key,c)}}a+n>e&&(t[r]={startTick:a,animations:i})}this._animGroups=t,this.renderer instanceof Smart.Utilities.HTML5Renderer&&this.renderer.refresh()}this._animtimer=null,Object.values(this._animGroups).length>0&&this._enableAnimTimer()}},{key:"_fixCoords",value:function(e,t){if("horizontal"!==this.seriesGroups[t].orientation)return e;var r=e.x;return e.x=e.y,e.y=r+this._plotRect.y-this._plotRect.x,r=e.width,e.width=e.height,e.height=r,e}},{key:"getItemCoord",value:function(e,t,r){if(this._isPieGroup(e)&&(!this._isSerieVisible(e,t,r)||!this._renderData||this._renderData.length<=e))return{x:NaN,y:NaN};if(!this._isSerieVisible(e,t)||!this._renderData||this._renderData.length<=e)return{x:NaN,y:NaN};var i=this.seriesGroups[e],a=i.series[t],n=this._getItemCoord(e,t,r);if(this._isPieGroup(e)){if(isNaN(n.x)||isNaN(n.y)||isNaN(n.fromAngle)||isNaN(n.toAngle))return{x:NaN,y:NaN};var o=this._plotRect,s=n.fromAngle*(Math.PI/180),l=n.toAngle*(Math.PI/180),u=o.x+n.center.x+Math.cos(s)*n.outerRadius,d=o.x+n.center.x+Math.cos(l)*n.outerRadius,c=o.y+n.center.y-Math.sin(s)*n.outerRadius,h=o.y+n.center.y-Math.sin(l)*n.outerRadius,f=Math.min(u,d),p=Math.abs(d-u);return{x:f,y:Math.min(c,h),width:p,height:Math.abs(h-c),center:n.center,centerOffset:n.centerOffset,innerRadius:n.innerRadius,outerRadius:n.outerRadius,selectedRadiusChange:n.selectedRadiusChange,fromAngle:n.fromAngle,toAngle:n.toAngle}}if(-1!==i.type.indexOf("column")||-1!==i.type.indexOf("waterfall")){var v=this._getColumnSerieWidthAndOffset(e,t);n.height=Math.abs(n.y.to-n.y.from),n.y=Math.min(n.y.to,n.y.from),n.x+=v.offset,n.width=v.width}else if(-1!==i.type.indexOf("ohlc")||-1!==i.type.indexOf("candlestick")){v=this._getColumnSerieWidthAndOffset(e,t);var m=n.y,y=Math.min(m.Open,m.Close,m.Low,m.High),g=Math.max(m.Open,m.Close,m.Low,m.High);n.height=Math.abs(g-y),n.y=y,n.x+=v.offset,n.width=v.width}else if(-1!==i.type.indexOf("line")||-1!==i.type.indexOf("area"))n.width=n.height=0,n.y=n.y.to;else if(-1!==i.type.indexOf("bubble")||-1!==i.type.indexOf("scatter")){n.center={x:n.x,y:n.y.to};var b=n.y.radius;"circle"!==a.symbolType&&void 0!==a.symbolType&&null!==a.symbolType&&(b/=2),n.y=n.y.to,n.radius=b,n.width=2*b,n.height=2*b}if(n=this._fixCoords(n,e),i.polar||i.spider){var _=this._toPolarCoord(this._renderData[e].polarCoords,this._plotRect,n.x,n.y);n.x=_.x,n.y=_.y,n.center&&(n.center=this._toPolarCoord(this._renderData[e].polarCoords,this._plotRect,n.center.x,n.center.y))}return-1===i.type.indexOf("bubble")&&-1===i.type.indexOf("scatter")||(n.x-=b,n.y-=b),n}},{key:"_getItemCoord",value:function(e,t,r){var i,a,n=this.seriesGroups[e];if(!n||!this._renderData)return{x:NaN,y:NaN};if(!n.series[t])return{x:NaN,y:NaN};var o=this._plotRect;if(this._isPieGroup(e)){var s=this._renderData[e].offsets[t][r];if(!s)return{x:NaN,y:NaN};var l=(s.fromAngle+s.toAngle)/2*(Math.PI/180);return{x:i=o.x+s.x+Math.cos(l)*s.outerRadius,y:a=o.y+s.y-Math.sin(l)*s.outerRadius,center:{x:s.x,y:s.y},centerOffset:s.centerOffset,innerRadius:s.innerRadius,outerRadius:s.outerRadius,selectedRadiusChange:s.selectedRadiusChange,fromAngle:s.fromAngle,toAngle:s.toAngle}}if(i=o.x+this._renderData[e].xoffsets.data[r],a=this._renderData[e].offsets[t][r],isNaN(i)||!a)return{x:NaN,y:NaN};var u={};for(var d in a)u[d]=a[d];return{x:i,y:u}}},{key:"getXAxisValue",value:function(e,t){var r=this.seriesGroups[t];if(r){var i=this._getXAxis(t),a=this._plotRect,n=0,o=NaN,s=this._renderData[0].xoffsets.axisStats,l=0,u=0;if(r.polar||r.spider){if(isNaN(e.x)||isNaN(e.y))return NaN;var d=this._getPolarAxisCoords(t,a);if(this.renderer._ptdist(e.x,e.y,d.x,d.y)>d.r)return NaN;var c=Math.atan2(d.y-e.y,e.x-d.x);(c=Math.PI/2-c)<0&&(c=2*Math.PI+c),o=c*d.r;var h=d.startAngle+Math.PI/2,f=d.endAngle+Math.PI/2;l=h*d.r,u=f*d.r,n=(f-h)*d.r;var p=this._getPaddingSize(s,i,i.valuesOnTicks,n,!0,d.isClosedCircle,this._hasColumnSeries());d.isClosedCircle?(n-=p.left+p.right,u-=p.left+p.right):i.valuesOnTicks||(l+=p.left,u-=p.right)}else{if("horizontal"!==r.orientation){if(e<a.x||e>a.x+a.width)return NaN;o=e-a.x,n=a.width}else{if(e<a.y||e>a.y+a.height)return NaN;o=e-a.y,n=a.height}this._renderData[t]&&this._renderData[t].xoffsets&&(n-=(p=this._renderData[t].xoffsets.padding).left+p.right,o-=p.left),u=n}return this._smartPlot.scale(o,{min:l,max:u},{min:s.min.valueOf(),max:s.max.valueOf(),type:s.logAxis.enabled?"logarithmic":"linear",base:s.logAxis.base,flip:i.flip})}}},{key:"getValueAxisValue",value:function(e,t){var r=this.seriesGroups[t];if(r){var i=this._getValueAxis(t),a=this._plotRect,n=0,o=NaN;if(r.polar||r.spider){if(isNaN(e.x)||isNaN(e.y))return NaN;var s=this._getPolarAxisCoords(t,a);o=this.renderer._ptdist(e.x,e.y,s.x,s.y),o=(n=s.r)-o}else if("horizontal"===r.orientation){if(e<a.x||e>a.x+a.width)return NaN;o=e-a.x,n=a.width}else{if(e<a.y||e>a.y+a.height)return NaN;o=e-a.y,n=a.height}var l=this._stats.seriesGroups[t];return this._smartPlot.scale(o,{min:0,max:n},{min:l.min.valueOf(),max:l.max.valueOf(),type:l.logarithmic?"logarithmic":"linear",base:l.logBase,flip:!i.flip})}}},{key:"_detectDateFormat",value:function(e,t){var r={en_US_d:"M/d/yyyy",en_US_D:"dddd, MMMM dd, yyyy",en_US_t:"h:mm tt",en_US_T:"h:mm:ss tt",en_US_f:"dddd, MMMM dd, yyyy h:mm tt",en_US_F:"dddd, MMMM dd, yyyy h:mm:ss tt",en_US_M:"MMMM dd",en_US_Y:"yyyy MMMM",en_US_S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",en_CA_d:"dd/MM/yyyy",en_CA_D:"MMMM-dd-yy",en_CA_f:"MMMM-dd-yy h:mm tt",en_CA_F:"MMMM-dd-yy h:mm:ss tt",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",de_DE_d:"dd.MM.yyyy",de_DE_D:"dddd, d. MMMM yyyy",de_DE_t:"HH:mm",de_DE_T:"HH:mm:ss",de_DE_f:"dddd, d. MMMM yyyy HH:mm",de_DE_F:"dddd, d. MMMM yyyy HH:mm:ss",de_DE_M:"dd MMMM",de_DE_Y:"MMMM yyyy",fr_FR_d:"dd/MM/yyyy",fr_FR_D:"dddd d MMMM yyyy",fr_FR_t:"HH:mm",fr_FR_T:"HH:mm:ss",fr_FR_f:"dddd d MMMM yyyy HH:mm",fr_FR_F:"dddd d MMMM yyyy HH:mm:ss",fr_FR_M:"d MMMM",fr_FR_Y:"MMMM yyyy",it_IT_d:"dd/MM/yyyy",it_IT_D:"dddd d MMMM yyyy",it_IT_t:"HH:mm",it_IT_T:"HH:mm:ss",it_IT_f:"dddd d MMMM yyyy HH:mm",it_IT_F:"dddd d MMMM yyyy HH:mm:ss",it_IT_M:"dd MMMM",it_IT_Y:"MMMM yyyy",ru_RU_d:"dd.MM.yyyy",ru_RU_D:"d MMMM yyyy '?.'",ru_RU_t:"H:mm",ru_RU_T:"H:mm:ss",ru_RU_f:"d MMMM yyyy '?.' H:mm",ru_RU_F:"d MMMM yyyy '?.' H:mm:ss",ru_RU_Y:"MMMM yyyy",cs_CZ_d:"d.M.yyyy",cs_CZ_D:"d. MMMM yyyy",cs_CZ_t:"H:mm",cs_CZ_T:"H:mm:ss",cs_CZ_f:"d. MMMM yyyy H:mm",cs_CZ_F:"d. MMMM yyyy H:mm:ss",cs_CZ_M:"dd MMMM",cs_CZ_Y:"MMMM yyyy",he_IL_d:"dd MMMM yyyy",he_IL_D:"dddd dd MMMM yyyy",he_IL_t:"HH:mm",he_IL_T:"HH:mm:ss",he_IL_f:"dddd dd MMMM yyyy HH:mm",he_IL_F:"dddd dd MMMM yyyy HH:mm:ss",he_IL_M:"dd MMMM",he_IL_Y:"MMMM yyyy",hr_HR_d:"d.M.yyyy.",hr_HR_D:"d. MMMM yyyy.",hr_HR_t:"H:mm",hr_HR_T:"H:mm:ss",hr_HR_f:"d. MMMM yyyy. H:mm",hr_HR_F:"d. MMMM yyyy. H:mm:ss",hr_HR_M:"d. MMMM",hu_HU_d:"yyyy.MM.dd.",hu_HU_D:"yyyy. MMMM d.",hu_HU_t:"H:mm",hu_HU_T:"H:mm:ss",hu_HU_f:"yyyy. MMMM d. H:mm",hu_HU_F:"yyyy. MMMM d. H:mm:ss",hu_HU_M:"MMMM d.",hu_HU_Y:"yyyy. MMMM",jp_JP_d:"gg y/M/d",jp_JP_D:"gg y'?'M'?'d'?'",jp_JP_t:"H:mm",jp_JP_T:"H:mm:ss",jp_JP_f:"gg y'?'M'?'d'?' H:mm",jp_JP_F:"gg y'?'M'?'d'?' H:mm:ss",jp_JP_M:"M'?'d'?'",jp_JP_Y:"gg y'?'M'?'",lt_LT_d:"yyyy.MM.dd",lt_LT_D:"yyyy 'm.' MMMM d 'd.'",lt_LT_t:"HH:mm",lt_LT_T:"HH:mm:ss",lt_LT_f:"yyyy 'm.' MMMM d 'd.' HH:mm",lt_LT_F:"yyyy 'm.' MMMM d 'd.' HH:mm:ss",lt_LT_M:"MMMM d 'd.'",lt_LT_Y:"yyyy 'm.' MMMM",sa_IN_d:"dd-MM-yyyy",sa_IN_D:"dd MMMM yyyy dddd",sa_IN_t:"HH:mm",sa_IN_T:"HH:mm:ss",sa_IN_f:"dd MMMM yyyy dddd HH:mm",sa_IN_F:"dd MMMM yyyy dddd HH:mm:ss",sa_IN_M:"dd MMMM",basic_y:"yyyy",basic_ym:"yyyy-MM",basic_d:"yyyy-MM-dd",basic_dhm:"yyyy-MM-dd hh:mm",basic_bhms:"yyyy-MM-dd hh:mm:ss",basic2_ym:"MM-yyyy",basic2_d:"MM-dd-yyyy",basic2_dhm:"MM-dd-yyyy hh:mm",basic2_dhms:"MM-dd-yyyy hh:mm:ss",basic3_ym:"yyyy/MM",basic3_d:"yyyy/MM/dd",basic3_dhm:"yyyy/MM/dd hh:mm",basic3_bhms:"yyyy/MM/dd hh:mm:ss",basic4_ym:"MM/yyyy",basic4_d:"MM/dd/yyyy",basic4_dhm:"MM/dd/yyyy hh:mm",basic4_dhms:"MM/dd/yyyy hh:mm:ss"};t&&(r=Object.assign({},r,t));var i=[];for(var a in Array.isArray(e)?i=e:i.push(e),r)r[a]={format:r[a],count:0};for(var n=0;n<i.length;n++){var o=i[n];if(null!=o)for(var s in r)try{(o instanceof Date||Smart.Utilities.DateTime.parseDateString(o,void 0,r[s].format))&&r[s].count++}catch(e){}}var l={key:void 0,count:0};for(var u in r)r[u].count>l.count&&(l.key=u,l.count=r[u].count);return l.key?r[l.key].format:""}},{key:"_testXAxisDateFormat",value:function(e){var t=this,r=t._getXAxis(e),i=t._getDataLen(e),a={};if(t.localization.patterns)for(var n in t.localization.patterns)a["local_"+n]=t.localization.patterns[n];for(var o=[],s=0;s<i&&s<10;s++){var l=t._getDataValue(s,r.dataField,e);null!=l&&o.push(l)}return t._detectDateFormat(o,a)}},{key:"_getThemeColor",value:function(e){if("light"===this.theme)switch(e){case"background":return"#FFFFFF";case"line":return"#BCBCBC";case"band":return"#AAAAAA"}switch(e){case"background":return"#2E2E2E";case"line":return"#707070";case"band":return"#565656"}}},{key:"_legendLayout",get:function(){var e=this.legendLayout;return null!==e.height||null!==e.left||null!==e.top||null!==e.width||"vertical"===e.flow}}])&&i(d.prototype,c),h&&i(d,h),p}())}})},52:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=10)}({10:function(e,t){!function(){"use strict";Smart.Chart&&(Smart.Chart.prototype._moduleAnnotations=!0,Smart.Chart.prototype._renderAnnotation=function(e,t){var r=this,i=this.seriesGroups[e],a=this.renderer;if(!isNaN(e)){var n=this._get([this.getXAxisDataPointOffset(t.xValue,e),t.x]),o=this._get([this.getValueAxisDataPointOffset(t.yValue,e),t.y]),s=this._get([this.getXAxisDataPointOffset(t.xValue2,e),t.x2]),l=this._get([this.getValueAxisDataPointOffset(t.yValue2,e),t.y2]);if(i.polar||i.spider){var u=this.getPolarDataPointOffset(t.xValue,t.yValue,e);!u||isNaN(u.x)||isNaN(u.y)?(n=t.x,o=t.y):(n=u.x,o=u.y)}if(isNaN(o)||isNaN(n))return!1;if("horizontal"===i.orientation){var d=n;n=o,o=d,d=s,s=l,l=d}t.offset&&(isNaN(t.offset.x)||(n+=t.offset.x,s+=t.offset.x),isNaN(t.offset.y)||(o+=t.offset.y,l+=t.offset.y));var c,h,f=this._get([t.width,s-n]),p=this._get([t.height,l-o]);switch(t.type){case"rect":c=a.rect(n,o,f,p);break;case"circle":c=a.rect(n,o,t.radius);break;case"line":c=a.rect(n,o,s,l);break;case"path":c=a.path(t.path)}if(c&&a.attr(c,{fill:t.fillColor,stroke:t.lineColor,opacity:this._get([t.fillOpacity,t.opacity]),"stroke-opacity":this._get([t.lineOpacity,t.opacity]),"stroke-width":t.lineWidth,"stroke-dasharray":t.dashStyle||"none"}),t.text){var v=t.text,m=0,y=0;v.offset&&(isNaN(v.offset.x)||(m+=v.offset.x),isNaN(v.offset.y)||(y+=v.offset.y)),h=a.text(v.value,n+m,o+y,NaN,NaN,v.angle,{},!0===v.clip,v.horizontalAlignment||"center",v.verticalAlignment||"center",v.rotationPoint||"centermiddle"),a.attr(h,{fill:v.fillColor,stroke:v.lineColor,class:"smart-chart-annotation-text "+(v.class||"")})}for(var g=["click","mouseenter","mouseleave"],b=this,_=function(e){var i=g[e];c&&r.renderer.addHandler(c,i,(function(){b._raiseAnnotationEvent(t,i)})),h&&r.renderer.addHandler(h,i,(function(){b._raiseAnnotationEvent(t,i)}))},x=0;x<g.length;x++)_(x)}},Smart.Chart.prototype._raiseAnnotationEvent=function(e,t){this.$.fireEvent("annotation"+t.charAt(0).toUpperCase()+t.slice(1),{annotation:e})})}()}})},53:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=11)}({11:function(e,t){!function(){"use strict";Smart.Chart&&(Smart.Chart.prototype._moduleApi=!0,Smart.Chart.prototype.getItemsCount=function(e,t){var r=this.seriesGroups[e];if(!this._isSerieVisible(e,t))return 0;var i=this._renderData;return!r||!i||i.length<=e?0:r.series[t]?i[e].offsets[t].length:0},Smart.Chart.prototype.getXAxisRect=function(e){var t=this._renderData;if(t&&!(t.length<=e)&&t[e].xAxis)return t[e].xAxis.rect},Smart.Chart.prototype.getXAxisLabels=function(e){var t=[],r=this._renderData;if(!r||r.length<=e)return t;if(!(r=r[e].xAxis))return t;var i=this.seriesGroups[e];if(i.polar||i.spider){for(var a=0;a<r.polarLabels.length;a++){var n=r.polarLabels[a];t.push({offset:{x:n.x,y:n.y},value:n.value})}return t}for(var o=this._getXAxis(e),s=this.getXAxisRect(e),l="top"===o.position||"right"===o.position,u="horizontal"===i.orientation,d=0;d<r.data.length;d++)u?t.push({offset:{x:s.x+(l?0:s.width),y:s.y+r.data.data[d]},value:r.data.xvalues[d]}):t.push({offset:{x:s.x+r.data.data[d],y:s.y+(l?s.height:0)},value:r.data.xvalues[d]});return t},Smart.Chart.prototype.getValueAxisRect=function(e){var t=this._renderData;if(t&&!(t.length<=e)&&t[e].valueAxis)return t[e].valueAxis.rect},Smart.Chart.prototype.getValueAxisLabels=function(e){var t=[],r=this._renderData;if(!r||r.length<=e)return t;if(!(r=r[e].valueAxis))return t;var i=this._getValueAxis(e),a="top"===i.position||"right"===i.position,n=this.seriesGroups[e],o="horizontal"===n.orientation;if(n.polar||n.spider){for(var s=0;s<r.polarLabels.length;s++){var l=r.polarLabels[s];t.push({offset:{x:l.x,y:l.y},value:l.value})}return t}for(var u=0;u<r.items.length;u++)o?t.push({offset:{x:r.itemOffsets[r.items[u]].x+r.itemWidth/2,y:r.rect.y+(a?r.rect.height:0)},value:r.items[u]}):t.push({offset:{x:r.rect.x+r.rect.width,y:r.itemOffsets[r.items[u]].y+r.itemWidth/2},value:r.items[u]});return t},Smart.Chart.prototype.getPlotAreaRect=function(){return this._plotRect},Smart.Chart.prototype.getRect=function(){return this._rect},Smart.Chart.prototype.showToolTip=function(e,t,r,i,a){var n=this.getItemCoord(e,t,r);isNaN(n.x)||isNaN(n.y)||this._startTooltipTimer(e,t,r,n.x,n.y,i,a)},Smart.Chart.prototype.hideToolTip=function(e){isNaN(e)&&(e=0);var t=this;t._cancelTooltipTimer(),setTimeout((function(){t._hideToolTip(0)}),e)})}()}})},54:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=14)}({14:function(e,t){!function(){"use strict";Smart.Chart&&(Smart.Chart.prototype._moduleRangeSelector=!0,Smart.Chart.prototype._renderXAxisRangeSelector=function(e,t){var r=this,i=r.seriesGroups[e],a=r._getXAxis(e),n=a?a.rangeSelector:void 0;if(!r._isSelectorRefresh){var o=(n&&n.renderTo?n.renderTo:r).getElementsByClassName("smart-chart-range-selector")[0];o&&o.parentElement.removeChild(o)}if(!a||!1===a.visible||"spider"===i.type)return!1;if(!r._isGroupVisible(e))return!1;if(!n)return!1;var s="horizontal"===i.orientation;n.renderTo&&(s=!1),r.rightToLeft&&(a.flip=!0);var l=s?r.offsetHeight:r.offsetWidth;l-=4;var u=this._getXAxisStats(e,a,l),d=a.position;if(n.renderTo&&n.position&&(d=n.position),!this._isSelectorRefresh){var c=n.renderTo,h=document.createElement("div");if(h.className="smart-chart-range-selector smart-unselectable",h.style.position="absolute",h.style.backgroundColor="transparent",h.style.onselectstart=function(){return!1},c)c.appendChild(h),h.style.width=c.offsetWidth+"px",h.style.height=c.offsetHeight+"px",t.width=c.offsetWidth,t.height=c.offsetHeight;else{this.renderer.getContainer().appendChild(h);var f=this._selectorGetSize(a);s?(h.style.left=1+t.x+("right"!==d?-f:t.width)+"px",h.style.top="0",h.style.height=l+"px",h.style.width=f+"px",t.height=f):(h.style.left="1px",h.style.top=t.y+("top"!==d?t.height:-f)+"px",h.style.height=f+"px",h.style.width=l+"px")}h.parentDiv=h.parentElement,this._refreshSelector(e,a,u,h,t,s)}return this._isSelectorRefresh=!1,!0},Smart.Chart.prototype._refreshSelector=function(e,t,r,i,a,n){var o=this,s={},l=t.rangeSelector;for(var u in l)s[u]=l[u];delete s.padding;var d=s.minValue,c=s.maxValue;isNaN(d)&&(d=Math.min(r.min.valueOf(),r.dsRange.min.valueOf())),isNaN(c)&&(c=Math.max(r.max.valueOf(),r.dsRange.max.valueOf())),this._isDate(r.min)&&(d=new Date(d)),this._isDate(r.max)&&(c=new Date(c));var h=t.position;l.renderTo&&l.position&&(h=l.position),s.dataField=t.dataField,delete s.rangeSelector,s.type=t.type,s.baseUnit=null!==l.baseUnit?l.baseUnit:t.baseUnit,s.minValue=d,s.maxValue=c,s.flip=t.flip,s.position=h;var f=2,p=2,v=2,m=2;l.renderTo||(f=n?0:a.x,p=n?0:this._rect.width-a.x-a.width,v=n?a.y:5,m=n?this._paddedRect.height-this._plotRect.height:5);var y=l.padding;y=null!=y||l.renderTo?{left:y&&y.left?y.left:f,top:y&&y.top?y.top:v,right:y&&y.right?y.right:p,bottom:y&&y.bottom?y.bottom:m}:{left:f,top:v,right:p,bottom:m};for(var g=l.dataField,b=0;null==g&&b<this.seriesGroups.length;b++)for(var _=0;null==g&&_<this.seriesGroups[b].series.length;_++)g=this.seriesGroups[b].series[_].dataField;var x={parentChart:this,padding:y,_isRangeSelectorInstance:!0,theme:this.theme,caption:l.caption,description:l.description,titlePadding:l.titlePadding,colorScheme:l.colorScheme||this.colorScheme,backgroundColor:l.backgroundColor||this.backgroundColor||o._getThemeColor("background"),backgroundImage:l.backgroundImage,showBorderLine:null!==l.showBorderLine?l.showBorderLine:!!l.renderTo,borderLineWidth:l.borderLineWidth||this.borderLineWidth,borderLineColor:l.borderLineColor||this.borderLineColor||o._getThemeColor("line"),rightToLeft:null!==l.rightToLeft?l.rightToLeft:this.rightToLeft,greyScale:null!==l.greyScale?l.greyScale:this.greyScale,renderEngine:this.renderEngine,showLegend:!1,animation:"none",enableEvents:!1,showToolTips:!1,dataSource:this.dataSource,xAxis:s,seriesGroups:[{orientation:n?"horizontal":"vertical",valueAxis:{visible:!1},type:l.serieType,skipOverlappingPoints:l.skipOverlappingPoints,columnSeriesOverlap:l.columnSeriesOverlap,columnsGapPercent:l.columnsGapPercent,seriesGapPercent:l.seriesGapPercent,series:[{dataField:g,opacity:.8,lineWidth:1}]}]};l.seriesGroups&&(x.seriesGroups=l.seriesGroups),l.valueAxis.visible&&(x.valueAxis=l.valueAxis),x.showBorderLine||(x.borderLineWidth=1,x.borderLineColor=o._get([this.backgroundColor,this.background,o._getThemeColor("background")]),x.showBorderLine=!0),o._supressBindingRefresh=!0,i.innerHTML="";var w=document.createElement("smart-chart");for(var S in w.rightToLeft=o.rightToLeft,w.parentDiv=i,x)w[S]=x[S];i.appendChild(w),o._rangeSelectorInstances[e]=w,o._supressBindingRefresh=!1;var k=function(){if(w._plotRect){var t=w._paddedRect;if(t.height=w._plotRect.height,n||"top"!==h){if(n){var r=w._renderData[0].xAxis.rect.width;t.width-=r,"right"!==h&&(t.x+=r)}}else t.y+=w._renderData[0].xAxis.rect.height;if(o._createSliderElements(e,i,t,l,{min:s.minValue,max:s.maxValue}),o._rangeSelectorEventData={groupIndex:e,renderTo:i,swapXY:n},o.hasAttribute("aria-owns")){var a=o.getAttribute("aria-owns");o.setAttribute("aria-owns",a+" "+w.id)}else o.setAttribute("aria-owns",w.id)}};w.isRendered?k():w.whenRendered((function(){k()}))},Smart.Chart.prototype._createSliderElements=function(e,t,r,i,a){var n=this,o=t.getElementsByClassName("slider")[0];o&&o.parentElement.removeChild(o);var s=i.selectedRangeColor||"blue",l=n._get([i.selectedRangeOpacity,.1]),u=n._get([i.unselectedRangeOpacity,.5]),d=i.unselectedRangeColor||"white",c=i.rangeLineColor||"grey",h=document.createElement("div");for(h.className="slider",h.style.position="absolute",h.style.background=s,h.style.opacity=l,h.style.left=r.x+"px",h.style.top=r.y+"px",h.style.width=r.width+"px",h.style.height=r.height+"px",t.appendChild(h);this._sliders.length<e+1;)this._sliders.push({});function f(e,t){var r=document.createElement("div");return r.className="slider",r.style.position="absolute",r.style.background=e,r.style.opacity=t,r}function p(){var e=document.createElement("div");return e.className="slider",e.style.position="absolute",e.style.background="#FFFFFF",e.style.borderStyle="solid",e.style.borderWidth="1px",e.style.borderRadius="3px",e.style.borderColor=c,e.setAttribute("role","slider"),e.setAttribute("aria-controls",n.id),e}var v=h.getBoundingClientRect(),m=t.getBoundingClientRect();this._sliders[e]={element:h,host:t.firstElementChild,_sliderInitialAbsoluteRect:{x:v.left,y:v.top,width:r.width,height:r.height},_hostInitialAbsolutePos:{x:m.left,y:m.top},getRect:function(){var e=t.getBoundingClientRect();return{x:e.left-this._hostInitialAbsolutePos.x+this._sliderInitialAbsoluteRect.x,y:e.top-this._hostInitialAbsolutePos.y+this._sliderInitialAbsoluteRect.y,width:this._sliderInitialAbsoluteRect.width,height:this._sliderInitialAbsoluteRect.height}},rect:r,left:f(d,u),right:f(d,u),leftTop:f(c,u),rightTop:f(c,u),leftBorder:f(c,u),leftBar:p(),rightBorder:f(c,u),rightBar:p()};var y=this._sliders[e];t.appendChild(y.left),t.appendChild(y.right),t.appendChild(y.leftTop),t.appendChild(y.rightTop),t.appendChild(y.leftBorder),t.appendChild(y.rightBorder),t.appendChild(y.leftBar),t.appendChild(y.rightBar);var g=this._renderData[e].xAxis.data.axisStats,b=g.min.valueOf(),_=g.max.valueOf();"number"==typeof g.min?(y.leftBar.setAttribute("aria-valuemin",a.min),y.leftBar.setAttribute("aria-valuemax",a.max),y.leftBar.setAttribute("aria-valuenow",b),y.rightBar.setAttribute("aria-valuemin",a.min),y.rightBar.setAttribute("aria-valuemax",a.max),y.rightBar.setAttribute("aria-valuenow",_)):(y.leftBar.setAttribute("aria-valuemin",a.min.getTime()),y.leftBar.setAttribute("aria-valuemax",a.max.getTime()),y.leftBar.setAttribute("aria-valuenow",g.min.getTime()),y.leftBar.setAttribute("aria-valuetext",g.min.toLocaleString()),y.rightBar.setAttribute("aria-valuemin",a.min.getTime()),y.rightBar.setAttribute("aria-valuemax",a.max.getTime()),y.rightBar.setAttribute("aria-valuenow",g.max.getTime()),y.rightBar.setAttribute("aria-valuetext",g.max.toLocaleString()));var x=this._valueToOffset(e,b),w=this._valueToOffset(e,_);if(x>w){var S=w;w=x,x=S}"horizontal"!==this.seriesGroups[e].orientation?(h.style.left=Math.round(r.x+x)+"px",h.style.top=r.y+"px",h.style.width=Math.round(w-x)+"px",h.style.height=r.height+"px"):(h.style.left=r.x+"px",h.style.top=Math.round(r.y+x)+"px",h.style.width=r.width+"px",h.style.height=Math.round(w-x)+"px"),this._setSliderPositions(e,x,w)},Smart.Chart.prototype._setSliderPositions=function(e,t,r){var i=this.seriesGroups[e],a=this._getXAxis(e),n=a.rangeSelector,o="horizontal"===i.orientation;a.rangeSelector.renderTo&&(o=!1);var s=a.position;n.renderTo&&n.position&&(s=n.position);var l=this._sliders[e],u=o?"top":"left",d=o?"left":"top",c=o?"height":"width",h=o?"width":"height",f=o?"y":"x",p=o?"x":"y",v=l.rect;l.startOffset=t,l.endOffset=r,l.left.style[u]=v[f]+"px",l.left.style[d]=v[p]+"px",l.left.style[c]=t+"px",l.left.style[h]=v[h]+"px",l.right.style[u]=v[f]+r+"px",l.right.style[d]=v[p]+"px",l.right.style[c]=v[c]-r+1+"px",l.right.style[h]=v[h]+"px",l.leftTop.style[u]=v[f]+"px",l.leftTop.style[d]=v[p]+(o&&"right"===s||!o&&"top"!==s?0:v[h])+"px",l.leftTop.style[c]=t+"px",l.leftTop.style[h]="1px",l.rightTop.style[u]=v[f]+r+"px",l.rightTop.style[d]=v[p]+(o&&"right"===s||!o&&"top"!==s?0:v[h])+"px",l.rightTop.style[c]=v[c]-r+1+"px",l.rightTop.style[h]="1px",l.leftBorder.style[u]=v[f]+t+"px",l.leftBorder.style[d]=v[p]+"px",l.leftBorder.style[c]="1px",l.leftBorder.style[h]=v[h]+"px";var m=v[h]/4;m>20&&(m=20),m<3&&(m=3),l.leftBar.style[u]=v[f]+t-3+"px",l.leftBar.style[d]=v[p]+v[h]/2-m/2+"px",l.leftBar.style[c]="5px",l.leftBar.style[h]=m+"px",l.rightBorder.style[u]=v[f]+r+"px",l.rightBorder.style[d]=v[p]+"px",l.rightBorder.style[c]="1px",l.rightBorder.style[h]=v[h]+"px",l.rightBar.style[u]=v[f]+r-3+"px",l.rightBar.style[d]=v[p]+v[h]/2-m/2+"px",l.rightBar.style[c]="5px",l.rightBar.style[h]=m+"px"},Smart.Chart.prototype._resizeState={},Smart.Chart.prototype._onSliderMouseDown=function(e){e.stopImmediatePropagation(),e.stopPropagation(),this._sliders[this._rangeSelectorEventData.groupIndex]&&(void 0!==this._resizeState.state&&null!==this._resizeState.state||this._testAndSetReadyResize(e),"ready"===this._resizeState.state&&(this._draggingRangeSelector=!0,this._resizeState.state="resizing"))},Smart.Chart.prototype._valueToOffset=function(e,t){var r=this.seriesGroups[e],i=this._sliders[e],a=i.host._renderData[0].xAxis.data.axisStats,n=a.min.valueOf(),o=a.max.valueOf()-n;0===o&&(o=1);var s=this._getXAxis(e),l="horizontal"===r.orientation?"height":"width",u=(t.valueOf()-n)/o;return i.getRect()[l]*(s.flip?1-u:u)},Smart.Chart.prototype._offsetToValue=function(e,t){var r=this._sliders[e],i=this.seriesGroups[e],a=this._getXAxis(e),n="horizontal"===i.orientation?"height":"width",o=r.getRect()[n];0===o&&(o=1);var s=r.host._renderData[0].xAxis.data.axisStats,l=s.min.valueOf(),u=s.max.valueOf(),d=t/o*(u-l)+l;return!0===a.flip&&(d=u-t/o*(u-l)),this._isDate(s.min)||this._isDate(s.max)?d=new Date(d):((void 0===a.dataField||null===a.dataField||s.useIndeces)&&(d=Math.round(d)),d<s.min&&(d=s.min),d>s.max&&(d=s.max)),d},Smart.Chart.prototype._onSliderMouseUp=function(e){var t=this,r=t._rangeSelectorEventData.groupIndex,i=t._rangeSelectorEventData.swapXY,a=t._sliders[r];if(delete t._draggingRangeSelector,a&&"resizing"===t._resizeState.state){e.stopImmediatePropagation(),e.stopPropagation(),t._resizeState={},t.style.cursor="default";var n=i?"top":"left",o=i?"y":"x",s=a.element.getBoundingClientRect()[n],l=s+(i?a.element.offsetHeight:a.element.offsetWidth),u=a.getRect(),d=t._offsetToValue(r,s-u[o]),c=t._offsetToValue(r,l-u[o]);!a.host._renderData[0].xAxis.data.axisStats.isTimeUnit&&c.valueOf()-d.valueOf()>864e5&&(d.setHours(0,0,0,0),c.setDate(c.getDate()+1),c.setHours(0,0,0,0));var h=t._getXAxis(r);if(h.flip){var f=d;d=c,c=f}for(var p=0;p<t.seriesGroups.length;p++)t._getXAxis(p)===h&&(t._selectorRange[p]={min:d,max:c});t._isSelectorRefresh=!0;var v=t.animation;t.$.fireEvent("rangeSelectionChanging",{instance:t,minValue:d,maxValue:c}),t.animation="none",t.update(),t.animation=v,t.$.fireEvent("rangeSelectionChanged",{instance:t,minValue:d,maxValue:c}),"number"==typeof d?(a.leftBar.setAttribute("aria-valuenow",d),a.rightBar.setAttribute("aria-valuenow",c)):(a.leftBar.setAttribute("aria-valuenow",d.getTime()),a.leftBar.setAttribute("aria-valuetext",d.toLocaleString()),a.rightBar.setAttribute("aria-valuenow",c.getTime()),a.rightBar.setAttribute("aria-valuetext",c.toLocaleString()))}},Smart.Chart.prototype._onSliderMouseMove=function(e){var t=this,r=t._rangeSelectorEventData.groupIndex,i=t._sliders[r],a=t._rangeSelectorEventData.swapXY;if(i){var n=i.getRect(),o=i.element,s={left:e.clientX,top:e.clientY},l=o.getBoundingClientRect(),u=a?"top":"left",d=parseFloat(getComputedStyle(o)[u]),c=a?"height":"width",h=a?"y":"x";if("resizing"===t._resizeState.state){if(e.stopImmediatePropagation(),e.stopPropagation(),"left"===t._resizeState.side){var f=Math.round(s[u]-l[u]),p=n[h];if(l[u]+f>=p&&l[u]+f<=p+n[c]){var v=parseInt(d),m=Math.max(2,(a?o.offsetHeight:o.offsetWidth)-f);o.style[c]=m+"px",o.style[u]=v+f+"px"}}else if("right"===t._resizeState.side){var y=a?o.offsetHeight:o.offsetWidth,g=Math.round(s[u]-l[u]-y),b=n[h];if(l[u]+y+g>=b&&l[u]+g+y<=b+n[c]){var _=Math.max(2,y+g);o.style[c]=_+"px"}}else if("move"===t._resizeState.side){var x=a?o.offsetHeight:o.offsetWidth,w=parseInt(d),S=Math.round(s[u]-t._resizeState.startPos);l[u]+S>=n[h]&&l[u]+S+x<=n[h]+n[c]&&(t._resizeState.startPos=s[u],o.style[u]=w+S+"px")}var k=parseInt(d)-i.rect[h],C=k+(a?o.offsetHeight:o.offsetWidth);t._setSliderPositions(r,k,C)}else t._testAndSetReadyResize(e)}},Smart.Chart.prototype._testAndSetReadyResize=function(e){var t=this,r=t._rangeSelectorEventData,i=r.renderTo,a=r.groupIndex,n=t._sliders[a],o=r.swapXY,s=n.getRect(),l=n.element,u={left:e.clientX,top:e.clientY},d=l.getBoundingClientRect(),c=o?"left":"top",h=o?"top":"left",f=o?"width":"height",p=t._isTouchDevice?30:5;u[c]>=d[c]&&u[c]<=d[c]+s[f]?Math.abs(u[h]-d[h])<=p?(i.style.cursor=o?"row-resize":"col-resize",t._resizeState={state:"ready",side:"left"}):Math.abs(u[h]-d[h]-(o?l.offsetHeight:l.offsetWidth))<=p?(i.style.cursor=o?"row-resize":"col-resize",t._resizeState={state:"ready",side:"right"}):u[h]+p>d[h]&&u[h]-p<d[h]+(o?l.offsetHeight:l.offsetWidth)?(i.style.cursor="pointer",t._resizeState={state:"ready",side:"move",startPos:u[h]}):(i.style.cursor="default",t._resizeState={}):(i.style.cursor="default",t._resizeState={})},Smart.Chart.prototype._selectorGetSize=function(e){return e.rangeSelector.renderTo?0:e.rangeSelector.size||this._paddedRect.height/3})}()}})},55:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=15)}({15:function(e,t){!function(){"use strict";Smart.Chart&&(Smart.Chart.prototype._moduleWaterfall=!0,Smart.Chart.prototype._isSummary=function(e,t){for(var r=this.seriesGroups[e],i=0;i<r.series.length;i++)if(void 0!==r.series[i].summary&&void 0!==this._getDataValue(t,r.series[i].summary,e))return!0;return!1},Smart.Chart.prototype._applyWaterfall=function(e,t,r,i,a,n,o,s,l){var u=this.seriesGroups[r];if(0===e.length)return e;for(var d,c=i,h={},f=[],p=[],v=0;v<u.series.length;v++)p.push(this._isSerieVisible(r,v));for(var m={},y=0;y<t;y++)for(var g=i,b=0,_=this._isSummary(r,y),x=0;x<e.length;x++)if(p[x]){var w=0;if(_){w=g===i?a:0,e[x][y].value=h[x],e[x][y].summary=!0,d=e[x][y].value<w,s&&(d=!d);var S;S=isNaN(n)?this._getDataPointOffsetDiff(e[x][y].value,w,w,NaN,o,i,s):this._getDataPointOffsetDiff(e[x][y].value+b,0===b?a:b,w||a,n,o,i,s),e[x][y].to=g+(d?S:-S),e[x][y].from=g,l&&(b+=e[x][y].value,g=e[x][y].to)}else{var k=l?-1:x;if(!isNaN(e[x][y].value)){void 0===m[k]&&(w=a,m[k]=!0),d=e[x][y].value<w,s&&(d=!d);var C;C=l?c:0===y?i:e[x][f[x]].to;var A;A=isNaN(n)?this._getDataPointOffsetDiff(e[x][y].value,w,w,NaN,o,i,s):this._getDataPointOffsetDiff(e[x][y].value+(isNaN(h[k])?0:h[k]),isNaN(h[k])?a:h[k],w||a,n,o,C,s),e[x][y].to=c=C+(d?A:-A),e[x][y].from=C,isNaN(h[k])?h[k]=e[x][y].value:h[k]+=e[x][y].value,-1===k&&(isNaN(h[x])?h[x]=e[x][y].value:h[x]+=e[x][y].value),l||(f[x]=y)}}}return e})}()}})},94:function(e,t,r){"use strict";r.r(t),r.d(t,"smartChart",(function(){return h})),r.d(t,"smartDataAdapter",(function(){return f}));r(0),r(1),r(2),r(21),r(11),r(51),r(54),r(53),r(55),r(52),r(25);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return function(){var t,r=u(e);if(l()){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){d(l,Smart.Component);var t,r,i,s=o(l);function l(){return a(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"name",get:function(){return"smartChart"}}])&&n(t.prototype,r),i&&n(t,i),l}(),f=function(e){d(r,Smart.DataAdapter);var t=o(r);function r(){return a(this,r),t.apply(this,arguments)}return r}()}});