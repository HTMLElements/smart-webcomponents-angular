
/* Smart HTML Elements v7.6.0 (2020-June) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */ //

!function(e){var t={};function n(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(a,l,function(t){return e[t]}.bind(null,l));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=43)}({43:function(e,t){class n{constructor(e=null){const t=this;t._parent=null,t._updating=!1,t._touched=!1,t._pristine=!0,t._disabled=!1,t.status="valid",t._onChange=[],t.registerOnChange(e=>{t.writeValue(e)}),t._applyFormState(e)}registerOnChange(e){this._onChange.push(e)}get parent(){return this._parent}set parent(e){this._parent=e}get valid(){return"valid"===this.status}get invalid(){return"invalid"===this.status}get dirty(){return!this._pristine}get untouched(){return!this._touched}get disabled(){return this._disabled}get enabled(){return!1===this._disabled}get value(){return this._value}set value(e){this.setValue(e)}setValue(e,t={}){const n=this;n._value=n._pendingValue=e,n._onChange.length&&!1!==t.emitModelToViewChange&&n._onChange.forEach(e=>e(n.value,!1!==t.emitViewToModelChange)),n.updateValueAndValidate(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this._value=this._pendingValue=e}_runValidator(){return this._validate()}_validate(){return null}updateValueAndValidate(e={}){const t=this;t._setInitialStatus(),t._updateValue(),t.enabled&&(t.errors=t._runValidator(),t.status=t._calculateStatus()),!1!==e.emitEvent&&(t.onValueChanges&&t.onValueChanges(t.value),t.onStatusChanges&&t.onStatusChanges(t.status)),t._onValueAndStatusUpdate&&t._onValueAndStatusUpdate(),t._parent&&!e.onlySelf&&t._parent.updateValueAndValidate(e)}_setInitialStatus(){this.status=this._allControlsDisabled()?"disabled":"valid"}_updateValue(){}_allControlsDisabled(){return this._allControls("disabled")}_allControls(e){return this[e]}_anyControls(e){return this[e]}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_calculateStatus(){return this._allControls("disabled")?"disabled":this.errors?"invalid":this._anyControls("pending")?"pending":this._anyControls("invalid")?"invalid":"valid"}markAsUntouched(e={}){this.touched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsPristine(e={}){this._pristine=!0,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsDirty(e={}){this._pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}_updatePristine(e={}){const t=this;t._pristine=!this._anyControls("dirty"),t._parent&&t._parent._updatePristine(e)}_parentMarkedDirty(e){const t=this._parent&&this._parent.dirty;return!e&&t&&!this._parent._anyControlsDirty()}_forEachChild(){}disable(e={}){const t=this,n=t._parentMarkedDirty(e.onlySelf);t.status="disabled",t.errors=null,t._disabled=!0,t._forEachChild(t=>{t.disable(Object.assign({},e,{onlySelf:!0}))}),t._updateValue(),!1!==e.emitEvent&&(t.onValueChanges&&t.onValueChanges(this.value),t.onStatusChanges&&t.onStatusChanges(this.status)),t._updateAncestors(Object.assign({},e,{skipPristineCheck:n}))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="valid",this._forEachChild(t=>{t.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidate({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t}))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidate(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}}class a extends n{constructor(e,t,n){super(t,n);const a=this;if(a.element=e,a.input=e,Object.keys(n).forEach(e=>{a["_"+e]=n[e]}),a._initProps(n),n&&n.rowElement){if(a.rowElement=n.rowElement,a._setupCustomInput(),"header"===a.type)return void a.refresh()}else a.rowElement=a.element.parentElement,a.element=document.createElement("div"),a.element.setAttribute("form-control-name",a.input.getAttribute("form-control-name")),a.element.appendChild(a.input),a.rowElement.appendChild(a.element);a.element.classList.add("smart-untouched"),a.element.classList.add("smart-pristine"),a.element.classList.add("smart-form-control"),a._disabled=void 0!==a.input.disabled&&a.input.disabled,a._setupInput(),a.updateValueAndValidate(),a._onValueAndStatusUpdate=()=>{a.element&&(a.element.classList.remove("smart-valid"),a.element.classList.remove("smart-invalid"),a.element.classList.add("smart-"+a.status))},a.refresh()}_initProps(e){const t=this;if(t.name||(t.name=e.name),!t.name){const e=t.element.nodeName.toLowerCase()+Smart.Utilities.Core.createGUID();t.name=e.replace(/-/gi,"")}t._rules||(t._rules=[]),t._type||(t._type="text"),t._width||(t._width=""),t._labelWidth||(t._labelWidth=""),t._labelPosition||(t._labelPosition="left"),t._labelAlign||(t._labelAlign="left"),t._align||(t._align="left"),t._label||(t._label=""),t._hint||(t._hint=""),t._placeholder||(t._placeholder=""),t._options||(t._options=null),t._height||(t._height=""),t._component||(t._component=""),t._info||(t._info=""),t._infoPosition||(t._infoPosition="right"),t._padding||(t._padding=null)}_setupCustomInput(){const e=this;let t=null;const n=()=>{const t=[];if(e._options)for(let n=0;n<e._options.length;n++){const a=e._options[n],l="string"==typeof a?a:a.label||a.value,s="string"==typeof a?a:a.value||"";t.push({label:l,value:s})}return t};switch(e._type){case"submit":case"button":Smart.Button?t=document.createElement("smart-button"):(t=document.createElement("button"),t.classList.add("smart-button"),t.innerHTML=e._text||""),t.type=e._type,t.innerHTML=e._text||"",e._action&&(t.onclick=()=>{switch(e._action){case"reset":e.form&&e.form.reset();break;case"submit":e.form&&e.form.submit()}});break;case"boolean":case"bool":case"checkBox":case"checkbox":case"radio":case"option":{t=document.createElement("div");const n="checkbox"!==e._type.toLowerCase()&&"boolean"!==e._type&&"bool"!==e._type;"horizontal"===e._optionsLayout&&t.classList.add("smart-form-row-flex");const a=a=>{const l=document.createElement("div"),s="string"==typeof a?a:a.label||a.value,i="string"==typeof a?"":a.value||"";let r=document.createElement("input");if(l.classList.add("smart-form-option"),Smart.RadioButton&&Smart.CheckBox)r=n?document.createElement("smart-radio-button"):document.createElement("smart-check-box"),r.value=i,r.innerHTML=s,r.name=e.name,r.groupName=e.name,l.appendChild(r);else{const t=document.createElement("span");t.innerHTML=s,r.value=i,r.type=n?"radio":"checkbox",r.name=e.name,t.onpointerdown=()=>{r.click()},l.appendChild(r),l.appendChild(t)}e.columnWidth&&"horizontal"===e.optionsLayout&&(l.style.width=e.columnWidth),t.appendChild(l)};if(e._options)for(let t=0;t<e._options.length;t++){a(e._options[t])}else a(e.label);break}case"text":case"input":if(!Smart.Input){t=document.createElement("input"),t.classList.add("smart-input"),t.placeholder=e.placeholder;break}t=document.createElement("smart-input"),t.dropDownAppendTo="body",t.dataSource=n(),t.placeholder=e.placeholder;break;case"mask":if(!Smart.MaskedTextBox){t=document.createElement("input"),t.classList.add("smart-input"),t.placeholder=e.placeholder;break}t=document.createElement("smart-masked-text-box"),t.mask=e._mask,t.placeholder=e.placeholder;break;case"date":case"time":case"datetime":if(Smart.DateTimePicker)t=document.createElement("smart-date-time-picker"),t.calendarButton=!0,"datetime"===e._type?(t.formatString="F",t.dropDownDisplayMode="default"):"date"===e._type?(t.formatString="d",t.dropDownDisplayMode="calendar"):"time"===e._type&&(t.formatString="T",t.dropDownDisplayMode="timePicker"),t.dropDownAppendTo="body";else{if(!Smart.DateRangeInput){t=document.createElement("input"),t.classList.add("smart-input"),t.type="date",t.placeholder=e.placeholder;break}t=document.createElement("smart-date-range-input"),t.dropDownAppendTo="body"}t.placeholder=e.placeholder;break;case"numberinput":case"numberInput":case"number":if(!Smart.NumericTextBox){t=document.createElement("input"),t.type="number",t.classList.add("smart-input"),t.placeholder=e.placeholder;break}t=document.createElement("smart-numeric-text-box"),t.spinButtons=!0;break;case"password":case"passwordinput":if(!Smart.PasswordTextBox){t=document.createElement("input"),t.type="password",t.classList.add("smart-input"),t.placeholder=e.placeholder;break}t=document.createElement("smart-password-text-box"),t.dropDownAppendTo="body",t.dataSource=n(),t.placeholder=e.placeholder;break;case"checkinput":t=document.createElement("smart-check-input"),t.dropDownAppendTo="body",t.dataSource=n(),t.placeholder=e.placeholder;break;case"multiinput":t=document.createElement("smart-multi-input"),t.dropDownAppendTo="body",t.dataSource=n(),t.placeholder=e.placeholder;break;case"multicomboinput":t=document.createElement("smart-multi-combo-input"),t.dropDownAppendTo="body",t.dataSource=n(),t.placeholder=e.placeholder;break;case"combobox":case"dropdownlist":t=document.createElement("smart-drop-down-list"),t.dropDownAppendTo="body",t.dataSource=n(),t.placeholder=e.placeholder;break;case"header":t=document.createElement("div");break;case"separator":t=document.createElement("div"),t.setAttribute("separator","");break;case"blank":default:t=document.createElement("div")}t.setAttribute("editor",e._type),e.input=t,e.element.appendChild(t)}_setupInput(){const e=this,t=e.onTouched.bind(e),n=e.onChange.bind(e),a=()=>{if(!e._attached){if(e.input.addEventListener("blur",t),e.input.addEventListener("change",n),"INPUT"===e.input.nodeName?e.input.addEventListener("keyup",n):e.input.querySelector("input")&&e.input.querySelector("input").addEventListener("keyup",n),e.input instanceof HTMLDivElement){const a=e.input.querySelectorAll("input");for(let e=0;e<a.length;e++)a[e].addEventListener("blur",t),a[e].addEventListener("change",n)}e._attached=!0}};if(e.input.whenRendered?e.input.whenRendered(()=>{a()}):a(),e.input.onAttached=()=>{a()},e.input.onDetached=()=>{if(e.input.removeEventListener("blur",t),e.input.removeEventListener("change",n),"INPUT"===e.input.nodeName?e.input.removeEventListener("keyup",n):e.input.querySelector("input")&&e.input.querySelector("input").removeEventListener("keyup",n),e.input instanceof HTMLDivElement){const a=e.input.querySelectorAll("input");for(let e=0;e<a.length;e++)a[e].removeEventListener("blur",t),a[e].removeEventListener("change",n)}e._attached=!1},e.element.name=e.name,e.input.name=e.element.name,e.input instanceof HTMLDivElement){const t=e.input.querySelectorAll("input");for(let n=0;n<t.length;n++)t[n].name=e.name}if(e.input.setAttribute("name",e.input.name),!e.input.id)if(document.getElementById(e.name)){const t=e.name+"_"+Smart.Utilities.Core.createGUID();e.input.id=t.replace(/-/gi,"")}else e.input.id=e.name;e.input.classList.add("smart-form-editor")}get align(){return this._align}set align(e){this._align=e,this.refresh()}get labelAlign(){return this._labelAlign}set labelAlign(e){this._labelAlign=e,this.refresh()}get optionsLayout(){return this._optionsLayout}set optionsLayout(e){this._optionsLayout=e,this.refresh()}get class(){return this._class}set class(e){this._class=e,this.refresh()}get width(){return this._width}set width(e){this._width=e,this.refresh()}get required(){return this._required}get type(){return this._type}set type(e){this._type=e,this.refresh()}get columnWidth(){return this._columnWidth}set columnWidth(e){this._columnWidth=e,this.refresh()}get labelWidth(){return this._labelWidth}set labelWidth(e){this._labelWidth=e,this.refresh()}get rules(){return this._rules}set rules(e){this._rules=e,this.refresh()}get label(){return this._label}set label(e){this._label=e,this.refresh()}get options(){return this._options}set options(e){this._options=e,this.refresh()}get hint(){return this._hint}set hint(e){this._hint=e,this.refresh()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.refresh()}get component(){return this._component}set component(e){this._component=e,this.refresh()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e,this.refresh()}get padding(){return this._padding}set padding(e){this._padding=e,this.refresh()}get info(){return this._info}set info(e){this._info=e,this.refresh()}get infoPosition(){return this._infoPosition}set infoPosition(e){this._infoPosition=e,this.refresh()}get height(){return this._height}set height(e){this._height=e,this.refresh()}get rowHeight(){return this._rowHeight}set rowHeight(e){this._rowHeight=e,this.refresh()}refresh(){const e=this,t=e=>"number"==typeof e?e+"px":""===e?"":e;if(e.labelElement)e.labelElement.remove();else if(e.rowElement.querySelector("label")){const t=e.rowElement.querySelector("label");e._label=t.innerHTML.trim(),t.remove()}return e.infoElement&&e.infoElement.remove(),e.rowElement||(e.rowElement=e.element.parentElement),e.input.style.width=t(e.width),e.rowElement.style.minHeight=t(e.rowHeight),e.rowElement.style.height=t(e.rowHeight),e.input.style.height=t(e.height),e.class&&e.input.classList.add(e.class),"header"===e.type?(e.labelElement=document.createElement("label"),e.labelElement.classList.add("smart-form-header"),e.labelElement.innerHTML=e.label,void e.input.appendChild(e.labelElement)):"label"===e.type?(e.labelElement=document.createElement("label"),e.labelElement.classList.add("smart-form-label"),e.labelElement.innerHTML=e.label,void e.input.appendChild(e.labelElement)):void("blank"!==e.type&&"separator"!==e.type&&"label"!==e.type&&"boolean"!==e.type&&"radio"!==e.type&&"checkBox"!==e.type&&"checkbox"!==e.type&&(e.infoElement=document.createElement("span"),e.infoElement.classList.add("smart-grid-icon","smart-form-icon","smart-icon-attention-circled","show","smart-visibility-hidden"),e.infoElement.setAttribute("tooltip",e.info),"left"!==e.labelPosition&&e.infoElement.classList.add("smart-hidden"),e.info&&(e.infoElement.classList.remove("smart-hidden"),e.infoElement.classList.remove("smart-visibility-hidden")),e.element.appendChild(e.infoElement),e.align&&e.element.classList.add(e.align),e.label&&(e.labelElement=document.createElement("label"),e.labelElement.setAttribute("for",e.input.id),e.labelElement.classList.add("smart-form-label"),(e.rules.length>0||e.required)&&e.labelElement.setAttribute("required",""),e.labelElement.innerHTML=e.label,e.labelWidth||(e._labelWidth=Math.max(80,document.body.appendChild(e.labelElement).offsetWidth)),e.width||(e._width=200),"left"===e.labelPosition?(e.rowElement.insertBefore(e.labelElement,e.element),e.rowElement.style.display="grid",e.rowElement.style.gridTemplateColumns=t(e.labelWidth)+" "+t(e.width)):"right"===e.labelPosition?(e.rowElement.appendChild(e.labelElement,e.element),e.rowElement.style.display="grid",e.rowElement.style.gridTemplateColumns=t(e.width)+" "+t(e.labelWidth)):"top"===e.labelPosition?e.rowElement.insertBefore(e.labelElement,e.element):"bottom"===e.labelPosition&&e.rowElement.appendChild(e.labelElement,e.element),e.labelAlign&&e.labelElement.classList.add(e.labelAlign)),e.columnWidth&&!e.options&&(e.rowElement.style.width=t(e.columnWidth))))}writeValue(e){this._setControlValue(e)}_setControlValue(e){const t=this;if(t._updating=!0,null===e)return t.input.selectedValues&&(t.input.selectedValues=[]),t.input.selectedDates&&(t.input.selectedDates=[]),void 0!==t.input.checked&&(t.input.checked=!1),t.input.value="",void(t._updating=!1);if(t.input.selectedValues)return Array.isArray(e)?t.input.selectedValues=e:t.input.selectedValues=[e],void(t._updating=!1);if(t.input.selectedDates)return Array.isArray(e)?t.input.selectedDates=e:t.input.selectedDates=[e],void(t._updating=!1);if(void 0!==t.input.checked){""===e&&(e=null);const n="string"==typeof e?"true"===e:e;t.input.checked=n}if(t.input instanceof HTMLDivElement){const n=t.input.querySelectorAll("input"),a=t.input.querySelectorAll("smart-radio-button"),l=t.input.querySelectorAll("smart-check-box");(t=>{for(let n=0;n<t.length;n++){const a=t[n];"string"==typeof e?a.value===e?a.checked=!0:a.checked=!1:Array.isArray(e)?e.indexOf(a.value)>=0?a.checked=!0:a.checked=!1:"boolean"==typeof e&&(a.checked=e)}})(a.length>0?a:l.length>0?l:n)}t.input.value=e,t._updating=!1}_getControlValue(){const e=this,t=void 0!==e.input.selectedValues?"selectedValues":void 0!==e.input.selectedDates?"selectedDates":null;if(t)return e.input[t].length>1?e.input.selectedValues:1===e.input[t].length?e.input.selectedValues[0]:e.input.querySelector("input")?e.input.querySelector("input").value:null;if(void 0!==e.input.checked&&this.input.nodeName.toLowerCase().startsWith("smart"))return e.input.checked;if(e.input instanceof HTMLDivElement){const t=e.input.querySelectorAll("input"),n=e.input.querySelectorAll("smart-radio-button"),a=e.input.querySelectorAll("smart-check-box");return(e=>{let t=[];for(let n=0;n<e.length;n++){const a=e[n];""===a.value&&a.checked?t.push(!0):""===a.value&&!1===a.checked?t.push(!1):a.checked&&t.push(a.value)}return 1===t.length?t[0]:0===t.length?"":t})(n.length>0?n:a.length>0?a:t)}return e.input.value}reset(){super.reset(),this.element.classList.remove("smart-untouched"),this.element.classList.remove("smart-touched"),this.element.classList.remove("smart-dirty"),this.element.classList.remove("smart-pristine"),this.element.classList.remove("smart-valid"),this.element.classList.remove("smart-invalid")}onTouched(){this._updating||(this.element.classList.remove("smart-untouched"),this.element.classList.add("smart-touched"),this.element.touched=!0,this.markAsTouched(),this.updateValueAndValidate())}onChange(){const e=this;e._updating||setTimeout(()=>{e.element.classList.remove("smart-pristine"),e.element.classList.add("smart-dirty"),e.element.pristine=!1,e._pristine=!1,e._pendingValue=e._getControlValue(),e._pendingChange=!0,e._pendingDirty=!0,e.updateControl(e)})}updateControl(e){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),e._pendingChange=!1}_validate(){const e=this,t=e.input;e.form&&e.form.validator.validate(null,"#"+t.id);const n={};let a=!1;for(let e in t.errors)!0===t.errors[e]&&(n[e]=!0,a=!0);return a?n:null}disable(){super.disable(),this.element.disabled=!0}enable(){super.enable(),this.element.disabled=!1}}class l extends n{constructor(e,t){super(null,t);const n=this;if(n._form=null,Array.isArray(e)){n._controls={},n._templateControls=[],n.element||(n.element=document.createElement("div"),n.element.classList.add("smart-form-row"));for(let a=0;a<e.length;a++){const s=e[a];if(s.bind&&(s.name=s.bind),s.columns&&Array.isArray(s.columns)){const e=new l(s.columns,!0);e.name?n._controls[e.name]=e:(e.name=Smart.Utilities.Core.createGUID().replace(/-/gi,""),e._forEachChild(e=>{n._controls[e.name]=e})),n._templateControls.push(e),e.element.classList.add("smart-form-row-flex")}else{const e=n._createControl(s.name,s);s.name&&(n._controls[s.name]=e),!0===t&&(e.rowElement.classList.remove("smart-form-row"),e.rowElement.classList.add("smart-form-column")),n._templateControls.push(e)}}if(n._templateControls)for(let e=0;e<n._templateControls.length;e++){const t=n._templateControls[e];t._parent=this,t.rowElement?n.element.appendChild(t.rowElement):n.element.appendChild(t.element)}}else n._controls=n._reduceControls(e);n._onValueAndStatusUpdate=()=>{n.element&&(n.element.classList.remove("smart-valid"),n.element.classList.remove("smart-invalid"),n.element.classList.add("smart-"+n.status))},n._setUpControls(),n.updateValueAndValidate({onlySelf:!0,emitEvent:!1})}get form(){return this._form}set form(e){const t=this;if(t._form=e,t._templateControls)for(let n=0;n<t._templateControls.length;n++){t._templateControls[n].form=e}}_group(e,t){return e=this._reduceControls(e),new l(e,t)}_reduceControls(e){const t=this,n={};return Object.keys(e).forEach(a=>{""!==a&&(n[a]=t._createControl(a,e[a]))}),n}_createControl(e,t){const n=this;let s=document.querySelector(`[form-control-name="${e}"]`),i=document.querySelector(`[form-group-name="${e}"]`);if(i&&!(t instanceof l))return this._group(t,{});if(t instanceof a||t instanceof l)return t.name=e,i&&(t.element=i),t instanceof a?t.element.setAttribute("form-control-name",e):t instanceof l&&t.element.setAttribute("form-group-name",e),t;if(Array.isArray(t)){const l=t[0],i=t.length>1?t[1]:{};return i.name=e,s?new a(s,l,i):n._createTemplateControl(l,i)}return s?(s.name=e,new a(s,"")):n._createTemplateControl("",t)}_createTemplateControl(e,t={}){const n=document.createElement("div");this.columns?n.classList.add("smart-form-column"):n.classList.add("smart-form-row");const l=document.createElement("div");return t&&t.name&&l.setAttribute("form-control-name",t.name),n.appendChild(l),t.rowElement=n,new a(l,e,t)}_setUpControls(){const e=this;this._forEachChild(t=>{t.parent=e})}_forEachChild(e){const t=this,n=Object.keys(t.controls);for(let a=0;a<n.length;a++){const l=n[a];e(t.controls[l],l)}}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n]&&""!==e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}get controls(){return this._controls}setValue(e,t={emitEvent:!1}){const n=this;if(null===e)return this._forEachChild(e=>{e.value=null}),void n.updateValueAndValidate(t);n._checkAllValuesPresent(e),Object.keys(e).forEach(a=>{n._throwIfControlMissing(a),n.controls[a].setValue(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),n.updateValueAndValidate(t)}_throwIfControlMissing(e){if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}at(e){return this.controls[e]}patchValue(e,t){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidate(t)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}_allControls(e){let t=!0;return this._forEachChild(n=>{t=t&&n[e]}),t}_anyControls(e){let t=!1;return this._forEachChild(n=>{t=t||n[e]}),t}_updateValue(){this._value=this._reduceValue()}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,a)=>{n=t(n,e,a)}),n}}Smart.Form=class{constructor(e,t){const n=this;n.element=document.querySelector(e),n.element||(n.element=document.createElement("div")),n.element.classList.add("smart-form"),n.submitted=!1,n.selector=e,n.form=new l(t),n.form._templateControls&&n.element.appendChild(n.form.element);let a=[];const s=document.createElement("div");if(s.classList.add("smart-form-row","smart-validation-summary"),s.id=n.element.id+"_validationSummary",n.summary=s,n.form._templateControls)for(let e=0;e<n.form._templateControls.length;e++){n.form._templateControls[e].form=n}n.form._forEachChild((e,t)=>{if(n[t]=e,e.form=n,e.rules&&e.rules.length>0)for(let t=0;t<e.rules.length;t++){const n=e.rules[t],l=n;n.type||(n.type="required"),n.message||(n.message="Invalid Input"),n.input="#"+e.input.id,n.action="keyup, blur, change",a.push(l)}else if(e.required){const n={type:"required",message:`${t} is required`,action:"keyup, blur, change",input:"#"+e.input.id};a.push(n)}const s=e=>{e._forEachChild(e=>{if(e.form=n,e.rules)for(let t=0;t<e.rules.length;t++){const n=e.rules[t],l=n;n.type||(n.type="required"),n.message||(n.message="Invalid Input"),n.input="#"+e.input.id,n.action="keyup, blur, change",a.push(l)}e instanceof l&&s(e)})};e instanceof l&&s(e)}),n.element.appendChild(s),n.validator=new Smart.Utilities.Validator(a,"#"+s.id);const i=n.validator.validate();n.element.addEventListener("submit",e=>{n.async&&(e.preventDefault(),n.submit({async:!0}))}),n.form._onValueAndStatusUpdate=()=>{"invalid"===n.form.status?n._handleValidity(!1):n._handleValidity(!0),n.element.classList.remove("smart-valid"),n.element.classList.remove("smart-invalid"),n.element.classList.add("smart-"+n.form.status)},n._showSummary=void 0===t.showSummary||t.showSummary,n._handleSummaryVisibility(),n._handleValidity(i)}_handleValidity(e){const t=this.element.querySelector('[type="submit"]');t&&(t.disabled=!e)}get showSummary(){return this._showSummary}set showSummary(e){this._showSummary=e,this._handleSummaryVisibility()}_handleSummaryVisibility(){const e=this;e.showSummary?e.summary.classList.remove("smart-hidden"):e.summary.classList.add("smart-hidden")}get status(){return this.form&&this.form._calculateStatus(),"valid"}get onValueChanges(){return this.form?this.form.onValueChanges:null}set onValueChanges(e){this.form&&(this.form.onValueChanges=e)}get onStatusChanges(){return this.form?this.form.onStatusChanges:null}set onStatusChanges(e){this.form&&(this.form.onStatusChanges=e)}get control(){return this.form}get value(){return this.control.value}set value(e){const t=this;if(t.control.setValue(e),t.validator){const e=t.validator.validate();t._handleValidity(e)}}validate(){const e=this;if(e.validator){const t=e.validator.validate();e._handleValidity(t)}}submit(e){const t=this;e||(e={},t.element.action&&(e.action=t.element.action),t.element.target&&(e.target=t.element.target),t.element.method&&(e.method=t.element.method));const n=e.action,a=e.target,s=e.method;if(e.async){const e=new XMLHttpRequest,a=new FormData;t.form._forEachChild((e,t)=>{const n=e=>{e._forEachChild(e=>{e instanceof l&&n(e)})};e instanceof l?n(e):a.append(t,e.value)}),e.addEventListener("load",(function(e){console.log(e.target.responseText)})),e.addEventListener(" error",(function(e){console.log(e.target.responseText)})),e.open("POST",n),e.send(a)}else if("form"===t.element.nodeName)t.element.submit();else{let i="<form id='smart_formToSubmit'";n&&(i+=' action="'+n+'"'),a&&(i+=' target="'+a+'"'),s&&"get"===s.toString().toLowerCase()?i+=' method="GET"':i+=' method="POST"',e.acceptCharset&&(i+=' accept-charset="'+e.acceptCharset+'"'),e.enctype&&(i+=' enctype="'+e.enctype+'"'),e.name&&(i+=' name="'+e.name+'"'),e.enctype&&(i+=' id="'+e.id+'"'),i+=">",t.form._forEachChild((e,t)=>{const n=e=>{e._forEachChild(e=>{e instanceof l&&n(e)})};e instanceof l?n(e):(i+='<input type="hidden" ',i+=' name="'+t+'"',i+=' value="'+e.value+'"',i+=">")}),i+="</form>";const r=document.createElement("div");r.innerHTML=i,t.element.appendChild(r),r.querySelector("#smart_formToSubmit").submit(),t.element.removeChild(r)}this.submitted=!0}reset(){this.submitted=!1,this.value=null}},Smart.FormControl=a,Smart.FormGroup=l}});