
/* Smart UI v7.7.0 (2020-June) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */ //

!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=43)}({43:function(e,t,n){class a{constructor(e=null){const t=this;t._parent=null,t._updating=!1,t._touched=!1,t._pristine=!0,t._disabled=!1,t.status="valid",t._onChange=[],t.registerOnChange(e=>{t.writeValue(e)}),t._applyFormState(e)}registerOnChange(e){this._onChange.push(e)}get parent(){return this._parent}set parent(e){this._parent=e}get valid(){return"valid"===this.status}get invalid(){return"invalid"===this.status}get dirty(){return!this._pristine}get untouched(){return!this._touched}get disabled(){return this._disabled}get enabled(){return!1===this._disabled}get value(){const e=this;return e._value&&"object"==typeof e._value&&e._value.toDate?e._value.toDate():e._value}set value(e){this.setValue(e)}setValue(e,t={}){const n=this;n._value=n._pendingValue=e,n._onChange.length&&!1!==t.emitModelToViewChange&&n._onChange.forEach(e=>e(n.value,!1!==t.emitViewToModelChange)),n.updateValueAndValidate(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this._value=this._pendingValue=e}_runValidator(){return this._validate()}_validate(){return null}updateValueAndValidate(e={}){const t=this;t._setInitialStatus(),t._updateValue(),t.enabled&&(t.errors=t._runValidator(),t.status=t._calculateStatus()),!1!==e.emitEvent&&(t.onValueChanges&&t.onValueChanges(t.value),t.onStatusChanges&&t.onStatusChanges(t.status)),t._onValueAndStatusUpdate&&t._onValueAndStatusUpdate(),t._parent&&!e.onlySelf&&t._parent.updateValueAndValidate(e),t.tabItem&&(t.tabItem.tab.classList.remove("smart-invalid"),t.tabItem.row.classList.remove("smart-invalid"),t.tabItem.tab.classList.remove("smart-valid"),t.tabItem.row.classList.remove("smart-valid"),"invalid"===t.status?(t.tabItem.tab.classList.add("smart-invalid"),t.tabItem.row.classList.add("smart-invalid"),t.tabItem.tab.classList.contains("selected")&&(t.nextButton.disabled=!0,t.backButton.disabled=!0)):(t.tabItem.tab.classList.add("smart-valid"),t.tabItem.row.classList.add("smart-valid"),t.tabItem.tab.classList.contains("selected")&&(t.nextButton.disabled=!1,t.backButton.disabled=!1)))}_setInitialStatus(){this.status=this._allControlsDisabled()?"disabled":"valid"}_updateValue(){}_allControlsDisabled(){return this._allControls("disabled")}_allControls(e){return this[e]}_anyControls(e){return this[e]}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_calculateStatus(){return this._allControls("disabled")?"disabled":this.errors?"invalid":this._anyControls("pending")?"pending":this._anyControls("invalid")?"invalid":"valid"}markAsUntouched(e={}){this._touched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsTouched(e={}){this._touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}_updateTouched(e={}){this._touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsPristine(e={}){this._pristine=!0,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsDirty(e={}){this._pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}_updatePristine(e={}){const t=this;t._pristine=!this._anyControls("dirty"),t._parent&&t._parent._updatePristine(e)}_parentMarkedDirty(e){const t=this._parent&&this._parent.dirty;return!e&&t&&!this._parent._anyControlsDirty()}_forEachChild(){}disable(e={}){const t=this,n=t._parentMarkedDirty(e.onlySelf);t.status="disabled",t.errors=null,t._disabled=!0,t._forEachChild(t=>{t.disable(Object.assign({},e,{onlySelf:!0}))}),t._updateValue(),!1!==e.emitEvent&&(t.onValueChanges&&t.onValueChanges(this.value),t.onStatusChanges&&t.onStatusChanges(this.status)),t._updateAncestors(Object.assign({},e,{skipPristineCheck:n}))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="valid",this._forEachChild(t=>{t.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidate({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t}))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidate(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}}Smart("smart-form-control",class extends Smart.BaseElement{static get properties(){return{action:{value:"",type:"string"},controlType:{value:"input",type:"string"},columnSpan:{value:1,type:"number?"},dataField:{value:"",type:"string"},disabled:{value:!1,type:"boolean"},hint:{value:"",type:"string"},info:{value:"",type:"string"},label:{value:"",type:"string"},labelPosition:{value:"left",type:"string"},placeholder:{value:"",type:"string"},readonly:{value:!1,type:"boolean"},required:{value:!1,type:"boolean"},validationRules:{value:[],type:"any"},value:{value:"",type:"any"}}}template(){return'<div id="control"></div>'}propertyChangedHandler(e,t,n){const a=this;let o=a.parentElement;for(;o;){if("Smart-FORM"===o.nodeName){o.getControl(a.controlOptions.dataField)[e]=n;break}o=o.parentElement}a.controlOptions[e]=n}render(){super.render()}get controlOptions(){const e=this;if(!e._controlOptions&&e._properties){let t={};for(let n in e._properties)e._properties[n].value!==e._properties[n].defaultValue&&(t[n]=e._properties[n].value);e.classList.remove("smart-element"),e.classList.remove("smart-form-control"),t.cssClass=e.className,"template"===t.controlType&&(t.template=e.innerHTML,e.innerHTML=""),t.custom=!0,e._controlOptions=t}return e._controlOptions}});class o extends a{constructor(e,t,n){super(t,n);const a=this;if(a.element=e,a._initProps(n),n.custom)a._setupCustomInput();else{const n=a.element.parentElement;a.input=e,a.input.value=t,a.labelElement=a.element.parentElement.querySelector("label"),a.label=a.labelElement?a.labelElement.innerHTML.trim():"",a.element=document.createElement("div"),a.element.setAttribute("form-control-name",a.input.getAttribute("form-control-name")),a.element.appendChild(a.input),n.appendChild(a.element)}a.element.classList.add("smart-untouched"),a.element.classList.add("smart-pristine"),a.element.classList.add("smart-form-control"),a._disabled=void 0!==a.input.disabled&&a.input.disabled,a._setupInput(),a.updateValueAndValidate(),a._onValueAndStatusUpdate=()=>{a.element&&(a.element.classList.remove("smart-valid"),a.element.classList.remove("smart-invalid"),a.element.classList.add("smart-"+a.status))},a.refresh()}_initProps(e){const t=this;if(Object.keys(e).forEach(n=>{t["_"+n]=e[n]}),t.name||(t.name=e.name),!t.name){const e=t.element.nodeName.toLowerCase()+Smart.Utilities.Core.createGUID();t.name=e.replace(/-/gi,"")}t._validationRules||(t._validationRules=[]),t._readonly||(t._readonly=!1),t._controlType||(t._controlType="text"),t._labelPosition||(t._labelPosition="left"),t._label||(t._label=""),t._hint||(t._hint=""),t._controlOptions||(t._controlOptions={}),t._info||(t._info=""),t._placeholder&&(t._controlOptions.placeholder=t._placeholder),t._columnSpan||(t._columnSpan=1)}_setupCustomInput(){const e=this;let t=e.element,n=null;switch(e._controlType){case"submit":case"button":Smart.Button?n=document.createElement("smart-button"):(n=document.createElement("button"),n.classList.add("smart-button"),n.innerHTML=e._label||""),n.type=e._controlType,n.innerHTML=e._label||"","submit"===e._action&&(n.type="submit"),"submit"===n.type&&(e._action="submit"),e._action&&(n.onclick=()=>{switch(e._action){case"reset":e.root&&e.root.reset();break;case"submit":e.root&&e.root.submit()}});break;case"boolean":case"bool":case"checkBox":case"checkbox":case"radio":case"radioButton":case"option":{n=document.createElement("div");const t="checkbox"!==e._controlType.toLowerCase()&&"boolean"!==e._controlType&&"bool"!==e._controlType,a=a=>{const o=document.createElement("div"),r="string"==typeof a?a:a.label||a.value,l="string"==typeof a?"":a.value||"";let s=document.createElement("input");if(o.classList.add("smart-form-option"),Smart.RadioButton&&Smart.CheckBox)s=t?document.createElement("smart-radio-button"):document.createElement("smart-check-box"),s.value=l,s.innerHTML=r,s.name=e.name,s.groupName=e.name,o.appendChild(s);else{const n=document.createElement("span");n.innerHTML=r,s.value=l,s.type=t?"radio":"checkbox",s.name=e.name,n.onpointerdown=()=>{s.click()},o.appendChild(s),o.appendChild(n)}n.appendChild(o)};if(e._options)for(let t=0;t<e._options.length;t++){a(e._options[t])}else a(e.label);"horizontal"===e._optionsLayout&&n.classList.add("smart-form-options-horizontal");break}case"textArea":case"textarea":Smart.TextArea?(n=document.createElement("smart-text-area"),n.dropDownAppendTo="body"):(n=document.createElement("textarea"),n.classList.add("smart-input"));break;case"text":case"input":Smart.Input?(n=document.createElement("smart-input"),n.dropDownAppendTo="body"):(n=document.createElement("input"),n.classList.add("smart-input"));break;case"mask":if(!Smart.MaskedTextBox){n=document.createElement("input"),n.classList.add("smart-input");break}n=document.createElement("smart-masked-text-box");break;case"date":case"time":case"datetime":if(Smart.DateTimePicker)n=document.createElement("smart-date-time-picker"),n.calendarButton=!0,"datetime"===e._controlType?(n.formatString="F",n.dropDownDisplayMode="default"):"date"===e._controlType?(n.formatString="d",n.dropDownDisplayMode="calendar"):"time"===e._controlType&&(n.formatString="T",n.dropDownDisplayMode="timePicker"),n.dropDownAppendTo="body";else{if(!Smart.DateRangeInput){n=document.createElement("input"),n.classList.add("smart-input"),n.type="date";break}n=document.createElement("smart-date-range-input"),n.dropDownAppendTo="body"}break;case"numberinput":case"numberInput":case"numeric":case"number":if(!Smart.NumericTextBox){n=document.createElement("input"),n.type="number",n.classList.add("smart-input");break}n=document.createElement("smart-numeric-text-box"),n.spinButtons=!0;break;case"password":case"passwordInput":case"passwordinput":if(!Smart.PasswordTextBox){n=document.createElement("input"),n.type="password",n.classList.add("smart-input");break}n=document.createElement("smart-password-text-box");break;case"checkInput":case"checkinput":n=document.createElement("smart-check-input"),n.dropDownAppendTo="body";break;case"multiInput":case"multiinput":n=document.createElement("smart-multi-input"),n.dropDownAppendTo="body";break;case"multiComboInput":case"multicomboinput":n=document.createElement("smart-multi-combo-input"),n.dropDownAppendTo="body";break;case"comboBox":case"combobox":n=document.createElement("smart-drop-down-list"),n.dropDownAppendTo="body";break;case"dropDownList":case"dropdownlist":n=document.createElement("smart-drop-down-list"),n.dropDownAppendTo="body";break;case"template":n=document.createElement("div"),n.innerHTML='<div class="smart-form-template">'+e._template||!1;break;case"label":n=document.createElement("label"),n.innerHTML=e.label}n.setAttribute("editor",e._controlType);for(let t in e._controlOptions)n[t]=e._controlOptions[t];e.input=n,this.value&&this.writeValue(this.value),t.appendChild(n)}_setupInput(){const e=this,t=e.onTouched.bind(e),n=e.onChange.bind(e),a=()=>{if(!e._attached){if(e.input.addEventListener("blur",t),e.input.addEventListener("change",n),"INPUT"===e.input.nodeName?e.input.addEventListener("keyup",n):e.input.querySelector("input")&&e.input.querySelector("input").addEventListener("keyup",n),e.input instanceof HTMLDivElement){const a=e.input.querySelectorAll("input"),o=e.input.querySelectorAll("smart-radio-button"),r=e.input.querySelectorAll("smart-check-box"),l=e.input.querySelectorAll("smart-switch-button");for(let e=0;e<o.length;e++)o[e].addEventListener("blur",t);for(let e=0;e<r.length;e++)r[e].addEventListener("blur",t);for(let e=0;e<l.length;e++)l[e].addEventListener("blur",t);for(let e=0;e<a.length;e++)a[e].addEventListener("blur",t),a[e].addEventListener("change",n)}e._attached=!0}};if(e.input.whenRendered?e.input.whenRendered(()=>{a()}):a(),e.input.onAttached=()=>{a()},e.input.onDetached=()=>{if(e.input.removeEventListener("blur",t),e.input.removeEventListener("change",n),"INPUT"===e.input.nodeName?e.input.removeEventListener("keyup",n):e.input.querySelector("input")&&e.input.querySelector("input").removeEventListener("keyup",n),e.input instanceof HTMLDivElement){const a=e.input.querySelectorAll("input"),o=e.input.querySelectorAll("smart-radio-button"),r=e.input.querySelectorAll("smart-check-box"),l=e.input.querySelectorAll("smart-switch-button");for(let e=0;e<o.length;e++)o[e].removeEventListener("blur",t);for(let e=0;e<r.length;e++)r[e].removeEventListener("blur",t);for(let e=0;e<l.length;e++)l[e].removeEventListener("blur",t);for(let e=0;e<a.length;e++)a[e].removeEventListener("blur",t),a[e].removeEventListener("change",n)}e._attached=!1},e.element.name=e.name,e.input.name=e.element.name,e.input instanceof HTMLDivElement){const t=e.input.querySelectorAll("input");for(let n=0;n<t.length;n++)t[n].name=e.name}if(e.input.setAttribute("name",e.input.name),!e.input.id)if(document.getElementById(e.name)){const t=e.name+"_"+Smart.Utilities.Core.createGUID();e.input.id=t.replace(/-/gi,"")}else e.input.id=e.name;e.input.classList.add("smart-form-editor")}get root(){let e=this;for(;e.parent;)e=e.parent;return e}get prepend(){return this._prepend}get append(){return this._append}get columnSpan(){return this._columnSpan}set columnSpan(e){const t=this;t._columnSpan=e,t._parent&&t._parent.refresh()}get cssClass(){return this._cssClass}set cssClass(e){this.input.classList.remove(this.cssClass),this._cssClass=e,this.input.classList.add(this.cssClass)}get required(){return this._required}get controlType(){return this._controlType}get validationRules(){return this._validationRules}set validationRules(e){this._validationRules=e,this.refresh()}get readonly(){return this._readonly}set readonly(e){const t=this;t._readonly=e,t.element&&(e?(t.labelElement&&t.labelElement.setAttribute("readonly",""),t.element.setAttribute("readonly","")):(t.element.removeAttribute("readonly"),t.labelElement&&t.labelElement.removeAttribute("readonly")))}get label(){return this._label}set label(e){this._label=e,this.refresh()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e,this.refresh()}get hint(){return this._hint}set hint(e){this._hint=e,this.refresh()}get info(){return this._info}set info(e){this._info=e,this.refresh()}refresh(){const e=this;if(e.infoElement&&e.infoElement.remove(),e.appendElement&&e.appendElement.remove(),e.prependElement&&e.prependElement.remove(),e.cssClass&&e.input.classList.add(e.cssClass),"blank"!==e.controlType&&"separator"!==e.controlType&&"label"!==e.controlType&&"boolean"!==e.controlType&&"radio"!==e.controlType&&"checkBox"!==e.controlType&&"checkbox"!==e.controlType){if(e._align&&(e.element.classList.remove("left"),e.element.classList.remove("center"),e.element.classList.remove("right"),e.element.classList.add(e._align)),e.infoElement=document.createElement("div"),e.infoElementInner=document.createElement("span"),e.infoElementInner.classList.add("smart-grid-icon","smart-form-control-icon","smart-icon-help-circled","show","smart-visibility-hidden"),e.infoElementInner.setAttribute("tooltip",e.info),e.infoElement.appendChild(e.infoElementInner),e.appendElement=document.createElement("div"),e.appendElement.classList.add("smart-form-control-addon"),e.prependElement=document.createElement("div"),e.prependElement.classList.add("smart-form-control-addon"),e.info&&(e.infoElementInner.classList.remove("smart-hidden"),e.infoElementInner.classList.remove("smart-visibility-hidden")),e.append&&(e.appendElement.innerHTML="<span>"+e.append+"</span>",e.element.appendChild(e.appendElement)),e.prepend&&(e.prependElement.innerHTML="<span>"+e.prepend+"</span>",e.element.insertBefore(e.prependElement,e.input)),e.element.appendChild(e.infoElement),e.label&&"button"!==e.controlType&&"submit"!==e.controlType){const t=e.labelElement?e.labelElement:document.createElement("label");t.classList.add("smart-form-control-label"),t.setAttribute("for",e.input.id),(e.validationRules.length>0||e.required)&&t.setAttribute("required",""),t.innerHTML=e.label,e.labelElement=t}e.parent&&e.parent.refresh()}}writeValue(e){this._setControlValue(e)}_setControlValue(e){const t=this;if(t._updating=!0,null===e)return t.input.selectedValues&&(t.input.selectedValues=[]),t.input.selectedDates&&(t.input.selectedDates=[]),void 0!==t.input.checked&&(t.input.checked=!1),t.input.value="",void(t._updating=!1);if(t.input.selectedValues)return Array.isArray(e)?t.input.selectedValues=e:t.input.selectedValues=[e],void(t._updating=!1);if(t.input.selectedDates)return Array.isArray(e)?t.input.selectedDates=e:t.input.selectedDates=[e],void(t._updating=!1);if(void 0!==t.input.checked){""===e&&(e=null);const n="string"==typeof e?"true"===e:e;t.input.checked=n}if(t.input instanceof HTMLDivElement){const n=t.input.querySelectorAll("input"),a=t.input.querySelectorAll("smart-radio-button"),o=t.input.querySelectorAll("smart-check-box"),r=t.input.querySelector(".smart-form-image-template"),l=t.input.querySelector(".smart-form-template");(t=>{for(let n=0;n<t.length;n++){const a=t[n];"string"==typeof e?a.value===e?a.checked=!0:a.checked=!1:Array.isArray(e)?e.indexOf(a.value)>=0?a.checked=!0:a.checked=!1:"boolean"==typeof e&&(a.checked=e)}})(a.length>0?a:o.length>0?o:n),r?r.innerHTML='<img src="'+e+'"/>':l&&(l.innerHTML=e)}t.input.value=e,t._updating=!1}_getControlValue(){const e=this,t=void 0!==e.input.selectedValues?"selectedValues":void 0!==e.input.selectedDates?"selectedDates":null;if(t)return e.input[t].length>1?e.input.selectedValues:1===e.input[t].length?void 0!==e.input.selectedDates?e.input.selectedDates[0].toDate():e.input.selectedValues[0]:e.input.querySelector("input")?e.input.querySelector("input").value:null;if(void 0!==e.input.checked&&this.input.nodeName.toLowerCase().startsWith("smart"))return e.input.checked;if(e.input instanceof HTMLDivElement){const t=e.input.querySelectorAll("input"),n=e.input.querySelectorAll("smart-radio-button"),a=e.input.querySelectorAll("smart-check-box");return(e=>{let t=[];for(let n=0;n<e.length;n++){const a=e[n];""===a.value&&a.checked?t.push(!0):""===a.value&&!1===a.checked?t.push(!1):a.checked&&t.push(a.value)}return 1===t.length?t[0]:0===t.length?"":t})(n.length>0?n:a.length>0?a:t)}return e.input.value}reset(){super.reset(),this.element.classList.remove("smart-untouched"),this.element.classList.remove("smart-touched"),this.element.classList.remove("smart-dirty"),this.element.classList.remove("smart-pristine"),this.element.classList.remove("smart-valid"),this.element.classList.remove("smart-invalid")}onTouched(){this._updating||(this.element.classList.remove("smart-untouched"),this.element.classList.add("smart-touched"),this.element.touched=!0,this.markAsTouched(),this.updateValueAndValidate())}onChange(){const e=this;e._updating||setTimeout(()=>{e.element.classList.remove("smart-pristine"),e.element.classList.add("smart-dirty"),e.element.pristine=!1,e._pristine=!1,e._pendingValue=e._getControlValue(),e._pendingChange=!0,e._pendingDirty=!0,e.updateControl(e)})}updateControl(e){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),e._pendingChange=!1}_validate(){const e=this,t=e.input;e.form&&e.form.validator&&e.form.validator.validate(null,"#"+t.id);const n={};let a=!1;for(let e in t.errors)!0===t.errors[e]&&(n[e]=!0,a=!0);return a?n:null}disable(){super.disable(),this.element.disabled=!0,this.input.disabled=!0}enable(){super.enable(),this.element.disabled=!1,this.input.disabled=!1}show(){this.element.parentElement.classList.remove("smart-hidden")}hide(){this.element.parentElement.classList.add("smart-hidden")}}Smart("smart-form-group",class extends Smart.BaseElement{static get properties(){return{controlType:{value:"input",type:"string"},columnSpan:{value:1,type:"number?"},columns:{value:1,type:"number?"},dataField:{value:"",type:"string"},disabled:{value:!1,type:"boolean"},hint:{value:"",type:"string"},info:{value:"",type:"string"},label:{value:"",type:"string"},labelPosition:{value:"left",type:"string"},onValueChanges:{value:null,type:"any",reflectToAttribute:!1},onStatusChanges:{value:null,type:"any",reflectToAttribute:!1},showColorAfterLabel:{value:!1,type:"boolean"},viewMode:{value:"",type:"string"},readonly:{value:!1,type:"boolean"},validationRules:{value:[],type:"any"},value:{value:"",type:"any"}}}template(){return'<div id="group"></div>'}render(){const e=this,t=[];e.value&&e.value.indexOf&&e.value.indexOf("{")>=0&&(e.value=JSON.parse(e.value));for(let n=0;n<e.$.group.children.length;n++){const a=e.$.group.children[n];t.push(a.controlOptions)}e.controlOptions.controls=t,e.controlOptions.controlType="group",super.render()}propertyChangedHandler(e,t,n){const a=this;let o=a.parentElement;for(;o;){if("Smart-FORM"===o.nodeName){o.getControl(a.controlOptions.dataField)[e]=n;break}o=o.parentElement}a.controlOptions[e]=n}get controlOptions(){const e=this;if(!e._controlOptions&&e._properties){let t={};for(let n in e._properties)e._properties[n].value!==e._properties[n].defaultValue&&(t[n]=e._properties[n].value);t.custom=!0,e._controlOptions=t}return e._controlOptions}}),Smart("smart-form",class extends Smart.FormGroup{render(){super.render();const e=this.controlOptions;this.form=new l("#"+this.id,e)}propertyChangedHandler(e,t,n){const a=this;a.form&&(a.form[e]=n)}getControl(e){return this.form.getControl(e)}validate(){this.form.validate()}submit(e){this.form.submit(e)}reset(){this.form.reset()}get state(){return this.form?this.form.state:null}set state(e){}});class r extends a{constructor(e,t){super(null,t);const n=this;if(e.value&&!e.controls){let t=[];for(let n in e.value){const a=e.value[n];let o=n.toLowerCase().indexOf("date")>=0||a instanceof Date?"date":a.length<40?"text":"textarea";("number"==typeof a||"date"!==o&&!isNaN(new Number(a)))&&(o="number"),"true"!==a&&"false"!==a&&!0!==a&&!1!==a||(o="boolean"),(a.indexOf(".jpg")>=0||a.indexOf(".png")>=0||a.indexOf(".gif")>=0)&&(o="template");const r={dataField:n,label:n,value:a,controlType:o};"template"===o&&(r.template='<div class="smart-form-image-template"><img src="'+a+'"/></div>'),t.push(r)}e.controls=t}if(e.controls){n._labelPosition=e.labelPosition||"",n._labelOffset=e.labelOffset||10,n._showColonAfterLabel=e.showColonAfterLabel||!1,n._columnSpan=e.columnSpan||1,n._controls={},n._columns=e.columns||1,n._label=e.label||"",n._viewMode=e.viewMode||"",n._readonly=e.readonly||!1,n._labelAlign=e.labelAlign||"",n._showButtons=e.showButtons||"",n._nextButtonLabel=e.nextButtonLabel||"Next",n._backButtonLabel=e.backButtonLabel||"Back",e.onValueChanges&&(n.onValueChanges=e.onValueChanges),e.onStatusChanges&&(n.onStatusChanges=e.onStatusChanges),e.name?e.dataField||(e.dataField=e.name):e.name=e.dataField,n.name=e.name||"",n.dataField=e.dataField||"",n.element=document.createElement("div"),n.labelElement=document.createElement("div"),n.contentElement=document.createElement("div"),n.element.appendChild(n.labelElement),n.element.appendChild(n.contentElement),n.labelElement.classList.add("smart-form-group-label"),n.contentElement.classList.add("smart-form-group-content"),n.label||n.labelElement.classList.add("smart-hidden"),n.element.classList.add("smart-form-group"),""===n.viewMode&&n.element.setAttribute("columns",n.columns),n.labelElement.innerHTML=n.label+(n._showColonAfterLabel?":":"");for(let t=0;t<e.controls.length;t++){let a=e.controls[t];if("string"==typeof a){a={dataField:a,label:a,type:"text"}}const o=a;n._addControl=e=>{const t=document.createElement("div");e.labelPosition||(e.labelPosition=n._labelPosition),e.name?e.dataField||(e.dataField=e.name):e.name=e.dataField;const a=n._createControl(e.name,e);return e.name&&(n._controls[e.name]=a),n._controls.$||(n._controls.$=[]),n._controls.$.push(a),a._parent=this,t.classList.add("smart-form-row"),a.labelElement&&t.appendChild(a.labelElement),t.appendChild(a.element),n.contentElement.appendChild(t),a},n._addControl(o)}n.refresh()}else n._controls=n._reduceControls(e);n._onValueAndStatusUpdate=()=>{n.element&&(n.element.classList.remove("smart-valid"),n.element.classList.remove("smart-invalid"),n.element.classList.add("smart-"+n.status))},n._setUpControls(),n.updateValueAndValidate({onlySelf:!0,emitEvent:!1})}addControl(e){const t=this._addControl(e);this[t.name]=t,this.refresh()}insertControl(e,t){const n=this.contentElement.querySelectorAll(".smart-form-row")[e],a=this._addControl(t);this[a.name]=a,this.contentElement.insertBefore(a.element.parentElement,n),this.refresh()}removeControl(e){const t=this;if(t[e]){t[e].element.parentElement.remove();const n=t.controls.$.indexOf(t[e]);t.controls.$.splice(n,1),delete t[e],delete t._controls[e]}}refresh(){const e=this;let t="";""===e.viewMode&&e.element.setAttribute("columns",e.columns),e.labelElement.innerHTML=e.label+("group"!==e.controlType&&e.showColonAfterLabel?":":""),e.labelElement.className="smart-form-group-label",e.label||e.labelElement.classList.add("smart-hidden"),e.labelAlign&&e.labelElement.classList.add(e.labelAlign),e._controls?e._controls&&!e._controls.$&&(e._controls.$=[]):e._controls={$:[]};for(let n=0;n<e._controls.$.length;n++){const a=e._controls.$[n];"group"!==a._controlType&&(a.labelElement&&t.length<a.label.length&&(t=a.label))}const n=(()=>{const n=document.createElement("label");n.classList.add("smart-form-control-label"),n.innerHTML=t,document.body.appendChild(n);const a=n.offsetWidth+e._labelOffset;return n.remove(),a})();for(let t=0;t<e._controls.$.length;t++){const a=e._controls.$[t],o=a.element.parentElement;a.labelElement&&"group"!==a.controlType&&("left"===a.labelPosition?(o.style.display="grid",o.style.gridTemplateColumns=n+"px auto"):(o.style.display="",o.style.gridTemplateColumns=""))}const a=[];for(let t=0;t<e._controls.$.length;t++){const n=e._controls.$[t],o=n.element.parentElement;n.readonly=e.readonly,n.showColonAfterLabel=e.showColonAfterLabel,n.columnSpan>1&&n.columnSpan<=e.columns?o.style.gridColumn="span "+n.columnSpan:o.style.gridColumn="",n.labelElement&&(n.labelElement.innerHTML=n.label+("group"!==n.controlType&&e._showColonAfterLabel?":":""),"tabs"!==e.viewMode&&"accordion"!==e.viewMode&&"breadcrumb"!==e.viewMode||n.label&&"button"!==n._controlType&&"label"!==n._controlType&&"submit"!==n._controlType&&a.push({label:n.label,control:n,id:n.name,row:o})),n.labelElement&&!o.contains(n.labelElement)&&(o.firstElementChild.remove(),o.insertBefore(n.labelElement,n.element))}if(e._refreshButtons(),"tabs"===e.viewMode||"accordion"===e.viewMode||"breadcrumb"===e.viewMode){e.tabs&&e.tabs.remove();const t=document.createElement("div");t.classList.add("smart-form-tab-strip"),"accordion"===e.viewMode?t.setAttribute("vertical",""):"breadcrumb"===e.viewMode&&t.setAttribute("breadcrumb","");for(let n=0;n<a.length;n++){const o=document.createElement("div"),r=a[n];0===n&&(o.classList.add("selected"),r.row.classList.add("selected"),e._currentTabItem=r),o.classList.add("smart-form-tab"),"breadcrumb"===e.viewMode?o.innerHTML='<div class="smart-form-tab-label"><span class="circle">'+(1+n)+"</span><span>"+r.label+"</span></div>":o.innerHTML='<div class="smart-form-tab-label">'+r.label+"</div>","accordion"===e.viewMode&&(o.innerHTML+='<div class="smart-form-tab-button"><span class="smart-arrow smart-arrow-up"></span></div>'),o.dataField=r.control.name,r.control.tabItem=r,r.control.nextButton=e.nextButton,r.control.backButton=e.backButton,o.onclick=function(){let n=null;if("invalid"!==e._currentTabItem.control.status){for(let t=0;t<a.length;t++){const o=a[t];o.tab.classList.remove("selected"),o.row.classList.remove("selected"),o.tab===this&&(n=o,e._currentTabItem=o,e.showButtons&&(e.backButton.classList.remove("smart-hidden"),e.nextButton.classList.remove("smart-hidden"),0===t?e.backButton.classList.add("smart-hidden"):t===a.length-1&&e.nextButton.classList.add("smart-hidden")))}this.classList.add("selected"),requestAnimationFrame(()=>{n.row.classList.add("selected"),"accordion"===e.viewMode&&t.insertBefore(n.row,this.nextSibling)})}},r.tab=o,r.row.classList.add("smart-form-tab-control"),t.appendChild(o),"accordion"===e.viewMode&&(0===n&&t.appendChild(r.row),r.row.setAttribute("vertical",""))}e.tabs=t,e.contentElement.insertBefore(t,e.contentElement.firstElementChild)}}_refreshButtons(){const e=this;e.buttonsContainer&&e.buttonsContainer.remove(),e.nextButton=document.createElement("smart-button"),e.backButton=document.createElement("smart-button"),e.nextButton.classList.add("primary"),e.backButton.classList.add("flat"),e.nextButton.innerHTML=e.nextButtonLabel,e.backButton.innerHTML=e.backButtonLabel;const t=document.createElement("div");t.classList.add("smart-form-group-buttons","smart-form-row"),t.appendChild(e.backButton),t.appendChild(e.nextButton),e.contentElement.appendChild(t),e.buttonsContainer=t,e.backButton.classList.add("smart-hidden"),e.nextButton.onclick=()=>{const t=e.contentElement.querySelectorAll(".smart-form-tab");for(let e=0;e<t.length;e++){if(t[e].classList.contains("selected")){const n=t[e+1];if(n){n.click();break}}}},e.backButton.onclick=()=>{const t=e.contentElement.querySelectorAll(".smart-form-tab");for(let e=0;e<t.length;e++){if(t[e].classList.contains("selected")){const n=t[e-1];if(n){n.click();break}}}},e.showButtons||(e.backButton.classList.add("smart-hidden"),e.nextButton.classList.add("smart-hidden"))}get labelAlign(){return this._labelAlign}set labelAlign(e){this._labelAlign=e,this.refresh()}get showButtons(){return this._showButtons}set showButtons(e){this._showButtons=e,this.refresh()}get nextButtonLabel(){return this._nextButtonLabel}set nextButtonLabel(e){this._nextButtonLabel=e,this.refresh()}get backButtonLabel(){return this._backButtonLabel}set backButtonLabel(e){this._backButtonLabel=e,this.refresh()}get viewMode(){return this._viewMode}set viewMode(e){this._viewMode=e,this.refresh()}get columnSpan(){return this._columnSpan}set columnSpan(e){const t=this;t._columnSpan=e,t._parent&&t._parent.refresh()}get controlType(){return"group"}get labelOffset(){return this._labelOffset}set labelOffset(e){this._labelOffset=e,this.refresh()}get readonly(){return this._readonly}set readonly(e){this._readonly=e,this.refresh()}get showColonAfterLabel(){return this._showColonAfterLabel}set showColonAfterLabel(e){this._showColonAfterLabel=e,this.refresh()}get labelPosition(){return this._labelPosition}set labelPosition(e){const t=this;t._labelPosition=e;for(let n=0;n<t.controls.$.length;n++)t.controls.$[n].labelPosition=e;t.refresh()}get columns(){return this._columns}set columns(e){this._columns=e,this.refresh()}get label(){return this._label}set label(e){this._label=e,this.refresh()}_group(e,t){return e=this._reduceControls(e),new r(e,t)}_reduceControls(e){const t=this,n={};return Object.keys(e).forEach(a=>{""!==a&&(n[a]=t._createControl(a,e[a]))}),n}_createControl(e,t){const n=this;let a=document.querySelector(`[form-control-name="${e}"]`),l=document.querySelector(`[form-group-name="${e}"]`);if(l&&!(t instanceof r))return this._group(t,{});if(t instanceof o||t instanceof r)return t.name=e,l&&(t.element=l),t instanceof o?t.element.setAttribute("form-control-name",e):t instanceof r&&t.element.setAttribute("form-group-name",e),t;if(Array.isArray(t)){const r=t[0],l=t.length>1?t[1]:{};return l.name=e,a?new o(a,r,l):n._createTemplateControl(l)}return a?(a.name=e,new o(a,"")):n._createTemplateControl(e,t)}_createTemplateControl(e,t={}){const n=document.createElement("div");return e&&n.setAttribute("form-control-name",e),t.custom=!0,"group"===t.controlType?new r(t):new o(n,t.value||"",t)}_setUpControls(){const e=this;this._forEachChild(t=>{t.parent=e,e[t.name]=t})}_forEachChild(e){const t=this,n=Object.keys(t.controls);for(let a=0;a<n.length;a++){const o=n[a];"$"!==o&&e(t.controls[o],o)}}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if("$"!==n&&void 0===e[n]&&""!==e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}get controls(){return this._controls}setValue(e,t={emitEvent:!1}){const n=this;if(null===e)return this._forEachChild(e=>{e.value=null}),void n.updateValueAndValidate(t);n._checkAllValuesPresent(e),Object.keys(e).forEach(a=>{n._throwIfControlMissing(a),n.controls[a].setValue(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),n.updateValueAndValidate(t)}_throwIfControlMissing(e){if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}at(e){return this.controls[e]}patchValue(e,t={emitEvent:!1}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidate(t)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}_allControls(e){let t=!0;return this._forEachChild(n=>{t=t&&n[e]}),t}_anyControls(e){let t=!1;return this._forEachChild(n=>{t=t||n[e]}),t}_updateValue(){this._value=this._reduceValue()}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,a)=>{n=t(n,e,a)}),n}}class l extends a{constructor(e,t){super();const n=this;n.element=document.querySelector(e),n.element||(n.element=document.createElement("div")),n.element.classList.add("smart-form"),n.submitted=!1,n.selector=e,n.rootFormGroup=new r(t),n.rootFormGroup.parent=n,n.rootFormGroup.element&&!n.element.contains(n.rootFormGroup.element)?n.element.appendChild(n.rootFormGroup.element):n.rootFormGroup.element=n.element;let a=[];const o=document.createElement("div");o.classList.add("smart-form-row","smart-validation-summary"),o.id=n.element.id+"_validationSummary",n.summary=o,n.rootFormGroup._forEachChild((e,t)=>{n[t]=e,e.form=n;const o=e=>{const t=e.name;if(e.validationRules&&e.validationRules.length>0)for(let t=0;t<e.validationRules.length;t++){const n=e.validationRules[t],o=n;n.type||(n.type="required"),n.message||(n.message="Invalid Input"),n.input="#"+e.input.id,n.action="keyup, blur, change",a.push(o)}else if(e.required){const n={type:"required",message:`${t} is required`,action:"keyup, blur, change",input:"#"+e.input.id};a.push(n)}};o(e);const l=e=>{e._forEachChild(e=>{e.form=n,o(e),e instanceof r&&l(e)})};e instanceof r&&l(e)}),n.element.appendChild(o),n.validator=new Smart.Utilities.Validator(a,"#"+o.id);const l=n.validator.validate();n.element.addEventListener("submit",e=>{n.async&&(e.preventDefault(),n.submit({async:!0}))}),n.rootFormGroup._onValueAndStatusUpdate=()=>{"invalid"===n.rootFormGroup.status?n._handleValidity(!1):n._handleValidity(!0),n.element.classList.remove("smart-valid"),n.element.classList.remove("smart-invalid"),n.element.classList.add("smart-"+n.rootFormGroup.status)},n._showSummary=void 0===t.showSummary||t.showSummary,n._readonly=t.readonly||!1,n._async=t.async||!1,n._showColonAfterLabel=t.showColonAfterLabel||!1,"manual"===window.Smart.RenderMode&&window.Smart.Render(),n._handleSummaryVisibility(),n._handleValidity(l),t.value&&(n.value=t.value),n._updateStatus(),"complete"!==document.readyState&&window.addEventListener("load",()=>{n._handleSummaryVisibility(),n._handleValidity(l),n._updateStatus()})}_updateStatus(){this.rootFormGroup._forEachChild(e=>{const t=e=>{e._forEachChild(e=>{e instanceof r?t(e):e.updateValueAndValidate()})};e instanceof r?t(e):e.updateValueAndValidate()})}getControl(e){let t=null;return this.rootFormGroup._forEachChild(n=>{const a=n=>{n._forEachChild(n=>{n instanceof r&&a(n),n.name===e&&(t=n)})};n.dataField===e&&(t=n),n instanceof r&&a(n)}),t}_handleValidity(e){const t=this.element.querySelector('[type="submit"]');t&&(t.disabled=!e)}get readonly(){return this._readonly}set readonly(e){this._readonly=e,this.rootFormGroup&&(this.rootFormGroup.readonly=e)}get showColonAfterLabel(){return this._showColonAfterLabel}set showColonAfterLabel(e){this._showColonAfterLabel=e,this.rootFormGroup&&(this.rootFormGroup.showColonAfterLabel=e)}get showSummary(){return this._showSummary}set showSummary(e){this._showSummary=e,this._handleSummaryVisibility()}get async(){return this._async}set async(e){this._async=e}addControl(e){this.rootFormGroup&&this.rootFormGroup.addControl(e)}insertControl(e,t){this.rootFormGroup&&this.rootFormGroup.insertControl(e,t)}removeControl(e){this.rootFormGroup&&this.rootFormGroup.removeControl(e),delete this[e]}_handleSummaryVisibility(){const e=this;e.showSummary?e.summary.classList.remove("smart-hidden"):e.summary.classList.add("smart-hidden")}get status(){return this.rootFormGroup&&this.rootFormGroup._calculateStatus(),this.rootFormGroup.status}set status(e){}get labelPosition(){return this.rootFormGroup?this.rootFormGroup.labelPosition:"top"}set labelPosition(e){this.rootFormGroup&&(this.rootFormGroup.labelPosition=e)}get columns(){return this.rootFormGroup?this.rootFormGroup.columns:1}set columns(e){this.rootFormGroup&&(this.rootFormGroup.columns=e)}get onValueChanges(){return this.rootFormGroup?this.rootFormGroup.onValueChanges:null}set onValueChanges(e){this.rootFormGroup&&(this.rootFormGroup.onValueChanges=e)}get onStatusChanges(){return this.rootFormGroup?this.rootFormGroup.onStatusChanges:null}set onStatusChanges(e){const t=this;this.rootFormGroup&&(this.rootFormGroup.onStatusChanges=()=>{e(t.state)})}get state(){const e={form:this.status},t={};return e.state=t,this.rootFormGroup._forEachChild((n,a)=>{const o=t=>{t._forEachChild((t,n)=>{t instanceof r?o(t):e[n]=t.status})};n instanceof r?o(n):(e[a]=n.status,t[a]={dirty:n.dirty,untouched:n.untouched,disabled:n.disabled})}),e}get control(){return this.rootFormGroup}get value(){return this.control.value}set value(e){const t=this;if(t.control.setValue(e),t.validator){const e=t.validator.validate();t._handleValidity(e)}}patchValue(e,t){this.control.patchValue(e,t)}setValue(e){this.value=e}getValue(){return this.value}validate(){const e=this;if(e.validator){const t=e.validator.validate();e._handleValidity(t)}}submit(e){const t=this;e||(e={},t.element.action&&(e.action=t.element.action),t.element.target&&(e.target=t.element.target),t.element.method&&(e.method=t.element.method));const n=e.action,a=e.target,o=e.method;if(e.async||t.async){const e=new XMLHttpRequest,a=new FormData;t.rootFormGroup._forEachChild((e,t)=>{const n=e=>{e._forEachChild((e,t)=>{e instanceof r?n(e):a.append(t,e.value)})};e instanceof r?n(e):a.append(t,e.value)}),e.addEventListener("load",(function(e){console.log(e.target.responseText)})),e.addEventListener(" error",(function(e){console.log(e.target.responseText)})),e.open("POST",n,!0),e.send(a)}else if("form"===t.element.nodeName)t.element.submit();else{let l="<form id='smart_formToSubmit'";n&&(l+=' action="'+n+'"'),a&&(l+=' target="'+a+'"'),o&&"get"===o.toString().toLowerCase()?l+=' method="GET"':l+=' method="POST"',e.acceptCharset&&(l+=' accept-charset="'+e.acceptCharset+'"'),e.enctype&&(l+=' enctype="'+e.enctype+'"'),e.name&&(l+=' name="'+e.name+'"'),e.enctype&&(l+=' id="'+e.id+'"'),l+=">",t.rootFormGroup._forEachChild((e,t)=>{const n=e=>{e._forEachChild((e,t)=>{e instanceof r?n(e):(l+='<input type="hidden" ',l+=' name="'+t+'"',l+=' value="'+e.value+'"',l+=">")})};e instanceof r?n(e):(l+='<input type="hidden" ',l+=' name="'+t+'"',l+=' value="'+e.value+'"',l+=">")}),l+="</form>";const s=document.createElement("div");s.innerHTML=l,t.element.appendChild(s),s.querySelector("#smart_formToSubmit").submit(),t.element.removeChild(s)}this.submitted=!0}reset(){this.submitted=!1,this.value=null}}const s=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;function i(e){return null===e||0===e.length}class u{static null(e){return null===e.value}static email(e){return i(e.value)||s.test(e.value)?null:{email:!0}}static min(e,t){return e=>{if(i(e.value)||i(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(e,t){return e=>{if(i(e.value)||i(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(e){return i(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static minLength(e,t){return e=>{if(i(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(e,t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(e,t){if(!t)return u.null;let n,a;return"string"==typeof t?(a="","^"!==t.charAt(0)&&(a+="^"),a+=t,"$"!==t.charAt(t.length-1)&&(a+="$"),n=new RegExp(a)):(a=t.toString(),n=t),e=>{if(i(e.value))return null;const t=e.value;return n.test(t)?null:{pattern:{requiredPattern:a,actualValue:t}}}}}Smart.Form=l,Smart.FormControl=o,Smart.FormGroup=r,Smart.FormValidator=u}});